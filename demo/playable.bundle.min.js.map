{"version":3,"file":"playable.bundle.min.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/core/dependency-container/errors/ExtendableError.ts","../../src/core/dependency-container/constants/Lifetime.ts","../../src/core/dependency-container/errors/NotAFunctionError.ts","../../src/core/dependency-container/registrations.ts","../../src/core/dependency-container/errors/ResolutionError.ts","../../src/core/dependency-container/utils/nameValueToObject.ts","../../src/core/dependency-container/createContainer.ts","../../src/core/dependency-container/index.ts","../../src/utils/device-detection.ts","../../src/core/config.ts","../../src/core/player-api-decorator.ts","../../src/core/player-facade.ts","../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","../../src/modules/root-container/utils/interaction-type.ts","../../src/modules/root-container/utils/focus-source.ts","../../src/constants/media-stream.ts","../../src/constants/events/ui.ts","../../src/constants/engine-state.ts","../../src/constants/events/video.ts","../../src/constants/errors.ts","../../src/constants/text-labels.ts","../../src/constants/live-state.ts","../../src/modules/ui/core/htmlToElement.ts","../../node_modules/classnames/index.js","../../src/modules/ui/core/stylable.ts","../../src/modules/ui/core/extendStyles.ts","../../src/modules/ui/core/view.ts","../../node_modules/style-inject/dist/style-inject.es.js","../../src/modules/root-container/root-container.view.ts","../../src/modules/ui/core/element-queries/utils.ts","../../src/modules/ui/core/isElementMatchesSelector.ts","../../src/modules/ui/core/element-queries/getQueriesForElement.ts","../../src/modules/ui/core/element-queries/element-queries.ts","../../src/modules/root-container/root-container.ts","../../src/modules/root-container/utils/focus-within.ts","../../node_modules/eventemitter3/index.js","../../src/modules/event-emitter/event-emitter.ts","../../src/modules/playback-engine/state-engine.ts","../../src/modules/playback-engine/native-events-broadcaster.ts","../../src/modules/playback-engine/utils/adapters-resolver.ts","../../src/modules/playback-engine/utils/detect-stream-type.ts","../../src/modules/playback-engine/adapters-strategy.ts","../../src/modules/playback-engine/playback-engine.ts","../../src/modules/ui/core/theme/utils/hexToRgb.ts","../../src/modules/ui/core/theme/utils/transperentizeColor.ts","../../src/modules/ui/core/theme/utils/camelToKebab.ts","../../src/modules/ui/core/theme/utils/getUniqueId.ts","../../src/modules/ui/core/theme/utils/generateClassNames.ts","../../src/modules/ui/core/theme/style-sheet.ts","../../src/modules/ui/core/theme/theme-service.ts","../../src/modules/text-map/default-texts.ts","../../src/modules/text-map/text-map.ts","../../src/modules/full-screen-manager/desktop.ts","../../src/modules/full-screen-manager/ios.ts","../../src/modules/full-screen-manager/full-screen-manager.ts","../../src/modules/playback-engine/live-state-engine.ts","../../src/utils/keyboard-interceptor.ts","../../src/modules/keyboard-control/keyboard-control.ts","../../src/modules/ui/core/getElementByHook.ts","../../src/modules/ui/core/toggleNodeClass.ts","../../src/modules/ui/debug-panel/debug-panel.view.ts","../../src/modules/ui/debug-panel/syntaxHighlight.ts","../../src/modules/ui/debug-panel/debug-panel.ts","../../src/modules/ui/screen/types.ts","../../src/modules/ui/screen/screen.view.ts","../../src/modules/ui/screen/screen.ts","../../src/modules/ui/interaction-indicator/interaction-indicator.view.ts","../../src/modules/ui/interaction-indicator/interaction-indicator.ts","../../src/modules/ui/overlay/overlay.view.ts","../../src/modules/ui/overlay/overlay.theme.ts","../../src/modules/ui/overlay/overlay.ts","../../src/modules/ui/loader/loader.view.ts","../../src/modules/ui/loader/loader.ts","../../src/modules/ui/main-ui-block/main-ui-block.view.ts","../../src/modules/ui/main-ui-block/main-ui-block.ts","../../src/modules/ui/top-block/top-block.view.ts","../../src/modules/ui/top-block/top-block.ts","../../src/modules/ui/title/title.view.ts","../../src/modules/ui/title/title.theme.ts","../../src/modules/ui/title/title.ts","../../src/modules/ui/live-indicator/live-indicator.view.ts","../../src/modules/ui/live-indicator/live-indicator.ts","../../src/modules/ui/bottom-block/bottom-block.view.ts","../../src/modules/ui/bottom-block/bottom-block.ts","../../src/modules/ui/core/utils/formatTime.ts","../../src/modules/ui/core/tooltip/constants.ts","../../src/modules/ui/core/tooltip/tooltip.ts","../../src/modules/ui/core/tooltip/utils/getTooltipPositionByReferenceNode.ts","../../src/modules/ui/core/tooltip/tooltip-reference.ts","../../src/modules/ui/core/tooltip/tooltip-container.ts","../../src/modules/ui/core/tooltip/tooltip-service.ts","../../src/modules/ui/controls/progress/progress.theme.ts","../../src/modules/ui/controls/progress/progress.view.ts","../../src/modules/ui/controls/progress/utils/getProgressTimeTooltipPosition.ts","../../src/utils/video-data.ts","../../src/modules/ui/controls/progress/progress.ts","../../src/modules/ui/controls/play/play.view.ts","../../src/modules/ui/controls/play/play.theme.ts","../../src/modules/ui/controls/play/play.ts","../../src/modules/ui/controls/time/time.view.ts","../../src/modules/ui/controls/time/time.theme.ts","../../src/modules/ui/controls/time/time.ts","../../src/modules/ui/controls/volume/volume.theme.ts","../../src/modules/ui/controls/volume/volume.view.ts","../../src/modules/ui/controls/volume/volume.ts","../../src/modules/ui/controls/full-screen/full-screen.view.ts","../../src/modules/ui/controls/full-screen/full-screen.theme.ts","../../src/modules/ui/controls/full-screen/full-screen.ts","../../src/modules/ui/controls/logo/logo.view.ts","../../src/modules/ui/controls/logo/logo.ts","../../src/core/default-modules.ts","../../src/utils/environment-detection.ts","../../src/modules/playback-engine/adapters/native.ts","../../src/modules/playback-engine/adapters/default-set.ts","../../src/core/player-factory.ts","../../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export default class ExtendableError extends Error {\r\n  constructor(message: string) {\r\n    super(message);\r\n\r\n    Object.defineProperty(this, 'message', {\r\n      enumerable: false,\r\n      value: message,\r\n    });\r\n\r\n    Object.defineProperty(this, 'name', {\r\n      enumerable: false,\r\n      value: this.constructor.name,\r\n    });\r\n\r\n    Error.captureStackTrace(this, this.constructor);\r\n  }\r\n}\r\n","enum Lifetime {\r\n  Singelton = 'Singelton',\r\n  Transient = 'Transient',\r\n  Scoped = 'Scoped',\r\n}\r\n\r\nexport default Lifetime;\r\n","import ExtendableError from './ExtendableError';\r\n\r\nexport default class NotAFunctionError extends ExtendableError {\r\n  constructor(functionName: string, expectedType: string, givenType: string) {\r\n    super(\r\n      `The function ${functionName} expected a ${expectedType}, ${givenType} given.`,\r\n    );\r\n  }\r\n}\r\n","import { __assign } from 'tslib';\r\n\r\nimport NotAFunctionError from './errors/NotAFunctionError';\r\n\r\nimport Lifetime from './constants/Lifetime';\r\nimport { IOptions } from './types';\r\n\r\nimport { Container } from './createContainer';\r\n\r\nexport const PROPERTY_FOR_DEPENDENCIES = 'dependencies';\r\n\r\nexport const makeFluidInterface = (obj: IOptions) => {\r\n  const setLifetime = (value: Lifetime) => {\r\n    obj.lifetime = value;\r\n    return obj;\r\n  };\r\n\r\n  return {\r\n    setLifetime,\r\n    transient: () => setLifetime(Lifetime.Transient),\r\n    scoped: () => setLifetime(Lifetime.Scoped),\r\n    singleton: () => setLifetime(Lifetime.Singelton),\r\n  };\r\n};\r\n\r\nexport const asValue = (value: any): any => {\r\n  const resolve = () => value;\r\n\r\n  return {\r\n    resolve,\r\n    lifetime: Lifetime.Transient,\r\n  };\r\n};\r\n\r\nexport const asFunction: any = (fn: Function, options?: IOptions): any => {\r\n  if (typeof fn !== 'function') {\r\n    throw new NotAFunctionError('asFunction', 'function', typeof fn);\r\n  }\r\n\r\n  const defaults = {\r\n    lifetime: Lifetime.Transient,\r\n  };\r\n\r\n  options = __assign({}, defaults, options);\r\n\r\n  const resolve = generateResolve(fn);\r\n  const result = {\r\n    resolve,\r\n    lifetime: options.lifetime,\r\n  };\r\n  result.resolve = resolve.bind(result);\r\n  __assign(result, makeFluidInterface(result));\r\n\r\n  return result;\r\n};\r\n\r\nexport const asClass: any = (\r\n  Type: FunctionConstructor,\r\n  options?: IOptions,\r\n): any => {\r\n  if (typeof Type !== 'function') {\r\n    throw new NotAFunctionError('asClass', 'class', typeof Type);\r\n  }\r\n\r\n  const defaults = {\r\n    lifetime: Lifetime.Transient,\r\n  };\r\n\r\n  options = __assign({}, defaults, options);\r\n\r\n  // A function to handle object construction for us, as to make the generateResolve more reusable\r\n  const newClass = (...args: any[]) => new Type(...args);\r\n\r\n  const resolve = generateResolve(newClass, Type);\r\n  const result = {\r\n    resolve,\r\n    lifetime: options.lifetime,\r\n  };\r\n  result.resolve = resolve.bind(result);\r\n  __assign(result, makeFluidInterface(result));\r\n\r\n  return result;\r\n};\r\n\r\nfunction generateResolve(fn: Function, dependencyParseTarget?: any): any {\r\n  // If the function used for dependency parsing is falsy, use the supplied function\r\n  if (!dependencyParseTarget) {\r\n    dependencyParseTarget = fn;\r\n  }\r\n  // Try to resolve the dependencies\r\n  const dependencies = dependencyParseTarget[PROPERTY_FOR_DEPENDENCIES] || [];\r\n\r\n  // Use a regular function instead of an arrow function to facilitate binding to the registration.\r\n  return function resolve(container: Container) {\r\n    if (dependencies.length > 0) {\r\n      const wrapper: {} = dependencies.reduce(\r\n        (wrapper: any, dependency: string) => {\r\n          wrapper[dependency] = container.resolve(dependency);\r\n          return wrapper;\r\n        },\r\n        {},\r\n      );\r\n\r\n      return fn(wrapper, container);\r\n    }\r\n    return fn(container);\r\n  };\r\n}\r\n\r\nexport default {\r\n  asValue,\r\n  asFunction,\r\n  asClass,\r\n};\r\n","import ExtendableError from './ExtendableError';\r\n\r\nconst createErrorMessage = (\r\n  name: string,\r\n  resolutionStack: string[],\r\n  message?: string,\r\n) => {\r\n  resolutionStack = resolutionStack.slice();\r\n  resolutionStack.push(name);\r\n  const resolutionPathString = resolutionStack.join(' -> ');\r\n  let msg = `Could not resolve '${name}'.`;\r\n  if (message) {\r\n    msg += ` ${message} \\n\\n Resolution path: ${resolutionPathString}`;\r\n  }\r\n\r\n  return msg;\r\n};\r\n\r\nexport default class ResolutionError extends ExtendableError {\r\n  constructor(name: string, resolutionStack: string[], message?: string) {\r\n    super(createErrorMessage(name, resolutionStack, message));\r\n  }\r\n}\r\n","import { __assign } from 'tslib';\r\n\r\nexport default function(name: Object | string, value: any): Object {\r\n  if (typeof name !== 'object') {\r\n    return __assign({ [name]: value });\r\n  }\r\n\r\n  return name;\r\n}\r\n","import { __assign } from 'tslib';\r\n\r\nimport { asClass, asFunction, asValue } from './registrations';\r\nimport ResolutionError from './errors/ResolutionError';\r\nimport nameValueToObject from './utils/nameValueToObject';\r\nimport Lifetime from './constants/Lifetime';\r\nimport { IOptions } from './types';\r\n\r\nconst FAMILY_TREE = '__familyTree__';\r\n\r\nexport class Container {\r\n  private _registrations: any = {};\r\n  private _resolutionStack: string[] = [];\r\n  private _parentContainer: Container;\r\n\r\n  options: IOptions;\r\n  cache: any;\r\n  [FAMILY_TREE]: Array<Container>;\r\n\r\n  constructor(options?: IOptions, _parentContainer?: Container) {\r\n    this.options = __assign({}, options);\r\n    this._parentContainer = _parentContainer || null;\r\n    this[FAMILY_TREE] = this._parentContainer\r\n      ? [this].concat(this._parentContainer[FAMILY_TREE] as any)\r\n      : [this];\r\n    this.cache = {};\r\n  }\r\n\r\n  get registrations(): any {\r\n    return __assign(\r\n      {},\r\n      this._parentContainer && this._parentContainer.registrations,\r\n      this._registrations,\r\n    );\r\n  }\r\n\r\n  private _registerAs(\r\n    fn: Function,\r\n    verbatimValue: boolean,\r\n    name: Object | string,\r\n    value?: any,\r\n    options?: IOptions,\r\n  ) {\r\n    const registrations: any = nameValueToObject(name, value);\r\n\r\n    Object.keys(registrations).forEach(key => {\r\n      let valueToRegister = registrations[key];\r\n\r\n      // If we have options, copy them over.\r\n      options = __assign({}, options);\r\n\r\n      /* ignore coverage */\r\n      if (!verbatimValue && Array.isArray(valueToRegister)) {\r\n        // The ('name', [value, options]) style\r\n        options = __assign({}, options, valueToRegister[1]);\r\n        valueToRegister = valueToRegister[0];\r\n      }\r\n\r\n      this.register(key, fn(valueToRegister, options));\r\n    });\r\n\r\n    // Chaining\r\n    return this;\r\n  }\r\n\r\n  createScope() {\r\n    return new Container(this.options, this);\r\n  }\r\n\r\n  register(name: Object | string, registration?: any): Container {\r\n    const obj: any = nameValueToObject(name, registration);\r\n    Object.keys(obj).forEach(key => {\r\n      this._registrations[key] = obj[key];\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  registerClass(\r\n    name: Object | string,\r\n    value?: any,\r\n    options?: IOptions,\r\n  ): Container {\r\n    return this._registerAs(asClass, false, name, value, options);\r\n  }\r\n\r\n  registerFunction(\r\n    name: Object | string,\r\n    value?: any,\r\n    options?: IOptions,\r\n  ): Container {\r\n    return this._registerAs(asFunction, false, name, value, options);\r\n  }\r\n\r\n  registerValue(\r\n    name: Object | string,\r\n    value?: any,\r\n    options?: IOptions,\r\n  ): Container {\r\n    return this._registerAs(asValue, true, name, value, options);\r\n  }\r\n\r\n  resolve(name: string) {\r\n    // We need a reference to the root container,\r\n    // so we can retrieve and store singletons.\r\n    const root: Container = this[FAMILY_TREE][this[FAMILY_TREE].length - 1];\r\n\r\n    try {\r\n      // Grab the registration by name.\r\n      const registration = this.registrations[name];\r\n\r\n      if (this._resolutionStack.indexOf(name) > -1) {\r\n        throw new ResolutionError(\r\n          name,\r\n          this._resolutionStack,\r\n          'Cyclic dependencies detected.',\r\n        );\r\n      }\r\n\r\n      if (!registration) {\r\n        throw new ResolutionError(name, this._resolutionStack);\r\n      }\r\n\r\n      // Pushes the currently-resolving module name onto the stack\r\n      this._resolutionStack.push(name);\r\n\r\n      // Do the thing\r\n      let cached;\r\n      let resolved;\r\n\r\n      switch (registration.lifetime) {\r\n        case Lifetime.Transient:\r\n          // Transient lifetime means resolve every time.\r\n          resolved = registration.resolve(this);\r\n          break;\r\n        case Lifetime.Singelton:\r\n          // Singleton lifetime means cache at all times, regardless of scope.\r\n          cached = root.cache[name];\r\n          if (cached === undefined) {\r\n            resolved = registration.resolve(this);\r\n            root.cache[name] = resolved;\r\n          } else {\r\n            resolved = cached;\r\n          }\r\n          break;\r\n        case Lifetime.Scoped:\r\n          // Scoped lifetime means that the container\r\n          // that resolves the registration also caches it.\r\n          // When a registration is not found, we travel up\r\n          // the family tree until we find one that is cached.\r\n\r\n          // Note: The first element in the family tree is this container.\r\n          for (const _containerFromFamiltyTree of this[FAMILY_TREE]) {\r\n            cached = _containerFromFamiltyTree.cache[name];\r\n            if (cached !== undefined) {\r\n              // We found one!\r\n              resolved = cached;\r\n              break;\r\n            }\r\n          }\r\n\r\n          // If we still have not found one, we need to resolve and cache it.\r\n          if (cached === undefined) {\r\n            resolved = registration.resolve(this);\r\n            this.cache[name] = resolved;\r\n          }\r\n          break;\r\n        default:\r\n          throw new ResolutionError(\r\n            name,\r\n            this._resolutionStack,\r\n            `Unknown lifetime \"${registration.lifetime}\"`,\r\n          );\r\n      }\r\n      // Pop it from the stack again, ready for the next resolution\r\n      this._resolutionStack.pop();\r\n      return resolved;\r\n    } catch (err) {\r\n      // When we get an error we need to reset the stack.\r\n      this._resolutionStack = [];\r\n      throw err;\r\n    }\r\n  }\r\n}\r\n\r\nexport default function createContainer(\r\n  options?: IOptions,\r\n  __parentContainer?: Container,\r\n): Container {\r\n  return new Container(options, __parentContainer);\r\n}\r\n","import createContainer from './createContainer';\r\nimport Lifetime from './constants/Lifetime';\r\nimport registrations from './registrations';\r\n\r\nexport default {\r\n  createContainer,\r\n  Lifetime,\r\n  ...registrations,\r\n};\r\n","declare const window: {\r\n  navigator: any;\r\n  MSStream: any;\r\n};\r\n\r\nconst IPHONE_PATTERN = /iphone/i;\r\nconst IPOD_PATTERN = /ipod/i;\r\nconst IPAD_PATTERN = /ipad/i;\r\nconst ANDROID_PATTERN = /(android)/i;\r\nconst SAFARI_PATTERN = /^((?!chrome|android).)*safari/i;\r\nconst DESKTOP_SAFARI_PATTERN = /^((?!chrome|android|iphone|ipod|ipad).)*safari/i;\r\n\r\n// There is some iPhone/iPad/iPod in Windows Phone...\r\n// https://msdn.microsoft.com/en-us/library/hh869301(v=vs.85).aspx\r\nconst isIE = () => !!window.MSStream;\r\n\r\nconst getUserAgent = () => window.navigator && window.navigator.userAgent;\r\n\r\nconst isIPhone = () => !isIE() && IPHONE_PATTERN.test(getUserAgent());\r\n\r\nconst isIPod = () => !isIE() && IPOD_PATTERN.test(getUserAgent());\r\n\r\nconst isIPad = () => !isIE() && IPAD_PATTERN.test(getUserAgent());\r\n\r\nconst isIOS = () => isIPhone() || isIPod() || isIPad();\r\n\r\nconst isAndroid = () => ANDROID_PATTERN.test(getUserAgent());\r\n\r\nconst isDesktopSafari = () => DESKTOP_SAFARI_PATTERN.test(getUserAgent());\r\n\r\nconst isSafari = () => SAFARI_PATTERN.test(getUserAgent());\r\n\r\nexport {\r\n  isIPhone,\r\n  isIPod,\r\n  isIPad,\r\n  isIOS,\r\n  isAndroid,\r\n  isDesktopSafari,\r\n  isSafari,\r\n};\r\n","import { isIOS, isAndroid } from '../utils/device-detection';\n\nimport { IFullScreenConfig } from '../modules/full-screen-manager/types';\nimport { ILogoConfig } from '../modules/ui/controls/logo/types';\nimport { IOverlayConfig } from '../modules/ui/overlay/types';\nimport { IScreenConfig } from '../modules/ui/screen/types';\nimport { IMainUIBlockConfig } from '../modules/ui/main-ui-block/types';\nimport {\n  PreloadTypes,\n  MediaSource,\n  CrossOriginValue,\n} from '../modules/playback-engine/types';\n\nexport interface IPlayerConfig {\n  src?: MediaSource;\n\n  size?: Playable.IPlayerSize;\n\n  videoElement?: HTMLVideoElement;\n\n  preload?: PreloadTypes;\n  autoPlay?: boolean;\n  loop?: boolean;\n  muted?: boolean;\n  volume?: number;\n  playInline?: boolean;\n  crossOrigin?: CrossOriginValue;\n\n  title?: boolean | Playable.ITitleConfig;\n  loader?: boolean;\n  screen?: IScreenConfig;\n  controls?: boolean | IMainUIBlockConfig;\n  overlay?: boolean | IOverlayConfig;\n  fullScreen?: boolean | IFullScreenConfig;\n  logo?: boolean | ILogoConfig;\n\n  texts?: Playable.ITextMapConfig;\n\n  showInteractionIndicator?: boolean;\n  fillAllSpace?: boolean;\n  disableControlWithKeyboard?: boolean;\n  [key: string]: any;\n}\n\nconst convertUIConfigForIOS = (params: IPlayerConfig): IPlayerConfig => ({\n  ...params,\n  showInteractionIndicator: false,\n  screen: {\n    ...params.screen,\n    disableClickProcessing: true,\n    nativeControls: true,\n  },\n  title: false,\n  loader: false,\n  controls: false,\n});\n\nconst convertUIConfigForAndroid = (params: IPlayerConfig): IPlayerConfig => ({\n  ...params,\n  screen: {\n    ...params.screen,\n    disableClickProcessing: true,\n  },\n});\n\nconst convertToDeviceRelatedConfig = (params: IPlayerConfig): IPlayerConfig => {\n  if (isIOS()) {\n    return convertUIConfigForIOS(params);\n  }\n\n  if (isAndroid()) {\n    return convertUIConfigForAndroid(params);\n  }\n\n  return params;\n};\n\nexport default convertToDeviceRelatedConfig;\n","export const PLAYER_API_PROPERTY = '___playerAPI';\r\n\r\nconst checkDescriptorsOnEquality = (\r\n  desc1: PropertyDescriptor,\r\n  desc2: PropertyDescriptor,\r\n) =>\r\n  desc1.value === desc2.value &&\r\n  desc1.get === desc2.get &&\r\n  desc1.set === desc2.set;\r\n\r\nconst playerAPI = (name?: string) => (\r\n  target: any,\r\n  property: string,\r\n  descriptor: PropertyDescriptor,\r\n) => {\r\n  const methodName = name || property;\r\n\r\n  if (!target[PLAYER_API_PROPERTY]) {\r\n    target[PLAYER_API_PROPERTY] = {};\r\n  }\r\n\r\n  if (target[PLAYER_API_PROPERTY][methodName]) {\r\n    if (\r\n      !checkDescriptorsOnEquality(\r\n        target[PLAYER_API_PROPERTY][methodName],\r\n        descriptor,\r\n      )\r\n    ) {\r\n      throw new Error(\r\n        `Method \"${methodName}\" for public API in ${\r\n          target.constructor.name\r\n        } is already defined`,\r\n      );\r\n    }\r\n  }\r\n\r\n  target[PLAYER_API_PROPERTY][methodName] = descriptor;\r\n};\r\n\r\nexport default playerAPI;\r\n","import { Container } from './dependency-container/createContainer';\nimport convertToDeviceRelatedConfig, { IPlayerConfig } from './config';\nimport { PLAYER_API_PROPERTY } from '../core/player-api-decorator';\n\nexport default class Player implements Playable.IPlayer {\n  //@ts-ignore\n  private _config: IPlayerConfig;\n  private _defaultModules: { [id: string]: any };\n  private _additionalModules: { [id: string]: any };\n  private _destroyed: boolean;\n\n  constructor(\n    params: IPlayerConfig,\n    scope: Container,\n    defaultModulesNames: string[] = [],\n    additionalModuleNames: string[] = [],\n    themeConfig?: Playable.IThemeConfig,\n  ) {\n    scope.registerValue({\n      config: convertToDeviceRelatedConfig(params),\n    });\n\n    scope.registerValue({\n      themeConfig,\n    });\n\n    this._config = scope.resolve('config');\n\n    this._resolveAdditionalModules(scope, additionalModuleNames);\n    this._resolveDefaultModules(scope, defaultModulesNames);\n  }\n\n  /*\n    Separation for default and additional modules is needed\n    for future implementation of public methods of resolved modules and\n    could be abolished in future\n  */\n\n  private _resolveDefaultModules(scope: Container, modulesNames: string[]) {\n    this._defaultModules = modulesNames.reduce(\n      (modules: { [id: string]: any }, moduleName: string) => {\n        if (this._additionalModules[moduleName]) {\n          return modules;\n        }\n\n        const resolvedModule = scope.resolve(moduleName);\n\n        this._addPlayerAPIFromModule(resolvedModule);\n\n        modules[moduleName] = resolvedModule;\n        return modules;\n      },\n      {},\n    );\n  }\n\n  private _resolveAdditionalModules(scope: Container, modulesNames: string[]) {\n    this._additionalModules = modulesNames.reduce(\n      (modules: { [id: string]: any }, moduleName: string) => {\n        const resolvedModule = scope.resolve(moduleName);\n\n        this._addPlayerAPIFromModule(resolvedModule);\n\n        modules[moduleName] = resolvedModule;\n        return modules;\n      },\n      {},\n    );\n  }\n\n  private _getWrappedCallToModuleFunction(module: any, fn: Function) {\n    return (...args: any[]) => {\n      if (this._destroyed) {\n        throw new Error('Player instance is destroyed');\n      }\n\n      return fn.apply(module, args);\n    };\n  }\n\n  private _getPlayerAPIMethodDescriptor(\n    module: any,\n    descriptor: PropertyDescriptor,\n  ) {\n    const playerMethodDescriptor: any = {\n      enumerable: true,\n      configurable: true,\n    };\n\n    const { get, set, value } = descriptor;\n\n    if (get) {\n      playerMethodDescriptor.get = this._getWrappedCallToModuleFunction(\n        module,\n        get,\n      );\n    }\n\n    if (set) {\n      playerMethodDescriptor.set = this._getWrappedCallToModuleFunction(\n        module,\n        set,\n      );\n    }\n\n    if (value) {\n      playerMethodDescriptor.value = this._getWrappedCallToModuleFunction(\n        module,\n        value,\n      );\n    }\n\n    return playerMethodDescriptor;\n  }\n\n  private _addPlayerAPIFromModule(module: any) {\n    if (module[PLAYER_API_PROPERTY]) {\n      Object.keys(module[PLAYER_API_PROPERTY]).forEach(apiKey => {\n        if ((this as any)[apiKey]) {\n          throw new Error(\n            `API method ${apiKey} is already defined in Player facade`,\n          );\n        }\n\n        Object.defineProperty(\n          this,\n          apiKey,\n          this._getPlayerAPIMethodDescriptor(\n            module,\n            module[PLAYER_API_PROPERTY][apiKey],\n          ),\n        );\n      });\n    }\n  }\n\n  private _clearPlayerAPIForModule(module: any) {\n    if (module[PLAYER_API_PROPERTY]) {\n      Object.keys(module[PLAYER_API_PROPERTY]).forEach(apiKey => {\n        delete (this as any)[apiKey];\n      });\n    }\n  }\n\n  destroy() {\n    Object.keys(this._defaultModules).forEach(moduleName => {\n      const module = this._defaultModules[moduleName];\n      this._clearPlayerAPIForModule(module);\n      module.destroy();\n    });\n\n    Object.keys(this._additionalModules).forEach(moduleName => {\n      const module = this._additionalModules[moduleName];\n      this._clearPlayerAPIForModule(module);\n      if (module.destroy) {\n        module.destroy();\n      }\n    });\n\n    this._defaultModules = null;\n    this._additionalModules = null;\n    this._config = null;\n\n    this._destroyed = true;\n  }\n}\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\n/* eslint-disable require-jsdoc, valid-jsdoc */\nvar MapShim = (function () {\n    if (typeof Map !== 'undefined') {\n        return Map;\n    }\n\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\n    function getIndex(arr, key) {\n        var result = -1;\n\n        arr.some(function (entry, index) {\n            if (entry[0] === key) {\n                result = index;\n\n                return true;\n            }\n\n            return false;\n        });\n\n        return result;\n    }\n\n    return (function () {\n        function anonymous() {\n            this.__entries__ = [];\n        }\n\n        var prototypeAccessors = { size: { configurable: true } };\n\n        /**\r\n         * @returns {boolean}\r\n         */\n        prototypeAccessors.size.get = function () {\n            return this.__entries__.length;\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\n        anonymous.prototype.get = function (key) {\n            var index = getIndex(this.__entries__, key);\n            var entry = this.__entries__[index];\n\n            return entry && entry[1];\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.set = function (key, value) {\n            var index = getIndex(this.__entries__, key);\n\n            if (~index) {\n                this.__entries__[index][1] = value;\n            } else {\n                this.__entries__.push([key, value]);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.delete = function (key) {\n            var entries = this.__entries__;\n            var index = getIndex(entries, key);\n\n            if (~index) {\n                entries.splice(index, 1);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.has = function (key) {\n            return !!~getIndex(this.__entries__, key);\n        };\n\n        /**\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.clear = function () {\n            this.__entries__.splice(0);\n        };\n\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.forEach = function (callback, ctx) {\n            var this$1 = this;\n            if ( ctx === void 0 ) ctx = null;\n\n            for (var i = 0, list = this$1.__entries__; i < list.length; i += 1) {\n                var entry = list[i];\n\n                callback.call(ctx, entry[1], entry[0]);\n            }\n        };\n\n        Object.defineProperties( anonymous.prototype, prototypeAccessors );\n\n        return anonymous;\n    }());\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\nvar global$1 = (function () {\n    if (typeof global !== 'undefined' && global.Math === Math) {\n        return global;\n    }\n\n    if (typeof self !== 'undefined' && self.Math === Math) {\n        return self;\n    }\n\n    if (typeof window !== 'undefined' && window.Math === Math) {\n        return window;\n    }\n\n    // eslint-disable-next-line no-new-func\n    return Function('return this')();\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\nvar requestAnimationFrame$1 = (function () {\n    if (typeof requestAnimationFrame === 'function') {\n        // It's required to use a bounded function because IE sometimes throws\n        // an \"Invalid calling object\" error if rAF is invoked without the global\n        // object on the left hand side.\n        return requestAnimationFrame.bind(global$1);\n    }\n\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\n})();\n\n// Defines minimum timeout before adding a trailing call.\nvar trailingTimeout = 2;\n\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\nvar throttle = function (callback, delay) {\n    var leadingCall = false,\n        trailingCall = false,\n        lastCallTime = 0;\n\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\n    function resolvePending() {\n        if (leadingCall) {\n            leadingCall = false;\n\n            callback();\n        }\n\n        if (trailingCall) {\n            proxy();\n        }\n    }\n\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\n    function timeoutCallback() {\n        requestAnimationFrame$1(resolvePending);\n    }\n\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\n    function proxy() {\n        var timeStamp = Date.now();\n\n        if (leadingCall) {\n            // Reject immediately following calls.\n            if (timeStamp - lastCallTime < trailingTimeout) {\n                return;\n            }\n\n            // Schedule new call to be in invoked when the pending one is resolved.\n            // This is important for \"transitions\" which never actually start\n            // immediately so there is a chance that we might miss one if change\n            // happens amids the pending invocation.\n            trailingCall = true;\n        } else {\n            leadingCall = true;\n            trailingCall = false;\n\n            setTimeout(timeoutCallback, delay);\n        }\n\n        lastCallTime = timeStamp;\n    }\n\n    return proxy;\n};\n\n// Minimum delay before invoking the update of observers.\nvar REFRESH_DELAY = 20;\n\n// A list of substrings of CSS properties used to find transition events that\n// might affect dimensions of observed elements.\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\n\n// Check if MutationObserver is available.\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\n\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\nvar ResizeObserverController = function() {\n    this.connected_ = false;\n    this.mutationEventsAdded_ = false;\n    this.mutationsObserver_ = null;\n    this.observers_ = [];\n\n    this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\n    this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\n};\n\n/**\r\n * Adds observer to observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be added.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Holds reference to the controller's instance.\r\n *\r\n * @private {ResizeObserverController}\r\n */\n\n\n/**\r\n * Keeps reference to the instance of MutationObserver.\r\n *\r\n * @private {MutationObserver}\r\n */\n\n/**\r\n * Indicates whether DOM listeners have been added.\r\n *\r\n * @private {boolean}\r\n */\nResizeObserverController.prototype.addObserver = function (observer) {\n    if (!~this.observers_.indexOf(observer)) {\n        this.observers_.push(observer);\n    }\n\n    // Add listeners if they haven't been added yet.\n    if (!this.connected_) {\n        this.connect_();\n    }\n};\n\n/**\r\n * Removes observer from observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.removeObserver = function (observer) {\n    var observers = this.observers_;\n    var index = observers.indexOf(observer);\n\n    // Remove observer if it's present in registry.\n    if (~index) {\n        observers.splice(index, 1);\n    }\n\n    // Remove listeners if controller has no connected observers.\n    if (!observers.length && this.connected_) {\n        this.disconnect_();\n    }\n};\n\n/**\r\n * Invokes the update of observers. It will continue running updates insofar\r\n * it detects changes.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.refresh = function () {\n    var changesDetected = this.updateObservers_();\n\n    // Continue running updates if changes have been detected as there might\n    // be future ones caused by CSS transitions.\n    if (changesDetected) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Updates every observer from observers list and notifies them of queued\r\n * entries.\r\n *\r\n * @private\r\n * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n *  dimensions of it's elements.\r\n */\nResizeObserverController.prototype.updateObservers_ = function () {\n    // Collect observers that have active observations.\n    var activeObservers = this.observers_.filter(function (observer) {\n        return observer.gatherActive(), observer.hasActive();\n    });\n\n    // Deliver notifications in a separate cycle in order to avoid any\n    // collisions between observers, e.g. when multiple instances of\n    // ResizeObserver are tracking the same element and the callback of one\n    // of them changes content dimensions of the observed target. Sometimes\n    // this may result in notifications being blocked for the rest of observers.\n    activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\n\n    return activeObservers.length > 0;\n};\n\n/**\r\n * Initializes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.connect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already added.\n    if (!isBrowser || this.connected_) {\n        return;\n    }\n\n    // Subscription to the \"Transitionend\" event is used as a workaround for\n    // delayed transitions. This way it's possible to capture at least the\n    // final state of an element.\n    document.addEventListener('transitionend', this.onTransitionEnd_);\n\n    window.addEventListener('resize', this.refresh);\n\n    if (mutationObserverSupported) {\n        this.mutationsObserver_ = new MutationObserver(this.refresh);\n\n        this.mutationsObserver_.observe(document, {\n            attributes: true,\n            childList: true,\n            characterData: true,\n            subtree: true\n        });\n    } else {\n        document.addEventListener('DOMSubtreeModified', this.refresh);\n\n        this.mutationEventsAdded_ = true;\n    }\n\n    this.connected_ = true;\n};\n\n/**\r\n * Removes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.disconnect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already removed.\n    if (!isBrowser || !this.connected_) {\n        return;\n    }\n\n    document.removeEventListener('transitionend', this.onTransitionEnd_);\n    window.removeEventListener('resize', this.refresh);\n\n    if (this.mutationsObserver_) {\n        this.mutationsObserver_.disconnect();\n    }\n\n    if (this.mutationEventsAdded_) {\n        document.removeEventListener('DOMSubtreeModified', this.refresh);\n    }\n\n    this.mutationsObserver_ = null;\n    this.mutationEventsAdded_ = false;\n    this.connected_ = false;\n};\n\n/**\r\n * \"Transitionend\" event handler.\r\n *\r\n * @private\r\n * @param {TransitionEvent} event\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.onTransitionEnd_ = function (ref) {\n        var propertyName = ref.propertyName; if ( propertyName === void 0 ) propertyName = '';\n\n    // Detect whether transition may affect dimensions of an element.\n    var isReflowProperty = transitionKeys.some(function (key) {\n        return !!~propertyName.indexOf(key);\n    });\n\n    if (isReflowProperty) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Returns instance of the ResizeObserverController.\r\n *\r\n * @returns {ResizeObserverController}\r\n */\nResizeObserverController.getInstance = function () {\n    if (!this.instance_) {\n        this.instance_ = new ResizeObserverController();\n    }\n\n    return this.instance_;\n};\n\nResizeObserverController.instance_ = null;\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\nvar defineConfigurable = (function (target, props) {\n    for (var i = 0, list = Object.keys(props); i < list.length; i += 1) {\n        var key = list[i];\n\n        Object.defineProperty(target, key, {\n            value: props[key],\n            enumerable: false,\n            writable: false,\n            configurable: true\n        });\n    }\n\n    return target;\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\nvar getWindowOf = (function (target) {\n    // Assume that the element is an instance of Node, which means that it\n    // has the \"ownerDocument\" property from which we can retrieve a\n    // corresponding global object.\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\n\n    // Return the local global object if it's not possible extract one from\n    // provided element.\n    return ownerGlobal || global$1;\n});\n\n// Placeholder of an empty content rectangle.\nvar emptyRect = createRectInit(0, 0, 0, 0);\n\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\nfunction toFloat(value) {\n    return parseFloat(value) || 0;\n}\n\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\nfunction getBordersSize(styles) {\n    var positions = [], len = arguments.length - 1;\n    while ( len-- > 0 ) positions[ len ] = arguments[ len + 1 ];\n\n    return positions.reduce(function (size, position) {\n        var value = styles['border-' + position + '-width'];\n\n        return size + toFloat(value);\n    }, 0);\n}\n\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\nfunction getPaddings(styles) {\n    var positions = ['top', 'right', 'bottom', 'left'];\n    var paddings = {};\n\n    for (var i = 0, list = positions; i < list.length; i += 1) {\n        var position = list[i];\n\n        var value = styles['padding-' + position];\n\n        paddings[position] = toFloat(value);\n    }\n\n    return paddings;\n}\n\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getSVGContentRect(target) {\n    var bbox = target.getBBox();\n\n    return createRectInit(0, 0, bbox.width, bbox.height);\n}\n\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\nfunction getHTMLElementContentRect(target) {\n    // Client width & height properties can't be\n    // used exclusively as they provide rounded values.\n    var clientWidth = target.clientWidth;\n    var clientHeight = target.clientHeight;\n\n    // By this condition we can catch all non-replaced inline, hidden and\n    // detached elements. Though elements with width & height properties less\n    // than 0.5 will be discarded as well.\n    //\n    // Without it we would need to implement separate methods for each of\n    // those cases and it's not possible to perform a precise and performance\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\n    // gives wrong results for elements with width & height less than 0.5.\n    if (!clientWidth && !clientHeight) {\n        return emptyRect;\n    }\n\n    var styles = getWindowOf(target).getComputedStyle(target);\n    var paddings = getPaddings(styles);\n    var horizPad = paddings.left + paddings.right;\n    var vertPad = paddings.top + paddings.bottom;\n\n    // Computed styles of width & height are being used because they are the\n    // only dimensions available to JS that contain non-rounded values. It could\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\n    var width = toFloat(styles.width),\n        height = toFloat(styles.height);\n\n    // Width & height include paddings and borders when the 'border-box' box\n    // model is applied (except for IE).\n    if (styles.boxSizing === 'border-box') {\n        // Following conditions are required to handle Internet Explorer which\n        // doesn't include paddings and borders to computed CSS dimensions.\n        //\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\n        // properties then it's either IE, and thus we don't need to subtract\n        // anything, or an element merely doesn't have paddings/borders styles.\n        if (Math.round(width + horizPad) !== clientWidth) {\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\n        }\n\n        if (Math.round(height + vertPad) !== clientHeight) {\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\n        }\n    }\n\n    // Following steps can't be applied to the document's root element as its\n    // client[Width/Height] properties represent viewport area of the window.\n    // Besides, it's as well not necessary as the <html> itself neither has\n    // rendered scroll bars nor it can be clipped.\n    if (!isDocumentElement(target)) {\n        // In some browsers (only in Firefox, actually) CSS width & height\n        // include scroll bars size which can be removed at this step as scroll\n        // bars are the only difference between rounded dimensions + paddings\n        // and \"client\" properties, though that is not always true in Chrome.\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\n\n        // Chrome has a rather weird rounding of \"client\" properties.\n        // E.g. for an element with content width of 314.2px it sometimes gives\n        // the client width of 315px and for the width of 314.7px it may give\n        // 314px. And it doesn't happen all the time. So just ignore this delta\n        // as a non-relevant.\n        if (Math.abs(vertScrollbar) !== 1) {\n            width -= vertScrollbar;\n        }\n\n        if (Math.abs(horizScrollbar) !== 1) {\n            height -= horizScrollbar;\n        }\n    }\n\n    return createRectInit(paddings.left, paddings.top, width, height);\n}\n\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nvar isSVGGraphicsElement = (function () {\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\n    // interface.\n    if (typeof SVGGraphicsElement !== 'undefined') {\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\n    }\n\n    // If it's so, then check that element is at least an instance of the\n    // SVGElement and that it has the \"getBBox\" method.\n    // eslint-disable-next-line no-extra-parens\n    return function (target) { return target instanceof getWindowOf(target).SVGElement && typeof target.getBBox === 'function'; };\n})();\n\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nfunction isDocumentElement(target) {\n    return target === getWindowOf(target).document.documentElement;\n}\n\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getContentRect(target) {\n    if (!isBrowser) {\n        return emptyRect;\n    }\n\n    if (isSVGGraphicsElement(target)) {\n        return getSVGContentRect(target);\n    }\n\n    return getHTMLElementContentRect(target);\n}\n\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\nfunction createReadOnlyRect(ref) {\n    var x = ref.x;\n    var y = ref.y;\n    var width = ref.width;\n    var height = ref.height;\n\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\n    var rect = Object.create(Constr.prototype);\n\n    // Rectangle's properties are not writable and non-enumerable.\n    defineConfigurable(rect, {\n        x: x, y: y, width: width, height: height,\n        top: y,\n        right: x + width,\n        bottom: height + y,\n        left: x\n    });\n\n    return rect;\n}\n\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\nfunction createRectInit(x, y, width, height) {\n    return { x: x, y: y, width: width, height: height };\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\nvar ResizeObservation = function(target) {\n    this.broadcastWidth = 0;\n    this.broadcastHeight = 0;\n    this.contentRect_ = createRectInit(0, 0, 0, 0);\n\n    this.target = target;\n};\n\n/**\r\n * Updates content rectangle and tells whether it's width or height properties\r\n * have changed since the last broadcast.\r\n *\r\n * @returns {boolean}\r\n */\n\n\n/**\r\n * Reference to the last observed content rectangle.\r\n *\r\n * @private {DOMRectInit}\r\n */\n\n\n/**\r\n * Broadcasted width of content rectangle.\r\n *\r\n * @type {number}\r\n */\nResizeObservation.prototype.isActive = function () {\n    var rect = getContentRect(this.target);\n\n    this.contentRect_ = rect;\n\n    return rect.width !== this.broadcastWidth || rect.height !== this.broadcastHeight;\n};\n\n/**\r\n * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n * from the corresponding properties of the last observed content rectangle.\r\n *\r\n * @returns {DOMRectInit} Last observed content rectangle.\r\n */\nResizeObservation.prototype.broadcastRect = function () {\n    var rect = this.contentRect_;\n\n    this.broadcastWidth = rect.width;\n    this.broadcastHeight = rect.height;\n\n    return rect;\n};\n\nvar ResizeObserverEntry = function(target, rectInit) {\n    var contentRect = createReadOnlyRect(rectInit);\n\n    // According to the specification following properties are not writable\n    // and are also not enumerable in the native implementation.\n    //\n    // Property accessors are not being used as they'd require to define a\n    // private WeakMap storage which may cause memory leaks in browsers that\n    // don't support this type of collections.\n    defineConfigurable(this, { target: target, contentRect: contentRect });\n};\n\nvar ResizeObserverSPI = function(callback, controller, callbackCtx) {\n    this.activeObservations_ = [];\n    this.observations_ = new MapShim();\n\n    if (typeof callback !== 'function') {\n        throw new TypeError('The callback provided as parameter 1 is not a function.');\n    }\n\n    this.callback_ = callback;\n    this.controller_ = controller;\n    this.callbackCtx_ = callbackCtx;\n};\n\n/**\r\n * Starts observing provided element.\r\n *\r\n * @param {Element} target - Element to be observed.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Registry of the ResizeObservation instances.\r\n *\r\n * @private {Map<Element, ResizeObservation>}\r\n */\n\n\n/**\r\n * Public ResizeObserver instance which will be passed to the callback\r\n * function and used as a value of it's \"this\" binding.\r\n *\r\n * @private {ResizeObserver}\r\n */\n\n/**\r\n * Collection of resize observations that have detected changes in dimensions\r\n * of elements.\r\n *\r\n * @private {Array<ResizeObservation>}\r\n */\nResizeObserverSPI.prototype.observe = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is already being observed.\n    if (observations.has(target)) {\n        return;\n    }\n\n    observations.set(target, new ResizeObservation(target));\n\n    this.controller_.addObserver(this);\n\n    // Force the update of observations.\n    this.controller_.refresh();\n};\n\n/**\r\n * Stops observing provided element.\r\n *\r\n * @param {Element} target - Element to stop observing.\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.unobserve = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is not being observed.\n    if (!observations.has(target)) {\n        return;\n    }\n\n    observations.delete(target);\n\n    if (!observations.size) {\n        this.controller_.removeObserver(this);\n    }\n};\n\n/**\r\n * Stops observing all elements.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.disconnect = function () {\n    this.clearActive();\n    this.observations_.clear();\n    this.controller_.removeObserver(this);\n};\n\n/**\r\n * Collects observation instances the associated element of which has changed\r\n * it's content rectangle.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.gatherActive = function () {\n        var this$1 = this;\n\n    this.clearActive();\n\n    this.observations_.forEach(function (observation) {\n        if (observation.isActive()) {\n            this$1.activeObservations_.push(observation);\n        }\n    });\n};\n\n/**\r\n * Invokes initial callback function with a list of ResizeObserverEntry\r\n * instances collected from active resize observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.broadcastActive = function () {\n    // Do nothing if observer doesn't have active observations.\n    if (!this.hasActive()) {\n        return;\n    }\n\n    var ctx = this.callbackCtx_;\n\n    // Create ResizeObserverEntry instance for every active observation.\n    var entries = this.activeObservations_.map(function (observation) {\n        return new ResizeObserverEntry(observation.target, observation.broadcastRect());\n    });\n\n    this.callback_.call(ctx, entries, ctx);\n    this.clearActive();\n};\n\n/**\r\n * Clears the collection of active observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.clearActive = function () {\n    this.activeObservations_.splice(0);\n};\n\n/**\r\n * Tells whether observer has active observations.\r\n *\r\n * @returns {boolean}\r\n */\nResizeObserverSPI.prototype.hasActive = function () {\n    return this.activeObservations_.length > 0;\n};\n\n// Registry of internal observers. If WeakMap is not available use current shim\n// for the Map collection as it has all required methods and because WeakMap\n// can't be fully polyfilled anyway.\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\n\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\nvar ResizeObserver = function(callback) {\n    if (!(this instanceof ResizeObserver)) {\n        throw new TypeError('Cannot call a class as a function.');\n    }\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    var controller = ResizeObserverController.getInstance();\n    var observer = new ResizeObserverSPI(callback, controller, this);\n\n    observers.set(this, observer);\n};\n\n// Expose public methods of ResizeObserver.\n['observe', 'unobserve', 'disconnect'].forEach(function (method) {\n    ResizeObserver.prototype[method] = function () {\n        return (ref = observers.get(this))[method].apply(ref, arguments);\n        var ref;\n    };\n});\n\nvar index = (function () {\n    // Export existing implementation if available.\n    if (typeof global$1.ResizeObserver !== 'undefined') {\n        return global$1.ResizeObserver;\n    }\n\n    return ResizeObserver;\n})();\n\nexport default index;\n","// Code from ally.js\r\n\r\n/*\r\n  Observe keyboard-, pointer-, mouse- and touch-events so that a query for\r\n  the current interaction type can be made at any time. For pointer interaction\r\n  this observer is limited to pointer button down/up - move is not observed!\r\n\r\n  USAGE:\r\n    var listener = engage();\r\n    listener.get() === {pointer: Boolean, key: Boolean}\r\n*/\r\n\r\n// counters to track primary input\r\nlet _activePointers = 0;\r\nlet _activeKeys = 0;\r\n\r\nconst pointerStartEvents = [\r\n  'touchstart',\r\n  'pointerdown',\r\n  'MSPointerDown',\r\n  'mousedown',\r\n];\r\nconst pointerEndEvents = [\r\n  'touchend',\r\n  'touchcancel',\r\n  'pointerup',\r\n  'MSPointerUp',\r\n  'pointercancel',\r\n  'MSPointerCancel',\r\n  'mouseup',\r\n];\r\n\r\nfunction handleWindowBlurEvent() {\r\n  // reset internal counters when window loses focus\r\n  _activePointers = 0;\r\n  _activeKeys = 0;\r\n}\r\n\r\nfunction handlePointerStartEvent(event: PointerEvent) {\r\n  if (event.isPrimary === false) {\r\n    // ignore non-primary pointer events\r\n    // https://w3c.github.io/pointerevents/#widl-PointerEvent-isPrimary\r\n    return;\r\n  }\r\n\r\n  // mousedown without following mouseup\r\n  // (likely not possible in Chrome)\r\n  _activePointers += 1;\r\n}\r\n\r\nfunction handlePointerEndEvent(event: any) {\r\n  if (event.isPrimary === false) {\r\n    // ignore non-primary pointer events\r\n    // https://w3c.github.io/pointerevents/#widl-PointerEvent-isPrimary\r\n    return;\r\n  } else if (event.touches) {\r\n    _activePointers = event.touches.length;\r\n    return;\r\n  }\r\n\r\n  // delay reset to when the current handlers are executed\r\n  (window.setImmediate || window.setTimeout)(() => {\r\n    // mouseup without prior mousedown\r\n    // (drag something out of the window)\r\n    _activePointers = Math.max(_activePointers - 1, 0);\r\n  });\r\n}\r\n\r\nfunction handleKeyStartEvent(event: KeyboardEvent) {\r\n  // ignore modifier keys\r\n  switch (event.keyCode || event.which) {\r\n    case 16: // space\r\n    case 17: // control\r\n    case 18: // alt\r\n    case 91: // command left\r\n    case 93: // command right\r\n      return;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  // keydown without a following keyup\r\n  // (may happen on CMD+TAB)\r\n  _activeKeys += 1;\r\n}\r\n\r\nfunction handleKeyEndEvent(event: KeyboardEvent) {\r\n  // ignore modifier keys\r\n  switch (event.keyCode || event.which) {\r\n    case 16: // space\r\n    case 17: // control\r\n    case 18: // alt\r\n    case 91: // command left\r\n    case 93: // command right\r\n      return;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  // delay reset to when the current handlers are executed\r\n  (window.setImmediate || window.setTimeout)(() => {\r\n    // keyup without prior keydown\r\n    // (may happen on CMD+R)\r\n    _activeKeys = Math.max(_activeKeys - 1, 0);\r\n  });\r\n}\r\n\r\nfunction getInteractionType() {\r\n  return {\r\n    pointer: Boolean(_activePointers),\r\n    key: Boolean(_activeKeys),\r\n  };\r\n}\r\n\r\nfunction disengage() {\r\n  _activePointers = _activeKeys = 0;\r\n  window.removeEventListener('blur', handleWindowBlurEvent, false);\r\n  document.documentElement.removeEventListener(\r\n    'keydown',\r\n    handleKeyStartEvent,\r\n    true,\r\n  );\r\n  document.documentElement.removeEventListener(\r\n    'keyup',\r\n    handleKeyEndEvent,\r\n    true,\r\n  );\r\n  pointerStartEvents.forEach(event => {\r\n    document.documentElement.removeEventListener(\r\n      event,\r\n      handlePointerStartEvent,\r\n      true,\r\n    );\r\n  });\r\n  pointerEndEvents.forEach(event => {\r\n    document.documentElement.removeEventListener(\r\n      event,\r\n      handlePointerEndEvent,\r\n      true,\r\n    );\r\n  });\r\n}\r\n\r\nfunction engage() {\r\n  // window blur must be in bubble phase so it won't capture regular blurs\r\n  window.addEventListener('blur', handleWindowBlurEvent, false);\r\n  // handlers to identify the method of focus change\r\n  document.documentElement.addEventListener(\r\n    'keydown',\r\n    handleKeyStartEvent,\r\n    true,\r\n  );\r\n  document.documentElement.addEventListener('keyup', handleKeyEndEvent, true);\r\n  pointerStartEvents.forEach(event => {\r\n    document.documentElement.addEventListener(\r\n      event,\r\n      handlePointerStartEvent,\r\n      true,\r\n    );\r\n  });\r\n  pointerEndEvents.forEach(event => {\r\n    document.documentElement.addEventListener(\r\n      event,\r\n      handlePointerEndEvent,\r\n      true,\r\n    );\r\n  });\r\n\r\n  return {\r\n    get: getInteractionType,\r\n  };\r\n}\r\n\r\nexport default { engage, disengage };\r\n","// Code from ally.js\r\n/*\r\n  add data-focus-source attribute to html element containing \"key\", \"pointer\" or \"script\"\r\n  depending on the input method used to change focus.\r\n\r\n  USAGE:\r\n    style/focus-source()\r\n\r\n    body :focus {\r\n      outline: 1px solid grey;\r\n    }\r\n\r\n    html[data-focus-source=\"key\"] body :focus {\r\n      outline: 5px solid red;\r\n    }\r\n\r\n    html[data-focus-source=\"key\"] body :focus {\r\n      outline: 1px solid blue;\r\n    }\r\n\r\n  NOTE: I don't have a GamePad to test, if you do and you want to\r\n  implement an observer for https://w3c.github.io/gamepad/ - send a PR!\r\n\r\n  Alternate implementation: https://github.com/alice/modality\r\n*/\r\n\r\nimport engageInteractionTypeObserver from './interaction-type';\r\n\r\n// preferring focusin/out because they are synchronous in IE10+11\r\nconst supportsFocusIn =\r\n  typeof document !== 'undefined' && 'onfocusin' in document;\r\nconst focusEventName = supportsFocusIn ? 'focusin' : 'focus';\r\nconst blurEventName = supportsFocusIn ? 'focusout' : 'blur';\r\n\r\n// interface to read interaction-type-listener state\r\nlet interactionTypeHandler: any;\r\n// keep track of last focus source\r\nlet current: any = null;\r\n// overwrite focus source for use with the every upcoming focus event\r\nlet lock: any = null;\r\n// keep track of ever having used a particular input method to change focus\r\nconst used: any = {\r\n  pointer: false,\r\n  key: false,\r\n  script: false,\r\n  initial: false,\r\n};\r\n\r\nfunction handleFocusEvent(event: any) {\r\n  let source = '';\r\n  if (event.type === focusEventName) {\r\n    const interactionType = interactionTypeHandler.get();\r\n    source =\r\n      lock ||\r\n      (interactionType.pointer && 'pointer') ||\r\n      (interactionType.key && 'key') ||\r\n      'script';\r\n  } else if (event.type === 'initial') {\r\n    source = 'initial';\r\n  }\r\n\r\n  document.documentElement.setAttribute('data-focus-source', source);\r\n\r\n  if (event.type !== blurEventName) {\r\n    used[source] = true;\r\n    current = source;\r\n  }\r\n}\r\n\r\nfunction getCurrentFocusSource() {\r\n  return current;\r\n}\r\n\r\nfunction getUsedFocusSource(source: any) {\r\n  return used[source];\r\n}\r\n\r\nfunction lockFocusSource(source: any) {\r\n  lock = source;\r\n}\r\n\r\nfunction unlockFocusSource() {\r\n  lock = false;\r\n}\r\n\r\nfunction disengage() {\r\n  // clear dom state\r\n  handleFocusEvent({ type: blurEventName });\r\n  current = lock = null;\r\n  Object.keys(used).forEach(function(key) {\r\n    used[key] = false;\r\n  });\r\n  // kill interaction type identification listener\r\n  engageInteractionTypeObserver.disengage();\r\n  document.documentElement.removeEventListener(\r\n    focusEventName,\r\n    handleFocusEvent,\r\n    true,\r\n  );\r\n  document.documentElement.removeEventListener(\r\n    blurEventName,\r\n    handleFocusEvent,\r\n    true,\r\n  );\r\n  document.documentElement.removeAttribute('data-focus-source');\r\n}\r\n\r\nfunction engage() {\r\n  document.documentElement.addEventListener(\r\n    focusEventName,\r\n    handleFocusEvent,\r\n    true,\r\n  );\r\n  document.documentElement.addEventListener(\r\n    blurEventName,\r\n    handleFocusEvent,\r\n    true,\r\n  );\r\n  // enable the interaction type identification observer\r\n  interactionTypeHandler = engageInteractionTypeObserver.engage();\r\n  // set up initial dom state\r\n  handleFocusEvent({ type: 'initial' });\r\n\r\n  return {\r\n    used: getUsedFocusSource,\r\n    current: getCurrentFocusSource,\r\n    lock: lockFocusSource,\r\n    unlock: unlockFocusSource,\r\n  };\r\n}\r\n\r\nexport default { engage, disengage };\r\n","enum MediaStreamTypes {\r\n  MP4 = 'MP4',\r\n  WEBM = 'WEBM',\r\n  HLS = 'HLS',\r\n  DASH = 'DASH',\r\n  OGG = 'OGG',\r\n  MOV = 'MOV',\r\n  MKV = 'MKV',\r\n}\r\n\r\nenum MediaStreamDeliveryPriority {\r\n  NATIVE_PROGRESSIVE,\r\n  ADAPTIVE_VIA_MSE,\r\n  NATIVE_ADAPTIVE,\r\n  FORCED,\r\n}\r\n\r\nexport { MediaStreamTypes, MediaStreamDeliveryPriority };\r\n","const UI_EVENTS = {\r\n  PLAY_TRIGGERED: 'ui-events/play-triggered',\r\n  PLAY_OVERLAY_TRIGGERED: 'ui-events/play-overlay-triggered',\r\n  PAUSE_TRIGGERED: 'ui-events/pause-triggered',\r\n  PROGRESS_CHANGE_TRIGGERED: 'ui-events/progress-change-triggered',\r\n  VOLUME_CHANGE_TRIGGERED: 'ui-events/volume-change-triggered',\r\n  MUTE_STATUS_TRIGGERED: 'ui-events/mute-status-triggered',\r\n  FULLSCREEN_STATUS_CHANGED: 'ui-events/fullscreen-status-changed',\r\n\r\n  // TODO: follow ENTITY_EVENT_TRIGGERED or ENTITY_EVENT format\r\n  MOUSE_ENTER_ON_PLAYER_TRIGGERED: 'ui-events/mouse-enter-on-player-triggered',\r\n  MOUSE_MOVE_ON_PLAYER_TRIGGERED: 'ui-events/mouse-move-on-player-triggered',\r\n  MOUSE_LEAVE_ON_PLAYER_TRIGGERED: 'ui-events/mouse-leave-on-player-triggered',\r\n  CONTROL_BLOCK_HIDE_TRIGGERED: 'ui-events/control-block-hide-triggered',\r\n  CONTROL_BLOCK_SHOW_TRIGGERED: 'ui-events/control-block-show-triggered',\r\n  PROGRESS_MANIPULATION_STARTED: 'ui-events/progress-manipulation-started',\r\n  PROGRESS_MANIPULATION_ENDED: 'ui-events/progress-manipulation-ended',\r\n  KEYBOARD_KEYDOWN_INTERCEPTED: 'ui-events/keyboard-keydown-intercepted',\r\n  LOADER_SHOW_TRIGGERED: 'ui-events/loader-show-triggered',\r\n  LOADER_HIDE_TRIGGERED: 'ui-events/loader-hide-triggered',\r\n  LOADING_COVER_SHOW_TRIGGERED: 'ui-events/loading-cover-show-triggered',\r\n  LOADING_COVER_HIDE_TRIGGERED: 'ui-events/loading-cover-hide-triggered',\r\n  TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED:\r\n    'ui-events/toggle-playback-with-keyboard-triggered',\r\n  GO_BACKWARD_WITH_KEYBOARD_TRIGGERED:\r\n    'ui-events/go-backward-with-keyboard-triggered',\r\n  GO_FORWARD_WITH_KEYBOARD_TRIGGERED:\r\n    'ui-events/go-forward-with-keyboard-triggered',\r\n  INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED:\r\n    'ui-events/increase-volume-with-keyboard-triggered',\r\n  DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED:\r\n    'ui-events/decrease-volume-with-keyboard-triggered',\r\n  MUTE_SOUND_WITH_KEYBOARD_TRIGGERED:\r\n    'ui-events/mute-sound-with-keyboard-triggered',\r\n  UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED:\r\n    'ui-events/unmute-sound-with-keyboard-triggered',\r\n  HIDE_INTERACTION_INDICATOR_TRIGGERED:\r\n    'ui-events/hide-interaction-indicator-triggered',\r\n  // TODO: get rid of WIDTH/HEIGHT change events in favour of RESIZE\r\n  PLAYER_WIDTH_CHANGE_TRIGGERED: 'ui-events/player-width-change-triggered',\r\n  PLAYER_HEIGHT_CHANGE_TRIGGERED: 'ui-events/player-height-change-triggered',\r\n\r\n  PLAY_WITH_SCREEN_CLICK_TRIGGERED:\r\n    'ui-events/play-with-screen-click-triggered',\r\n  PAUSE_WITH_SCREEN_CLICK_TRIGGERED:\r\n    'ui-events/pause-with-screen-click-triggered',\r\n\r\n  // TODO: review CONTROL_DRAG_START vs CONTROL_DRAG_START_TRIGGERED format\r\n  CONTROL_DRAG_START: 'ui-events/control-drag-start',\r\n  CONTROL_DRAG_END: 'ui-events/control-drag-end',\r\n  MAIN_BLOCK_HIDE_TRIGGERED: 'ui-events/main-block-hide-triggered',\r\n  MAIN_BLOCK_SHOW_TRIGGERED: 'ui-events/main-block-show-triggered',\r\n  PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED:\r\n    'ui-events/progress-sync-button-mouse-enter-triggered',\r\n  PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED:\r\n    'ui-events/progress-sync-button-mouse-leave-triggered',\r\n  RESIZE: 'ui-events/resize',\r\n};\r\n\r\nexport default UI_EVENTS;\r\n","enum EngineState {\r\n  SRC_SET = 'engine-state/src-set',\r\n  LOAD_STARTED = 'engine-state/load-started',\r\n  METADATA_LOADED = 'engine-state/metadata-loaded',\r\n  READY_TO_PLAY = 'engine-state/ready-to-play',\r\n  SEEK_IN_PROGRESS = 'engine-state/seek-in-progress',\r\n  PLAY_REQUESTED = 'engine-state/play-requested',\r\n  WAITING = 'engine-state/waiting',\r\n  PLAYING = 'engine-state/playing',\r\n  PAUSED = 'engine-state/paused',\r\n  ENDED = 'engine-state/ended',\r\n}\r\n\r\nexport default EngineState;\r\n","const VIDEO_EVENTS = {\r\n  ERROR: 'video-events/error',\r\n  STATE_CHANGED: 'video-events/state-changed',\r\n  LIVE_STATE_CHANGED: 'video-events/live-state-changed',\r\n  DYNAMIC_CONTENT_ENDED: 'video-events/dynamic-content-ended',\r\n  CHUNK_LOADED: 'video-events/chunk-loaded',\r\n  CURRENT_TIME_UPDATED: 'video-events/current-time-updated',\r\n  DURATION_UPDATED: 'video-events/duration-updated',\r\n  VOLUME_STATUS_CHANGED: 'video-events/volume-status-changed',\r\n  VOLUME_CHANGED: 'video-events/volume-changed',\r\n  MUTE_CHANGED: 'video-events/mute-changed',\r\n  SEEK_IN_PROGRESS: 'video-events/seek-in-progress',\r\n  UPLOAD_STALLED: 'video-events/upload-stalled',\r\n  UPLOAD_SUSPEND: 'video-events/upload-suspend',\r\n  PLAY_REQUEST_TRIGGERED: 'video-events/play-request-triggered',\r\n  PLAY_ABORTED: 'video-events/play-aborted',\r\n  RESET: 'video-events/reset-playback',\r\n};\r\n\r\nexport default VIDEO_EVENTS;\r\n","const Errors = {\r\n  SRC_PARSE: 'error-src-parse',\r\n  MANIFEST_LOAD: 'error-manifest-load',\r\n  MANIFEST_PARSE: 'error-manifest-parse',\r\n  MANIFEST_INCOMPATIBLE: 'error-manifest-incompatible',\r\n  LEVEL_LOAD: 'error-level-load',\r\n  CONTENT_LOAD: 'error-content-load',\r\n  CONTENT_PARSE: 'error-content-parse',\r\n  MEDIA: 'error-media',\r\n  UNKNOWN: 'error-unknown',\r\n};\r\n\r\nexport default Errors;\r\n","export default {\r\n  LOGO_LABEL: 'logo-label',\r\n  LOGO_TOOLTIP: 'logo-tooltip',\r\n  LIVE_INDICATOR_TEXT: 'live-indicator-text',\r\n  LIVE_SYNC_LABEL: 'live-sync-button-label',\r\n  LIVE_SYNC_TOOLTIP: 'live-sync-button-tooltip',\r\n  ENTER_FULL_SCREEN_LABEL: 'enter-full-screen-label',\r\n  ENTER_FULL_SCREEN_TOOLTIP: 'enter-full-screen-tooltip',\r\n  EXIT_FULL_SCREEN_LABEL: 'exit-full-screen-label',\r\n  EXIT_FULL_SCREEN_TOOLTIP: 'exit-full-screen-tooltip',\r\n  PLAY_CONTROL_LABEL: 'play-control-label',\r\n  PAUSE_CONTROL_LABEL: 'pause-control-label',\r\n  PROGRESS_CONTROL_LABEL: 'progress-control-label',\r\n  PROGRESS_CONTROL_VALUE: 'progress-control-value',\r\n  UNMUTE_CONTROL_LABEL: 'unmute-control-label',\r\n  UNMUTE_CONTROL_TOOLTIP: 'unmute-control-label',\r\n  MUTE_CONTROL_LABEL: 'mute-control-label',\r\n  MUTE_CONTROL_TOOLTIP: 'mute-control-tooltip',\r\n  VOLUME_CONTROL_LABEL: 'volume-control-label',\r\n  VOLUME_CONTROL_VALUE: 'volume-control-value',\r\n};\r\n","enum LiveState {\r\n  NONE = 'live-state/none',\r\n  INITIAL = 'live-state/initial',\r\n  NOT_SYNC = 'live-state/not-sync',\r\n  SYNC = 'live-state/sync',\r\n  ENDED = 'live-state/ended',\r\n}\r\n\r\nexport default LiveState;\r\n","function htmlToElement(html: string) {\r\n  const div: HTMLDivElement = document.createElement('div');\r\n  div.innerHTML = html.trim();\r\n  return div.firstChild as HTMLElement;\r\n}\r\n\r\nexport default htmlToElement;\r\n","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import extendStyles from './extendStyles';\n\nclass Stylable<TStyles = Playable.IStyles>\n  implements Playable.IStylable<TStyles> {\n  private static _moduleTheme: Playable.ICSSRules;\n  private static _styles: Playable.IStyles = {};\n\n  private _themeStyles: Playable.IStyles = {};\n\n  constructor(theme?: Playable.IThemeService) {\n    const moduleTheme = (<typeof Stylable>this.constructor)._moduleTheme;\n    if (theme && moduleTheme) {\n      theme.registerModuleTheme(this, moduleTheme);\n      this._themeStyles = theme.get(this);\n    }\n  }\n\n  static setTheme(theme: Playable.ICSSRules) {\n    this._moduleTheme = theme;\n  }\n\n  static extendStyleNames(styles: Playable.IStyles) {\n    this._styles = extendStyles(this._styles, styles);\n  }\n\n  static resetStyles() {\n    this._styles = {};\n  }\n\n  get themeStyles(): Playable.IStyles {\n    return this._themeStyles;\n  }\n\n  get styleNames(): TStyles {\n    // NOTE: TS does not work with instance static fields + generic type\n    return (this.constructor as any)._styles || {};\n  }\n}\n\nexport default Stylable;\n","//@ts-ignore\nimport classnames from 'classnames';\n\nfunction extendStyles(\n  sourceStyles: Playable.IStyles,\n  partialStyles: Playable.IStyles,\n) {\n  const styles = {\n    ...sourceStyles,\n  };\n\n  Object.keys(partialStyles).forEach(styleName => {\n    styles[styleName] = styles[styleName]\n      ? classnames(styles[styleName], partialStyles[styleName])\n      : partialStyles[styleName];\n  });\n\n  return styles;\n}\n\nexport default extendStyles;\n","import Stylable from './stylable';\n\nclass View<TStyles = Playable.IStyles> extends Stylable<TStyles>\n  implements Playable.IView<TStyles> {}\n\nexport default View;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import htmlToElement from '../ui/core/htmlToElement';\n\nimport { containerTemplate } from './templates';\n\nimport View from '../ui/core/view';\n\nimport styles from './root-container.scss';\n\nclass RootContainerView extends View<Playable.IRootContainerViewStyles>\n  implements Playable.IView<Playable.IRootContainerViewStyles> {\n  private _$node: HTMLElement;\n  private _callbacks: Playable.IRootContainerViewCallbacks;\n\n  constructor(config: Playable.IRootContainerViewConfig) {\n    super();\n    const { width, height, fillAllSpace, callbacks } = config;\n    this._callbacks = callbacks;\n    this._$node = htmlToElement(containerTemplate({ styles: this.styleNames }));\n\n    this.setFillAllSpaceFlag(fillAllSpace);\n\n    this.setWidth(width);\n    this.setHeight(height);\n\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('mouseenter', this._callbacks.onMouseEnter);\n    this._$node.addEventListener('mousemove', this._callbacks.onMouseMove);\n    this._$node.addEventListener('mouseleave', this._callbacks.onMouseLeave);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('mouseenter', this._callbacks.onMouseEnter);\n    this._$node.removeEventListener('mousemove', this._callbacks.onMouseMove);\n    this._$node.removeEventListener('mouseleave', this._callbacks.onMouseLeave);\n  }\n\n  setWidth(width: number) {\n    if (!width) {\n      return;\n    }\n\n    this._$node.style.width = `${width}px`;\n  }\n\n  setHeight(height: number) {\n    if (!height) {\n      return;\n    }\n\n    this._$node.style.height = `${height}px`;\n  }\n\n  getWidth(): number {\n    return this._$node.offsetWidth;\n  }\n\n  getHeight(): number {\n    return this._$node.offsetHeight;\n  }\n\n  show() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  appendComponentNode(node: HTMLElement) {\n    this._$node.appendChild(node);\n  }\n\n  getNode(): HTMLElement {\n    return this._$node;\n  }\n\n  setFullScreenStatus(isFullScreen: boolean) {\n    if (isFullScreen) {\n      this._$node.setAttribute('data-in-full-screen', 'true');\n      this._$node.classList.add(this.styleNames.fullScreen);\n    } else {\n      this._$node.setAttribute('data-in-full-screen', 'false');\n      this._$node.classList.remove(this.styleNames.fullScreen);\n    }\n  }\n\n  setFillAllSpaceFlag(isFillAllSpace = false) {\n    if (isFillAllSpace) {\n      this._$node.classList.add(this.styleNames.fillAllSpace);\n    } else {\n      this._$node.classList.remove(this.styleNames.fillAllSpace);\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nRootContainerView.extendStyleNames(styles);\n\nexport default RootContainerView;\n","function reduce(\r\n  arrayLike: { length: number },\r\n  callback: Function,\r\n  initialValue: any,\r\n) {\r\n  return Array.prototype.reduce.call(arrayLike, callback, initialValue);\r\n}\r\n\r\nfunction forEachMatch(string: string, pattern: RegExp, callback: Function) {\r\n  let match = pattern.exec(string);\r\n\r\n  while (match !== null) {\r\n    callback(match);\r\n    match = pattern.exec(string);\r\n  }\r\n}\r\n\r\nexport { reduce, forEachMatch };\r\n","const ALIASES = [\r\n  'matches',\r\n  'webkitMatchesSelector',\r\n  'mozMatchesSelector',\r\n  'msMatchesSelector',\r\n];\r\n\r\nlet matchesSelectorFn: Function;\r\n\r\nif (typeof HTMLElement !== 'undefined') {\r\n  for (let i = 0; i < ALIASES.length; i++) {\r\n    matchesSelectorFn = (Element as any).prototype[ALIASES[i]] as Function;\r\n\r\n    if (matchesSelectorFn) {\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nconst isElementMatchesSelector = matchesSelectorFn\r\n  ? (element: HTMLElement, selector: string) =>\r\n      matchesSelectorFn.call(element, selector)\r\n  : (element: HTMLElement, selector: string) =>\r\n      Array.prototype.indexOf.call(\r\n        document.querySelectorAll(selector),\r\n        element,\r\n      ) !== -1;\r\n\r\nexport default isElementMatchesSelector;\r\n","import { forEachMatch, reduce } from './utils';\r\nimport isElementMatchesSelector from '../isElementMatchesSelector';\r\n\r\n// NOTE: \"inspired\" by https://github.com/marcj/css-element-queries/blob/1.0.2/src/ElementQueries.js#L340-L393\r\n\r\nconst CSS_SELECTOR_PATTERN = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:[a-z-]+-)?(?:min|max)-width[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/gim;\r\nconst QUERY_ATTR_PATTERN = /\\[[\\s\\t]*?(?:([a-z-]+)-)?(min|max)-width[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/gim;\r\n\r\nfunction getQueriesFromCssSelector(cssSelector: string) {\r\n  const results: any[] = [];\r\n\r\n  if (\r\n    cssSelector.indexOf('min-width') === -1 &&\r\n    cssSelector.indexOf('max-width') === -1\r\n  ) {\r\n    return [];\r\n  }\r\n\r\n  cssSelector = cssSelector.replace(/'/g, '\"');\r\n\r\n  forEachMatch(cssSelector, CSS_SELECTOR_PATTERN, (match: RegExpMatchArray) => {\r\n    const [selectorPart1, attribute, selectorPart2] = match.slice(1);\r\n    const selector = selectorPart1 + selectorPart2;\r\n\r\n    forEachMatch(attribute, QUERY_ATTR_PATTERN, (match: RegExpMatchArray) => {\r\n      const [prefix = '', mode, width] = match.slice(1);\r\n\r\n      results.push({\r\n        selector,\r\n        prefix,\r\n        mode,\r\n        width: parseInt(width, 10),\r\n      });\r\n    });\r\n  });\r\n\r\n  return results;\r\n}\r\n\r\nfunction getQueriesFromRules(rules: CSSRuleList) {\r\n  return reduce(\r\n    rules,\r\n    (results: any[], rule: any) => {\r\n      // https://developer.mozilla.org/en-US/docs/Web/API/CSSRule\r\n      // CSSRule.STYLE_RULE\r\n      if (rule.type === 1) {\r\n        const selector = rule.selectorText || rule.cssText;\r\n\r\n        return results.concat(getQueriesFromCssSelector(selector));\r\n      }\r\n\r\n      // NOTE: add other `CSSRule` types if required.\r\n      // Example - https://github.com/marcj/css-element-queries/blob/1.0.2/src/ElementQueries.js#L384-L390\r\n\r\n      return results;\r\n    },\r\n    [],\r\n  );\r\n}\r\n\r\nfunction getQueries() {\r\n  return reduce(\r\n    document.styleSheets,\r\n    (results: any[], styleSheet: CSSStyleSheet) => {\r\n      // NOTE: browser may not able to read rules for cross-domain stylesheets\r\n      try {\r\n        const rules = styleSheet.cssRules || styleSheet.rules;\r\n\r\n        if (rules) {\r\n          return results.concat(getQueriesFromRules(rules));\r\n        }\r\n\r\n        if (styleSheet.cssText) {\r\n          return results.concat(getQueriesFromCssSelector(styleSheet.cssText));\r\n        }\r\n      } catch (e) {}\r\n\r\n      return results;\r\n    },\r\n    [],\r\n  );\r\n}\r\n\r\nfunction getQueriesForElement(element: HTMLElement, prefix = '') {\r\n  const matchedSelectors = new Map();\r\n  const queries: any[] = [];\r\n\r\n  getQueries().forEach((query: any) => {\r\n    if (!matchedSelectors.has(query.selector)) {\r\n      matchedSelectors.set(\r\n        query.selector,\r\n        isElementMatchesSelector(element, query.selector),\r\n      );\r\n    }\r\n\r\n    if (!matchedSelectors.get(query.selector)) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      query.prefix === prefix &&\r\n      !queries.some(\r\n        _query => _query.mode === query.mode && _query.width === query.width,\r\n      )\r\n    ) {\r\n      queries.push({\r\n        mode: query.mode,\r\n        width: query.width,\r\n      });\r\n    }\r\n  });\r\n\r\n  return queries.sort((a, b) => a.width - b.width);\r\n}\r\n\r\nexport default getQueriesForElement;\r\n","import getQueriesForElement from './getQueriesForElement';\r\n\r\nconst DEFAULT_QUERY_PREFIX = 'data';\r\n\r\nclass ElementQueries {\r\n  private _element: Element;\r\n  private _queryPrefix: string;\r\n  private _queries: { mode: string; width: number }[];\r\n\r\n  constructor(element: HTMLElement, { prefix = DEFAULT_QUERY_PREFIX } = {}) {\r\n    this._element = element;\r\n    this._queryPrefix = prefix;\r\n    this._queries = getQueriesForElement(element, prefix);\r\n  }\r\n\r\n  private _getQueryAttributeValue(mode: string, elementWidth: number) {\r\n    return this._queries\r\n      .filter(\r\n        query =>\r\n          query.mode === mode &&\r\n          ((mode === 'max' && query.width >= elementWidth) ||\r\n            (mode === 'min' && query.width <= elementWidth)),\r\n      )\r\n      .map(query => `${query.width}px`)\r\n      .join(' ');\r\n  }\r\n\r\n  private _setQueryAttribute(mode: string, elementWidth: number) {\r\n    const attributeName = this._queryPrefix\r\n      ? `${this._queryPrefix}-${mode}-width`\r\n      : `${mode}-width`;\r\n    const attributeValue = this._getQueryAttributeValue(mode, elementWidth);\r\n\r\n    if (attributeValue) {\r\n      this._element.setAttribute(attributeName, attributeValue);\r\n    } else {\r\n      this._element.removeAttribute(attributeName);\r\n    }\r\n  }\r\n\r\n  setWidth(width: number) {\r\n    this._setQueryAttribute('min', width);\r\n    this._setQueryAttribute('max', width);\r\n  }\r\n\r\n  destroy() {\r\n    this._element = null;\r\n  }\r\n}\r\n\r\nexport default ElementQueries;\r\n","import ResizeObserver from 'resize-observer-polyfill';\n\nimport focusSource from './utils/focus-source';\nimport focusWithin from './utils/focus-within';\n\nimport playerAPI from '../../core/player-api-decorator';\n\nimport { UI_EVENTS } from '../../constants';\n\nimport View from './root-container.view';\nimport ElementQueries from '../ui/core/element-queries';\n\nimport { IEventEmitter } from '../event-emitter/types';\nimport { IPlayerConfig } from '../../core/config';\n\nconst DEFAULT_CONFIG = {\n  fillAllSpace: false,\n};\n\nclass RootContainer implements Playable.IRootContainer {\n  static moduleName = 'rootContainer';\n  static dependencies = ['eventEmitter', 'config'];\n\n  private _eventEmitter: IEventEmitter;\n\n  private _elementQueries: ElementQueries;\n  private _resizeObserver: ResizeObserver;\n  private _disengageFocusWithin: Function;\n  private _disengageFocusSource: Function;\n\n  private _unbindEvents: Function;\n\n  // TODO: check if props should be `private`\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    config,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this.isHidden = false;\n\n    this._bindCallbacks();\n    this._initUI(config);\n\n    this._bindEvents();\n  }\n\n  /**\n   * Getter for DOM node with player UI element\n   * (use it only for debug, if you need attach player to your document use `attachToElement` method)\n   */\n  @playerAPI()\n  get node(): HTMLElement {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._onResized = this._onResized.bind(this);\n    this._broadcastMouseEnter = this._broadcastMouseEnter.bind(this);\n    this._broadcastMouseMove = this._broadcastMouseMove.bind(this);\n    this._broadcastMouseLeave = this._broadcastMouseLeave.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [\n          UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n          this.view.setFullScreenStatus,\n          this.view,\n        ],\n      ],\n      this,\n    );\n  }\n\n  private _initUI(config: IPlayerConfig) {\n    const sizeConfig = {\n      ...config.size,\n    };\n    this.view = new View({\n      callbacks: {\n        onMouseEnter: this._broadcastMouseEnter,\n        onMouseLeave: this._broadcastMouseLeave,\n        onMouseMove: this._broadcastMouseMove,\n      },\n      width: sizeConfig.width || null,\n      height: sizeConfig.height || null,\n      fillAllSpace: config.fillAllSpace || DEFAULT_CONFIG.fillAllSpace,\n    });\n\n    this._elementQueries = new ElementQueries(this.node, {\n      prefix: '',\n    });\n  }\n\n  appendComponentNode(node: HTMLElement) {\n    this.view.appendComponentNode(node);\n  }\n\n  private _broadcastMouseEnter() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_ENTER_ON_PLAYER_TRIGGERED);\n  }\n\n  private _broadcastMouseMove() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED);\n  }\n\n  private _broadcastMouseLeave() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED);\n  }\n\n  private _enableFocusInterceptors() {\n    if (!this._disengageFocusWithin) {\n      this._disengageFocusWithin = focusWithin();\n    }\n\n    if (!this._disengageFocusSource) {\n      focusSource.engage();\n      this._disengageFocusSource = focusSource.disengage;\n    }\n  }\n\n  private _disableFocusInterceptors() {\n    if (this._disengageFocusSource) {\n      this._disengageFocusSource();\n      this._disengageFocusSource = null;\n    }\n\n    if (this._disengageFocusWithin) {\n      this._disengageFocusWithin();\n      this._disengageFocusWithin = null;\n    }\n  }\n\n  private _onResized() {\n    const width = this.view.getWidth();\n    const height = this.view.getHeight();\n\n    this._elementQueries.setWidth(width);\n\n    this._eventEmitter.emit(UI_EVENTS.RESIZE, { width, height });\n  }\n\n  /**\n   * Method for attaching player node to your container\n   * It's important to call this methods after `DOMContentLoaded` event!\n   *\n   * @example\n   * document.addEventListener('DOMContentLoaded', function() {\n   *   const config = { src: 'http://my-url/video.mp4' }\n   *   const player = Playable.create(config);\n   *\n   *   player.attachToElement(document.getElementById('content'));\n   * });\n   */\n  @playerAPI()\n  attachToElement(element: Element) {\n    this._enableFocusInterceptors();\n\n    element.appendChild(this.node);\n\n    if (!this._resizeObserver) {\n      // NOTE: required for valid work of player \"media queries\"\n      this._resizeObserver = new ResizeObserver(this._onResized);\n\n      this._resizeObserver.observe(this.node);\n    }\n  }\n\n  /**\n   * Method for setting width of player\n   * @param width - Desired width of player in pixels\n   * @example\n   * player.setWidth(400);\n   */\n  @playerAPI()\n  setWidth(width: number) {\n    this.view.setWidth(width);\n    this._eventEmitter.emit(UI_EVENTS.PLAYER_WIDTH_CHANGE_TRIGGERED, width);\n  }\n\n  /**\n   * Return current width of player in pixels\n   * @example\n   * player.getWidth(); // 400\n   */\n  @playerAPI()\n  getWidth(): number {\n    return this.view.getWidth();\n  }\n\n  /**\n   * Method for setting width of player\n   * @param height - Desired height of player in pixels\n   * @example\n   * player.setHeight(225);\n   */\n  @playerAPI()\n  setHeight(height: number) {\n    this.view.setHeight(height);\n    this._eventEmitter.emit(UI_EVENTS.PLAYER_HEIGHT_CHANGE_TRIGGERED, height);\n  }\n\n  /**\n   * Return current height of player in pixels\n   * @example\n   * player.getHeight(); // 225\n   */\n  @playerAPI()\n  getHeight(): number {\n    return this.view.getHeight();\n  }\n\n  /**\n   * Method for allowing player fill all available space\n   * @param flag - `true` for allowing\n   * @example\n   * player.setFillAllSpace(true);\n   */\n  @playerAPI()\n  setFillAllSpace(flag: boolean) {\n    this.view.setFillAllSpaceFlag(flag);\n  }\n\n  /**\n   * Hide whole ui\n   * @example\n   * player.hide();\n   */\n  @playerAPI()\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  /**\n   * Show whole ui\n   * @example\n   * player.show();\n   */\n  @playerAPI()\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._disableFocusInterceptors();\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this.node);\n      this._resizeObserver = null;\n    }\n\n    this._elementQueries.destroy();\n    this._elementQueries = null;\n\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n  }\n}\n\nexport default RootContainer;\n","// inspired by https://gist.github.com/aFarkas/a7e0d85450f323d5e164\r\nconst focusWithin = () => {\r\n  const slice = [].slice;\r\n  const removeClass = (elem: any) => {\r\n    elem.classList.remove('focus-within');\r\n  };\r\n  const update = (() => {\r\n    let running: boolean;\r\n    let last: Element;\r\n    const action = () => {\r\n      let element: any = document.activeElement;\r\n\r\n      running = false;\r\n      if (last !== element) {\r\n        last = element;\r\n        slice\r\n          .call(document.getElementsByClassName('focus-within'))\r\n          .forEach(removeClass);\r\n        while (element && element.classList) {\r\n          element.classList.add('focus-within');\r\n          element = element.parentNode;\r\n        }\r\n      }\r\n    };\r\n\r\n    return () => {\r\n      if (!running) {\r\n        requestAnimationFrame(action);\r\n        running = true;\r\n      }\r\n    };\r\n  })();\r\n\r\n  document.addEventListener('focus', update, true);\r\n  document.addEventListener('blur', update, true);\r\n  update();\r\n\r\n  return () => {\r\n    document.removeEventListener('focus', update, true);\r\n    document.removeEventListener('blur', update, true);\r\n  };\r\n};\r\n\r\nexport default focusWithin;\r\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { EventEmitter, ListenerFn } from 'eventemitter3';\r\n\r\nimport playerAPI from '../../core/player-api-decorator';\r\n\r\nimport { IEventEmitter, IEventMap } from './types';\r\n\r\nexport default class EventEmitterModule extends EventEmitter\r\n  implements IEventEmitter {\r\n  static moduleName = 'eventEmitter';\r\n  /**\r\n   * Method for adding listeners of events inside player.\r\n   * You can check all events inside `Playable.UI_EVENTS` and `Playable.VIDEO_EVENTS`\r\n   *\r\n   * @param event - The Event name, such as `Playable.UI_EVENTS.PLAY_TRIGGERED`\r\n   * @param fn - A function callback to execute when the event is triggered.\r\n   * @param context - Value to use as `this` (i.e the reference Object) when executing callback.\r\n   *\r\n   * @example\r\n   * const Playable = require('playable');\r\n   * const player = Playable.create();\r\n   *\r\n   * player.on(Playable.UI_EVENTS.PLAY_TRIGGERED, () => {\r\n   *   // Will be executed after you will click on play button\r\n   * });\r\n   *\r\n   * // To supply a context value for `this` when the callback is invoked,\r\n   * // pass the optional context argument\r\n   * player.on(Playable.VIDEO_EVENTS.UPLOAD_STALLED, this.handleStalledUpload, this);\r\n   */\r\n  @playerAPI()\r\n  on(event: string, fn: ListenerFn, context?: any) {\r\n    return super.on(event, fn, context);\r\n  }\r\n\r\n  /**\r\n   * Method for removing listeners of events inside player.\r\n   *\r\n   * @param event - The Event name, such as `Playable.UI_EVENTS.PLAY_TRIGGERED`\r\n   * @param fn - Only remove the listeners that match this function.\r\n   * @param context - Only remove the listeners that have this context.\r\n   * @param once - Only remove one-time listeners.\r\n   *\r\n   * @example\r\n   * const Playable = require('playable');\r\n   * const player = Playable.create();\r\n   *\r\n   * const callback = function() {\r\n   *   // Code to handle some kind of event\r\n   * };\r\n   *\r\n   * // ... Now callback will be called when some one will pause the video ...\r\n   * player.on(Playable.UI_EVENTS.PAUSE_TRIGGERED, callback);\r\n   *\r\n   * // ... callback will no longer be called.\r\n   * player.off(Playable.UI_EVENTS.PAUSE_TRIGGERED, callback);\r\n   *\r\n   * // ... remove all handlers for event UI_EVENTS.PAUSE_TRIGGERED.\r\n   * player.off(Playable.UI_EVENTS.PAUSE_TRIGGERED);\r\n   */\r\n  @playerAPI()\r\n  off(event: string, fn?: ListenerFn, context?: any, once?: boolean) {\r\n    return super.off(event, fn, context, once);\r\n  }\r\n\r\n  /**\r\n   * Method for binding array of listeners with events inside player.\r\n   *\r\n   * @example\r\n   *\r\n   * this._unbindEvents = this._eventEmitter.bindEvents([\r\n   *     [VIDEO_EVENTS.STATE_CHANGED, this._processStateChange],\r\n   *     [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processLiveStateChange],\r\n   *     [VIDEO_EVENTS.CHUNK_LOADED, this._updateBufferIndicator],\r\n   *     [VIDEO_EVENTS.DURATION_UPDATED, this._updateAllIndicators],\r\n   *   ],\r\n   *   this,\r\n   * );\r\n   *\r\n   * //...\r\n   *\r\n   * this._unbindEvents()\r\n   *\r\n   * @param eventsMap\r\n   * @param defaultFnContext\r\n   * @returns unbindEvents\r\n   */\r\n  bindEvents(eventsMap: IEventMap[], defaultFnContext?: Object): Function {\r\n    const events: Function[] = [];\r\n\r\n    eventsMap.forEach(([eventName, fn, fnContext = defaultFnContext]) => {\r\n      this.on(eventName, fn, fnContext);\r\n      events.push(() => {\r\n        this.off(eventName, fn, fnContext);\r\n      });\r\n    });\r\n\r\n    return function unbindEvents() {\r\n      events.forEach(unbindEvent => {\r\n        unbindEvent();\r\n      });\r\n    };\r\n  }\r\n\r\n  destroy() {\r\n    this.removeAllListeners();\r\n  }\r\n}\r\n","import { IEventEmitter } from '../event-emitter/types';\r\n\r\nimport { isSafari } from '../../utils/device-detection';\r\n\r\nimport { VIDEO_EVENTS, EngineState } from '../../constants';\r\n\r\nexport const NATIVE_VIDEO_EVENTS_TO_STATE = [\r\n  'loadstart',\r\n  'loadedmetadata',\r\n  'canplay',\r\n  'play',\r\n  'playing',\r\n  'pause',\r\n  'ended',\r\n  'waiting',\r\n  'seeking',\r\n  'seeked',\r\n];\r\n\r\nexport default class StateEngine {\r\n  private _eventEmitter: IEventEmitter;\r\n  private _video: HTMLVideoElement;\r\n  private _currentState: EngineState;\r\n  private _statesTimestamps: { [state: string]: number };\r\n  private _initialTimeStamp: number;\r\n  private _isMetadataLoaded: boolean;\r\n\r\n  constructor(eventEmitter: IEventEmitter, video: HTMLVideoElement) {\r\n    this._eventEmitter = eventEmitter;\r\n    this._video = video;\r\n\r\n    this._currentState = null;\r\n\r\n    this._isMetadataLoaded = false;\r\n    this._statesTimestamps = {};\r\n\r\n    this._bindCallbacks();\r\n    this._bindEvents();\r\n  }\r\n\r\n  private _bindCallbacks() {\r\n    this._processEventFromVideo = this._processEventFromVideo.bind(this);\r\n  }\r\n\r\n  private _bindEvents() {\r\n    NATIVE_VIDEO_EVENTS_TO_STATE.forEach(event =>\r\n      this._video.addEventListener(event, this._processEventFromVideo),\r\n    );\r\n  }\r\n\r\n  private _unbindEvents() {\r\n    NATIVE_VIDEO_EVENTS_TO_STATE.forEach(event =>\r\n      this._video.removeEventListener(event, this._processEventFromVideo),\r\n    );\r\n  }\r\n\r\n  clearTimestamps() {\r\n    this._statesTimestamps = {};\r\n  }\r\n\r\n  private _setInitialTimeStamp() {\r\n    this._initialTimeStamp = Date.now();\r\n  }\r\n\r\n  private _setStateTimestamp(state: EngineState) {\r\n    if (!this._statesTimestamps[state]) {\r\n      this._statesTimestamps[state] = Date.now() - this._initialTimeStamp;\r\n      this._setInitialTimeStamp();\r\n    }\r\n  }\r\n\r\n  get stateTimestamps() {\r\n    return this._statesTimestamps;\r\n  }\r\n\r\n  private _processEventFromVideo(event: any = {}) {\r\n    const videoEl = this._video;\r\n\r\n    switch (event.type) {\r\n      case 'loadstart': {\r\n        this._setInitialTimeStamp();\r\n        this.setState(EngineState.LOAD_STARTED);\r\n        break;\r\n      }\r\n      case 'loadedmetadata': {\r\n        this._setStateTimestamp(EngineState.METADATA_LOADED);\r\n        this.setState(EngineState.METADATA_LOADED);\r\n        this._isMetadataLoaded = true;\r\n        break;\r\n      }\r\n      case 'canplay': {\r\n        this._setStateTimestamp(EngineState.READY_TO_PLAY);\r\n        this.setState(EngineState.READY_TO_PLAY);\r\n        break;\r\n      }\r\n      case 'play': {\r\n        this.setState(EngineState.PLAY_REQUESTED);\r\n        break;\r\n      }\r\n      case 'playing': {\r\n        // Safari triggers event 'playing' even when play request aborted by browser. So we need to check if video is actualy playing\r\n        if (isSafari()) {\r\n          if (!videoEl.paused) {\r\n            this.setState(EngineState.PLAYING);\r\n          }\r\n        } else {\r\n          this.setState(EngineState.PLAYING);\r\n        }\r\n        break;\r\n      }\r\n      case 'waiting': {\r\n        this.setState(EngineState.WAITING);\r\n        break;\r\n      }\r\n      case 'pause': {\r\n        // Safari triggers event 'pause' even when playing was aborted buy autoplay policies, emit pause event even if there wasn't any real playback\r\n        if (isSafari()) {\r\n          if (videoEl.played.length) {\r\n            this.setState(EngineState.PAUSED);\r\n          }\r\n        } else {\r\n          this.setState(EngineState.PAUSED);\r\n        }\r\n        break;\r\n      }\r\n      case 'ended': {\r\n        this.setState(EngineState.ENDED);\r\n        break;\r\n      }\r\n      case 'seeking': {\r\n        this.setState(EngineState.SEEK_IN_PROGRESS);\r\n        break;\r\n      }\r\n      case 'seeked': {\r\n        this.setState(\r\n          videoEl.paused ? EngineState.PAUSED : EngineState.PLAYING,\r\n        );\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  setState(state: EngineState) {\r\n    if (state === this._currentState) {\r\n      return;\r\n    }\r\n\r\n    //This case is happens only with dash.js sometimes when manifest got some problems\r\n    if (this._currentState === EngineState.METADATA_LOADED) {\r\n      if (\r\n        state === EngineState.SEEK_IN_PROGRESS ||\r\n        state === EngineState.PAUSED\r\n      ) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this._eventEmitter.emit(VIDEO_EVENTS.STATE_CHANGED, {\r\n      prevState: this._currentState,\r\n      nextState: state,\r\n    });\r\n    this._eventEmitter.emit(state);\r\n    this._currentState = state;\r\n  }\r\n\r\n  get isMetadataLoaded() {\r\n    return this._isMetadataLoaded;\r\n  }\r\n\r\n  get state() {\r\n    return this._currentState;\r\n  }\r\n\r\n  destroy() {\r\n    this._unbindEvents();\r\n\r\n    this._eventEmitter = null;\r\n    this._video = null;\r\n  }\r\n}\r\n","import { IEventEmitter } from '../event-emitter/types';\r\n\r\nimport { VIDEO_EVENTS } from '../../constants';\r\n\r\nexport const NATIVE_VIDEO_TO_BROADCAST = [\r\n  'progress',\r\n  'error',\r\n  'stalled',\r\n  'suspend',\r\n  'durationchange',\r\n  'timeupdate',\r\n  'volumechange',\r\n  'seeking',\r\n];\r\n\r\nexport default class NativeEventsBroadcaster {\r\n  private _eventEmitter: IEventEmitter;\r\n  private _video: HTMLVideoElement;\r\n  private _currentVolume: number;\r\n  private _currentMute: boolean;\r\n\r\n  constructor(eventEmitter: IEventEmitter, video: HTMLVideoElement) {\r\n    this._eventEmitter = eventEmitter;\r\n    this._video = video;\r\n\r\n    this._currentMute = this._video.muted;\r\n    this._currentVolume = this._video.volume;\r\n\r\n    this._bindCallbacks();\r\n    this._bindEvents();\r\n  }\r\n\r\n  private _bindCallbacks() {\r\n    this._processEventFromVideo = this._processEventFromVideo.bind(this);\r\n  }\r\n\r\n  private _bindEvents() {\r\n    NATIVE_VIDEO_TO_BROADCAST.forEach(event =>\r\n      this._video.addEventListener(event, this._processEventFromVideo),\r\n    );\r\n  }\r\n\r\n  private _unbindEvents() {\r\n    NATIVE_VIDEO_TO_BROADCAST.forEach(event =>\r\n      this._video.removeEventListener(event, this._processEventFromVideo),\r\n    );\r\n  }\r\n\r\n  private _processEventFromVideo(event: any = {}) {\r\n    const videoEl = this._video;\r\n\r\n    switch (event.type) {\r\n      case 'progress': {\r\n        this._eventEmitter.emit(VIDEO_EVENTS.CHUNK_LOADED);\r\n        break;\r\n      }\r\n      case 'stalled': {\r\n        this._eventEmitter.emit(VIDEO_EVENTS.UPLOAD_STALLED);\r\n        break;\r\n      }\r\n      case 'suspend': {\r\n        this._eventEmitter.emit(VIDEO_EVENTS.UPLOAD_SUSPEND);\r\n        break;\r\n      }\r\n      case 'seeking': {\r\n        this._eventEmitter.emit(\r\n          VIDEO_EVENTS.SEEK_IN_PROGRESS,\r\n          videoEl.currentTime,\r\n        );\r\n        break;\r\n      }\r\n      case 'durationchange': {\r\n        this._eventEmitter.emit(\r\n          VIDEO_EVENTS.DURATION_UPDATED,\r\n          videoEl.duration,\r\n        );\r\n        break;\r\n      }\r\n      case 'timeupdate': {\r\n        this._eventEmitter.emit(\r\n          VIDEO_EVENTS.CURRENT_TIME_UPDATED,\r\n          videoEl.currentTime,\r\n        );\r\n        break;\r\n      }\r\n      case 'volumechange': {\r\n        if (this._currentVolume !== videoEl.volume) {\r\n          this._currentVolume = videoEl.volume * 100;\r\n          this._eventEmitter.emit(\r\n            VIDEO_EVENTS.VOLUME_CHANGED,\r\n            this._currentVolume,\r\n          );\r\n        }\r\n\r\n        if (this._currentMute !== videoEl.muted) {\r\n          this._currentMute = videoEl.muted;\r\n          this._eventEmitter.emit(VIDEO_EVENTS.MUTE_CHANGED, this._currentMute);\r\n        }\r\n\r\n        this._eventEmitter.emit(VIDEO_EVENTS.VOLUME_STATUS_CHANGED, {\r\n          volume: videoEl.volume,\r\n          muted: videoEl.muted,\r\n        });\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this._unbindEvents();\r\n\r\n    this._video = null;\r\n    this._eventEmitter = null;\r\n  }\r\n}\r\n","import { IPlaybackAdapter } from '../adapters/types';\r\nimport { MediaStreamTypes } from '../../../constants';\r\nimport { IMediaSource } from '../types';\r\n\r\nexport function resolveAdapters(\r\n  mediaStreams: IMediaSource[],\r\n  availableAdapters: IPlaybackAdapter[],\r\n): IPlaybackAdapter[] {\r\n  const playableAdapters: IPlaybackAdapter[] = [];\r\n\r\n  const groupedStreams = groupStreamsByMediaType(mediaStreams);\r\n  const groupedStreamKeys = Object.keys(groupedStreams) as MediaStreamTypes[];\r\n\r\n  availableAdapters.forEach(adapter => {\r\n    for (let i = 0; i < groupedStreamKeys.length; i += 1) {\r\n      const mediaType = groupedStreamKeys[i];\r\n      const mediaStreams = groupedStreams[mediaType];\r\n\r\n      if (adapter.canPlay(mediaType)) {\r\n        adapter.setMediaStreams(mediaStreams);\r\n        playableAdapters.push(adapter);\r\n        break;\r\n      }\r\n    }\r\n  });\r\n\r\n  playableAdapters.sort(\r\n    (firstAdapter, secondAdapter) =>\r\n      secondAdapter.mediaStreamDeliveryPriority -\r\n      firstAdapter.mediaStreamDeliveryPriority,\r\n  );\r\n\r\n  return playableAdapters;\r\n}\r\n\r\nfunction groupStreamsByMediaType(mediaStreams: IMediaSource[]) {\r\n  const typeMap: { [type: string]: IMediaSource[] } = {};\r\n  mediaStreams.forEach((mediaStream: IMediaSource) => {\r\n    if (!mediaStream.type) {\r\n      return;\r\n    }\r\n\r\n    if (!Array.isArray(typeMap[mediaStream.type])) {\r\n      typeMap[mediaStream.type] = [];\r\n    }\r\n    typeMap[mediaStream.type].push(mediaStream);\r\n  });\r\n\r\n  return typeMap;\r\n}\r\n","import { MediaStreamTypes } from '../../../constants';\r\n\r\nconst extensionsMap = Object.create(null);\r\nextensionsMap.mp4 = MediaStreamTypes.MP4;\r\nextensionsMap.webm = MediaStreamTypes.WEBM;\r\nextensionsMap.m3u8 = MediaStreamTypes.HLS;\r\nextensionsMap.mpd = MediaStreamTypes.DASH;\r\nextensionsMap.ogg = MediaStreamTypes.OGG;\r\nextensionsMap.mkv = MediaStreamTypes.MKV;\r\nextensionsMap.mov = MediaStreamTypes.MOV;\r\n\r\nexport function getStreamType(url: string) {\r\n  const anchorElement = document.createElement('a');\r\n  anchorElement.href = url;\r\n  const streamType = extensionsMap[getExtFromPath(anchorElement.pathname)];\r\n\r\n  return streamType || false;\r\n}\r\n\r\nexport function getExtFromPath(path: string) {\r\n  return path\r\n    .split('.')\r\n    .pop()\r\n    .toLowerCase();\r\n}\r\n","import { IEventEmitter } from '../event-emitter/types';\r\n\r\nimport { VIDEO_EVENTS, ERRORS } from '../../constants';\r\n\r\nimport { resolveAdapters } from './utils/adapters-resolver';\r\nimport { getStreamType } from './utils/detect-stream-type';\r\n\r\nimport { IPlaybackAdapter } from './adapters/types';\r\nimport { MediaSource, IMediaSource } from './types';\r\n\r\nexport default class AdaptersStrategy {\r\n  private _video: HTMLVideoElement;\r\n  private _eventEmitter: IEventEmitter;\r\n  private _playableAdapters: IPlaybackAdapter[];\r\n  private _availableAdapters: IPlaybackAdapter[];\r\n  private _attachedAdapter: IPlaybackAdapter;\r\n\r\n  constructor(\r\n    eventEmitter: IEventEmitter,\r\n    video: HTMLVideoElement,\r\n    playbackAdapters: any[] = [],\r\n  ) {\r\n    this._video = video;\r\n    this._eventEmitter = eventEmitter;\r\n    this._playableAdapters = [];\r\n    this._availableAdapters = [];\r\n    this._attachedAdapter = null;\r\n\r\n    playbackAdapters.forEach(\r\n      adapter =>\r\n        adapter.isSupported() &&\r\n        this._availableAdapters.push(new adapter(eventEmitter)),\r\n    );\r\n  }\r\n\r\n  private _autoDetectSourceTypes(\r\n    mediaSources: Array<IMediaSource | string>,\r\n  ): IMediaSource[] {\r\n    return mediaSources.map((mediaSource: IMediaSource | string) => {\r\n      if (typeof mediaSource === 'string') {\r\n        const type = getStreamType(mediaSource);\r\n        if (!type) {\r\n          this._eventEmitter.emit(VIDEO_EVENTS.ERROR, {\r\n            errorType: ERRORS.SRC_PARSE,\r\n            streamSrc: mediaSource,\r\n          });\r\n        }\r\n        return { url: mediaSource, type };\r\n      }\r\n\r\n      return mediaSource;\r\n    });\r\n  }\r\n\r\n  private _resolvePlayableAdapters(src: MediaSource) {\r\n    if (!src) {\r\n      this._playableAdapters = [];\r\n      return;\r\n    }\r\n\r\n    const mediaSources = [].concat(src);\r\n    const mediaStreams = this._autoDetectSourceTypes(mediaSources);\r\n    this._playableAdapters = resolveAdapters(\r\n      mediaStreams,\r\n      this._availableAdapters,\r\n    );\r\n  }\r\n\r\n  private _connectAdapterToVideo() {\r\n    if (this._playableAdapters.length > 0) {\r\n      // Use the first PlayableStream for now\r\n      // Later, we can use the others as fallback\r\n      this._attachedAdapter = this._playableAdapters[0];\r\n      this._attachedAdapter.attach(this._video);\r\n    }\r\n  }\r\n\r\n  private _detachCurrentAdapter() {\r\n    if (this._attachedAdapter) {\r\n      this._attachedAdapter.detach();\r\n      this._attachedAdapter = null;\r\n    }\r\n  }\r\n\r\n  get attachedAdapter() {\r\n    return this._attachedAdapter;\r\n  }\r\n\r\n  connectAdapter(src: MediaSource) {\r\n    this._detachCurrentAdapter();\r\n    this._resolvePlayableAdapters(src);\r\n    this._connectAdapterToVideo();\r\n  }\r\n\r\n  destroy() {\r\n    this._detachCurrentAdapter();\r\n\r\n    this._attachedAdapter = null;\r\n    this._availableAdapters = null;\r\n    this._playableAdapters = null;\r\n\r\n    this._video = null;\r\n  }\r\n}\r\n","import playerAPI from '../../core/player-api-decorator';\r\n\r\nimport StateEngine from './state-engine';\r\nimport NativeEventsBroadcaster from './native-events-broadcaster';\r\nimport AdapterStrategy from './adapters-strategy';\r\n\r\nimport {\r\n  isIPhone,\r\n  isIPod,\r\n  isIPad,\r\n  isAndroid,\r\n} from '../../utils/device-detection';\r\n\r\nimport { VIDEO_EVENTS, EngineState } from '../../constants';\r\nimport { IPlaybackAdapter } from './adapters/types';\r\n\r\nimport { IPlayerConfig } from '../../core/config';\r\nimport {\r\n  IPlaybackEngine,\r\n  IPlaybackEngineDependencies,\r\n  IDebugInfo,\r\n  MediaSource,\r\n  CrossOriginValue,\r\n} from './types';\r\nimport { IEventEmitter } from '../event-emitter/types';\r\n\r\n//TODO: Find source of problem with native HLS on Safari, when playing state triggered but actual playing is delayed\r\nexport default class Engine implements IPlaybackEngine {\r\n  static moduleName = 'engine';\r\n  static dependencies = ['eventEmitter', 'config', 'availablePlaybackAdapters'];\r\n\r\n  private _eventEmitter: IEventEmitter;\r\n  private _currentSrc: MediaSource;\r\n  private _stateEngine: StateEngine;\r\n  private _video: HTMLVideoElement;\r\n  private _nativeEventsBroadcaster: NativeEventsBroadcaster;\r\n  private _adapterStrategy: AdapterStrategy;\r\n  private _playPromise: Promise<any>;\r\n  private _pauseRequested: boolean;\r\n\r\n  constructor({\r\n    eventEmitter,\r\n    config,\r\n    availablePlaybackAdapters = [],\r\n  }: IPlaybackEngineDependencies) {\r\n    this._eventEmitter = eventEmitter;\r\n\r\n    this._currentSrc = null;\r\n\r\n    this._createVideoTag(config.videoElement);\r\n\r\n    this._stateEngine = new StateEngine(eventEmitter, this._video);\r\n    this._nativeEventsBroadcaster = new NativeEventsBroadcaster(\r\n      eventEmitter,\r\n      this._video,\r\n    );\r\n    this._adapterStrategy = new AdapterStrategy(\r\n      this._eventEmitter,\r\n      this._video,\r\n      availablePlaybackAdapters,\r\n    );\r\n\r\n    this._applyConfig(config);\r\n  }\r\n\r\n  private _createVideoTag(videoElement?: HTMLVideoElement) {\r\n    if (videoElement && videoElement.tagName === 'VIDEO') {\r\n      this._video = videoElement;\r\n    } else {\r\n      this._video = document.createElement('video');\r\n    }\r\n  }\r\n  private _applyConfig(config: IPlayerConfig = {}) {\r\n    const {\r\n      preload,\r\n      autoPlay,\r\n      loop,\r\n      muted,\r\n      volume,\r\n      playInline,\r\n      crossOrigin,\r\n      src,\r\n    } = config;\r\n\r\n    this.setPreload(preload);\r\n    this.setAutoPlay(autoPlay);\r\n    this.setLoop(loop);\r\n    this.setMute(muted);\r\n    this.setVolume(volume);\r\n    this.setPlayInline(playInline);\r\n    this.setCrossOrigin(crossOrigin);\r\n\r\n    this.setSrc(src);\r\n  }\r\n\r\n  getNode() {\r\n    return this._video;\r\n  }\r\n\r\n  private _getViewDimensions() {\r\n    return {\r\n      width: this._video.offsetWidth,\r\n      height: this._video.offsetHeight,\r\n    };\r\n  }\r\n\r\n  get isDynamicContent() {\r\n    if (!this.attachedAdapter) {\r\n      return false;\r\n    }\r\n\r\n    return this.attachedAdapter.isDynamicContent;\r\n  }\r\n\r\n  get isDynamicContentEnded() {\r\n    if (!this.attachedAdapter) {\r\n      return false;\r\n    }\r\n\r\n    return this.attachedAdapter.isDynamicContentEnded;\r\n  }\r\n\r\n  get isSeekAvailable() {\r\n    if (!this.attachedAdapter) {\r\n      return false;\r\n    }\r\n\r\n    return this.attachedAdapter.isSeekAvailable;\r\n  }\r\n\r\n  get isMetadataLoaded() {\r\n    return this._stateEngine.isMetadataLoaded;\r\n  }\r\n\r\n  get isPreloadAvailable() {\r\n    if (isIPad() || isIPhone() || isIPod() || isAndroid()) {\r\n      return false;\r\n    }\r\n\r\n    return this.getPreload() !== 'none';\r\n  }\r\n\r\n  get isAutoPlayAvailable() {\r\n    if (isIPad() || isIPhone() || isIPod() || isAndroid()) {\r\n      return false;\r\n    }\r\n\r\n    return this.getAutoPlay();\r\n  }\r\n\r\n  get isSyncWithLive(): boolean {\r\n    if (!this.attachedAdapter) {\r\n      return false;\r\n    }\r\n\r\n    return this.attachedAdapter.isSyncWithLive;\r\n  }\r\n\r\n  get attachedAdapter(): IPlaybackAdapter {\r\n    return this._adapterStrategy.attachedAdapter;\r\n  }\r\n\r\n  /**\r\n   * Method for setting source of video to player.\r\n   * @param src Array with multiple sources\r\n   * @example\r\n   * player.setSrc([\r\n   *   'https://my-url/video.mp4',\r\n   *   'https://my-url/video.webm',\r\n   *   'https://my-url/video.m3u8'\r\n   * ]);\r\n   * @note\r\n   * Read more about [video source](/video-source)\r\n   */\r\n  @playerAPI()\r\n  setSrc(src: MediaSource) {\r\n    if (src === this._currentSrc) {\r\n      return;\r\n    }\r\n\r\n    this._stateEngine.clearTimestamps();\r\n    this._currentSrc = src;\r\n    this._adapterStrategy.connectAdapter(this._currentSrc);\r\n\r\n    this._stateEngine.setState(EngineState.SRC_SET);\r\n  }\r\n\r\n  /**\r\n   * Return current source of video\r\n   * @example\r\n   * player.getSrc(); // ['https://my-url/video.mp4']\r\n   */\r\n  @playerAPI()\r\n  getSrc(): MediaSource {\r\n    return this._currentSrc;\r\n  }\r\n\r\n  @playerAPI()\r\n  reset() {\r\n    this.pause();\r\n    this.setCurrentTime(0);\r\n    this._eventEmitter.emit(VIDEO_EVENTS.RESET);\r\n  }\r\n\r\n  /**\r\n   * Method for starting playback of video\r\n   * @example\r\n   * player.play();\r\n   */\r\n  @playerAPI()\r\n  play() {\r\n    //Workaround for triggering functionality that requires user event pipe\r\n    this._eventEmitter.emit(VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED);\r\n\r\n    this._pauseRequested = false;\r\n\r\n    if (!this._playPromise) {\r\n      this._playPromise = this._video.play();\r\n      if (this._playPromise !== undefined) {\r\n        this._playPromise\r\n          .then(() => {\r\n            this._playPromise = null;\r\n\r\n            if (this._pauseRequested) {\r\n              this.pause();\r\n            }\r\n          })\r\n          .catch(event => {\r\n            this._eventEmitter.emit(VIDEO_EVENTS.PLAY_ABORTED, event);\r\n            this._playPromise = null;\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method for pausing playback of video\r\n   * @example\r\n   * player.pause();\r\n   */\r\n  @playerAPI()\r\n  pause() {\r\n    if (this._playPromise) {\r\n      this._pauseRequested = true;\r\n    } else {\r\n      this._video.pause();\r\n      this._pauseRequested = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method for toggling(play\\pause) playback of video\r\n   * @example\r\n   * player.togglePlayback();\r\n   */\r\n  @playerAPI()\r\n  togglePlayback() {\r\n    if (this.isVideoPaused) {\r\n      this.play();\r\n    } else {\r\n      this.pause();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method for reseting playback of video\r\n   * @example\r\n   * player.play();\r\n   * console.log(player.isVideoPaused); // false\r\n   * ...\r\n   * player.resetPlayback();\r\n   * console.log(player.isVideoPaused); // true;\r\n   * console.log(player.getCurrentTime()); //0;\r\n   */\r\n  @playerAPI()\r\n  resetPlayback() {\r\n    this.pause();\r\n    this.setCurrentTime(0);\r\n    this._eventEmitter.emit(VIDEO_EVENTS.RESET);\r\n  }\r\n\r\n  /**\r\n   * High level status of video playback. Returns true if playback is paused.\r\n   * For more advance state use `getCurrentPlaybackState`\r\n   * @example\r\n   * player.play();\r\n   * console.log(player.isVideoPaused);\r\n   */\r\n  @playerAPI()\r\n  get isVideoPaused(): boolean {\r\n    return this._video.paused;\r\n  }\r\n\r\n  /**\r\n   * High level status of video playback. Returns true if playback is ended. Also note, that `isPaused` will return `true` if playback is ended also.\r\n   * For more advance state use `getCurrentPlaybackState`\r\n   * @example\r\n   * player.play();\r\n   * console.log(player.isVideoEnded);\r\n   */\r\n  @playerAPI()\r\n  get isVideoEnded(): boolean {\r\n    return this._video.ended;\r\n  }\r\n\r\n  /**\r\n   * Method for synchronize current playback with live point. Available only if you playing live source.\r\n   * @example\r\n   * player.syncWithLive();\r\n   */\r\n  @playerAPI()\r\n  syncWithLive() {\r\n    if (\r\n      this.attachedAdapter &&\r\n      this.attachedAdapter.isDynamicContent &&\r\n      !this.attachedAdapter.isDynamicContentEnded &&\r\n      !this.isSyncWithLive\r\n    ) {\r\n      this.setCurrentTime(this.attachedAdapter.syncWithLiveTime);\r\n\r\n      this.play();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method for going forward in playback by your value\r\n   * @param sec - Value in seconds\r\n   * @example\r\n   * player.goForward(5);\r\n   */\r\n  @playerAPI()\r\n  goForward(sec: number) {\r\n    const duration = this.getDurationTime();\r\n\r\n    if (duration) {\r\n      const current = this.getCurrentTime();\r\n      this.setCurrentTime(Math.min(current + sec, duration));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Method for going backward in playback by your value\r\n   * @param sec - Value in seconds\r\n   * @example\r\n   * player.goBackward(5);\r\n   */\r\n  @playerAPI()\r\n  goBackward(sec: number) {\r\n    const duration = this.getDurationTime();\r\n\r\n    if (duration) {\r\n      const current = this.getCurrentTime();\r\n      this.setCurrentTime(Math.max(current - sec, 0));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set volume\r\n   * @param volume - Volume value `0..100`\r\n   * @example\r\n   * player.setVolume(50);\r\n   */\r\n  @playerAPI()\r\n  setVolume(volume: number) {\r\n    const parsedVolume = Number(volume);\r\n    this._video.volume = isNaN(parsedVolume)\r\n      ? 1\r\n      : Math.max(0, Math.min(Number(volume) / 100, 1));\r\n  }\r\n\r\n  /**\r\n   * Get volume\r\n   * @example\r\n   * player.getVolume(); // 50\r\n   */\r\n  @playerAPI()\r\n  getVolume(): number {\r\n    return this._video.volume * 100;\r\n  }\r\n\r\n  /**\r\n   * Method for increasing current volume by value\r\n   * @param value - Value from 0 to 100\r\n   * @example\r\n   * player.increaseVolume(30);\r\n   */\r\n  @playerAPI()\r\n  increaseVolume(value: number) {\r\n    this.setVolume(this.getVolume() + value);\r\n  }\r\n\r\n  /**\r\n   * Method for decreasing current volume by value\r\n   * @param value - Value from 0 to 100\r\n   * @example\r\n   * player.decreaseVolume(30);\r\n   */\r\n  @playerAPI()\r\n  decreaseVolume(value: number) {\r\n    this.setVolume(this.getVolume() - value);\r\n  }\r\n\r\n  /**\r\n   * Mute or unmute the video\r\n   * @param isMuted - `true` to mute the video.\r\n   * @example\r\n   * player.setMute(true);\r\n   */\r\n  @playerAPI()\r\n  setMute(isMuted: boolean) {\r\n    this._video.muted = Boolean(isMuted);\r\n  }\r\n\r\n  /**\r\n   * Get mute flag\r\n   * @example\r\n   * player.getMute(); // true\r\n   */\r\n  @playerAPI()\r\n  getMute(): boolean {\r\n    return this._video.muted;\r\n  }\r\n\r\n  /**\r\n   * Set autoPlay flag\r\n   * @example\r\n   * player.setAutoPlay();\r\n   */\r\n  @playerAPI()\r\n  setAutoPlay(isAutoPlay: boolean) {\r\n    this._video.autoplay = Boolean(isAutoPlay);\r\n  }\r\n\r\n  /**\r\n   * Get autoPlay flag\r\n   * @example\r\n   * player.getAutoPlay(); // true\r\n   */\r\n  @playerAPI()\r\n  getAutoPlay(): boolean {\r\n    return this._video.autoplay;\r\n  }\r\n\r\n  /**\r\n   * Set loop flag\r\n   * @param isLoop - If `true` video will be played again after it will finish\r\n   * @example\r\n   * player.setLoop(true);\r\n   */\r\n  @playerAPI()\r\n  setLoop(isLoop: boolean) {\r\n    this._video.loop = Boolean(isLoop);\r\n  }\r\n\r\n  /**\r\n   * Get loop flag\r\n   * @example\r\n   * player.getLoop(); // true\r\n   */\r\n  @playerAPI()\r\n  getLoop(): boolean {\r\n    return this._video.loop;\r\n  }\r\n\r\n  /**\r\n   * Method for setting playback rate\r\n   */\r\n  @playerAPI()\r\n  setPlaybackRate(rate: number) {\r\n    this._video.playbackRate = rate;\r\n  }\r\n\r\n  /**\r\n   * Return current playback rate\r\n   */\r\n  @playerAPI()\r\n  getPlaybackRate(): number {\r\n    return this._video.playbackRate;\r\n  }\r\n\r\n  /**\r\n   * Set preload type\r\n   * @example\r\n   * player.setPreload('none');\r\n   */\r\n  @playerAPI()\r\n  setPreload(preload: 'auto' | 'metadata' | 'none') {\r\n    this._video.preload = preload || 'auto';\r\n  }\r\n\r\n  /**\r\n   * Return preload type\r\n   * @example\r\n   * player.getPreload(); // none\r\n   */\r\n  @playerAPI()\r\n  getPreload(): string {\r\n    return this._video.preload;\r\n  }\r\n\r\n  /**\r\n   * Return current time of video playback\r\n   * @example\r\n   * player.getCurrentTime(); //  60.139683\r\n   */\r\n  @playerAPI()\r\n  getCurrentTime(): number {\r\n    return this._video.currentTime;\r\n  }\r\n\r\n  /**\r\n   * Method for seeking to time in video\r\n   * @param time - Time in seconds\r\n   * @example\r\n   * player.goTo(34);\r\n   */\r\n  @playerAPI('goTo')\r\n  setCurrentTime(time: number) {\r\n    this._video.currentTime = time;\r\n  }\r\n\r\n  /**\r\n   * Return duration of video\r\n   * @example\r\n   * player.getDurationTime(); // 180.149745\r\n   */\r\n  @playerAPI()\r\n  getDurationTime(): number {\r\n    return this._video.duration || 0;\r\n  }\r\n\r\n  /**\r\n   * Return real width of video from metadata\r\n   * @example\r\n   * player.getVideoWidth(); // 400\r\n   */\r\n  @playerAPI('getVideoRealWidth')\r\n  getVideoWidth(): number {\r\n    return this._video.videoWidth;\r\n  }\r\n\r\n  /**\r\n   * Return real height of video from metadata\r\n   * @example\r\n   * player.getVideoHeight(); // 225\r\n   */\r\n  @playerAPI('getVideoRealHeight')\r\n  getVideoHeight(): number {\r\n    return this._video.videoHeight;\r\n  }\r\n\r\n  getBuffered() {\r\n    return this._video.buffered;\r\n  }\r\n\r\n  /**\r\n   * Set playInline flag\r\n   * @param isPlayInline - If `false` - video will be played in full screen, `true` - inline\r\n   * @example\r\n   * player.setPlayInline(true);\r\n   */\r\n  @playerAPI()\r\n  setPlayInline(isPlayInline: boolean) {\r\n    if (isPlayInline) {\r\n      this._video.setAttribute('playsInline', 'true');\r\n    } else {\r\n      this._video.removeAttribute('playsInline');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get playInline flag\r\n   * @example\r\n   * player.getPlayInline(); // true\r\n   */\r\n  @playerAPI()\r\n  getPlayInline(): boolean {\r\n    return this._video.getAttribute('playsInline') === 'true';\r\n  }\r\n\r\n  /**\r\n   * Set crossorigin attribute for video\r\n   * @example\r\n   * player.setCrossOrigin('anonymous');\r\n   */\r\n  @playerAPI()\r\n  setCrossOrigin(crossOrigin?: 'anonymous' | 'use-credentials') {\r\n    if (crossOrigin) {\r\n      this._video.setAttribute('crossorigin', crossOrigin);\r\n    } else {\r\n      this._video.removeAttribute('crossorigin');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get crossorigin attribute value for video\r\n   * @example\r\n   * player.getCrossOrigin(); // 'anonymous'\r\n   */\r\n  @playerAPI()\r\n  getCrossOrigin(): CrossOriginValue {\r\n    return this._video.getAttribute('crossorigin') as CrossOriginValue;\r\n  }\r\n\r\n  /**\r\n   * Return current state of playback\r\n   */\r\n  @playerAPI('getCurrentPlaybackState')\r\n  getCurrentState() {\r\n    return this._stateEngine.state;\r\n  }\r\n\r\n  /**\r\n   * Return object with internal debug info\r\n   *\r\n   * @example\r\n   * player.getDebugInfo();\r\n   *\r\n   * @note\r\n   * The above command returns JSON structured like this:\r\n   *\r\n   * @example\r\n   * {\r\n   *   \"type\": \"HLS\",\r\n   *   \"viewDimensions\": {\r\n   *     \"width\": 700,\r\n   *     \"height\": 394\r\n   *   }\r\n   *   \"url\": \"https://example.com/video.m3u8\",\r\n   *   \"currentTime\": 22.092514,\r\n   *   \"duration\": 60.139683,\r\n   *   \"loadingStateTimestamps\": {\r\n   *     \"metadata-loaded\": 76,\r\n   *     \"ready-to-play\": 67\r\n   *   },\r\n   *   \"bitrates\": [\r\n   *     // Available bitrates\r\n   *     \"100000\",\r\n   *     \"200000\",\r\n   *     ...\r\n   *   ],\r\n   *   // One of available bitrates, that used right now\r\n   *   \"currentBitrate\": \"100000\",\r\n   *   // Raw estimation of bandwidth, that could be used without playback stall\r\n   *   \"bwEstimate\": \"120000\"\r\n   *   \"overallBufferLength\": 60.139683,\r\n   *   \"nearestBufferSegInfo\": {\r\n   *     \"start\": 0,\r\n   *     \"end\": 60.139683\r\n   *   }\r\n   * }\r\n   */\r\n  @playerAPI()\r\n  getDebugInfo(): IDebugInfo {\r\n    const { duration, currentTime } = this._video;\r\n    let data;\r\n\r\n    if (this._adapterStrategy.attachedAdapter) {\r\n      data = this._adapterStrategy.attachedAdapter.debugInfo;\r\n    }\r\n\r\n    return {\r\n      ...data,\r\n      viewDimensions: this._getViewDimensions(),\r\n      currentTime,\r\n      duration,\r\n      loadingStateTimestamps: this._stateEngine.stateTimestamps,\r\n    };\r\n  }\r\n\r\n  destroy() {\r\n    this._stateEngine.destroy();\r\n    this._nativeEventsBroadcaster.destroy();\r\n    this._adapterStrategy.destroy();\r\n    this._video.parentNode && this._video.parentNode.removeChild(this._video);\r\n\r\n    this._stateEngine = null;\r\n    this._nativeEventsBroadcaster = null;\r\n    this._adapterStrategy = null;\r\n    this._eventEmitter = null;\r\n    this._video = null;\r\n  }\r\n}\r\n","const SHORTHAND_HEX_COLOR_PATTERN = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\nconst HEX_COLOR_PATTERN = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\r\n\r\ntype IRGB = {\r\n  r: number;\r\n  g: number;\r\n  b: number;\r\n};\r\n\r\nfunction hexToRgb(hex: string): IRGB {\r\n  hex = hex.replace(\r\n    SHORTHAND_HEX_COLOR_PATTERN,\r\n    (_, r, g, b) => r + r + g + g + b + b,\r\n  );\r\n\r\n  const result = hex.match(HEX_COLOR_PATTERN);\r\n  return result\r\n    ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16),\r\n      }\r\n    : null;\r\n}\r\n\r\nexport default hexToRgb;\r\n","import hexToRgb from './hexToRgb';\r\n\r\nfunction transperentizeColor(color: string, alpha: number) {\r\n  const { r, g, b } = hexToRgb(color);\r\n  return `rgba(${r},${g},${b},${alpha})`;\r\n}\r\n\r\nexport default transperentizeColor;\r\n","function camelToKebab(string: string): string {\r\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n}\r\n\r\nexport default camelToKebab;\r\n","import camelToKebab from './camelToKebab';\r\n\r\nconst generatedIds: Map<string, number> = new Map();\r\n\r\nfunction getUniquePostfix(className: string): string {\r\n  if (generatedIds.has(className)) {\r\n    const newID: number = generatedIds.get(className) + 1;\r\n    generatedIds.set(className, newID);\r\n\r\n    return `${newID}`;\r\n  }\r\n\r\n  generatedIds.set(className, 0);\r\n  return '';\r\n}\r\n\r\nfunction getUniqueId(classImportName: string): string {\r\n  const kebabName: string = camelToKebab(classImportName);\r\n\r\n  return `${kebabName}${getUniquePostfix(kebabName)}`;\r\n}\r\n\r\nexport default getUniqueId;\r\n","import getUniqueId from './getUniqueId';\n\nfunction getUniqueClassName(classImportName: string) {\n  return `wix-playable--${getUniqueId(classImportName)}`;\n}\n\nfunction generateClassNames(rules: Playable.ICSSRules): Playable.IStyles {\n  return Object.keys(rules).reduce(\n    (acc, classImportName) => ({\n      ...acc,\n      [classImportName]: getUniqueClassName(classImportName),\n    }),\n    {},\n  );\n}\n\nexport default generateClassNames;\n","import camelToKebab from './utils/camelToKebab';\nimport generateClassNames from './utils/generateClassNames';\n\nexport class StyleSheet {\n  private _rulesByModule: Map<object, Playable.ICSSRules> = new Map();\n  private _classNamesByModule: Map<object, Playable.IStyles> = new Map();\n  private _data: any = {};\n  private _styleNode: Element;\n\n  attach() {\n    this._styleNode = this._styleNode || document.createElement('style');\n\n    const discoveredStyles: string[] = [];\n    this._rulesByModule.forEach((_, module) => {\n      discoveredStyles.push(this._getModuleCSS(module));\n    });\n\n    this._styleNode.innerHTML = discoveredStyles.join(' ');\n\n    document.getElementsByTagName('head')[0].appendChild(this._styleNode);\n  }\n\n  update(data: any) {\n    this._data = {\n      ...this._data,\n      ...data,\n    };\n\n    if (this._styleNode) {\n      this.attach();\n    }\n  }\n\n  registerModuleTheme(module: object, rules: Playable.ICSSRules) {\n    //todo maybe we would like to update overrides for module? Or at least show warning instead of Error\n    if (this._rulesByModule.get(module)) {\n      throw new Error('can`t register multiple themes for one module');\n    }\n\n    this._rulesByModule.set(module, rules);\n    this._classNamesByModule.set(module, generateClassNames(rules));\n  }\n\n  getModuleClassNames(module: any): Playable.IStyles {\n    return this._classNamesByModule.get(module);\n  }\n\n  private _getModuleCSS(module: any): string {\n    const moduleRules = this._rulesByModule.get(module);\n    const moduleClassNames = this._classNamesByModule.get(module);\n\n    if (!moduleRules || !moduleClassNames) {\n      return '';\n    }\n\n    return Object.keys(moduleRules)\n      .map(classImportName =>\n        this._getRuleCSS(\n          moduleRules[classImportName],\n          moduleClassNames[classImportName],\n        ),\n      )\n      .join(' ');\n  }\n\n  private _getRuleCSS(rule: Playable.ICSSRule, ruleClassName: string): string {\n    if (!rule || !ruleClassName) {\n      return '';\n    }\n\n    const complexRuleNames = Object.keys(rule)\n      .filter(ruleName => typeof rule[ruleName] === 'object')\n      .map(\n        ruleName => (ruleName.indexOf('&') !== -1 ? ruleName : `& ${ruleName}`),\n      );\n\n    const complexRules = complexRuleNames\n      .map(ruleName => {\n        const selector = ruleName.replace(/&/g, `.${ruleClassName}`);\n        //don't want to allow deep nesting now, maybe later\n        return `${selector} {${this._getRuleStyles(rule[ruleName])}}`;\n      })\n      .join(' ');\n\n    return `.${ruleClassName} {${this._getRuleStyles(rule)}} ${complexRules}`;\n  }\n\n  private _getRuleStyles(rule: any) {\n    const simpleRuleNames: Array<string> = Object.keys(rule).filter(\n      ruleName => typeof rule[ruleName] !== 'object',\n    );\n\n    return simpleRuleNames\n      .map(\n        ruleName =>\n          `${camelToKebab(ruleName)}: ${\n            typeof rule[ruleName] === 'function'\n              ? (rule[ruleName] as Playable.ICSSRuleFunction)(this._data)\n              : rule[ruleName]\n          }`,\n      )\n      .join('; ');\n  }\n}\n","import { StyleSheet } from './style-sheet';\n\nimport playerAPI from '../../../../core/player-api-decorator';\n\nconst DEFAULT_THEME_CONFIG = {\n  color: '#FFF',\n  liveColor: '#ea492e',\n  progressColor: '#FFF',\n};\n\nclass ThemeService implements Playable.IThemeService {\n  static moduleName = 'theme';\n  static dependencies = ['themeConfig'];\n\n  private _styleSheet: StyleSheet;\n\n  constructor({ themeConfig }: { themeConfig: Playable.IThemeConfig }) {\n    this._styleSheet = new StyleSheet();\n\n    this._styleSheet.update({\n      ...DEFAULT_THEME_CONFIG,\n      ...themeConfig,\n    });\n\n    // setTimeout here is for calling `attach` after all modules resolved.\n    window.setTimeout(() => {\n      this._styleSheet && this._styleSheet.attach();\n    }, 0);\n  }\n\n  /**\n   * Method for setting theme for player instance\n   *\n   * @example\n   * player.updateTheme({\n   *   progressColor: \"#AEAD22\"\n   * })\n   * @note\n   *\n   * You can check info about theming [here](/themes)\n   *\n   * @param themeConfig - Theme config\n   *\n   */\n  @playerAPI()\n  updateTheme(themeConfig: Playable.IThemeConfig) {\n    this._styleSheet.update(themeConfig);\n  }\n\n  registerModuleTheme(module: object, rules: Playable.ICSSRules) {\n    this._styleSheet.registerModuleTheme(module, rules);\n  }\n\n  get(module: any) {\n    return this._styleSheet.getModuleClassNames(module);\n  }\n\n  destroy() {\n    this._styleSheet = null;\n  }\n}\n\nexport { DEFAULT_THEME_CONFIG };\n\nexport default ThemeService;\n","import { TEXT_LABELS } from '../../constants';\n\nconst map: Playable.ITextMapConfig = {\n  [TEXT_LABELS.LOGO_LABEL]: 'Watch On Site',\n  [TEXT_LABELS.LOGO_TOOLTIP]: 'Watch On Site',\n  [TEXT_LABELS.LIVE_INDICATOR_TEXT]: ({ isEnded }) =>\n    !isEnded ? 'Live' : 'Live Ended',\n  [TEXT_LABELS.LIVE_SYNC_LABEL]: 'Sync to Live',\n  [TEXT_LABELS.LIVE_SYNC_TOOLTIP]: 'Sync to Live',\n  [TEXT_LABELS.PAUSE_CONTROL_LABEL]: 'Pause',\n  [TEXT_LABELS.PLAY_CONTROL_LABEL]: 'Play',\n  [TEXT_LABELS.PROGRESS_CONTROL_LABEL]: 'Progress control',\n  [TEXT_LABELS.PROGRESS_CONTROL_VALUE]: ({ percent }) =>\n    `Already played ${percent}%`,\n  [TEXT_LABELS.MUTE_CONTROL_LABEL]: 'Mute',\n  [TEXT_LABELS.MUTE_CONTROL_TOOLTIP]: 'Mute',\n  [TEXT_LABELS.UNMUTE_CONTROL_LABEL]: 'Unmute',\n  [TEXT_LABELS.UNMUTE_CONTROL_TOOLTIP]: 'Unmute',\n  [TEXT_LABELS.VOLUME_CONTROL_LABEL]: 'Volume control',\n  [TEXT_LABELS.VOLUME_CONTROL_VALUE]: ({ volume }) => `Volume is ${volume}%`,\n  [TEXT_LABELS.ENTER_FULL_SCREEN_LABEL]: 'Enter full screen mode',\n  [TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP]: 'Enter full screen mode',\n  [TEXT_LABELS.EXIT_FULL_SCREEN_LABEL]: 'Exit full screen mode',\n  [TEXT_LABELS.EXIT_FULL_SCREEN_TOOLTIP]: 'Exit full screen mode',\n};\n\nexport default map;\n","import DEFAULT_TEXTS from './default-texts';\n\nimport { IPlayerConfig } from '../../core/config';\n\nexport default class TextMap implements Playable.ITextMap {\n  static moduleName = 'textMap';\n  static dependencies = ['config'];\n\n  private _textMap: Playable.ITextMapConfig;\n\n  constructor({ config }: { config: IPlayerConfig }) {\n    this._textMap = {\n      ...DEFAULT_TEXTS,\n      ...config.texts,\n    };\n  }\n\n  get(id: string, args: any): string {\n    if (!this._textMap) {\n      return;\n    }\n\n    const text = this._textMap[id];\n\n    if (typeof text === 'function') {\n      return text(args);\n    }\n\n    return text;\n  }\n\n  destroy() {\n    this._textMap = null;\n  }\n}\n","import { IFullScreenHelper } from './types';\r\n\r\nconst fnMap = [\r\n  [\r\n    'requestFullscreen',\r\n    'exitFullscreen',\r\n    'fullscreenElement',\r\n    'fullscreenEnabled',\r\n    'fullscreenchange',\r\n    'fullscreenerror',\r\n  ],\r\n  // new WebKit\r\n  [\r\n    'webkitRequestFullscreen',\r\n    'webkitExitFullscreen',\r\n    'webkitFullscreenElement',\r\n    'webkitFullscreenEnabled',\r\n    'webkitfullscreenchange',\r\n    'webkitfullscreenerror',\r\n  ],\r\n  // old WebKit (Safari 5.1)\r\n  [\r\n    'webkitRequestFullScreen',\r\n    'webkitCancelFullScreen',\r\n    'webkitCurrentFullScreenElement',\r\n    'webkitCancelFullScreen',\r\n    'webkitfullscreenchange',\r\n    'webkitfullscreenerror',\r\n  ],\r\n  [\r\n    'mozRequestFullScreen',\r\n    'mozCancelFullScreen',\r\n    'mozFullScreenElement',\r\n    'mozFullScreenEnabled',\r\n    'mozfullscreenchange',\r\n    'mozfullscreenerror',\r\n  ],\r\n  [\r\n    'msRequestFullscreen',\r\n    'msExitFullscreen',\r\n    'msFullscreenElement',\r\n    'msFullscreenEnabled',\r\n    'MSFullscreenChange',\r\n    'MSFullscreenError',\r\n  ],\r\n];\r\n\r\n/* ignore coverage */\r\nfunction getFullScreenFn(): IFullScreenFnMap | boolean {\r\n  const ret: IFullScreenFnMap = {};\r\n\r\n  for (let i = 0; i < fnMap.length; i += 1) {\r\n    if (fnMap[i][1] in document) {\r\n      for (let j = 0; j < fnMap[i].length; j += 1) {\r\n        ret[fnMap[0][j]] = fnMap[i][j];\r\n      }\r\n      return ret;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\ninterface IFullScreenFnMap {\r\n  [fn: string]: string;\r\n}\r\n\r\nexport default class DesktopFullScreen implements IFullScreenHelper {\r\n  private _elem: HTMLElement;\r\n  private _callback: EventListener;\r\n  private _fullscreenFn: IFullScreenFnMap | boolean;\r\n\r\n  constructor(elem: HTMLElement, callback: EventListener) {\r\n    this._elem = elem;\r\n    this._callback = callback;\r\n    this._fullscreenFn = getFullScreenFn();\r\n\r\n    this._bindEvents();\r\n  }\r\n\r\n  get isAPIExist() {\r\n    return Boolean(this._fullscreenFn);\r\n  }\r\n\r\n  get isInFullScreen() {\r\n    if (typeof this._fullscreenFn === 'boolean') {\r\n      return false;\r\n    }\r\n\r\n    return Boolean((document as any)[this._fullscreenFn.fullscreenElement]);\r\n  }\r\n\r\n  get isEnabled() {\r\n    if (typeof this._fullscreenFn === 'boolean') {\r\n      return false;\r\n    }\r\n\r\n    return (\r\n      this.isAPIExist && (document as any)[this._fullscreenFn.fullscreenEnabled]\r\n    );\r\n  }\r\n\r\n  private _bindEvents() {\r\n    if (typeof this._fullscreenFn === 'boolean') {\r\n      return false;\r\n    }\r\n\r\n    document.addEventListener(\r\n      this._fullscreenFn.fullscreenchange,\r\n      this._callback,\r\n    );\r\n  }\r\n\r\n  private _unbindEvents() {\r\n    if (typeof this._fullscreenFn === 'boolean') {\r\n      return false;\r\n    }\r\n\r\n    document.removeEventListener(\r\n      this._fullscreenFn.fullscreenchange,\r\n      this._callback,\r\n    );\r\n  }\r\n\r\n  request() {\r\n    if (!this.isEnabled) {\r\n      return;\r\n    }\r\n\r\n    const request = (this._fullscreenFn as IFullScreenFnMap).requestFullscreen;\r\n\r\n    // Work around Safari 5.1 bug: reports support for\r\n    // keyboard in fullscreen even though it doesn't.\r\n    // Browser sniffing, since the alternative with\r\n    // setTimeout is even worse.\r\n\r\n    if (/5\\.1[.\\d]* Safari/.test(navigator.userAgent)) {\r\n      (this._elem as any)[request]();\r\n    } else {\r\n      (this._elem as any)[request]((Element as any).ALLOW_KEYBOARD_INPUT);\r\n    }\r\n  }\r\n\r\n  exit() {\r\n    if (!this.isEnabled) {\r\n      return;\r\n    }\r\n\r\n    (document as any)[\r\n      (this._fullscreenFn as IFullScreenFnMap).exitFullscreen\r\n    ]();\r\n  }\r\n\r\n  destroy() {\r\n    this._unbindEvents();\r\n\r\n    this._elem = null;\r\n    this._callback = null;\r\n  }\r\n}\r\n","import { IFullScreenHelper } from './types';\r\n\r\nconst HAVE_METADATA = 1;\r\n\r\nlet isFullScreenRequested = false;\r\n\r\nexport default class IOSFullScreen implements IFullScreenHelper {\r\n  private _elem: HTMLVideoElement;\r\n  private _callback: EventListener;\r\n\r\n  constructor(elem: HTMLVideoElement, callback: EventListener) {\r\n    this._elem = elem;\r\n    this._callback = callback;\r\n\r\n    this._bindEvents();\r\n\r\n    this._enterWhenHasMetaData = this._enterWhenHasMetaData.bind(this);\r\n  }\r\n\r\n  get isAPIExist() {\r\n    return Boolean(this._elem && this._elem.webkitSupportsFullscreen);\r\n  }\r\n\r\n  get isInFullScreen() {\r\n    return Boolean(this._elem && this._elem.webkitDisplayingFullscreen);\r\n  }\r\n\r\n  get isEnabled() {\r\n    return this.isAPIExist;\r\n  }\r\n\r\n  private _bindEvents() {\r\n    this._elem.addEventListener('webkitbeginfullscreen', this._callback);\r\n    this._elem.addEventListener('webkitendfullscreen', this._callback);\r\n  }\r\n\r\n  private _unbindEvents() {\r\n    this._elem.removeEventListener('webkitbeginfullscreen', this._callback);\r\n    this._elem.removeEventListener('webkitendfullscreen', this._callback);\r\n\r\n    this._elem.removeEventListener(\r\n      'loadedmetadata',\r\n      this._enterWhenHasMetaData,\r\n    );\r\n  }\r\n\r\n  private _enterWhenHasMetaData() {\r\n    this._elem.removeEventListener(\r\n      'loadedmetadata',\r\n      this._enterWhenHasMetaData,\r\n    );\r\n\r\n    isFullScreenRequested = false;\r\n\r\n    this._elem.webkitEnterFullscreen();\r\n  }\r\n\r\n  request() {\r\n    if (!this.isEnabled || this.isInFullScreen) {\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      this._elem.webkitEnterFullscreen();\r\n    } catch (e) {\r\n      if (this._elem.readyState < HAVE_METADATA) {\r\n        if (isFullScreenRequested) {\r\n          return;\r\n        }\r\n        this._elem.addEventListener(\r\n          'loadedmetadata',\r\n          this._enterWhenHasMetaData,\r\n        );\r\n        isFullScreenRequested = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  exit() {\r\n    if (!this.isEnabled || !this.isInFullScreen) {\r\n      return false;\r\n    }\r\n\r\n    this._elem.webkitExitFullscreen();\r\n  }\r\n\r\n  destroy() {\r\n    this._unbindEvents();\r\n\r\n    this._elem = null;\r\n    this._callback = null;\r\n  }\r\n}\r\n","import { isIOS } from '../../utils/device-detection';\nimport playerAPI from '../../core/player-api-decorator';\nimport DesktopFullScreen from './desktop';\nimport IOSFullScreen from './ios';\n\nimport { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../constants';\nimport {\n  IFullScreenManager,\n  IFullScreenHelper,\n  IFullScreenConfig,\n} from './types';\nimport { IEventEmitter } from '../event-emitter/types';\nimport { IPlaybackEngine } from '../playback-engine/types';\nimport { IPlayerConfig } from '../../core/config';\n\nconst DEFAULT_CONFIG: IFullScreenConfig = {\n  exitFullScreenOnEnd: true,\n  enterFullScreenOnPlay: false,\n  exitFullScreenOnPause: false,\n  pauseVideoOnFullScreenExit: false,\n};\n\nexport default class FullScreenManager implements IFullScreenManager {\n  static moduleName = 'fullScreenManager';\n  static dependencies = ['eventEmitter', 'engine', 'rootContainer', 'config'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _helper: IFullScreenHelper;\n\n  private _exitFullScreenOnEnd: boolean = false;\n  private _enterFullScreenOnPlay: boolean = false;\n  private _exitFullScreenOnPause: boolean = false;\n  private _pauseVideoOnFullScreenExit: boolean = false;\n\n  private _isEnabled: boolean;\n\n  private _unbindEvents: Function;\n\n  constructor({\n    eventEmitter,\n    engine,\n    rootContainer,\n    config,\n  }: {\n    engine: IPlaybackEngine;\n    eventEmitter: IEventEmitter;\n    rootContainer: Playable.IRootContainer;\n    config: IPlayerConfig;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n\n    if (config.fullScreen === false) {\n      this._isEnabled = false;\n    } else {\n      this._isEnabled = true;\n      const _config: IFullScreenConfig = {\n        ...DEFAULT_CONFIG,\n        ...(typeof config.fullScreen === 'object' ? config.fullScreen : {}),\n      };\n\n      this._exitFullScreenOnEnd = _config.exitFullScreenOnEnd;\n      this._enterFullScreenOnPlay = _config.enterFullScreenOnPlay;\n      this._exitFullScreenOnPause = _config.exitFullScreenOnPause;\n      this._pauseVideoOnFullScreenExit = _config.pauseVideoOnFullScreenExit;\n    }\n    this._onChange = this._onChange.bind(this);\n\n    if (isIOS()) {\n      this._helper = new IOSFullScreen(this._engine.getNode(), this._onChange);\n    } else {\n      this._helper = new DesktopFullScreen(rootContainer.node, this._onChange);\n    }\n\n    this._bindEvents();\n  }\n\n  private _onChange() {\n    if (!this._helper.isInFullScreen && this._pauseVideoOnFullScreenExit) {\n      this._engine.pause();\n    }\n    this._eventEmitter.emit(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this._helper.isInFullScreen,\n    );\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._processNextStateFromEngine],\n        [VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED, this._enterOnPlayRequested],\n      ],\n      this,\n    );\n  }\n\n  private _exitOnEnd() {\n    if (this._exitFullScreenOnEnd && this.isInFullScreen) {\n      this.exitFullScreen();\n    }\n  }\n\n  private _enterOnPlayRequested() {\n    if (this._enterFullScreenOnPlay && !this.isInFullScreen) {\n      this.enterFullScreen();\n    }\n  }\n\n  private _exitOnPauseRequested() {\n    if (this._exitFullScreenOnPause && this.isInFullScreen) {\n      this.exitFullScreen();\n    }\n  }\n\n  private _processNextStateFromEngine({\n    nextState,\n  }: {\n    nextState: EngineState;\n  }) {\n    switch (nextState) {\n      case EngineState.ENDED: {\n        this._exitOnEnd();\n        break;\n      }\n      case EngineState.PAUSED: {\n        this._exitOnPauseRequested();\n        break;\n      }\n\n      /* ignore coverage */\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Player would try to enter fullscreen mode.\n   * Behavior of fullscreen mode on different platforms may differ.\n   * @example\n   * player.enterFullScreen();\n   */\n  @playerAPI()\n  enterFullScreen() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    this._helper.request();\n  }\n\n  /**\n   * Player would try to exit fullscreen mode.\n   * @example\n   * player.exitFullScreen();\n   */\n  @playerAPI()\n  exitFullScreen() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    this._helper.exit();\n  }\n\n  /**\n   * Return true if player is in full screen\n   * @example\n   * console.log(player.isInFullScreen); // false\n   */\n  @playerAPI()\n  get isInFullScreen(): boolean {\n    if (!this.isEnabled) {\n      return false;\n    }\n\n    return this._helper.isInFullScreen;\n  }\n\n  get isEnabled() {\n    return this._helper.isEnabled && this._isEnabled;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._helper.destroy();\n    this._helper = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import {\r\n  EngineState,\r\n  VIDEO_EVENTS,\r\n  LiveState,\r\n  UI_EVENTS,\r\n} from '../../constants';\r\n\r\nimport { IEventEmitter, IEventMap } from '../event-emitter/types';\r\nimport { ILiveStateEngineDependencies, IPlaybackEngine } from './types';\r\n\r\nconst SEEK_BY_UI_EVENTS = [\r\n  UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,\r\n  UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\r\n  UI_EVENTS.PROGRESS_CHANGE_TRIGGERED,\r\n];\r\n\r\nclass LiveStateEngine {\r\n  static moduleName = 'liveStateEngine';\r\n  static dependencies = ['eventEmitter', 'engine'];\r\n\r\n  private _eventEmitter: IEventEmitter;\r\n  private _engine: IPlaybackEngine;\r\n  private _state: LiveState;\r\n\r\n  private _isSeekedByUIWhilePlaying: boolean;\r\n\r\n  private _unbindEvents: Function;\r\n\r\n  constructor({ eventEmitter, engine }: ILiveStateEngineDependencies) {\r\n    this._eventEmitter = eventEmitter;\r\n    this._engine = engine;\r\n    this._state = LiveState.NONE;\r\n\r\n    this._isSeekedByUIWhilePlaying = null;\r\n\r\n    this._bindEvents();\r\n  }\r\n\r\n  get state(): LiveState {\r\n    return this._state;\r\n  }\r\n\r\n  private _bindEvents() {\r\n    this._unbindEvents = this._eventEmitter.bindEvents(\r\n      [\r\n        [VIDEO_EVENTS.STATE_CHANGED, this._processStateChange],\r\n        ...SEEK_BY_UI_EVENTS.map(\r\n          eventName => [eventName, this._processSeekByUI] as IEventMap,\r\n        ),\r\n        [VIDEO_EVENTS.DYNAMIC_CONTENT_ENDED, this._onDynamicContentEnded],\r\n      ],\r\n      this,\r\n    );\r\n  }\r\n\r\n  private _processStateChange({\r\n    prevState,\r\n    nextState,\r\n  }: {\r\n    prevState: EngineState;\r\n    nextState: EngineState;\r\n  }) {\r\n    if (nextState === EngineState.SRC_SET) {\r\n      this._setState(LiveState.NONE);\r\n      return;\r\n    }\r\n\r\n    if (!this._engine.isDynamicContent || this._engine.isDynamicContentEnded) {\r\n      return;\r\n    }\r\n\r\n    switch (nextState) {\r\n      case EngineState.METADATA_LOADED:\r\n        this._setState(LiveState.INITIAL);\r\n        break;\r\n\r\n      case EngineState.PLAY_REQUESTED:\r\n        if (this._state === LiveState.INITIAL) {\r\n          this._engine.syncWithLive();\r\n        }\r\n        break;\r\n\r\n      case EngineState.PLAYING:\r\n        // NOTE: skip PLAYING event after events like `WAITING` and other not important events.\r\n        if (\r\n          this._state === LiveState.INITIAL ||\r\n          this._state === LiveState.NOT_SYNC ||\r\n          this._isSeekedByUIWhilePlaying\r\n        ) {\r\n          this._setState(\r\n            this._engine.isSyncWithLive ? LiveState.SYNC : LiveState.NOT_SYNC,\r\n          );\r\n          this._isSeekedByUIWhilePlaying = false;\r\n        }\r\n        break;\r\n\r\n      case EngineState.PAUSED:\r\n        // NOTE: process `PAUSED` event only `PLAYING`, to be sure its not related with `WAITING` events\r\n        if (prevState === EngineState.PLAYING) {\r\n          this._setState(LiveState.NOT_SYNC);\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  private _processSeekByUI() {\r\n    if (\r\n      this._engine.isDynamicContent &&\r\n      this._engine.getCurrentState() === EngineState.PLAYING\r\n    ) {\r\n      // NOTE: flag should be handled on `PLAYING` state in `_processStateChange`\r\n      this._isSeekedByUIWhilePlaying = true;\r\n    }\r\n  }\r\n\r\n  private _onDynamicContentEnded() {\r\n    this._setState(LiveState.ENDED);\r\n  }\r\n\r\n  private _setState(state: LiveState) {\r\n    if (this._state !== state) {\r\n      const prevState = this._state;\r\n      const nextState = state;\r\n\r\n      this._state = state;\r\n      this._eventEmitter.emit(VIDEO_EVENTS.LIVE_STATE_CHANGED, {\r\n        prevState,\r\n        nextState,\r\n      });\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this._unbindEvents();\r\n    this._eventEmitter = null;\r\n    this._engine = null;\r\n    this._state = null;\r\n  }\r\n}\r\n\r\nexport default LiveStateEngine;\r\n","import { EventEmitter, ListenerFn } from 'eventemitter3';\r\n\r\nexport const KEYCODES = {\r\n  SPACE_BAR: 32,\r\n  ENTER: 13,\r\n  TAB: 9,\r\n  LEFT_ARROW: 37,\r\n  RIGHT_ARROW: 39,\r\n  UP_ARROW: 38,\r\n  DOWN_ARROW: 40,\r\n  DEBUG_KEY: 68,\r\n};\r\n\r\ninterface ICallbacks {\r\n  [keyCode: string]: ListenerFn;\r\n}\r\n\r\nexport default class KeyboardInterceptorCore {\r\n  //TODO: Find how to set proper types here\r\n  private _eventEmitter: any;\r\n  private _node: HTMLElement;\r\n\r\n  constructor(node: HTMLElement, callbacks?: ICallbacks) {\r\n    this._eventEmitter = new EventEmitter();\r\n    this._node = node;\r\n\r\n    callbacks && this._attachCallbacks(callbacks);\r\n    this._bindCallbacks();\r\n    this._bindEvents();\r\n  }\r\n\r\n  private _attachCallbacks(callbacks: ICallbacks) {\r\n    Object.keys(callbacks).forEach((keyCode: string) => {\r\n      const keyCodeCallbacks = callbacks[keyCode];\r\n      if (Array.isArray(keyCodeCallbacks)) {\r\n        keyCodeCallbacks.forEach(callback =>\r\n          this._eventEmitter.on(keyCode, callback),\r\n        );\r\n      } else {\r\n        this._eventEmitter.on(keyCode, keyCodeCallbacks);\r\n      }\r\n    });\r\n  }\r\n\r\n  private _unattachCallbacks() {\r\n    this._eventEmitter.removeAllListeners();\r\n  }\r\n\r\n  private _bindCallbacks() {\r\n    this._processKeyboardInput = this._processKeyboardInput.bind(this);\r\n  }\r\n\r\n  private _bindEvents() {\r\n    this._node.addEventListener('keydown', this._processKeyboardInput, false);\r\n  }\r\n\r\n  private _unbindEvents() {\r\n    this._node.removeEventListener(\r\n      'keydown',\r\n      this._processKeyboardInput,\r\n      false,\r\n    );\r\n  }\r\n\r\n  addCallbacks(callbacks: ICallbacks) {\r\n    this._attachCallbacks(callbacks);\r\n  }\r\n\r\n  private _processKeyboardInput(e: KeyboardEvent) {\r\n    this._eventEmitter.emit(e.keyCode, e);\r\n  }\r\n\r\n  destroy() {\r\n    this._unbindEvents();\r\n    this._unattachCallbacks();\r\n    this._eventEmitter = null;\r\n\r\n    this._node = null;\r\n  }\r\n}\r\n","import { UI_EVENTS } from '../../constants';\nimport {\n  isIPhone,\n  isIPod,\n  isIPad,\n  isAndroid,\n} from '../../utils/device-detection';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../utils/keyboard-interceptor';\n\nimport { IEventEmitter } from '../event-emitter/types';\nimport { IPlaybackEngine } from '../playback-engine/types';\nimport { IPlayerConfig } from '../../core/config';\nimport { IKeyboardControl } from './types';\nimport { ListenerFn } from 'eventemitter3';\n\nexport const AMOUNT_TO_SKIP_SECONDS = 5;\nexport const AMOUNT_TO_CHANGE_VOLUME = 10;\n\nexport default class KeyboardControl implements IKeyboardControl {\n  static moduleName = 'keyboardControl';\n  static dependencies = ['engine', 'eventEmitter', 'rootContainer', 'config'];\n\n  private _isEnabled: boolean;\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _rootNode: HTMLElement;\n  private _keyboardInterceptor: KeyboardInterceptor;\n\n  constructor({\n    config,\n    eventEmitter,\n    rootContainer,\n    engine,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    rootContainer: Playable.IRootContainer;\n    engine: IPlaybackEngine;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._rootNode = rootContainer.node;\n\n    if (isIPhone() || isIPod() || isIPad() || isAndroid()) {\n      this._isEnabled = false;\n    } else {\n      this._isEnabled = config.disableControlWithKeyboard !== false;\n    }\n\n    this._initInterceptor();\n  }\n\n  private _initInterceptor() {\n    if (this._isEnabled) {\n      this._keyboardInterceptor = new KeyboardInterceptor(this._rootNode);\n      this._attachDefaultControls();\n    }\n  }\n\n  private _attachDefaultControls() {\n    this._keyboardInterceptor.addCallbacks({\n      [KEYCODES.TAB]: () => {\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n      },\n      [KEYCODES.SPACE_BAR]: e => {\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.togglePlayback();\n      },\n      [KEYCODES.LEFT_ARROW]: e => {\n        if (this._engine.isSeekAvailable) {\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n          );\n          this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n        }\n      },\n      [KEYCODES.RIGHT_ARROW]: e => {\n        if (this._engine.isSeekAvailable) {\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n          this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n        }\n      },\n      [KEYCODES.UP_ARROW]: e => {\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.increaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n      [KEYCODES.DOWN_ARROW]: e => {\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.decreaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    if (this._keyboardInterceptor) {\n      this._keyboardInterceptor.destroy();\n    }\n  }\n\n  addKeyControl(key: number, callback: ListenerFn) {\n    if (this._isEnabled) {\n      this._keyboardInterceptor.addCallbacks({\n        [key]: callback,\n      });\n    }\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n\n    this._rootNode = null;\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","function getElementByHook(element: HTMLElement, hook: string): HTMLElement {\r\n  return element.querySelector(`[data-hook=\"${hook}\"]`);\r\n}\r\n\r\nexport default getElementByHook;\r\n","function toggleNodeClass(\r\n  node: HTMLElement,\r\n  className: string,\r\n  shouldAdd: boolean,\r\n) {\r\n  if (shouldAdd) {\r\n    node.classList.add(className);\r\n  } else {\r\n    node.classList.remove(className);\r\n  }\r\n}\r\n\r\nexport default toggleNodeClass;\r\n","import View from '../core/view';\n\nimport { debugPanelTemplate } from './templates';\n\nimport syntaxHighlight from './syntaxHighlight';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  IDebugPanelViewStyles,\n  IDebugPanelViewCallbacks,\n  IDebugPanelViewConfig,\n} from './types';\n\nimport styles from './debug-panel.scss';\n\nclass DebugPanelView extends View<IDebugPanelViewStyles>\n  implements Playable.IView<IDebugPanelViewStyles> {\n  private _callbacks: IDebugPanelViewCallbacks;\n\n  private _$node: HTMLElement;\n  private _$infoContainer: HTMLElement;\n  private _$closeButton: HTMLElement;\n\n  constructor(config: IDebugPanelViewConfig) {\n    super();\n    const { callbacks } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      debugPanelTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._$closeButton = getElementByHook(\n      this._$node,\n      'debug-panel-close-button',\n    );\n    this._$infoContainer = getElementByHook(\n      this._$node,\n      'debug-panel-info-container',\n    );\n  }\n\n  private _bindEvents() {\n    this._$closeButton.addEventListener(\n      'click',\n      this._callbacks.onCloseButtonClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$closeButton.removeEventListener(\n      'click',\n      this._callbacks.onCloseButtonClick,\n    );\n  }\n\n  show() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, false);\n  }\n\n  hide() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, true);\n  }\n\n  setInfo(info: any) {\n    this._$infoContainer.innerHTML = syntaxHighlight(\n      JSON.stringify(info, undefined, 4),\n      this.styleNames,\n    );\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$closeButton = null;\n    this._$infoContainer = null;\n\n    this._callbacks = null;\n  }\n}\n\nDebugPanelView.extendStyleNames(styles);\n\nexport default DebugPanelView;\n","import { IDebugPanelHighlightStyles } from './types';\r\n\r\nfunction syntaxHighlight(json: string, styleNames: IDebugPanelHighlightStyles) {\r\n  json = json\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;');\r\n\r\n  return json.replace(\r\n    /(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g,\r\n    (match: string) => {\r\n      let cls = styleNames.number;\r\n      if (/^\"/.test(match)) {\r\n        if (/:$/.test(match)) {\r\n          cls = styleNames.key;\r\n        } else {\r\n          cls = styleNames.string;\r\n        }\r\n      } else if (/true|false/.test(match)) {\r\n        cls = styleNames.boolean;\r\n      } else if (/null/.test(match)) {\r\n        cls = styleNames.null;\r\n      }\r\n      return `<span class=\"${cls}\">${match}</span>`;\r\n    },\r\n  );\r\n}\r\n\r\nexport default syntaxHighlight;\r\n","import { MediaStreamDeliveryPriority } from '../../../constants';\nimport View from './debug-panel.view';\n\nimport { KEYCODES } from '../../../utils/keyboard-interceptor';\n\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IKeyboardControl } from '../../keyboard-control/types';\n\nconst UPDATE_TIME = 1000;\n\nexport default class DebugPanel {\n  static moduleName = 'debugPanel';\n  static View = View;\n  static dependencies = ['engine', 'rootContainer', 'keyboardControl'];\n\n  private _engine: IPlaybackEngine;\n\n  private _interval: number;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    rootContainer,\n    keyboardControl,\n  }: {\n    engine: IPlaybackEngine;\n    rootContainer: Playable.IRootContainer;\n    keyboardControl: IKeyboardControl;\n  }) {\n    this._engine = engine;\n\n    this._bindCallbacks();\n    this._initUI();\n\n    this.hide();\n\n    rootContainer.appendComponentNode(this.node);\n\n    keyboardControl.addKeyControl(KEYCODES.DEBUG_KEY, this._keyControlCallback);\n  }\n\n  private _keyControlCallback(e: KeyboardEvent) {\n    if (e.ctrlKey && e.shiftKey) {\n      this.show();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    this.view = new View({\n      callbacks: {\n        onCloseButtonClick: this.hide,\n      },\n    });\n  }\n\n  private _bindCallbacks() {\n    this.updateInfo = this.updateInfo.bind(this);\n    this.hide = this.hide.bind(this);\n    this._keyControlCallback = this._keyControlCallback.bind(this);\n  }\n\n  getDebugInfo() {\n    const {\n      url,\n      type,\n      deliveryPriority,\n      currentBitrate,\n      overallBufferLength,\n      nearestBufferSegInfo,\n      viewDimensions,\n      currentTime,\n      duration,\n      loadingStateTimestamps,\n      bitrates,\n      bwEstimate,\n    } = this._engine.getDebugInfo();\n\n    return {\n      url,\n      type,\n      deliveryPriority: MediaStreamDeliveryPriority[deliveryPriority],\n      currentBitrate,\n      overallBufferLength,\n      nearestBufferSegInfo,\n      viewDimensions,\n      currentTime,\n      duration,\n      loadingStateTimestamps,\n      bitrates,\n      bwEstimate,\n    };\n  }\n\n  updateInfo() {\n    this.view.setInfo(this.getDebugInfo());\n  }\n\n  setUpdateInterval() {\n    this.clearUpdateInterval();\n    this._interval = window.setInterval(this.updateInfo, UPDATE_TIME);\n  }\n\n  clearUpdateInterval() {\n    window.clearInterval(this._interval);\n  }\n\n  show() {\n    if (this.isHidden) {\n      this.updateInfo();\n      this.setUpdateInterval();\n      this.view.show();\n      this.isHidden = false;\n    }\n  }\n\n  hide() {\n    if (!this.isHidden) {\n      this.clearUpdateInterval();\n      this.view.hide();\n      this.isHidden = true;\n    }\n  }\n\n  destroy() {\n    this.clearUpdateInterval();\n\n    this.view.destroy();\n    this.view = null;\n  }\n}\n","type IScreenViewStyles = {\r\n  screen: string;\r\n  screenTopBackground: string;\r\n  screenBottomBackground: string;\r\n  hidden: string;\r\n  visible: string;\r\n  hiddenCursor: string;\r\n  horizontalVideo: string;\r\n  verticalVideo: string;\r\n  fillMode: string;\r\n  blurMode: string;\r\n  regularMode: string;\r\n};\r\n\r\ntype IScreenViewCallbacks = {\r\n  onWrapperMouseClick: EventListenerOrEventListenerObject;\r\n  onWrapperMouseDblClick: EventListenerOrEventListenerObject;\r\n};\r\n\r\ntype IScreenViewConfig = {\r\n  callbacks: IScreenViewCallbacks;\r\n  playbackViewNode: HTMLElement;\r\n  nativeControls: boolean;\r\n};\r\n\r\ninterface IScreenConfig {\r\n  disableClickProcessing?: boolean;\r\n  nativeControls?: boolean;\r\n}\r\n\r\nenum VideoViewMode {\r\n  REGULAR = 'REGULAR',\r\n  BLUR = 'BLUR',\r\n  FILL = 'FILL',\r\n}\r\n\r\ninterface IScreen {\r\n  node: HTMLElement;\r\n  showCursor(): void;\r\n  hideCursor(): void;\r\n\r\n  show(): void;\r\n  hide(): void;\r\n\r\n  setVideoViewMode(viewMode: VideoViewMode): void;\r\n\r\n  destroy(): void;\r\n}\r\n\r\nexport {\r\n  IScreen,\r\n  VideoViewMode,\r\n  IScreenConfig,\r\n  IScreenViewStyles,\r\n  IScreenViewCallbacks,\r\n  IScreenViewConfig,\r\n};\r\n","import View from '../core/view';\n\nimport { screenTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  VideoViewMode,\n  IScreenViewStyles,\n  IScreenViewCallbacks,\n  IScreenViewConfig,\n} from './types';\n\nimport styles from './screen.scss';\n\nclass ScreenView extends View<IScreenViewStyles>\n  implements Playable.IView<IScreenViewStyles> {\n  private _callbacks: IScreenViewCallbacks;\n\n  private _$node: HTMLElement;\n  private _$canvas: HTMLCanvasElement;\n  private _$playbackNode: HTMLVideoElement;\n  private _ctx: CanvasRenderingContext2D;\n\n  private _widthHeightRatio: number;\n  private _requestAnimationFrameID: number;\n  private _currentMode: string;\n  private _styleNamesByViewMode: any;\n\n  constructor(config: IScreenViewConfig) {\n    super();\n    const { callbacks, nativeControls, playbackViewNode } = config;\n\n    this._callbacks = callbacks;\n\n    this._styleNamesByViewMode = {\n      [VideoViewMode.REGULAR]: this.styleNames.regularMode,\n      [VideoViewMode.BLUR]: this.styleNames.blurMode,\n      [VideoViewMode.FILL]: this.styleNames.fillMode,\n    };\n\n    this._bindCallbacks();\n\n    if (nativeControls) {\n      playbackViewNode.setAttribute('controls', 'true');\n    }\n\n    this._initDOM(playbackViewNode);\n    this._bindEvents();\n    this.setViewMode(VideoViewMode.REGULAR);\n  }\n\n  private _bindCallbacks() {\n    this._updateBackground = this._updateBackground.bind(this);\n  }\n\n  private _initDOM(playbackViewNode: HTMLElement) {\n    this._$node = htmlToElement(\n      screenTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._$playbackNode = playbackViewNode as HTMLVideoElement;\n    this._$node.appendChild(playbackViewNode);\n\n    this._$canvas = getElementByHook(\n      this._$node,\n      'background-canvas',\n    ) as HTMLCanvasElement;\n    this._ctx = this._$canvas.getContext('2d');\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._callbacks.onWrapperMouseClick);\n    this._$node.addEventListener(\n      'dblclick',\n      this._callbacks.onWrapperMouseDblClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener(\n      'click',\n      this._callbacks.onWrapperMouseClick,\n    );\n    this._$node.removeEventListener(\n      'dblclick',\n      this._callbacks.onWrapperMouseDblClick,\n    );\n  }\n\n  updateVideoAspectRatio(widthHeightRatio: number) {\n    this._widthHeightRatio = widthHeightRatio;\n    const isHorizontal = this._widthHeightRatio > 1;\n    toggleNodeClass(this._$node, this.styleNames.horizontalVideo, isHorizontal);\n    toggleNodeClass(this._$node, this.styleNames.verticalVideo, !isHorizontal);\n  }\n\n  focusOnNode() {\n    this._$node.focus();\n  }\n\n  show() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, false);\n  }\n\n  hide() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, true);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  appendComponentNode(node: HTMLElement) {\n    this._$node.appendChild(node);\n  }\n\n  hideCursor() {\n    toggleNodeClass(this._$node, this.styleNames.hiddenCursor, true);\n  }\n\n  showCursor() {\n    toggleNodeClass(this._$node, this.styleNames.hiddenCursor, false);\n  }\n\n  setViewMode(viewMode: VideoViewMode) {\n    if (this._styleNamesByViewMode[viewMode]) {\n      this.resetBackground();\n\n      Object.keys(this._styleNamesByViewMode).forEach(mode => {\n        toggleNodeClass(this._$node, this._styleNamesByViewMode[mode], false);\n      });\n\n      toggleNodeClass(this._$node, this._styleNamesByViewMode[viewMode], true);\n\n      if (viewMode === VideoViewMode.BLUR) {\n        this._startUpdatingBackground();\n      } else {\n        this._stopUpdatingBackground();\n      }\n\n      this._currentMode = viewMode;\n    }\n  }\n\n  setBackgroundSize(width: number, height: number) {\n    this.setBackgroundWidth(width);\n    this.setBackgroundHeight(height);\n  }\n\n  setBackgroundWidth(width: number) {\n    this._$canvas.width = width;\n  }\n\n  setBackgroundHeight(height: number) {\n    this._$canvas.height = height;\n  }\n\n  private _startUpdatingBackground() {\n    if (!this._requestAnimationFrameID) {\n      this._updateBackground();\n    }\n  }\n\n  private _stopUpdatingBackground() {\n    if (this._requestAnimationFrameID) {\n      cancelAnimationFrame(this._requestAnimationFrameID);\n      this._requestAnimationFrameID = null;\n    }\n  }\n\n  resetAspectRatio() {\n    const { videoWidth, videoHeight } = this._$playbackNode;\n    this._widthHeightRatio = videoHeight ? videoWidth / videoHeight : 0;\n    const isHorizontal = this._widthHeightRatio > 1;\n    toggleNodeClass(this._$node, this.styleNames.horizontalVideo, isHorizontal);\n    toggleNodeClass(this._$node, this.styleNames.verticalVideo, !isHorizontal);\n  }\n\n  resetBackground() {\n    if (this._currentMode === VideoViewMode.BLUR) {\n      this._clearBackground();\n    }\n  }\n\n  private _getSourceAreas(width: number, height: number): number[][] {\n    if (this._widthHeightRatio > 1) {\n      return [[0, 0, width, 1], [0, height - 1, width, 1]];\n    }\n\n    return [[0, 0, 1, height], [width - 1, 0, 1, height]];\n  }\n\n  private _getCanvasAreas(width: number, height: number): number[][] {\n    if (this._widthHeightRatio > 1) {\n      return [[0, 0, width, height / 2], [0, height / 2, width, height / 2]];\n    }\n\n    return [[0, 0, width / 2, height], [width / 2, 0, width / 2, height]];\n  }\n\n  private _drawAreaFromSource(source: number[], area: number[]) {\n    const [sourceX, sourceY, sourceWidth, sourceHeight] = source;\n    const [areaX, areaY, areaWidth, areaHeight] = area;\n\n    this._ctx.drawImage(\n      this._$playbackNode,\n\n      sourceX,\n      sourceY,\n      sourceWidth,\n      sourceHeight,\n\n      areaX,\n      areaY,\n      areaWidth,\n      areaHeight,\n    );\n  }\n  private _drawBackground() {\n    const { videoWidth, videoHeight } = this._$playbackNode;\n    const canvasWidth: number = this._$canvas.width;\n    const canvasHeight: number = this._$canvas.height;\n    const sourceAreas: number[][] = this._getSourceAreas(\n      videoWidth,\n      videoHeight,\n    );\n    const canvasAreas: number[][] = this._getCanvasAreas(\n      canvasWidth,\n      canvasHeight,\n    );\n\n    this._drawAreaFromSource(sourceAreas[0], canvasAreas[0]);\n    this._drawAreaFromSource(sourceAreas[1], canvasAreas[1]);\n  }\n\n  private _updateBackground() {\n    this._drawBackground();\n\n    this._requestAnimationFrameID = requestAnimationFrame(\n      this._updateBackground,\n    );\n  }\n\n  private _clearBackground() {\n    this._ctx.clearRect(0, 0, this._$canvas.width, this._$canvas.height);\n  }\n\n  destroy() {\n    this._stopUpdatingBackground();\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$playbackNode = null;\n    this._$canvas = null;\n    this._ctx = null;\n\n    this._callbacks = null;\n  }\n}\n\nScreenView.extendStyleNames(styles);\n\nexport default ScreenView;\n","import { UI_EVENTS, EngineState } from '../../../constants';\n\nimport View from './screen.view';\n\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IFullScreenManager } from '../../full-screen-manager/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IInteractionIndicator } from '../interaction-indicator/types';\nimport { IPlayerConfig } from '../../../core/config';\nimport {\n  IScreen,\n  VideoViewMode,\n  IScreenConfig,\n  IScreenViewConfig,\n} from './types';\n\nconst PLAYBACK_CHANGE_TIMEOUT = 300;\n\nconst DEFAULT_CONFIG: IScreenConfig = {\n  disableClickProcessing: false,\n  nativeControls: false,\n};\n\nexport default class Screen implements IScreen {\n  static moduleName = 'screen';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'config',\n    'fullScreenManager',\n    'interactionIndicator',\n    'rootContainer',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _fullScreenManager: IFullScreenManager;\n  private _interactionIndicator: IInteractionIndicator;\n\n  private _delayedToggleVideoPlaybackTimeout: number;\n\n  private _isClickProcessingDisabled: boolean;\n  private _isInFullScreen: boolean;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    fullScreenManager,\n    interactionIndicator,\n    rootContainer,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    fullScreenManager: IFullScreenManager;\n    interactionIndicator: IInteractionIndicator;\n    rootContainer: Playable.IRootContainer;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._fullScreenManager = fullScreenManager;\n    this._interactionIndicator = interactionIndicator;\n\n    this._isInFullScreen = false;\n    this.isHidden = false;\n\n    this._delayedToggleVideoPlaybackTimeout = null;\n\n    const screenConfig = {\n      ...DEFAULT_CONFIG,\n      ...config.screen,\n    };\n\n    this._isClickProcessingDisabled = screenConfig.disableClickProcessing;\n\n    this._bindCallbacks();\n    this._initUI(screenConfig.nativeControls);\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.node);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._processNodeClick = this._processNodeClick.bind(this);\n    this._processNodeDblClick = this._processNodeDblClick.bind(this);\n    this._toggleVideoPlayback = this._toggleVideoPlayback.bind(this);\n  }\n\n  private _initUI(isNativeControls: boolean) {\n    const config: IScreenViewConfig = {\n      nativeControls: isNativeControls,\n      callbacks: {\n        onWrapperMouseClick: this._processNodeClick,\n        onWrapperMouseDblClick: this._processNodeDblClick,\n      },\n      playbackViewNode: this._engine.getNode(),\n    };\n\n    this.view = new View(config);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this._setFullScreenStatus],\n        [UI_EVENTS.PLAY_OVERLAY_TRIGGERED, this.view.focusOnNode, this.view],\n        [UI_EVENTS.RESIZE, this._updateBackgroundSize],\n        [EngineState.SRC_SET, this.view.resetBackground, this.view],\n        [EngineState.METADATA_LOADED, this.view.resetAspectRatio, this.view],\n      ],\n      this,\n    );\n  }\n\n  private _updateBackgroundSize({\n    width,\n    height,\n  }: {\n    width: number;\n    height: number;\n  }) {\n    this.view.setBackgroundSize(width, height);\n  }\n\n  showCursor() {\n    this.view.showCursor();\n  }\n\n  hideCursor() {\n    this.view.hideCursor();\n  }\n\n  private _setFullScreenStatus(isInFullScreen: boolean) {\n    this._isInFullScreen = isInFullScreen;\n  }\n\n  private _processNodeClick() {\n    if (this._isClickProcessingDisabled) {\n      return;\n    }\n\n    this._showPlaybackChangeIndicator();\n\n    if (!this._fullScreenManager.isEnabled) {\n      this._toggleVideoPlayback();\n    } else {\n      this._setDelayedPlaybackToggle();\n    }\n  }\n\n  private _processNodeDblClick() {\n    if (this._isClickProcessingDisabled) {\n      return;\n    }\n\n    if (this._fullScreenManager.isEnabled) {\n      if (this._isDelayedPlaybackToggleExist) {\n        this._clearDelayedPlaybackToggle();\n        this._hideDelayedPlaybackChangeIndicator();\n      }\n\n      this._toggleFullScreen();\n    }\n  }\n\n  private _showPlaybackChangeIndicator() {\n    const state = this._engine.getCurrentState();\n\n    if (state === EngineState.PLAY_REQUESTED || state === EngineState.PLAYING) {\n      this._interactionIndicator.showPause();\n    } else {\n      this._interactionIndicator.showPlay();\n    }\n  }\n\n  private _hideDelayedPlaybackChangeIndicator() {\n    this._interactionIndicator.hideIcons();\n  }\n\n  private _setDelayedPlaybackToggle() {\n    this._clearDelayedPlaybackToggle();\n\n    this._delayedToggleVideoPlaybackTimeout = window.setTimeout(\n      this._toggleVideoPlayback,\n      PLAYBACK_CHANGE_TIMEOUT,\n    );\n  }\n\n  private _clearDelayedPlaybackToggle() {\n    window.clearTimeout(this._delayedToggleVideoPlaybackTimeout);\n    this._delayedToggleVideoPlaybackTimeout = null;\n  }\n\n  private get _isDelayedPlaybackToggleExist() {\n    return Boolean(this._delayedToggleVideoPlaybackTimeout);\n  }\n\n  private _toggleVideoPlayback() {\n    this._clearDelayedPlaybackToggle();\n\n    const state = this._engine.getCurrentState();\n\n    if (state === EngineState.PLAY_REQUESTED || state === EngineState.PLAYING) {\n      this._eventEmitter.emit(UI_EVENTS.PAUSE_WITH_SCREEN_CLICK_TRIGGERED);\n      this._engine.pause();\n    } else {\n      this._eventEmitter.emit(UI_EVENTS.PLAY_WITH_SCREEN_CLICK_TRIGGERED);\n      this._engine.play();\n    }\n  }\n\n  private _toggleFullScreen() {\n    if (this._isInFullScreen) {\n      this._exitFullScreen();\n    } else {\n      this._enterFullScreen();\n    }\n  }\n\n  hide() {\n    if (!this.isHidden) {\n      this.view.hide();\n      this.isHidden = true;\n    }\n  }\n\n  show() {\n    if (this.isHidden) {\n      this.view.show();\n      this.isHidden = false;\n    }\n  }\n\n  @playerAPI()\n  setVideoViewMode(viewMode: VideoViewMode) {\n    this.view.setViewMode(viewMode);\n  }\n\n  private _enterFullScreen() {\n    this._fullScreenManager.enterFullScreen();\n  }\n\n  private _exitFullScreen() {\n    this._fullScreenManager.exitFullScreen();\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._clearDelayedPlaybackToggle();\n    this.view.destroy();\n    this.view = null;\n\n    this._interactionIndicator = null;\n    this._eventEmitter = null;\n    this._engine = null;\n    this._fullScreenManager = null;\n  }\n}\n","import View from '../core/view';\n\nimport {\n  containerTemplate,\n  playIconTemplate,\n  pauseIconTemplate,\n  forwardIconTemplate,\n  rewindIconTemplate,\n  increaseVolumeIconTemplate,\n  decreaseVolumeIconTemplate,\n  muteIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\n\nimport { IInteractionIndicatorViewStyles } from './types';\n\nimport styles from './interaction-indicator.scss';\n\nconst SECONDS_COUNT = 5;\n\nclass InteractionIndicatorView extends View<IInteractionIndicatorViewStyles>\n  implements Playable.IView<IInteractionIndicatorViewStyles> {\n  private _$node: HTMLElement;\n\n  private _playIcon: string;\n  private _pauseIcon: string;\n  private _forwardIcon: string;\n  private _rewindIcon: string;\n  private _increaseVolumeIcon: string;\n  private _decreaseVolumeIcon: string;\n  private _muteIcon: string;\n\n  constructor() {\n    super();\n\n    this._$node = htmlToElement(\n      containerTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._playIcon = playIconTemplate({\n      styles: this.styleNames,\n    });\n    this._pauseIcon = pauseIconTemplate({\n      styles: this.styleNames,\n    });\n    this._forwardIcon = forwardIconTemplate({\n      texts: {\n        SECONDS_COUNT,\n      },\n      styles: this.styleNames,\n    });\n    this._rewindIcon = rewindIconTemplate({\n      texts: {\n        SECONDS_COUNT,\n      },\n      styles: this.styleNames,\n    });\n    this._increaseVolumeIcon = increaseVolumeIconTemplate({\n      styles: this.styleNames,\n    });\n    this._decreaseVolumeIcon = decreaseVolumeIconTemplate({\n      styles: this.styleNames,\n    });\n    this._muteIcon = muteIconTemplate({\n      styles: this.styleNames,\n    });\n  }\n\n  activatePlayIcon() {\n    this._$node.innerHTML = this._playIcon;\n  }\n\n  activatePauseIcon() {\n    this._$node.innerHTML = this._pauseIcon;\n  }\n\n  activateForwardIcon() {\n    this._$node.innerHTML = this._forwardIcon;\n  }\n\n  activateRewindIcon() {\n    this._$node.innerHTML = this._rewindIcon;\n  }\n\n  activateIncreaseVolumeIcon() {\n    this._$node.innerHTML = this._increaseVolumeIcon;\n  }\n\n  activateDecreaseVolumeIcon() {\n    this._$node.innerHTML = this._decreaseVolumeIcon;\n  }\n\n  activateMuteVolumeIcon() {\n    this._$node.innerHTML = this._muteIcon;\n  }\n\n  deactivateIcon() {\n    this._$node.innerHTML = '';\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nInteractionIndicatorView.extendStyleNames(styles);\n\nexport default InteractionIndicatorView;\n","import { UI_EVENTS, EngineState } from '../../../constants';\n\nimport View from './interaction-indicator.view';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IInteractionIndicator } from './types';\nimport { IPlayerConfig } from '../../../core/config';\n\nexport default class InteractionIndicator implements IInteractionIndicator {\n  static moduleName = 'interactionIndicator';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'config', 'rootContainer'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n\n  private _unbindEvents: Function;\n\n  view: View;\n\n  constructor({\n    eventEmitter,\n    engine,\n    config,\n    rootContainer,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    config: IPlayerConfig;\n    rootContainer: Playable.IRootContainer;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n\n    this._initUI();\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.showInteractionIndicator === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    this.view = new View();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n          this._showPlaybackChangeIndicator,\n        ],\n        [UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED, this.showRewind],\n        [UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED, this.showForward],\n        [\n          UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n          this.showIncreaseVolume,\n        ],\n        [\n          UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n          this.showDecreaseVolume,\n        ],\n        [UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED, this.showMute],\n        [\n          UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          this.showIncreaseVolume,\n        ],\n      ],\n      this,\n    );\n  }\n\n  showPause() {\n    this.view.activatePauseIcon();\n  }\n\n  showPlay() {\n    this.view.activatePlayIcon();\n  }\n\n  showRewind() {\n    this.view.activateRewindIcon();\n  }\n\n  showForward() {\n    this.view.activateForwardIcon();\n  }\n\n  showMute() {\n    this.view.activateMuteVolumeIcon();\n  }\n\n  showIncreaseVolume() {\n    this.view.activateIncreaseVolumeIcon();\n  }\n\n  showDecreaseVolume() {\n    this.view.activateDecreaseVolumeIcon();\n  }\n\n  hideIcons() {\n    this.view.deactivateIcon();\n    this._eventEmitter.emit(UI_EVENTS.HIDE_INTERACTION_INDICATOR_TRIGGERED);\n  }\n\n  show() {\n    this.view.hide();\n  }\n\n  hide() {\n    this.view.show();\n  }\n\n  private _showPlaybackChangeIndicator() {\n    const state = this._engine.getCurrentState();\n\n    if (state === EngineState.PLAY_REQUESTED || state === EngineState.PLAYING) {\n      this.view.activatePauseIcon();\n    } else {\n      this.view.activatePlayIcon();\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import View from '../core/view';\n\nimport { overlayTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport {\n  IOverlayViewConfig,\n  IOverlayViewCallbacks,\n  IOverlayViewStyles,\n} from './types';\n\nimport overlayViewTheme from './overlay.theme';\nimport styles from './overlay.scss';\n\nclass OverlayView extends View<IOverlayViewStyles>\n  implements Playable.IView<IOverlayViewStyles> {\n  private _callbacks: IOverlayViewCallbacks;\n\n  private _$node: HTMLElement;\n  private _$content: HTMLElement;\n  private _$playButton: HTMLElement;\n\n  constructor(config: IOverlayViewConfig) {\n    super(config.theme);\n\n    const { callbacks, src } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n\n    this.setPoster(src);\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      overlayTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      }),\n    );\n\n    this._$content = getElementByHook(this._$node, 'overlay-content');\n    this._$playButton = getElementByHook(this._$node, 'overlay-play-button');\n  }\n\n  private _bindEvents() {\n    this._$playButton.addEventListener('click', this._callbacks.onPlayClick);\n  }\n\n  private _unbindEvents() {\n    this._$playButton.removeEventListener('click', this._callbacks.onPlayClick);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.active);\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.active);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  setPoster(src: string) {\n    this._$content.style.backgroundImage = src ? `url('${src}')` : 'none';\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$content = null;\n    this._$playButton = null;\n  }\n}\n\nOverlayView.setTheme(overlayViewTheme);\nOverlayView.extendStyleNames(styles);\n\nexport default OverlayView;\n","export default {\r\n  overlayPlaySvgFill: {\r\n    fill: (data: any) => data.color,\r\n  },\r\n  overlayPlaySvgStroke: {\r\n    stroke: (data: any) => data.color,\r\n  },\r\n};\r\n","import { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../constants';\n\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport View from './overlay.view';\nimport { IOverlay, IOverlayConfig, IOverlayViewConfig } from './types';\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IPlayerConfig } from '../../../core/config';\n\nexport default class Overlay implements IOverlay {\n  static moduleName = 'overlay';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'config',\n    'rootContainer',\n    'theme',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _theme: Playable.IThemeService;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean = false;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    rootContainer,\n    theme,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    rootContainer: Playable.IRootContainer;\n    theme: Playable.IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._theme = theme;\n\n    this._bindEvents();\n    this._initUI(config.overlay);\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.overlay === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(overlayConfig: IOverlayConfig | boolean) {\n    const poster: string =\n      typeof overlayConfig === 'object' ? overlayConfig.poster : null;\n    const viewConfig: IOverlayViewConfig = {\n      callbacks: {\n        onPlayClick: this._playVideo.bind(this),\n      },\n      src: poster,\n      theme: this._theme,\n    };\n\n    this.view = new Overlay.View(viewConfig);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._updatePlayingStatus],\n        [VIDEO_EVENTS.RESET, this._tryShowContent],\n      ],\n      this,\n    );\n  }\n\n  private _updatePlayingStatus({ nextState }: { nextState: EngineState }) {\n    if (nextState === EngineState.PLAY_REQUESTED) {\n      this._hideContent();\n    } else if (\n      nextState === EngineState.ENDED ||\n      nextState === EngineState.SRC_SET\n    ) {\n      this._tryShowContent();\n    }\n  }\n\n  private _playVideo() {\n    this._engine.play();\n\n    this._eventEmitter.emit(UI_EVENTS.PLAY_OVERLAY_TRIGGERED);\n  }\n\n  private _tryShowContent() {\n    if (this._engine.isVideoPaused) {\n      this._showContent();\n    }\n  }\n\n  private _hideContent() {\n    this.view.hideContent();\n  }\n\n  private _showContent() {\n    this.view.showContent();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  /**\n   * Method for setting overlay poster\n   * @param src - Source of image\n   * @example\n   * player.setPoster('https://example.com/poster.png');\n   *\n   */\n  @playerAPI()\n  setPoster(src: string) {\n    this.view.setPoster(src);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import View from '../core/view';\n\nimport { loaderTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\n\nimport { ILoaderViewStyles } from './types';\n\nimport styles from './loader.scss';\n\nclass LoaderView extends View<ILoaderViewStyles>\n  implements Playable.IView<ILoaderViewStyles> {\n  private _$node: HTMLElement;\n\n  constructor() {\n    super();\n\n    this._$node = htmlToElement(\n      loaderTemplate({\n        styles: this.styleNames,\n      }),\n    );\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.active);\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.active);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nLoaderView.extendStyleNames(styles);\n\nexport default LoaderView;\n","import { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../constants';\n\nimport View from './loader.view';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IPlayerConfig } from '../../../core/config';\n\nexport const DELAYED_SHOW_TIMEOUT = 100;\n\nexport default class Loader {\n  static moduleName = 'loader';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'config', 'rootContainer'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n\n  private _delayedShowTimeout: number;\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    rootContainer,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    rootContainer: Playable.IRootContainer;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this.isHidden = false;\n    this._engine = engine;\n\n    this._bindCallbacks();\n\n    this._initUI();\n    this._bindEvents();\n    this._hideContent();\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.loader === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._showContent = this._showContent.bind(this);\n    this._hideContent = this._hideContent.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._checkForWaitingState],\n        [VIDEO_EVENTS.UPLOAD_SUSPEND, this.hide],\n      ],\n      this,\n    );\n  }\n\n  private _checkForWaitingState({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.SEEK_IN_PROGRESS:\n        this.startDelayedShow();\n        break;\n      case EngineState.WAITING:\n        this.startDelayedShow();\n        break;\n      case EngineState.LOAD_STARTED:\n        if (this._engine.isPreloadAvailable) {\n          this._showContent();\n        }\n        break;\n      case EngineState.READY_TO_PLAY:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n      case EngineState.PLAYING:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n      case EngineState.PAUSED:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n\n      /* ignore coverage */\n      default:\n        break;\n    }\n  }\n\n  private _initUI() {\n    this.view = new Loader.View();\n  }\n\n  private _showContent() {\n    if (this.isHidden) {\n      this._eventEmitter.emit(UI_EVENTS.LOADER_SHOW_TRIGGERED);\n      this.view.showContent();\n      this.isHidden = false;\n    }\n  }\n\n  private _hideContent() {\n    if (!this.isHidden) {\n      this._eventEmitter.emit(UI_EVENTS.LOADER_HIDE_TRIGGERED);\n      this.view.hideContent();\n      this.isHidden = true;\n    }\n  }\n\n  hide() {\n    this.view.hide();\n  }\n\n  show() {\n    this.view.show();\n  }\n\n  startDelayedShow() {\n    if (this.isDelayedShowScheduled) {\n      this.stopDelayedShow();\n    }\n    this._delayedShowTimeout = window.setTimeout(\n      this._showContent,\n      DELAYED_SHOW_TIMEOUT,\n    );\n  }\n\n  stopDelayedShow() {\n    window.clearTimeout(this._delayedShowTimeout);\n    this._delayedShowTimeout = null;\n  }\n\n  get isDelayedShowScheduled() {\n    return Boolean(this._delayedShowTimeout);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.stopDelayedShow();\n\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import View from '../core/view';\n\nimport { mainUIBlockTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport styles from './main-ui-block.scss';\n\nimport {\n  IMainUIBlockViewStyles,\n  IMainUIBlockViewConfig,\n  IMainUIBlockViewElements,\n} from './types';\n\nclass MainUIBlockView extends View<IMainUIBlockViewStyles>\n  implements Playable.IView<IMainUIBlockViewStyles> {\n  private _$node: HTMLElement;\n\n  constructor(config: IMainUIBlockViewConfig) {\n    super();\n\n    this._initDOM(config.elements);\n  }\n\n  private _initDOM(elements: IMainUIBlockViewElements) {\n    this._$node = htmlToElement(\n      mainUIBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $tooltipContainerWrapper = document.createElement('div');\n    $tooltipContainerWrapper.classList.add(\n      this.styleNames.tooltipContainerWrapper,\n    );\n    $tooltipContainerWrapper.appendChild(elements.tooltipContainer);\n\n    this._$node.appendChild(elements.topBlock);\n    this._$node.appendChild($tooltipContainerWrapper);\n    this._$node.appendChild(elements.bottomBlock);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nMainUIBlockView.extendStyleNames(styles);\n\nexport { IMainUIBlockViewConfig };\n\nexport default MainUIBlockView;\n","import { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../constants';\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport MainUIBlockView from './main-ui-block.view';\n\nimport {\n  IMainUIBlock,\n  IMainUIBlockConfig,\n  IMainUIBlockViewElements,\n} from './types';\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IBottomBlock } from '../bottom-block/types';\nimport { ITopBlock } from '../top-block/types';\nimport { IScreen } from '../screen/types';\nimport { IPlayerConfig } from '../../../core/config';\n\nconst HIDE_BLOCK_TIMEOUT = 2000;\n\nconst DEFAULT_CONFIG: IMainUIBlockConfig = {\n  shouldAlwaysShow: false,\n};\n\nexport default class MainUIBlock implements IMainUIBlock {\n  static moduleName = 'mainUIBlock';\n  static View = MainUIBlockView;\n  static dependencies = [\n    'config',\n    'screen',\n    'rootContainer',\n    'tooltipService',\n    'eventEmitter',\n    'topBlock',\n    'bottomBlock',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _bottomBlock: IBottomBlock;\n  private _topBlock: ITopBlock;\n  private _screen: IScreen;\n\n  private _hideTimeout: number = null;\n\n  private _isContentShowingEnabled: boolean = true;\n  private _isContentShown: boolean = false;\n  private _shouldShowContent: boolean = true;\n  private _shouldAlwaysShow: boolean = false;\n  private _isDragging: boolean = false;\n\n  private _unbindEvents: Function;\n\n  view: MainUIBlockView;\n  isHidden: boolean;\n\n  constructor(dependencies: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    rootContainer: Playable.IRootContainer;\n    tooltipService: Playable.ITooltipService;\n    topBlock: ITopBlock;\n    bottomBlock: IBottomBlock;\n    screen: IScreen;\n  }) {\n    const {\n      config,\n      eventEmitter,\n      rootContainer,\n      tooltipService,\n      topBlock,\n      bottomBlock,\n      screen,\n    } = dependencies;\n\n    this._eventEmitter = eventEmitter;\n    this._topBlock = topBlock;\n    this._bottomBlock = bottomBlock;\n    this._screen = screen;\n\n    this.isHidden = false;\n    const mainBlockConfig = {\n      ...DEFAULT_CONFIG,\n      ...(typeof config.controls === 'object' ? config.controls : null),\n    };\n\n    this._shouldAlwaysShow = mainBlockConfig.shouldAlwaysShow;\n\n    this._initUI({\n      tooltipContainer: tooltipService.tooltipContainerNode,\n      topBlock: topBlock.node,\n      bottomBlock: bottomBlock.node,\n    });\n    this._bindViewCallbacks();\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.view.getNode());\n\n    if (config.controls === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(elements: IMainUIBlockViewElements) {\n    this.view = new MainUIBlock.View({ elements });\n  }\n\n  private _bindViewCallbacks() {\n    this._startHideBlockTimeout = this._startHideBlockTimeout.bind(this);\n    this._tryShowContent = this._tryShowContent.bind(this);\n    this._tryHideContent = this._tryHideContent.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED, this._startHideBlockTimeout],\n        [UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED, this._tryHideContent],\n        [UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED, this._startHideBlockTimeout],\n        [UI_EVENTS.LOADER_HIDE_TRIGGERED, this._startHideBlockTimeout],\n        [VIDEO_EVENTS.STATE_CHANGED, this._updatePlayingStatus],\n        [UI_EVENTS.CONTROL_DRAG_START, this._onControlDragStart],\n        [UI_EVENTS.CONTROL_DRAG_END, this._onControlDragEnd],\n      ],\n      this,\n    );\n  }\n\n  private _updatePlayingStatus({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.PLAY_REQUESTED: {\n        this._shouldShowContent = false;\n        this._startHideBlockTimeout();\n        break;\n      }\n      case EngineState.ENDED: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      case EngineState.PAUSED: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      case EngineState.SRC_SET: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  private get _isBlockFocused() {\n    return this._bottomBlock.isFocused;\n  }\n\n  private _startHideBlockTimeout() {\n    this._stopHideBlockTimeout();\n\n    this._tryShowContent();\n\n    this._hideTimeout = window.setTimeout(\n      this._tryHideContent,\n      HIDE_BLOCK_TIMEOUT,\n    );\n  }\n\n  private _stopHideBlockTimeout() {\n    if (this._hideTimeout) {\n      window.clearTimeout(this._hideTimeout);\n    }\n  }\n\n  private _tryShowContent() {\n    if (this._isContentShowingEnabled) {\n      this._showContent();\n    }\n  }\n\n  private _onControlDragStart() {\n    this._isDragging = true;\n  }\n\n  private _onControlDragEnd() {\n    this._isDragging = false;\n    this._tryHideContent();\n  }\n\n  private _showContent() {\n    if (this.isHidden || this._isContentShown) {\n      return;\n    }\n\n    this._screen.showCursor();\n\n    this._eventEmitter.emit((UI_EVENTS as any).MAIN_BLOCK_SHOW_TRIGGERED);\n    this._bottomBlock.showContent();\n    this._topBlock.showContent();\n    this._isContentShown = true;\n  }\n\n  private _tryHideContent() {\n    if (\n      !this._isBlockFocused &&\n      !this._isDragging &&\n      !this._shouldShowContent &&\n      !this._shouldAlwaysShow\n    ) {\n      this._hideContent();\n    }\n  }\n\n  private _hideContent() {\n    if (this.isHidden || !this._isContentShown) {\n      return;\n    }\n\n    if (this._isContentShowingEnabled) {\n      this._screen.hideCursor();\n    }\n\n    this._eventEmitter.emit((UI_EVENTS as any).MAIN_BLOCK_HIDE_TRIGGERED);\n    this._bottomBlock.hideContent();\n    this._topBlock.hideContent();\n    this._isContentShown = false;\n  }\n\n  disableShowingContent() {\n    this._isContentShowingEnabled = false;\n    this._hideContent();\n  }\n\n  enableShowingContent() {\n    this._isContentShowingEnabled = true;\n    if (this._shouldShowContent) {\n      this._showContent();\n    }\n  }\n\n  hide() {\n    this.isHidden = true;\n    this._topBlock.hide();\n    this._bottomBlock.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this._topBlock.show();\n    this._bottomBlock.show();\n  }\n\n  /**\n   * Method for allowing bottom block to be always shown.\n   * @param flag - `true` for showing always\n   * @example\n   * player.setControlsShouldAlwaysShow(true);\n   *\n   */\n  @playerAPI('setControlsShouldAlwaysShow')\n  setShouldAlwaysShow(flag: boolean) {\n    this._shouldAlwaysShow = flag;\n\n    if (this._shouldAlwaysShow) {\n      this._tryShowContent();\n    } else {\n      this._startHideBlockTimeout();\n    }\n  }\n\n  destroy() {\n    this._stopHideBlockTimeout();\n    this._unbindEvents();\n    this.view.destroy();\n\n    this.view = null;\n    this._eventEmitter = null;\n    this._topBlock = null;\n    this._bottomBlock = null;\n  }\n}\n","import View from '../core/view';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport { topBlockTemplate } from './templates';\n\nimport {\n  ITopBlockViewStyles,\n  ITopBlockViewConfig,\n  ITopBlockViewElements,\n} from './types';\n\nimport styles from './top-block.scss';\n\nclass TopBlockView extends View<ITopBlockViewStyles>\n  implements Playable.IView<ITopBlockViewStyles> {\n  private _$node: HTMLElement;\n\n  constructor(config: ITopBlockViewConfig) {\n    super();\n    const { elements } = config;\n\n    this._initDOM(elements);\n    this._bindEvents();\n  }\n\n  private _initDOM(elements: ITopBlockViewElements) {\n    this._$node = htmlToElement(\n      topBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $titleContainer = getElementByHook(this._$node, 'title-container');\n    const $liveIndicatorContainer = getElementByHook(\n      this._$node,\n      'live-indicator-container',\n    );\n\n    $titleContainer.appendChild(elements.title);\n    $liveIndicatorContainer.appendChild(elements.liveIndicator);\n  }\n\n  private _preventClickPropagation(e: MouseEvent) {\n    e.stopPropagation();\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._preventClickPropagation);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._preventClickPropagation);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.activated);\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.activated);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n}\n\nTopBlockView.extendStyleNames(styles);\n\nexport default TopBlockView;\n","import View from './top-block.view';\n\nimport { ILiveIndicator } from '../live-indicator/types';\nimport { ITopBlock, ITopBlockViewConfig, ITopBlockViewElements } from './types';\n\ninterface IDependencies {\n  title: Playable.ITitle;\n  liveIndicator: ILiveIndicator;\n}\n\nexport default class TopBlock implements ITopBlock {\n  static moduleName = 'topBlock';\n  static View = View;\n  static dependencies = ['title', 'liveIndicator'];\n\n  isHidden: boolean;\n  view: View;\n\n  constructor(dependencies: IDependencies) {\n    this.isHidden = false;\n\n    this._initUI(this._getElementsNodes(dependencies));\n  }\n\n  private _initUI(elementNodes: ITopBlockViewElements) {\n    const config: ITopBlockViewConfig = {\n      elements: elementNodes,\n    };\n\n    this.view = new TopBlock.View(config);\n  }\n\n  private _getElementsNodes(\n    dependencies: IDependencies,\n  ): ITopBlockViewElements {\n    const { title, liveIndicator } = dependencies;\n\n    return {\n      title: title.node,\n      liveIndicator: liveIndicator.node,\n    };\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  showContent() {\n    this.view.showContent();\n  }\n\n  hideContent() {\n    this.view.hideContent();\n  }\n\n  destroy() {\n    this.view.destroy();\n    this.view = null;\n  }\n}\n","import View from '../core/view';\n\nimport { titleTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport titleViewTheme from './title.theme';\nimport styles from './title.scss';\n\nclass TitleView extends View<Playable.ITitleViewStyles>\n  implements Playable.IView<Playable.ITitleViewStyles> {\n  private _callbacks: Playable.ITitleViewCallbacks;\n\n  private _$node: HTMLElement;\n  _$title: HTMLElement;\n\n  constructor(config: Playable.ITitleViewConfig) {\n    const { callbacks, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      titleTemplate({ styles: this.styleNames, themeStyles: this.themeStyles }),\n    );\n    this._$title = getElementByHook(this._$node, 'video-title');\n  }\n\n  private _bindEvents() {\n    this._$title.addEventListener('click', this._callbacks.onClick);\n  }\n\n  private _unbindEvents() {\n    this._$title.removeEventListener('click', this._callbacks.onClick);\n  }\n\n  setDisplayAsLink(flag: boolean) {\n    toggleNodeClass(this._$title, this.styleNames.link, flag);\n  }\n\n  setTitle(title?: string) {\n    // TODO: mb move this logic to controller? title.isHidden is out of control of this method\n    // TODO: what if we call with empty value `.setTitle('')` and then call `.show()` method? Mb clear value anyway?\n    if (title) {\n      this.show();\n      this._$title.innerHTML = title;\n    } else {\n      this.hide();\n    }\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$title = null;\n  }\n}\n\nTitleView.setTheme(titleViewTheme);\nTitleView.extendStyleNames(styles);\n\nexport default TitleView;\n","export default {\r\n  titleText: {\r\n    color: (data: any) => data.color,\r\n  },\r\n};\r\n","import View from './title.view';\n\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport { IPlayerConfig } from '../../../core/config';\n\nexport default class TitleControl implements Playable.ITitle {\n  static moduleName = 'title';\n  static View = View;\n  static dependencies = ['config', 'theme'];\n\n  private _callback: Function;\n  private _theme: Playable.IThemeService;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    theme,\n  }: {\n    config: IPlayerConfig;\n    theme: Playable.IThemeService;\n  }) {\n    this._theme = theme;\n\n    this._bindCallbacks();\n    this._initUI();\n    if (typeof config.title === 'object') {\n      this.setTitleClickCallback(config.title.callback || null);\n      this.setTitle(config.title.text);\n    } else if (config.title === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._triggerCallback = this._triggerCallback.bind(this);\n  }\n\n  private _initUI() {\n    const config: Playable.ITitleViewConfig = {\n      theme: this._theme,\n      callbacks: {\n        onClick: this._triggerCallback,\n      },\n    };\n\n    this.view = new TitleControl.View(config);\n\n    this.view.setTitle();\n  }\n\n  /**\n   * Display title text over the video. If you want to have clickable title, use `setTitleClickCallback`\n   *\n   * @param title - Text for the video title\n   *\n   * @example\n   * player.setTitle('Your awesome video title here');\n   *\n   * @note\n   * [Live Demo](https://jsfiddle.net/bodia/243k6m0u/)\n   */\n  @playerAPI()\n  setTitle(title?: string) {\n    this.view.setTitle(title);\n  }\n\n  /**\n   * Method for attaching callback for click on title\n   *\n   * @param callback - Your function\n   *\n   * @example\n   * const callback = () => {\n   *   console.log('Click on title);\n   * }\n   * player.setTitleClickCallback(callback);\n   *\n   */\n  @playerAPI()\n  setTitleClickCallback(callback?: Function) {\n    this._callback = callback;\n    this.view.setDisplayAsLink(Boolean(this._callback));\n  }\n\n  private _triggerCallback() {\n    if (this._callback) {\n      this._callback();\n    }\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this.view.destroy();\n    this.view = null;\n  }\n}\n","import View from '../core/view';\n\nimport { liveIndicatorTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  ILiveIndicatorViewStyles,\n  ILiveIndicatorViewCallbacks,\n  ILiveIndicatorViewConfig,\n} from './types';\n\nimport styles from './live-indicator.scss';\n\nimport { TEXT_LABELS } from '../../../constants';\n\nclass LiveIndicatorView extends View<ILiveIndicatorViewStyles>\n  implements Playable.IView<ILiveIndicatorViewStyles> {\n  private _callbacks: ILiveIndicatorViewCallbacks;\n  private _textMap: Playable.ITextMap;\n  private _tooltipService: Playable.ITooltipService;\n  private _tooltipReference: Playable.ITooltipReference;\n\n  private _$node: HTMLElement;\n  private _$liveIndicatorText: HTMLElement;\n\n  constructor(config: ILiveIndicatorViewConfig) {\n    super();\n\n    this._callbacks = config.callbacks;\n    this._textMap = config.textMap;\n    this._tooltipService = config.tooltipService;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      liveIndicatorTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n        texts: {},\n      }),\n    );\n\n    this._$liveIndicatorText = getElementByHook(\n      this._$node,\n      'live-indicator-text',\n    );\n\n    this._tooltipReference = this._tooltipService.createReference(this._$node, {\n      text: this._textMap.get(TEXT_LABELS.LIVE_SYNC_TOOLTIP),\n    });\n\n    // NOTE: LIVE indicator is hidden and inactive by default\n    this.toggle(false);\n    this.toggleActive(false);\n    this.toggleEnded(false);\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._callbacks.onClick);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._callbacks.onClick);\n  }\n\n  toggleActive(shouldActivate: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.active, shouldActivate);\n\n    // NOTE: disable tooltip while video is sync with live\n    if (shouldActivate) {\n      this._tooltipReference.disable();\n    } else {\n      this._tooltipReference.enable();\n    }\n  }\n\n  toggleEnded(isEnded: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.ended, isEnded);\n\n    this._$liveIndicatorText.innerText = this._textMap.get(\n      TEXT_LABELS.LIVE_INDICATOR_TEXT,\n      { isEnded },\n    );\n    this._$liveIndicatorText.setAttribute(\n      'aria-label',\n      !isEnded ? this._textMap.get(TEXT_LABELS.LIVE_SYNC_LABEL) : '',\n    );\n\n    if (isEnded) {\n      this._tooltipReference.disable();\n    } else {\n      this._tooltipReference.enable();\n    }\n  }\n\n  show() {\n    this.toggle(true);\n  }\n\n  hide() {\n    this.toggle(false);\n  }\n\n  toggle(shouldShow: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.hidden, !shouldShow);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$liveIndicatorText = null;\n    this._callbacks = null;\n    this._textMap = null;\n  }\n}\n\nLiveIndicatorView.extendStyleNames(styles);\n\nexport default LiveIndicatorView;\n","import LiveIndicatorView from './live-indicator.view';\nimport { VIDEO_EVENTS, UI_EVENTS, LiveState } from '../../../constants';\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { ILiveIndicator } from './types';\n\nexport default class LiveIndicator implements ILiveIndicator {\n  static moduleName = 'liveIndicator';\n  static View = LiveIndicatorView;\n  static dependencies = ['engine', 'eventEmitter', 'textMap', 'tooltipService'];\n\n  private _engine: IPlaybackEngine;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: Playable.ITextMap;\n  private _tooltipService: Playable.ITooltipService;\n  private _isHidden: boolean = true;\n  private _isActive: boolean = false;\n  private _isEnded: boolean = false;\n\n  private _unbindEvents: Function;\n\n  view: LiveIndicatorView;\n\n  constructor({\n    engine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n  }: {\n    engine: IPlaybackEngine;\n    eventEmitter: IEventEmitter;\n    textMap: Playable.ITextMap;\n    tooltipService: Playable.ITooltipService;\n  }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  get isHidden(): boolean {\n    return this._isHidden;\n  }\n\n  get isActive(): boolean {\n    return this._isActive;\n  }\n\n  show() {\n    this._toggle(true);\n  }\n\n  hide() {\n    this._toggle(false);\n  }\n\n  private _initUI() {\n    this.view = new LiveIndicator.View({\n      callbacks: {\n        onClick: this._syncWithLive,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    });\n  }\n\n  private _bindCallbacks() {\n    this._syncWithLive = this._syncWithLive.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processStateChange],\n        [\n          UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED,\n          () => {\n            this.view.toggleActive(true);\n          },\n        ],\n        [\n          UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED,\n          () => {\n            // NOTE: restore state before mouse enter\n            this.view.toggleActive(this._isActive);\n          },\n        ],\n      ],\n      this,\n    );\n  }\n\n  private _processStateChange({ nextState }: { nextState: LiveState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this._toggle(false);\n        this._toggleActive(false);\n        this._toggleEnded(false);\n        break;\n\n      case LiveState.INITIAL:\n        this._toggle(true);\n        break;\n\n      case LiveState.SYNC:\n        this._toggleActive(true);\n        break;\n\n      case LiveState.NOT_SYNC:\n        this._toggleActive(false);\n        break;\n\n      case LiveState.ENDED:\n        this._toggleActive(false);\n        this._toggleEnded(true);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _syncWithLive() {\n    if (!this._isEnded) {\n      this._engine.syncWithLive();\n    }\n  }\n\n  private _toggle(shouldShow: boolean) {\n    this._isHidden = !shouldShow;\n    this.view.toggle(shouldShow);\n  }\n\n  private _toggleActive(shouldActivate: boolean) {\n    this._isActive = shouldActivate;\n    this.view.toggleActive(shouldActivate);\n  }\n\n  private _toggleEnded(isEnded: boolean) {\n    this._isEnded = isEnded;\n    this.view.toggleEnded(isEnded);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n\n    this.view = null;\n\n    this._engine = null;\n    this._eventEmitter = null;\n    this._textMap = null;\n  }\n}\n","import View from '../core/view';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport { bottomBlockTemplate } from './templates';\n\nimport {\n  IBottomBlockViewStyles,\n  IBottomBlockViewCallbacks,\n  IBottomBlockViewElements,\n  IBottomBlockViewConfig,\n} from './types';\n\nimport styles from './bottom-block.scss';\n\nclass BottomBlockView extends View<IBottomBlockViewStyles>\n  implements Playable.IView<IBottomBlockViewStyles> {\n  private _callbacks: IBottomBlockViewCallbacks;\n  private _$node: HTMLElement;\n\n  constructor(config: IBottomBlockViewConfig) {\n    super();\n    const { callbacks, elements } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM(elements);\n    this._bindEvents();\n  }\n\n  private _initDOM(elements: IBottomBlockViewElements) {\n    this._$node = htmlToElement(\n      bottomBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $playContainer = getElementByHook(this._$node, 'play-container');\n    const $volumeContainer = getElementByHook(this._$node, 'volume-container');\n    const $timeContainer = getElementByHook(this._$node, 'time-container');\n    const $fullScreenContainer = getElementByHook(\n      this._$node,\n      'full-screen-container',\n    );\n    const $logoContainer = getElementByHook(this._$node, 'logo-container');\n    const $progressBarContainer = getElementByHook(\n      this._$node,\n      'progress-bar-container',\n    );\n\n    $playContainer.appendChild(elements.play);\n    $volumeContainer.appendChild(elements.volume);\n    $timeContainer.appendChild(elements.time);\n    $fullScreenContainer.appendChild(elements.fullScreen);\n    $logoContainer.appendChild(elements.logo);\n    $progressBarContainer.appendChild(elements.progress);\n  }\n\n  private _preventClickPropagation(e: MouseEvent) {\n    e.stopPropagation();\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._preventClickPropagation);\n    this._$node.addEventListener('mousemove', this._callbacks.onBlockMouseMove);\n    this._$node.addEventListener('mouseleave', this._callbacks.onBlockMouseOut);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._preventClickPropagation);\n    this._$node.removeEventListener(\n      'mousemove',\n      this._callbacks.onBlockMouseMove,\n    );\n    this._$node.removeEventListener(\n      'mouseleave',\n      this._callbacks.onBlockMouseOut,\n    );\n  }\n\n  setShouldLogoShowAlwaysFlag(isShowAlways: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.showLogoAlways, isShowAlways);\n    this.showLogo();\n  }\n\n  showPlayControl() {\n    this._$node.classList.remove(this.styleNames.playControlHidden);\n  }\n\n  hidePlayControl() {\n    this._$node.classList.add(this.styleNames.playControlHidden);\n  }\n\n  showTimeControl() {\n    this._$node.classList.remove(this.styleNames.timeControlHidden);\n  }\n\n  hideTimeControl() {\n    this._$node.classList.add(this.styleNames.timeControlHidden);\n  }\n\n  showVolumeControl() {\n    this._$node.classList.remove(this.styleNames.volumeControlHidden);\n  }\n\n  hideVolumeControl() {\n    this._$node.classList.add(this.styleNames.volumeControlHidden);\n  }\n\n  showFullScreenControl() {\n    this._$node.classList.remove(this.styleNames.fullScreenControlHidden);\n  }\n\n  hideFullScreenControl() {\n    this._$node.classList.add(this.styleNames.fullScreenControlHidden);\n  }\n\n  showLogo() {\n    this._$node.classList.remove(this.styleNames.logoHidden);\n  }\n\n  hideLogo() {\n    this._$node.classList.add(this.styleNames.logoHidden);\n  }\n\n  showProgressControl() {\n    this._$node.classList.remove(this.styleNames.progressControlHidden);\n  }\n\n  hideProgressControl() {\n    this._$node.classList.add(this.styleNames.progressControlHidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.activated);\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.activated);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n    this._$node = null;\n  }\n}\n\nBottomBlockView.extendStyleNames(styles);\n\nexport default BottomBlockView;\n","import playerAPI from '../../../core/player-api-decorator';\r\n\r\nimport View from './bottom-block.view';\r\nimport { UI_EVENTS } from '../../../constants';\r\n\r\nimport { IEventEmitter } from '../../event-emitter/types';\r\nimport { IPlayControl } from '../controls/play/types';\r\nimport { ITimeControl } from '../controls/time/types';\r\nimport { IProgressControl } from '../controls/progress/types';\r\nimport { IVolumeControl } from '../controls/volume/types';\r\nimport { IFullScreenControl } from '../controls/full-screen/types';\r\nimport { ILogoControl, ILogoConfig } from '../controls/logo/types';\r\n\r\nimport {\r\n  IBottomBlock,\r\n  IBottomBlockViewConfig,\r\n  IBottomBlockViewElements,\r\n} from './types';\r\nimport { IPlayerConfig } from '../../../core/config';\r\n\r\ninterface IDependencies {\r\n  config: IPlayerConfig;\r\n  eventEmitter: IEventEmitter;\r\n  playControl: IPlayControl;\r\n  progressControl: IProgressControl;\r\n  timeControl: ITimeControl;\r\n  volumeControl: IVolumeControl;\r\n  fullScreenControl: IFullScreenControl;\r\n  logo: ILogoControl;\r\n}\r\n\r\nexport default class BottomBlock implements IBottomBlock {\r\n  static moduleName = 'bottomBlock';\r\n  static View = View;\r\n  static dependencies = [\r\n    'config',\r\n    'playControl',\r\n    'progressControl',\r\n    'timeControl',\r\n    'volumeControl',\r\n    'fullScreenControl',\r\n    'logo',\r\n    'eventEmitter',\r\n  ];\r\n\r\n  private _eventEmitter: IEventEmitter;\r\n\r\n  private _isBlockFocused: boolean = false;\r\n\r\n  private _unbindEvents: Function;\r\n\r\n  view: View;\r\n  isHidden: boolean = false;\r\n\r\n  constructor(dependencies: IDependencies) {\r\n    const { config, eventEmitter } = dependencies;\r\n    this._eventEmitter = eventEmitter;\r\n\r\n    this._bindViewCallbacks();\r\n    this._initUI(this._getElementsNodes(dependencies));\r\n    this._initLogo(config.logo);\r\n    this._bindEvents();\r\n  }\r\n\r\n  private _getElementsNodes(\r\n    dependencies: IDependencies,\r\n  ): IBottomBlockViewElements {\r\n    const {\r\n      playControl,\r\n      progressControl,\r\n      timeControl,\r\n      volumeControl,\r\n      fullScreenControl,\r\n      logo,\r\n    } = dependencies;\r\n\r\n    return {\r\n      play: playControl.node,\r\n      progress: progressControl.node,\r\n      time: timeControl.node,\r\n      volume: volumeControl.node,\r\n      fullScreen: fullScreenControl.node,\r\n      logo: logo.node,\r\n    };\r\n  }\r\n\r\n  get node() {\r\n    return this.view.getNode();\r\n  }\r\n\r\n  private _initUI(elementNodes: IBottomBlockViewElements) {\r\n    const config: IBottomBlockViewConfig = {\r\n      elements: elementNodes,\r\n      callbacks: {\r\n        onBlockMouseMove: this._setFocusState,\r\n        onBlockMouseOut: this._removeFocusState,\r\n      },\r\n    };\r\n\r\n    this.view = new BottomBlock.View(config);\r\n  }\r\n\r\n  private _bindEvents() {\r\n    this._unbindEvents = this._eventEmitter.bindEvents(\r\n      [[UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this._removeFocusState]],\r\n      this,\r\n    );\r\n  }\r\n\r\n  private _initLogo(logoConfig: ILogoConfig | boolean) {\r\n    if (logoConfig) {\r\n      if (typeof logoConfig === 'object') {\r\n        this.setLogoAlwaysShowFlag(logoConfig.showAlways);\r\n      }\r\n    } else {\r\n      this.hideLogo();\r\n    }\r\n  }\r\n\r\n  private _bindViewCallbacks() {\r\n    this._setFocusState = this._setFocusState.bind(this);\r\n    this._removeFocusState = this._removeFocusState.bind(this);\r\n  }\r\n\r\n  private _setFocusState() {\r\n    this._isBlockFocused = true;\r\n  }\r\n\r\n  private _removeFocusState() {\r\n    this._isBlockFocused = false;\r\n  }\r\n\r\n  get isFocused() {\r\n    return this._isBlockFocused;\r\n  }\r\n\r\n  showContent() {\r\n    this.view.showContent();\r\n  }\r\n\r\n  hideContent() {\r\n    this.view.hideContent();\r\n  }\r\n\r\n  hide() {\r\n    this.isHidden = true;\r\n    this.view.hide();\r\n  }\r\n\r\n  show() {\r\n    this.isHidden = false;\r\n    this.view.show();\r\n  }\r\n\r\n  /**\r\n   * Method for allowing logo to be always shown in bottom block\r\n   * @param flag - `true` for showing always\r\n   * @example\r\n   * player.setLogoAlwaysShowFlag(true);\r\n   *\r\n   */\r\n  @playerAPI()\r\n  setLogoAlwaysShowFlag(flag: boolean) {\r\n    this.view.setShouldLogoShowAlwaysFlag(flag);\r\n  }\r\n\r\n  /**\r\n   * Method for hidding logo. If you use `setLogoAlwaysShowFlag` or `setControlsShouldAlwaysShow`, logo would automaticaly appear.\r\n   * @example\r\n   * player.hideLogo();\r\n   */\r\n  @playerAPI()\r\n  hideLogo() {\r\n    this.view.hideLogo();\r\n  }\r\n\r\n  /**\r\n   * Method for showing logo.\r\n   * @example\r\n   * player.showLogo();\r\n   */\r\n  @playerAPI()\r\n  showLogo() {\r\n    this.view.showLogo();\r\n  }\r\n\r\n  /**\r\n   * Method for showing play control.\r\n   * @example\r\n   * player.showPlayControl();\r\n   */\r\n  @playerAPI()\r\n  showPlayControl() {\r\n    this.view.showPlayControl();\r\n  }\r\n\r\n  /**\r\n   * Method for showing volume control.\r\n   * @example\r\n   * player.showVolumeControl();\r\n   */\r\n  @playerAPI()\r\n  showVolumeControl() {\r\n    this.view.showVolumeControl();\r\n  }\r\n\r\n  /**\r\n   * Method for showing time control.\r\n   * @example\r\n   * player.showTimeControl();\r\n   */\r\n  @playerAPI()\r\n  showTimeControl() {\r\n    this.view.showTimeControl();\r\n  }\r\n\r\n  /**\r\n   * Method for showing full screen control.\r\n   * @example\r\n   * player.showFullScreenControl();\r\n   */\r\n  @playerAPI()\r\n  showFullScreenControl() {\r\n    this.view.showFullScreenControl();\r\n  }\r\n\r\n  /**\r\n   * Method for showing progress control.\r\n   * @example\r\n   * player.showProgressControl();\r\n   */\r\n  @playerAPI()\r\n  showProgressControl() {\r\n    this.view.showProgressControl();\r\n  }\r\n\r\n  /**\r\n   * Method for hidding play control.\r\n   * @example\r\n   * player.hidePlayControl();\r\n   */\r\n  @playerAPI()\r\n  hidePlayControl() {\r\n    this.view.hidePlayControl();\r\n  }\r\n\r\n  /**\r\n   * Method for hidding voluem control.\r\n   * @example\r\n   * player.hideVolumeControl();\r\n   */\r\n  @playerAPI()\r\n  hideVolumeControl() {\r\n    this.view.hideVolumeControl();\r\n  }\r\n\r\n  /**\r\n   * Method for hidding time control.\r\n   * @example\r\n   * player.hideTimeControl();\r\n   */\r\n  @playerAPI()\r\n  hideTimeControl() {\r\n    this.view.hideTimeControl();\r\n  }\r\n\r\n  /**\r\n   * Method for hidding full screen control.\r\n   * @example\r\n   * player.hideFullScreenControl();\r\n   */\r\n  @playerAPI()\r\n  hideFullScreenControl() {\r\n    this.view.hideFullScreenControl();\r\n  }\r\n\r\n  /**\r\n   * Method for hidding progress control.\r\n   * @example\r\n   * player.hideProgressControl();\r\n   */\r\n  @playerAPI()\r\n  hideProgressControl() {\r\n    this.view.hideProgressControl();\r\n  }\r\n\r\n  destroy() {\r\n    this._unbindEvents();\r\n    this.view.destroy();\r\n\r\n    this.view = null;\r\n    this._eventEmitter = null;\r\n  }\r\n}\r\n","function formatTime(seconds: number): string {\r\n  const isValid = !isNaN(seconds) && isFinite(seconds);\r\n  const isNegative = isValid && seconds < 0;\r\n  const date = new Date(null);\r\n\r\n  date.setSeconds(isValid ? Math.abs(Math.floor(seconds)) : 0);\r\n\r\n  // get HH:mm:ss part, remove hours if they are \"00:\"\r\n  const time = date\r\n    .toISOString()\r\n    .substr(11, 8)\r\n    .replace(/^00:/, '');\r\n\r\n  return isNegative ? `-${time}` : time;\r\n}\r\n\r\nexport default formatTime;\r\n","enum TooltipPositionPlacement {\r\n  TOP = 'top',\r\n  BOTTOM = 'bottom',\r\n}\r\n\r\nexport { TooltipPositionPlacement };\r\n","import { tooltipTemplate } from './templates';\nimport htmlToElement from '../htmlToElement';\nimport getElementByHook from '../getElementByHook';\nimport Stylable from '../stylable';\n\nimport styles from './tooltip.scss';\n\nclass Tooltip extends Stylable<Playable.ITooltipStyles>\n  implements Playable.ITooltip {\n  private _$node: HTMLElement;\n  private _$tooltipInner: HTMLElement;\n  private _isHidden: boolean;\n\n  constructor() {\n    super();\n\n    this._isHidden = true;\n    this._initDOM();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      tooltipTemplate({\n        styles: this.styleNames,\n      }),\n    );\n    this._$tooltipInner = getElementByHook(this._$node, 'tooltipInner');\n  }\n\n  get node(): HTMLElement {\n    return this._$node;\n  }\n\n  get isHidden(): boolean {\n    return this._isHidden;\n  }\n\n  show() {\n    if (!this._isHidden) {\n      return;\n    }\n    this._isHidden = false;\n    this._$node.classList.add(this.styleNames.tooltipVisible);\n  }\n\n  hide() {\n    if (this._isHidden) {\n      return;\n    }\n    this._isHidden = true;\n    this._$node.classList.remove(this.styleNames.tooltipVisible);\n  }\n\n  setText(text: string) {\n    this._$tooltipInner.innerText = text;\n  }\n\n  setStyle(style: any) {\n    Object.keys(style).forEach(styleKey => {\n      (this._$node.style as any)[styleKey] = style[styleKey];\n    });\n  }\n\n  destroy() {\n    this._$node = null;\n    this._$tooltipInner = null;\n  }\n}\n\nTooltip.extendStyleNames(styles);\n\nexport default Tooltip;\n","import { TooltipPositionPlacement } from '../constants';\r\n\r\ntype ITooltipCenterXfn = (\r\n  tooltipReferenceOffsetX: number,\r\n  tooltipReferenceWidth: number,\r\n) => number;\r\n\r\nfunction calcTooltipCenterX(\r\n  tooltipReferenceOffsetX: number,\r\n  tooltipReferenceWidth: number,\r\n) {\r\n  return tooltipReferenceOffsetX + tooltipReferenceWidth / 2;\r\n}\r\n\r\nfunction getTooltipPositionByReferenceNode(\r\n  tooltipReferenceNode: HTMLElement,\r\n  tooltipContainerNode: HTMLElement,\r\n  tooltipCenterXfn: ITooltipCenterXfn = calcTooltipCenterX,\r\n): Playable.ITooltipPosition {\r\n  const tooltipReferenceRect = tooltipReferenceNode.getBoundingClientRect();\r\n  const tooltipContainerRect = tooltipContainerNode.getBoundingClientRect();\r\n\r\n  const tooltipPlacement =\r\n    tooltipReferenceRect.top > tooltipContainerRect.top\r\n      ? TooltipPositionPlacement.BOTTOM\r\n      : TooltipPositionPlacement.TOP;\r\n  const tooltipReferenceOffsetX =\r\n    tooltipReferenceRect.left - tooltipContainerRect.left;\r\n  const tooltipCenterX = tooltipCenterXfn(\r\n    tooltipReferenceOffsetX,\r\n    tooltipReferenceRect.width,\r\n  );\r\n\r\n  return { placement: tooltipPlacement, x: tooltipCenterX };\r\n}\r\n\r\nexport default getTooltipPositionByReferenceNode;\r\n","import getTooltipPositionByReferenceNode from './utils/getTooltipPositionByReferenceNode';\n\nconst SHOW_EVENTS = ['mouseenter', 'focus'];\nconst HIDE_EVENTS = ['mouseleave', 'blur'];\n\nclass TooltipReference implements Playable.ITooltipReference {\n  private _$reference: HTMLElement;\n  private _tooltipService: Playable.ITooltipService;\n\n  private _options: Playable.ITooltipReferenceOptions;\n  private _eventListeners: any[];\n\n  private _isDisabled: boolean;\n\n  constructor(\n    reference: HTMLElement,\n    tooltipService: Playable.ITooltipService,\n    options: Playable.ITooltipReferenceOptions,\n  ) {\n    this._$reference = reference;\n    this._options = options;\n    this._tooltipService = tooltipService;\n\n    this._eventListeners = [];\n\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    SHOW_EVENTS.forEach(event => {\n      const fn = () => {\n        this.show();\n      };\n      this._eventListeners.push({ event, fn });\n      this._$reference.addEventListener(event, fn);\n    });\n\n    HIDE_EVENTS.forEach(event => {\n      const fn = () => {\n        this.hide();\n      };\n      this._eventListeners.push({ event, fn });\n      this._$reference.addEventListener(event, fn);\n    });\n  }\n\n  get isHidden(): boolean {\n    return this._tooltipService.isHidden;\n  }\n\n  get isDisabled(): boolean {\n    return this._isDisabled;\n  }\n\n  show() {\n    if (this._isDisabled) {\n      return;\n    }\n\n    this._tooltipService.show({\n      text: this._options.text,\n      position: getTooltipPositionByReferenceNode(\n        this._$reference,\n        this._tooltipService.tooltipContainerNode,\n      ),\n    });\n  }\n\n  hide() {\n    this._tooltipService.hide();\n  }\n\n  setText(text: string) {\n    this._options.text = text;\n    this._tooltipService.setText(text);\n  }\n\n  disable() {\n    this._isDisabled = true;\n  }\n\n  enable() {\n    this._isDisabled = false;\n  }\n\n  destroy() {\n    this._eventListeners.forEach(({ event, fn }) => {\n      this._$reference.removeEventListener(event, fn);\n    });\n    this._eventListeners = null;\n    this._$reference = null;\n    this._tooltipService = null;\n    this._options = null;\n  }\n}\n\nexport default TooltipReference;\n","import { tooltipContainerTemplate } from './templates';\r\nimport htmlToElement from '../htmlToElement';\r\nimport Tooltip from './tooltip';\r\nimport Stylable from '../stylable';\r\n\r\nimport { TooltipPositionPlacement } from './constants';\r\n\r\nimport styles from './tooltip-container.scss';\r\n\r\ninterface ITooltipContainer {\r\n  node: HTMLElement;\r\n  getTooltipPositionStyles(\r\n    position: Playable.ITooltipPosition,\r\n  ): { [ket: string]: string | number };\r\n  destroy(): void;\r\n}\r\n\r\nclass TooltipContainer extends Stylable implements ITooltipContainer {\r\n  private _tooltip: Tooltip;\r\n  private _$node: HTMLElement;\r\n\r\n  constructor(tooltip: Tooltip) {\r\n    super();\r\n\r\n    this._tooltip = tooltip;\r\n    this._initDOM();\r\n  }\r\n\r\n  get node(): HTMLElement {\r\n    return this._$node;\r\n  }\r\n\r\n  private _initDOM() {\r\n    this._$node = htmlToElement(\r\n      tooltipContainerTemplate({\r\n        styles: this.styleNames,\r\n      }),\r\n    );\r\n    this._$node.appendChild(this._tooltip.node);\r\n  }\r\n\r\n  getTooltipPositionStyles(\r\n    position: Playable.ITooltipPosition | Playable.ITooltipPositionFunction,\r\n  ) {\r\n    if (typeof position === 'function') {\r\n      position = position(this._$node);\r\n    }\r\n\r\n    if (position.placement === TooltipPositionPlacement.TOP) {\r\n      return {\r\n        left: `${this._getTooltipLeftX(position.x)}px`,\r\n        top: 0,\r\n        bottom: 'initial',\r\n      };\r\n    }\r\n\r\n    return {\r\n      left: `${this._getTooltipLeftX(position.x)}px`,\r\n      top: 'initial',\r\n      bottom: 0,\r\n    };\r\n  }\r\n\r\n  destroy() {\r\n    this._tooltip = null;\r\n    this._$node = null;\r\n  }\r\n\r\n  private _getTooltipLeftX(tooltipCenterX: number) {\r\n    const tooltipRect = this._tooltip.node.getBoundingClientRect();\r\n    const tooltipContainerRect = this._$node.getBoundingClientRect();\r\n\r\n    let tooltipLeftX = tooltipCenterX - tooltipRect.width / 2;\r\n\r\n    // ensure `x` is in range of placeholder rect\r\n    tooltipLeftX = Math.max(tooltipLeftX, 0);\r\n    tooltipLeftX = Math.min(\r\n      tooltipLeftX,\r\n      tooltipContainerRect.width - tooltipRect.width,\r\n    );\r\n\r\n    return tooltipLeftX;\r\n  }\r\n}\r\n\r\nTooltipContainer.extendStyleNames(styles);\r\n\r\nexport { ITooltipContainer };\r\nexport default TooltipContainer;\r\n","import TooltipReference from './tooltip-reference';\nimport TooltipContainer from './tooltip-container';\nimport Tooltip from './tooltip';\n\nimport { UI_EVENTS } from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\n\nclass TooltipService implements Playable.ITooltipService {\n  static moduleName = 'tooltipService';\n  static dependencies = ['eventEmitter'];\n  private _tooltip: Tooltip;\n  private _tooltipContainer: TooltipContainer;\n  private _eventEmitter: IEventEmitter;\n\n  private _unbindEvents: Function;\n\n  constructor({ eventEmitter }: { eventEmitter: IEventEmitter }) {\n    this._eventEmitter = eventEmitter;\n    this._tooltip = new Tooltip();\n    this._tooltipContainer = new TooltipContainer(this._tooltip);\n    this._bindEvents();\n  }\n\n  get isHidden(): boolean {\n    return this._tooltip.isHidden;\n  }\n\n  get tooltipContainerNode(): HTMLElement {\n    return this._tooltipContainer.node;\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this.hide]],\n      this,\n    );\n  }\n\n  /**\n   * Set new tooltip title\n   */\n  setText(text: string) {\n    this._tooltip.setText(text);\n  }\n\n  /**\n   * Show tooltip with title\n   */\n  show(options: Playable.ITooltipShowOptions) {\n    // NOTE: its important to set tooltip text before update tooltip position styles\n    this._tooltip.setText(options.text);\n    this._tooltip.setStyle(\n      this._tooltipContainer.getTooltipPositionStyles(options.position),\n    );\n    this._tooltip.show();\n  }\n\n  /**\n   * Hide tooltip\n   */\n  hide() {\n    this._tooltip.hide();\n  }\n\n  /**\n   * Create tooltip reference which show/hide tooltip on hover and focus events\n   * @param reference - reference node\n   * @param options - tooltip title and other options\n   * @returns tooltip reference instance\n   */\n  createReference(\n    reference: HTMLElement,\n    options: Playable.ITooltipReferenceOptions,\n  ): TooltipReference {\n    return new TooltipReference(reference, this, options);\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._tooltip.destroy();\n    this._tooltipContainer.destroy();\n    this._tooltip = null;\n    this._tooltipContainer = null;\n\n    this._eventEmitter = null;\n  }\n}\n\nexport default TooltipService;\n","import { transperentizeColor } from '../../core/theme';\r\n\r\nexport default {\r\n  progressPlayed: {\r\n    backgroundColor: (data: any) => data.progressColor,\r\n  },\r\n  progressSeekTo: {\r\n    backgroundColor: (data: any) =>\r\n      transperentizeColor(data.progressColor, 0.5),\r\n  },\r\n  progressBackground: {\r\n    backgroundColor: (data: any) =>\r\n      transperentizeColor(data.progressColor, 0.25),\r\n  },\r\n  progressSeekBtn: {\r\n    backgroundColor: (data: any) => data.progressColor,\r\n  },\r\n  progressSyncBtn: {\r\n    borderColor: (data: any) => data.progressColor,\r\n  },\r\n};\r\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\n\nimport formatTime from '../../core/utils/formatTime';\nimport getProgressTimeTooltipPosition from './utils/getProgressTimeTooltipPosition';\nimport { progressTemplate, progressTimeIndicatorTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\nimport toggleNodeClass from '../../core/toggleNodeClass';\n\nimport {\n  IProgressViewStyles,\n  IProgressViewCallbacks,\n  IProgressViewConfig,\n} from './types';\n\nimport progressViewTheme from './progress.theme';\nimport styles from './progress.scss';\n\nconst DATA_PLAYED = 'data-played-percent';\n\nconst getPercentBasedOnXPosition = (\n  event: MouseEvent,\n  element: HTMLElement,\n) => {\n  const boundingRect = element.getBoundingClientRect();\n  const positionX = event.clientX;\n\n  if (positionX < boundingRect.left) {\n    return 0;\n  }\n\n  if (positionX > boundingRect.left + boundingRect.width) {\n    return 100;\n  }\n\n  return (event.clientX - boundingRect.left) / boundingRect.width * 100;\n};\n\nclass ProgressView extends View<IProgressViewStyles>\n  implements Playable.IView<IProgressViewStyles> {\n  private _callbacks: IProgressViewCallbacks;\n  private _textMap: Playable.ITextMap;\n  private _tooltipService: Playable.ITooltipService;\n  private _syncButtonTooltipReference: Playable.ITooltipReference;\n\n  private _isDragging: boolean;\n\n  private _$node: HTMLElement;\n  private _$hitbox: HTMLElement;\n  private _$played: HTMLElement;\n  private _$buffered: HTMLElement;\n  private _$seekTo: HTMLElement;\n  private _$timeIndicators: HTMLElement;\n  private _$seekButton: HTMLElement;\n  private _$syncButton: HTMLElement;\n\n  constructor(config: IProgressViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._initDOM();\n    this._bindCallbacks();\n    this._bindEvents();\n\n    this._setPlayedDOMAttributes(0);\n    this._setBufferedDOMAttributes(0);\n    this.setUsualMode();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      progressTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      }),\n    );\n\n    this._$played = getElementByHook(this._$node, 'progress-played');\n    this._$buffered = getElementByHook(this._$node, 'progress-buffered');\n    this._$seekTo = getElementByHook(this._$node, 'progress-seek-to');\n    this._$timeIndicators = getElementByHook(\n      this._$node,\n      'progress-time-indicators',\n    );\n    this._$seekButton = getElementByHook(this._$node, 'progress-seek-button');\n    this._$syncButton = getElementByHook(this._$node, 'progress-sync-button');\n    this._syncButtonTooltipReference = this._tooltipService.createReference(\n      this._$syncButton,\n      {\n        text: this._textMap.get(TEXT_LABELS.LIVE_SYNC_TOOLTIP),\n      },\n    );\n    this._$hitbox = getElementByHook(this._$node, 'progress-hitbox');\n  }\n\n  private _bindCallbacks() {\n    this._setPlayedByDrag = this._setPlayedByDrag.bind(this);\n    this._startDragOnMouseDown = this._startDragOnMouseDown.bind(this);\n    this._stopDragOnMouseUp = this._stopDragOnMouseUp.bind(this);\n    this._startSeekToByMouse = this._startSeekToByMouse.bind(this);\n    this._stopSeekToByMouse = this._stopSeekToByMouse.bind(this);\n    this._syncWithLive = this._syncWithLive.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$seekButton.addEventListener('mousedown', this._startDragOnMouseDown);\n    this._$seekButton.addEventListener('mousemove', this._startSeekToByMouse);\n    this._$seekButton.addEventListener('mouseout', this._stopSeekToByMouse);\n\n    this._$hitbox.addEventListener('mousedown', this._startDragOnMouseDown);\n    this._$hitbox.addEventListener('mousemove', this._startSeekToByMouse);\n    this._$hitbox.addEventListener('mouseout', this._stopSeekToByMouse);\n\n    window.addEventListener('mousemove', this._setPlayedByDrag);\n    window.addEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$syncButton.addEventListener('click', this._syncWithLive);\n    this._$syncButton.addEventListener(\n      'mouseenter',\n      this._callbacks.onSyncWithLiveMouseEnter,\n    );\n    this._$syncButton.addEventListener(\n      'mouseleave',\n      this._callbacks.onSyncWithLiveMouseLeave,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$seekButton.removeEventListener(\n      'mousedown',\n      this._startDragOnMouseDown,\n    );\n    this._$seekButton.removeEventListener(\n      'mousemove',\n      this._startSeekToByMouse,\n    );\n    this._$seekButton.removeEventListener('mouseout', this._stopSeekToByMouse);\n\n    this._$hitbox.removeEventListener('mousedown', this._startDragOnMouseDown);\n    this._$hitbox.removeEventListener('mousemove', this._startSeekToByMouse);\n    this._$hitbox.removeEventListener('mouseout', this._stopSeekToByMouse);\n\n    window.removeEventListener('mousemove', this._setPlayedByDrag);\n    window.removeEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$syncButton.removeEventListener('click', this._syncWithLive);\n    this._$syncButton.removeEventListener(\n      'mouseenter',\n      this._callbacks.onSyncWithLiveMouseEnter,\n    );\n    this._$syncButton.removeEventListener(\n      'mouseleave',\n      this._callbacks.onSyncWithLiveMouseLeave,\n    );\n  }\n\n  private _startDragOnMouseDown(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    this._setPlayedDOMAttributes(percent);\n    this._callbacks.onChangePlayedProgress(percent);\n\n    this._startDrag();\n  }\n\n  private _stopDragOnMouseUp(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    this._stopDrag();\n  }\n\n  private _startSeekToByMouse(event: MouseEvent) {\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n\n    this._setSeekToDOMAttributes(percent);\n    this._callbacks.onSeekToByMouseStart(percent);\n  }\n\n  private _stopSeekToByMouse() {\n    this._setSeekToDOMAttributes(0);\n    this._callbacks.onSeekToByMouseEnd();\n  }\n\n  private _setPlayedByDrag(event: MouseEvent) {\n    if (this._isDragging) {\n      const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n      this._setPlayedDOMAttributes(percent);\n      this._callbacks.onChangePlayedProgress(percent);\n    }\n  }\n\n  private _startDrag() {\n    this._isDragging = true;\n    this._callbacks.onDragStart();\n    this._$node.classList.add(this.styleNames.isDragging);\n  }\n\n  private _stopDrag() {\n    if (this._isDragging) {\n      this._isDragging = false;\n      this._callbacks.onDragEnd();\n      this._$node.classList.remove(this.styleNames.isDragging);\n    }\n  }\n\n  private _setSeekToDOMAttributes(percent: number) {\n    this._$seekTo.setAttribute('style', `width:${percent}%;`);\n  }\n\n  private _setPlayedDOMAttributes(percent: number) {\n    this._$node.setAttribute(\n      'aria-valuetext',\n      this._textMap.get(TEXT_LABELS.PROGRESS_CONTROL_VALUE, { percent }),\n    );\n    this._$node.setAttribute('aria-valuenow', String(percent));\n    this._$node.setAttribute(DATA_PLAYED, String(percent));\n    this._$played.setAttribute('style', `width:${percent}%;`);\n    this._$seekButton.setAttribute('style', `left:${percent}%;`);\n  }\n\n  private _setBufferedDOMAttributes(percent: number) {\n    this._$buffered.setAttribute('style', `width:${percent}%;`);\n  }\n\n  private _syncWithLive() {\n    this._callbacks.onSyncWithLiveClick();\n  }\n\n  showSyncWithLive() {\n    this._$syncButton.classList.remove(this.styleNames.hidden);\n  }\n\n  hideSyncWithLive() {\n    this._$syncButton.classList.add(this.styleNames.hidden);\n  }\n\n  setLiveSyncStatus(isSync: boolean) {\n    toggleNodeClass(this._$syncButton, this.styleNames.liveSync, isSync);\n\n    if (isSync) {\n      this._syncButtonTooltipReference.disable();\n      this._$played.setAttribute('style', `width:100%;`);\n      this._$seekButton.setAttribute('style', `left:100%;`);\n    } else {\n      this._syncButtonTooltipReference.enable();\n    }\n  }\n\n  showProgressTimeTooltip({\n    time,\n    percent,\n  }: {\n    time: number;\n    percent: number;\n  }) {\n    this._tooltipService.show({\n      text: formatTime(time),\n      position: tooltipContainerNode =>\n        getProgressTimeTooltipPosition(\n          percent,\n          this._$hitbox,\n          tooltipContainerNode,\n        ),\n    });\n  }\n\n  hideProgressTimeTooltip() {\n    this._tooltipService.hide();\n  }\n\n  setLiveMode() {\n    this._$node.classList.add(this.styleNames.inLive);\n\n    this.showSyncWithLive();\n  }\n\n  setUsualMode() {\n    this._$node.classList.remove(this.styleNames.inLive);\n\n    this.hideSyncWithLive();\n  }\n\n  setPlayed(percent: number) {\n    this._setPlayedDOMAttributes(percent);\n  }\n\n  setBuffered(percent: number) {\n    this._setBufferedDOMAttributes(percent);\n  }\n\n  addTimeIndicator(percent: number) {\n    this._$timeIndicators.appendChild(\n      htmlToElement(\n        progressTimeIndicatorTemplate({\n          percent,\n          styles: this.styleNames,\n        }),\n      ),\n    );\n  }\n\n  clearTimeIndicators() {\n    this._$timeIndicators.innerHTML = '';\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._syncButtonTooltipReference.destroy();\n    this._syncButtonTooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$buffered = null;\n    this._$hitbox = null;\n    this._$played = null;\n    this._$seekTo = null;\n    this._$seekButton = null;\n    this._$syncButton = null;\n    this._$timeIndicators = null;\n\n    this._textMap = null;\n  }\n}\n\nProgressView.setTheme(progressViewTheme);\nProgressView.extendStyleNames(styles);\n\nexport default ProgressView;\n","import { getTooltipPositionByReferenceNode } from '../../../core/tooltip';\n\nfunction calcProgressTimeTooltipCenterX(\n  progressPercent: number,\n  progressNodeOffsetX: number,\n  progressNodeWidth: number,\n) {\n  return progressNodeOffsetX + progressPercent * progressNodeWidth / 100;\n}\n\nfunction getProgressTimeTooltipPosition(\n  progressPercent: number,\n  progressNode: HTMLElement,\n  tooltipContainerNode: HTMLElement,\n): Playable.ITooltipPosition {\n  return getTooltipPositionByReferenceNode(\n    progressNode,\n    tooltipContainerNode,\n    (progressNodeOffsetX, progressNodeWidth) =>\n      calcProgressTimeTooltipCenterX(\n        progressPercent,\n        progressNodeOffsetX,\n        progressNodeWidth,\n      ),\n  );\n}\n\nexport default getProgressTimeTooltipPosition;\n","export function getTimePercent(time: number, durationTime: number): number {\r\n  if (!durationTime) {\r\n    return 0;\r\n  }\r\n\r\n  return parseFloat((time / durationTime * 100).toFixed(1));\r\n}\r\n\r\nexport function getOverallBufferedPercent(\r\n  buffered: TimeRanges,\r\n  currentTime: number = 0,\r\n  duration: number = 0,\r\n) {\r\n  if (!buffered || !buffered.length || !duration) {\r\n    return 0;\r\n  }\r\n\r\n  const info = getNearestBufferSegmentInfo(buffered, currentTime);\r\n\r\n  return getTimePercent(info.end, duration);\r\n}\r\n\r\nexport function getOverallPlayedPercent(currentTime = 0, duration = 0) {\r\n  return getTimePercent(currentTime, duration);\r\n}\r\n\r\nexport function geOverallBufferLength(buffered: TimeRanges) {\r\n  let size = 0;\r\n\r\n  if (!buffered || !buffered.length) {\r\n    return size;\r\n  }\r\n\r\n  for (let i = 0; i < buffered.length; i += 1) {\r\n    size += buffered.end(i) - buffered.start(i);\r\n  }\r\n\r\n  return size;\r\n}\r\n\r\nexport function getNearestBufferSegmentInfo(\r\n  buffered: TimeRanges,\r\n  currentTime?: number,\r\n) {\r\n  let i = 0;\r\n\r\n  if (!buffered || !buffered.length) {\r\n    return null;\r\n  }\r\n\r\n  while (\r\n    i < buffered.length - 1 &&\r\n    !(buffered.start(i) <= currentTime && currentTime <= buffered.end(i))\r\n  ) {\r\n    i += 1;\r\n  }\r\n\r\n  return {\r\n    start: buffered.start(i),\r\n    end: buffered.end(i),\r\n  };\r\n}\r\n","import View from './progress.view';\n\nimport {\n  getTimePercent,\n  getOverallBufferedPercent,\n  getOverallPlayedPercent,\n} from '../../../../utils/video-data';\n\nimport {\n  VIDEO_EVENTS,\n  UI_EVENTS,\n  EngineState,\n  LiveState,\n} from '../../../../constants';\nimport { AMOUNT_TO_SKIP_SECONDS } from '../../../keyboard-control/keyboard-control';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\nimport playerAPI from '../../../../core/player-api-decorator';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { IProgressControl, IProgressViewConfig } from './types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\n\nconst UPDATE_INTERVAL_DELAY = 1000 / 60;\n\nexport default class ProgressControl implements IProgressControl {\n  static moduleName = 'progressControl';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'liveStateEngine',\n    'eventEmitter',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _engine: IPlaybackEngine;\n  private _liveStateEngine: any;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: Playable.ITextMap;\n  private _tooltipService: Playable.ITooltipService;\n  private _theme: Playable.IThemeService;\n\n  private _isUserInteracting: boolean;\n  private _shouldPlayAfterManipulationEnd: boolean;\n  private _currentProgress: number;\n  private _interceptor: KeyboardInterceptor;\n  private _updateControlInterval: number;\n  private _timeIndicatorsToAdd: number[];\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    liveStateEngine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    liveStateEngine: any;\n    textMap: Playable.ITextMap;\n    tooltipService: Playable.ITooltipService;\n    theme: Playable.IThemeService;\n  }) {\n    this._engine = engine;\n    this._liveStateEngine = liveStateEngine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n    this._isUserInteracting = false;\n    this._currentProgress = 0;\n    this._theme = theme;\n\n    this._timeIndicatorsToAdd = [];\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.view.setPlayed(0);\n    this.view.setBuffered(0);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._processStateChange],\n        [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processLiveStateChange],\n        [VIDEO_EVENTS.CHUNK_LOADED, this._updateBufferIndicator],\n        [VIDEO_EVENTS.DURATION_UPDATED, this._updateAllIndicators],\n      ],\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: IProgressViewConfig = {\n      callbacks: {\n        onSyncWithLiveClick: this._syncWithLive,\n        onSyncWithLiveMouseEnter: this._onSyncWithLiveMouseEnter,\n        onSyncWithLiveMouseLeave: this._onSyncWithLiveMouseLeave,\n        onChangePlayedProgress: this._changePlayedProgress,\n        onSeekToByMouseStart: this._onSeekToByMouseStart,\n        onSeekToByMouseEnd: this._onSeekToByMouseEnd,\n        onDragStart: this._onUserInteractionStarts,\n        onDragEnd: this._onUserInteractionEnds,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new ProgressControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.view.getNode(), {\n      [KEYCODES.UP_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n      },\n      [KEYCODES.DOWN_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n      },\n      [KEYCODES.RIGHT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n      },\n      [KEYCODES.LEFT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _bindCallbacks() {\n    this._syncWithLive = this._syncWithLive.bind(this);\n    this._onSyncWithLiveMouseEnter = this._onSyncWithLiveMouseEnter.bind(this);\n    this._onSyncWithLiveMouseLeave = this._onSyncWithLiveMouseLeave.bind(this);\n    this._updateControlOnInterval = this._updateControlOnInterval.bind(this);\n    this._changePlayedProgress = this._changePlayedProgress.bind(this);\n    this._onSeekToByMouseStart = this._onSeekToByMouseStart.bind(this);\n    this._onSeekToByMouseEnd = this._onSeekToByMouseEnd.bind(this);\n    this._onUserInteractionStarts = this._onUserInteractionStarts.bind(this);\n    this._onUserInteractionEnds = this._onUserInteractionEnds.bind(this);\n    this._processStateChange = this._processStateChange.bind(this);\n    this._playVideoOnProgressManipulationEnd = this._playVideoOnProgressManipulationEnd.bind(\n      this,\n    );\n  }\n\n  private _changePlayedProgress(value: number) {\n    if (this._currentProgress === value) {\n      return;\n    }\n\n    this._currentProgress = value;\n    this._changeCurrentTimeOfVideo(value / 100);\n  }\n\n  private _startIntervalUpdates() {\n    if (this._updateControlInterval) {\n      this._stopIntervalUpdates();\n    }\n\n    this._updateControlOnInterval();\n\n    this._updateControlInterval = window.setInterval(\n      this._updateControlOnInterval,\n      UPDATE_INTERVAL_DELAY,\n    );\n  }\n\n  private _onSeekToByMouseStart(percent: number) {\n    const durationTime = this._engine.getDurationTime();\n    const seekTime = durationTime * percent / 100;\n    const time = this._engine.isDynamicContent\n      ? seekTime - durationTime\n      : seekTime;\n\n    this.view.showProgressTimeTooltip({ time, percent });\n  }\n\n  private _onSeekToByMouseEnd() {\n    this.view.hideProgressTimeTooltip();\n  }\n\n  private _stopIntervalUpdates() {\n    window.clearInterval(this._updateControlInterval);\n    this._updateControlInterval = null;\n  }\n\n  private _onUserInteractionStarts() {\n    if (!this._isUserInteracting) {\n      this._isUserInteracting = true;\n      this._pauseVideoOnProgressManipulationStart();\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_START);\n  }\n\n  private _onUserInteractionEnds() {\n    if (this._isUserInteracting) {\n      this._isUserInteracting = false;\n      this._playVideoOnProgressManipulationEnd();\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_END);\n  }\n\n  private _updateControlOnInterval() {\n    this._updatePlayedIndicator();\n    this._updateBufferIndicator();\n  }\n\n  private _processStateChange({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.SRC_SET:\n        this.reset();\n        break;\n      case EngineState.METADATA_LOADED:\n        this._initTimeIndicators();\n\n        if (this._engine.isSeekAvailable) {\n          this.show();\n        } else {\n          this.hide();\n        }\n\n        break;\n      case EngineState.PLAYING:\n        if (this._liveStateEngine.state === LiveState.SYNC) {\n          this.view.setPlayed(100);\n        } else {\n          this._startIntervalUpdates();\n        }\n        break;\n      case EngineState.SEEK_IN_PROGRESS:\n        this._updatePlayedIndicator();\n        this._updateBufferIndicator();\n        break;\n      default:\n        this._stopIntervalUpdates();\n        break;\n    }\n  }\n\n  private _processLiveStateChange({ nextState }: { nextState: LiveState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this.view.setLiveSyncStatus(false);\n        this.view.setUsualMode();\n        break;\n\n      case LiveState.INITIAL:\n        this.view.setLiveMode();\n        break;\n\n      case LiveState.SYNC:\n        this.view.setLiveSyncStatus(true);\n        break;\n\n      case LiveState.NOT_SYNC:\n        this.view.setLiveSyncStatus(false);\n        break;\n\n      case LiveState.ENDED:\n        this.view.setLiveSyncStatus(false);\n        this.view.hideSyncWithLive();\n\n        // ensure progress indicators show latest info\n        if (this._engine.getCurrentState() === EngineState.PLAYING) {\n          this._startIntervalUpdates();\n        } else {\n          this._updatePlayedIndicator();\n          this._updateBufferIndicator();\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _changeCurrentTimeOfVideo(percent: number) {\n    const duration = this._engine.getDurationTime();\n\n    if (this._engine.isDynamicContent && percent === 1) {\n      this._engine.syncWithLive();\n    } else {\n      this._engine.setCurrentTime(duration * percent);\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_CHANGE_TRIGGERED, percent);\n  }\n\n  private _pauseVideoOnProgressManipulationStart() {\n    const currentState = this._engine.getCurrentState();\n\n    if (\n      currentState === EngineState.PLAYING ||\n      currentState === EngineState.PLAY_REQUESTED\n    ) {\n      this._shouldPlayAfterManipulationEnd = true;\n      this._engine.pause();\n    }\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_MANIPULATION_STARTED);\n  }\n\n  private _playVideoOnProgressManipulationEnd() {\n    if (this._shouldPlayAfterManipulationEnd) {\n      this._engine.play();\n\n      this._shouldPlayAfterManipulationEnd = false;\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_MANIPULATION_ENDED);\n  }\n\n  private _updateBufferIndicator() {\n    const currentTime = this._engine.getCurrentTime();\n    const buffered = this._engine.getBuffered();\n    const duration = this._engine.getDurationTime();\n\n    this.updateBuffered(\n      getOverallBufferedPercent(buffered, currentTime, duration),\n    );\n  }\n\n  private _updatePlayedIndicator() {\n    if (this._liveStateEngine.state === LiveState.SYNC) {\n      // TODO: mb use this.updatePlayed(100) here?\n      return;\n    }\n\n    const currentTime = this._engine.getCurrentTime();\n    const duration = this._engine.getDurationTime();\n\n    this.updatePlayed(getOverallPlayedPercent(currentTime, duration));\n  }\n\n  private _updateAllIndicators() {\n    this._updatePlayedIndicator();\n    this._updateBufferIndicator();\n  }\n\n  private _initTimeIndicators() {\n    this._timeIndicatorsToAdd.forEach(time => {\n      this._addTimeIndicator(time);\n    });\n    this._timeIndicatorsToAdd = [];\n  }\n\n  private _addTimeIndicator(time: number) {\n    const durationTime = this._engine.getDurationTime();\n\n    if (time > durationTime) {\n      // TODO: log error for developers\n      return;\n    }\n\n    this.view.addTimeIndicator(getTimePercent(time, durationTime));\n  }\n\n  private _syncWithLive() {\n    this._engine.syncWithLive();\n  }\n\n  private _onSyncWithLiveMouseEnter() {\n    this._eventEmitter.emit(\n      UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED,\n    );\n  }\n\n  private _onSyncWithLiveMouseLeave() {\n    this._eventEmitter.emit(\n      UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED,\n    );\n  }\n\n  /**\n   * Add time indicator to progress bar\n   */\n  @playerAPI()\n  addTimeIndicator(time: number) {\n    this.addTimeIndicators([time]);\n  }\n\n  /**\n   * Add time indicators to progress bar\n   */\n  @playerAPI()\n  addTimeIndicators(times: number[]) {\n    if (!this._engine.isMetadataLoaded) {\n      // NOTE: Add indicator after metadata loaded\n      this._timeIndicatorsToAdd.push(...times);\n      return;\n    }\n\n    times.forEach(time => {\n      this._addTimeIndicator(time);\n    });\n  }\n\n  /**\n   * Delete all time indicators from progress bar\n   */\n  @playerAPI()\n  clearTimeIndicators() {\n    this.view.clearTimeIndicators();\n  }\n\n  updatePlayed(percent: number) {\n    this._currentProgress = percent;\n    this.view.setPlayed(this._currentProgress);\n  }\n\n  updateBuffered(percent: number) {\n    this.view.setBuffered(percent);\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  reset() {\n    this.updatePlayed(0);\n    this.updateBuffered(0);\n    this.clearTimeIndicators();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._stopIntervalUpdates();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n    this._liveStateEngine = null;\n    this._timeIndicatorsToAdd = null;\n    this._textMap = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\n\nimport {\n  controlTemplate,\n  playIconTemplate,\n  pauseIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { IPlayViewStyles, IPlayViewCallbacks, IPlayViewConfig } from './types';\n\nimport playViewTheme from './play.theme';\nimport styles from './play.scss';\n\nconst DATA_IS_PLAYING = 'data-is-playing';\n\nclass PlayView extends View<IPlayViewStyles>\n  implements Playable.IView<IPlayViewStyles> {\n  private _callbacks: IPlayViewCallbacks;\n  private _textMap: Playable.ITextMap;\n\n  private _$node: HTMLElement;\n  private _$playbackControl: HTMLElement;\n\n  constructor(config: IPlayViewConfig) {\n    const { callbacks, textMap, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$node = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.PLAY_CONTROL_LABEL),\n        },\n      }),\n    );\n\n    this._$playbackControl = getElementByHook(this._$node, 'playback-control');\n\n    this.setState({ isPlaying: false });\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._$playbackControl.addEventListener('click', this._onButtonClick);\n  }\n\n  private _unbindEvents() {\n    this._$playbackControl.removeEventListener('click', this._onButtonClick);\n  }\n\n  private _onButtonClick() {\n    this._$playbackControl.focus();\n    this._callbacks.onButtonClick();\n  }\n\n  setState({ isPlaying }: { isPlaying: boolean }) {\n    if (isPlaying) {\n      this._$playbackControl.classList.remove(this.styleNames.paused);\n      this._$playbackControl.innerHTML = pauseIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$playbackControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.PAUSE_CONTROL_LABEL),\n      );\n    } else {\n      this._$playbackControl.classList.add(this.styleNames.paused);\n      this._$playbackControl.innerHTML = playIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$playbackControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.PLAY_CONTROL_LABEL),\n      );\n    }\n\n    this._$node.setAttribute(DATA_IS_PLAYING, String(isPlaying));\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$playbackControl = null;\n    this._$node = null;\n    this._textMap = null;\n  }\n}\n\nPlayView.setTheme(playViewTheme);\nPlayView.extendStyleNames(styles);\n\nexport default PlayView;\n","export default {\r\n  playSvgFill: {\r\n    fill: (data: any) => data.color,\r\n  },\r\n};\r\n","import { IPlayControl, IPlayViewConfig } from './types';\n\nimport View from './play.view';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\n\nexport default class PlayControl implements IPlayControl {\n  static moduleName = 'playControl';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'textMap', 'theme'];\n\n  private _engine: IPlaybackEngine;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: Playable.ITextMap;\n  private _theme: Playable.IThemeService;\n\n  private _interceptor: KeyboardInterceptor;\n  private _isPlaying: boolean;\n\n  private _unbindEvents: Function;\n\n  view: View;\n\n  constructor({\n    engine,\n    eventEmitter,\n    textMap,\n    theme,\n  }: {\n    engine: IPlaybackEngine;\n    eventEmitter: IEventEmitter;\n    textMap: Playable.ITextMap;\n    theme: Playable.IThemeService;\n  }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._theme = theme;\n\n    this._isPlaying = null;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.setControlStatus(false);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n        );\n      },\n      [KEYCODES.ENTER]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n        );\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _bindCallbacks() {\n    this._togglePlayback = this._togglePlayback.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[VIDEO_EVENTS.STATE_CHANGED, this._updatePlayingStatus]],\n      this,\n    );\n  }\n\n  private _togglePlayback() {\n    if (this._isPlaying) {\n      this._pauseVideo();\n    } else {\n      this._playVideo();\n    }\n  }\n\n  private _playVideo() {\n    this._engine.play();\n\n    this._eventEmitter.emit(UI_EVENTS.PLAY_TRIGGERED);\n  }\n\n  private _pauseVideo() {\n    this._engine.pause();\n\n    this._eventEmitter.emit(UI_EVENTS.PAUSE_TRIGGERED);\n  }\n\n  private _updatePlayingStatus({ nextState }: { nextState: EngineState }) {\n    if (nextState === EngineState.SRC_SET) {\n      this.reset();\n    } else if (nextState === EngineState.PLAYING) {\n      this.setControlStatus(true);\n    } else if (\n      nextState === EngineState.PAUSED ||\n      nextState === EngineState.ENDED ||\n      nextState === EngineState.SEEK_IN_PROGRESS\n    ) {\n      this.setControlStatus(false);\n    }\n  }\n\n  private _initUI() {\n    const config: IPlayViewConfig = {\n      callbacks: {\n        onButtonClick: this._togglePlayback,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n    };\n\n    this.view = new PlayControl.View(config);\n  }\n\n  setControlStatus(isPlaying: boolean) {\n    this._isPlaying = isPlaying;\n    this.view.setState({ isPlaying: this._isPlaying });\n  }\n\n  reset() {\n    this.setControlStatus(false);\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n    this._textMap = null;\n  }\n}\n","import View from '../../core/view';\n\nimport formatTime from '../../core/utils/formatTime';\n\nimport { timeTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { ITimeViewStyles, ITimeViewConfig } from './types';\nimport timeViewTheme from './time.theme';\nimport styles from './time.scss';\n\nclass TimeView extends View<ITimeViewStyles>\n  implements Playable.IView<ITimeViewStyles> {\n  private _$node: HTMLElement;\n  private _$currentTime: HTMLElement;\n  private _$durationTime: HTMLElement;\n  private _duration: number;\n  private _current: number;\n  private _isBackward: boolean;\n  constructor(config: ITimeViewConfig) {\n    const { theme } = config;\n    super(theme);\n\n    this._initDOM();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      timeTemplate({ styles: this.styleNames, themeStyles: this.themeStyles }),\n    );\n\n    this._$currentTime = getElementByHook(\n      this._$node,\n      'current-time-indicator',\n    );\n    this._$durationTime = getElementByHook(\n      this._$node,\n      'duration-time-indicator',\n    );\n  }\n\n  setDurationTime(duration: number) {\n    if (duration !== this._duration) {\n      this._duration = duration;\n      this._updateDurationTime();\n    }\n  }\n\n  setCurrentTime(current: number) {\n    if (current !== this._current) {\n      this._current = current;\n      this._updateCurrentTime();\n    }\n  }\n\n  setCurrentTimeBackward(_isBackward: boolean) {\n    this._isBackward = _isBackward;\n    this._updateCurrentTime();\n  }\n\n  private _updateDurationTime() {\n    this._$durationTime.innerHTML = formatTime(this._duration);\n  }\n\n  private _updateCurrentTime() {\n    if (this._isBackward) {\n      this._$currentTime.innerHTML = formatTime(this._current - this._duration);\n    } else {\n      this._$currentTime.innerHTML = formatTime(this._current);\n    }\n  }\n\n  showDuration() {\n    this._$durationTime.classList.remove(this.styleNames.hidden);\n  }\n\n  hideDuration() {\n    this._$durationTime.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$currentTime = null;\n    this._$durationTime = null;\n    this._$node = null;\n  }\n}\n\nTimeView.setTheme(timeViewTheme);\nTimeView.extendStyleNames(styles);\n\nexport default TimeView;\n","export default {\r\n  timeText: {\r\n    color: (data: any) => data.color,\r\n  },\r\n};\r\n","import View from './time.view';\n\nimport { VIDEO_EVENTS, EngineState, LiveState } from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\nimport { ITimeControl, ITimeViewConfig } from './types';\n\nconst UPDATE_INTERVAL_DELAY = 1000 / 60;\n\nexport default class TimeControl implements ITimeControl {\n  static moduleName = 'timeControl';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'theme'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _theme: Playable.IThemeService;\n\n  private _updateControlInterval: number;\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    engine,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    theme: Playable.IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._theme = theme;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.setCurrentTime(0);\n    this.setDurationTime(0);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._updateCurrentTime = this._updateCurrentTime.bind(this);\n    this._updateDurationTime = this._updateDurationTime.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._toggleIntervalUpdates],\n        [VIDEO_EVENTS.DURATION_UPDATED, this._updateDurationTime],\n        [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processLiveStateChange],\n      ],\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: ITimeViewConfig = {\n      theme: this._theme,\n    };\n    this.view = new TimeControl.View(config);\n  }\n\n  private _startIntervalUpdates() {\n    if (this._updateControlInterval) {\n      this._stopIntervalUpdates();\n    }\n    this._updateControlInterval = window.setInterval(\n      this._updateCurrentTime,\n      UPDATE_INTERVAL_DELAY,\n    );\n  }\n\n  private _stopIntervalUpdates() {\n    window.clearInterval(this._updateControlInterval);\n    this._updateControlInterval = null;\n  }\n\n  private _processLiveStateChange({ nextState }: { nextState: LiveState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this.show();\n        break;\n\n      case LiveState.INITIAL:\n        this.hide();\n        break;\n\n      case LiveState.ENDED:\n        this.show();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _toggleIntervalUpdates({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.SRC_SET:\n        this.reset();\n        break;\n      case EngineState.PLAYING:\n        this._startIntervalUpdates();\n        break;\n      case EngineState.SEEK_IN_PROGRESS:\n        this._updateCurrentTime();\n        break;\n      default:\n        this._stopIntervalUpdates();\n        break;\n    }\n  }\n\n  private _updateDurationTime() {\n    this.setDurationTime(this._engine.getDurationTime());\n  }\n\n  private _updateCurrentTime() {\n    this.setCurrentTime(this._engine.getCurrentTime());\n  }\n\n  setDurationTime(time: number) {\n    this.view.setDurationTime(time);\n  }\n\n  setCurrentTime(time: number) {\n    this.view.setCurrentTime(time);\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  reset() {\n    this.setDurationTime(0);\n    this.setCurrentTime(0);\n    this.view.showDuration();\n    this.view.setCurrentTimeBackward(false);\n    this.show();\n  }\n\n  destroy() {\n    this._stopIntervalUpdates();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import { transperentizeColor } from '../../core/theme';\r\n\r\nexport default {\r\n  volumeSvgFill: {\r\n    fill: (data: any) => data.color,\r\n  },\r\n  volumeSvgStroke: {\r\n    stroke: (data: any) => data.color,\r\n  },\r\n  volumeProgress: {\r\n    backgroundColor: (data: any) => data.color,\r\n    '&:after': {\r\n      backgroundColor: (data: any) => data.color,\r\n    },\r\n  },\r\n  volumeProgressBackground: {\r\n    backgroundColor: (data: any) => transperentizeColor(data.color, 0.25),\r\n  },\r\n};\r\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport {\n  controlTemplate,\n  volume0IconTemplate,\n  volume50IconTemplate,\n  volume100IconTemplate,\n} from './templates';\n\nimport View from '../../core/view';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport {\n  IVolumeViewStyles,\n  IVolumeViewCallbacks,\n  IVolumeViewConfig,\n} from './types';\n\nimport volumeViewTheme from './volume.theme';\nimport styles from './volume.scss';\n\nconst DATA_IS_MUTED = 'data-is-muted';\nconst DATA_VOLUME = 'data-volume-percent';\n\nconst MAX_VOLUME_ICON_RANGE = 50;\n\nconst getPercentBasedOnXPosition = (\n  event: MouseEvent,\n  element: HTMLElement,\n) => {\n  const boundingRect = element.getBoundingClientRect();\n  const positionX = event.clientX;\n\n  if (positionX < boundingRect.left) {\n    return 0;\n  }\n\n  if (positionX > boundingRect.left + boundingRect.width) {\n    return 100;\n  }\n\n  return (event.clientX - boundingRect.left) / boundingRect.width * 100;\n};\n\nclass VolumeView extends View<IVolumeViewStyles>\n  implements Playable.IView<IVolumeViewStyles> {\n  private _callbacks: IVolumeViewCallbacks;\n  private _textMap: Playable.ITextMap;\n  private _tooltipService: Playable.ITooltipService;\n  private _muteButtonTooltipReference: Playable.ITooltipReference;\n\n  private _$node: HTMLElement;\n  private _$muteButton: HTMLElement;\n  private _$volumeNode: HTMLElement;\n  private _$volume: HTMLElement;\n  private _$hitbox: HTMLElement;\n\n  private _isDragging: boolean;\n\n  constructor(config: IVolumeViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n        texts: {\n          muteLabel: this._textMap.get(TEXT_LABELS.MUTE_CONTROL_LABEL),\n          volumeLabel: this._textMap.get(TEXT_LABELS.VOLUME_CONTROL_LABEL),\n        },\n      }),\n    );\n\n    this._$muteButton = getElementByHook(this._$node, 'mute-button');\n    this._$volumeNode = getElementByHook(this._$node, 'volume-input-block');\n    this._$hitbox = getElementByHook(this._$node, 'volume-hitbox');\n    this._$volume = getElementByHook(this._$node, 'volume-input');\n\n    this._muteButtonTooltipReference = this._tooltipService.createReference(\n      this._$muteButton,\n      {\n        text: this._textMap.get(TEXT_LABELS.MUTE_CONTROL_TOOLTIP),\n      },\n    );\n  }\n\n  private _bindCallbacks() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._startDragOnMouseDown = this._startDragOnMouseDown.bind(this);\n    this._stopDragOnMouseUp = this._stopDragOnMouseUp.bind(this);\n    this._setVolumeByWheel = this._setVolumeByWheel.bind(this);\n    this._setVolumeByClick = this._setVolumeByClick.bind(this);\n    this._setVolumeByDrag = this._setVolumeByDrag.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$hitbox.addEventListener('wheel', this._setVolumeByWheel);\n    this._$hitbox.addEventListener('mousedown', this._startDragOnMouseDown);\n    window.addEventListener('mousemove', this._setVolumeByDrag);\n    window.addEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$muteButton.addEventListener('click', this._onButtonClick);\n  }\n\n  private _unbindEvents() {\n    this._$hitbox.removeEventListener('wheel', this._setVolumeByWheel);\n    this._$hitbox.removeEventListener('mousedown', this._startDragOnMouseDown);\n    window.removeEventListener('mousemove', this._setVolumeByDrag);\n    window.removeEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$muteButton.removeEventListener('click', this._onButtonClick);\n  }\n\n  private _startDragOnMouseDown(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n    this._setVolumeByClick(event);\n    this._startDrag();\n  }\n\n  private _stopDragOnMouseUp(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    this._stopDrag();\n  }\n\n  private _setVolumeByClick(event: MouseEvent) {\n    this._$volumeNode.focus();\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    this._callbacks.onVolumeLevelChangeFromInput(percent);\n  }\n\n  private _setVolumeByDrag(event: MouseEvent) {\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    if (this._isDragging) {\n      this._callbacks.onVolumeLevelChangeFromInput(percent);\n    }\n  }\n\n  private _setVolumeByWheel(e: WheelEvent) {\n    e.preventDefault();\n    const value = e.deltaX || e.deltaY * -1;\n\n    if (!value) {\n      return;\n    }\n\n    this._callbacks.onVolumeLevelChangeFromWheel(value);\n  }\n\n  private _startDrag() {\n    this._isDragging = true;\n    this._$node.classList.add(this.styleNames.isDragging);\n    this._callbacks.onDragStart();\n  }\n\n  private _stopDrag() {\n    if (this._isDragging) {\n      this._isDragging = false;\n      this._$node.classList.remove(this.styleNames.isDragging);\n      this._callbacks.onDragEnd();\n    }\n  }\n\n  private _setVolumeDOMAttributes(percent: number) {\n    this._$volumeNode.setAttribute('value', String(percent));\n    this._$volumeNode.setAttribute(\n      'aria-valuetext',\n      this._textMap.get(TEXT_LABELS.VOLUME_CONTROL_VALUE, { percent }),\n    );\n    this._$volumeNode.setAttribute('aria-valuenow', String(percent));\n    this._$volumeNode.setAttribute(DATA_VOLUME, String(percent));\n\n    this._$volume.setAttribute('style', `width:${percent}%;`);\n\n    this._$node.setAttribute(DATA_VOLUME, String(percent));\n\n    const iconTemplateProps = {\n      styles: this.styleNames,\n      themeStyles: this.themeStyles,\n    };\n\n    if (percent >= MAX_VOLUME_ICON_RANGE) {\n      this._$muteButton.innerHTML = volume100IconTemplate(iconTemplateProps);\n    } else if (percent > 0) {\n      this._$muteButton.innerHTML = volume50IconTemplate(iconTemplateProps);\n    } else {\n      this._$muteButton.innerHTML = volume0IconTemplate(iconTemplateProps);\n    }\n  }\n\n  private _onButtonClick() {\n    this._$muteButton.focus();\n    this._callbacks.onToggleMuteClick();\n  }\n\n  setVolume(volume: number) {\n    this._setVolumeDOMAttributes(volume);\n  }\n\n  setMute(isMuted: boolean) {\n    this._setMuteDOMAttributes(isMuted);\n  }\n\n  private _setMuteDOMAttributes(isMuted: boolean) {\n    if (isMuted) {\n      this._$muteButton.innerHTML = volume0IconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n    }\n\n    this._$node.setAttribute(DATA_IS_MUTED, String(isMuted));\n    this._$muteButton.setAttribute(\n      'aria-label',\n      isMuted\n        ? this._textMap.get(TEXT_LABELS.UNMUTE_CONTROL_LABEL)\n        : this._textMap.get(TEXT_LABELS.MUTE_CONTROL_LABEL),\n    );\n    this._muteButtonTooltipReference.setText(\n      isMuted\n        ? this._textMap.get(TEXT_LABELS.UNMUTE_CONTROL_TOOLTIP)\n        : this._textMap.get(TEXT_LABELS.MUTE_CONTROL_TOOLTIP),\n    );\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  getButtonNode() {\n    return this._$muteButton;\n  }\n\n  getInputNode() {\n    return this._$volumeNode;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._muteButtonTooltipReference.destroy();\n    this._muteButtonTooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$muteButton = null;\n    this._$node = null;\n\n    this._textMap = null;\n  }\n}\n\nVolumeView.setTheme(volumeViewTheme);\nVolumeView.extendStyleNames(styles);\n\nexport default VolumeView;\n","import View from './volume.view';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { AMOUNT_TO_CHANGE_VOLUME } from '../../../keyboard-control/keyboard-control';\nimport { VIDEO_EVENTS, UI_EVENTS } from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { IVolumeControl, IVolumeViewConfig } from './types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\n\nexport default class VolumeControl implements IVolumeControl {\n  static moduleName = 'volumeControl';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _engine: IPlaybackEngine;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: Playable.ITextMap;\n  private _tooltipService: Playable.ITooltipService;\n  private _theme: Playable.IThemeService;\n\n  private _isMuted: boolean;\n  private _volume: number;\n\n  private _buttonInterceptor: KeyboardInterceptor;\n  private _inputInterceptor: KeyboardInterceptor;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    textMap: Playable.ITextMap;\n    tooltipService: Playable.ITooltipService;\n    theme: Playable.IThemeService;\n  }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n    this._theme = theme;\n\n    this._isMuted = this._engine.getMute();\n    this._volume = this._engine.getVolume();\n\n    this._bindCallbacks();\n\n    this._initUI();\n\n    this._bindEvents();\n\n    this.view.setVolume(this._volume);\n    this.view.setMute(this._isMuted);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    const config: IVolumeViewConfig = {\n      callbacks: {\n        onDragStart: this._broadcastDragStart,\n        onDragEnd: this._broadcastDragEnd,\n        onVolumeLevelChangeFromInput: this._getVolumeLevelFromInput,\n        onVolumeLevelChangeFromWheel: this._getVolumeLevelFromWheel,\n        onToggleMuteClick: this._toggleMuteStatus,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new VolumeControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._buttonInterceptor = new KeyboardInterceptor(\n      this.view.getButtonNode(),\n      {\n        [KEYCODES.SPACE_BAR]: e => {\n          e.stopPropagation();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            this._isMuted\n              ? UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED\n              : UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n        [KEYCODES.ENTER]: e => {\n          e.stopPropagation();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            this._isMuted\n              ? UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED\n              : UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n      },\n    );\n\n    this._inputInterceptor = new KeyboardInterceptor(this.view.getInputNode(), {\n      [KEYCODES.RIGHT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.increaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n      [KEYCODES.LEFT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.decreaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._buttonInterceptor.destroy();\n    this._inputInterceptor.destroy();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[VIDEO_EVENTS.VOLUME_STATUS_CHANGED, this._updateVolumeStatus]],\n      this,\n    );\n  }\n\n  private _bindCallbacks() {\n    this._getVolumeLevelFromInput = this._getVolumeLevelFromInput.bind(this);\n    this._toggleMuteStatus = this._toggleMuteStatus.bind(this);\n    this._getVolumeLevelFromWheel = this._getVolumeLevelFromWheel.bind(this);\n    this._broadcastDragStart = this._broadcastDragStart.bind(this);\n    this._broadcastDragEnd = this._broadcastDragEnd.bind(this);\n  }\n\n  private _broadcastDragStart() {\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_START);\n  }\n\n  private _broadcastDragEnd() {\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_END);\n  }\n\n  private _changeVolumeLevel(level: number) {\n    this._engine.setVolume(level);\n    this._eventEmitter.emit(UI_EVENTS.VOLUME_CHANGE_TRIGGERED, level);\n  }\n\n  private _toggleMuteStatus() {\n    this._engine.setMute(!this._isMuted);\n    this._eventEmitter.emit(UI_EVENTS.MUTE_STATUS_TRIGGERED, !this._isMuted);\n  }\n\n  private _getVolumeLevelFromWheel(delta: number) {\n    const adjustedVolume = this._volume + delta / 10;\n    const validatedVolume = Math.min(100, Math.max(0, adjustedVolume));\n\n    this._changeVolumeStatus(validatedVolume);\n  }\n\n  private _getVolumeLevelFromInput(level: number) {\n    this._changeVolumeStatus(level);\n  }\n\n  private _changeVolumeStatus(level: number) {\n    this._changeVolumeLevel(level);\n    if (this._isMuted) {\n      this._toggleMuteStatus();\n    }\n  }\n\n  private _updateVolumeStatus() {\n    this.setVolumeLevel(this._engine.getVolume());\n    this.setMuteStatus(this._engine.getMute());\n  }\n\n  setVolumeLevel(level: number) {\n    if (level === this._volume) {\n      return;\n    }\n\n    this._volume = level;\n\n    this.view.setVolume(this._volume);\n    this.view.setMute(Boolean(!this._volume));\n  }\n\n  setMuteStatus(isMuted: boolean) {\n    if (isMuted === this._isMuted) {\n      return;\n    }\n\n    this._isMuted = isMuted;\n\n    this.view.setVolume(this._isMuted ? 0 : this._volume);\n    this.view.setMute(this._isMuted || Boolean(!this._volume));\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n    this._textMap = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\n\nimport {\n  controlTemplate,\n  enterFullScreenIconTemplate,\n  exitFullScreenIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport {\n  IFullScreenViewStyles,\n  IFullScreenViewCallbacks,\n  IFullScreenViewConfig,\n} from './types';\n\nimport fullScreenViewTheme from './full-screen.theme';\nimport styles from './full-screen.scss';\n\nconst DATA_IS_IN_FULL_SCREEN = 'data-is-in-full-screen';\n\nclass FullScreenView extends View<IFullScreenViewStyles>\n  implements Playable.IView<IFullScreenViewStyles> {\n  private _callbacks: IFullScreenViewCallbacks;\n  private _textMap: Playable.ITextMap;\n  private _tooltipReference: Playable.ITooltipReference;\n\n  private _$node: HTMLElement;\n  private _$toggleFullScreenControl: HTMLElement;\n\n  constructor(config: IFullScreenViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$node = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_LABEL),\n        },\n      }),\n    );\n\n    this._$toggleFullScreenControl = getElementByHook(\n      this._$node,\n      'full-screen-button',\n    );\n\n    this._tooltipReference = tooltipService.createReference(\n      this._$toggleFullScreenControl,\n      {\n        text: this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP),\n      },\n    );\n\n    this.setState({ isInFullScreen: false });\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._$toggleFullScreenControl.addEventListener(\n      'click',\n      this._onButtonClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$toggleFullScreenControl.removeEventListener(\n      'click',\n      this._onButtonClick,\n    );\n  }\n\n  private _onButtonClick() {\n    this._$toggleFullScreenControl.focus();\n    this._callbacks.onButtonClick();\n  }\n\n  setState({ isInFullScreen }: { isInFullScreen: boolean }) {\n    if (isInFullScreen) {\n      this._$toggleFullScreenControl.classList.add(\n        this.styleNames.inFullScreen,\n      );\n      this._$toggleFullScreenControl.innerHTML = exitFullScreenIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$toggleFullScreenControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.EXIT_FULL_SCREEN_LABEL),\n      );\n\n      this._tooltipReference.setText(\n        this._textMap.get(TEXT_LABELS.EXIT_FULL_SCREEN_TOOLTIP),\n      );\n    } else {\n      this._$toggleFullScreenControl.classList.remove(\n        this.styleNames.inFullScreen,\n      );\n      this._$toggleFullScreenControl.innerHTML = enterFullScreenIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$toggleFullScreenControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_LABEL),\n      );\n\n      this._tooltipReference.setText(\n        this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP),\n      );\n    }\n\n    this._$node.setAttribute(DATA_IS_IN_FULL_SCREEN, String(isInFullScreen));\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$toggleFullScreenControl = null;\n    this._$node = null;\n\n    this._textMap = null;\n  }\n}\n\nFullScreenView.setTheme(fullScreenViewTheme);\nFullScreenView.extendStyleNames(styles);\n\nexport default FullScreenView;\n","export default {\r\n  fullScreenSvgFill: {\r\n    fill: (data: any) => data.color,\r\n  },\r\n};\r\n","import { UI_EVENTS } from '../../../../constants';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport View from './full-screen.view';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { IFullScreenControl, IFullScreenViewConfig } from './types';\nimport { IFullScreenManager } from '../../../full-screen-manager/types';\n\nexport default class FullScreenControl implements IFullScreenControl {\n  static moduleName = 'fullScreenControl';\n  static View = View;\n  static dependencies = [\n    'eventEmitter',\n    'fullScreenManager',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _fullScreenManager: IFullScreenManager;\n  private _textMap: Playable.ITextMap;\n  private _interceptor: KeyboardInterceptor;\n  private _tooltipService: Playable.ITooltipService;\n  private _theme: Playable.IThemeService;\n\n  private _isInFullScreen: boolean;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    fullScreenManager,\n    textMap,\n    tooltipService,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    fullScreenManager: IFullScreenManager;\n    textMap: Playable.ITextMap;\n    tooltipService: Playable.ITooltipService;\n    theme: Playable.IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._fullScreenManager = fullScreenManager;\n    this._textMap = textMap;\n    this._theme = theme;\n    this._tooltipService = tooltipService;\n\n    this._isInFullScreen = null;\n\n    this._bindCallbacks();\n\n    this._initUI();\n\n    this._bindEvents();\n\n    this.setControlStatus(false);\n\n    if (!this._fullScreenManager.isEnabled) {\n      this.hide();\n    }\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._toggleFullScreen = this._toggleFullScreen.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this.setControlStatus]],\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: IFullScreenViewConfig = {\n      callbacks: {\n        onButtonClick: this._toggleFullScreen,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n      theme: this._theme,\n    };\n\n    this.view = new FullScreenControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: (e: Event) => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n      },\n      [KEYCODES.ENTER]: (e: Event) => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _toggleFullScreen() {\n    if (this._isInFullScreen) {\n      this._exitFullScreen();\n    } else {\n      this._enterFullScreen();\n    }\n  }\n\n  private _enterFullScreen() {\n    this._fullScreenManager.enterFullScreen();\n  }\n\n  private _exitFullScreen() {\n    this._fullScreenManager.exitFullScreen();\n  }\n\n  setControlStatus(isInFullScreen: boolean) {\n    this._isInFullScreen = isInFullScreen;\n    this.view.setState({ isInFullScreen: this._isInFullScreen });\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._fullScreenManager = null;\n    this._textMap = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\nimport { ILogoViewStyles, ILogoViewCallbacks, ILogoViewConfig } from './types';\nimport { logoTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport styles from './logo.scss';\n\nclass LogoView extends View<ILogoViewStyles>\n  implements Playable.IView<ILogoViewStyles> {\n  private _tooltipReference: Playable.ITooltipReference;\n  private _callbacks: ILogoViewCallbacks;\n  private _textMap: Playable.ITextMap;\n\n  private _$node: HTMLElement;\n  private _$logo: HTMLElement;\n  private _$placeholder: HTMLElement;\n\n  constructor(config: ILogoViewConfig) {\n    super();\n    const { callbacks, textMap, tooltipService } = config;\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$node = htmlToElement(\n      logoTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.LOGO_LABEL),\n        },\n      }),\n    );\n\n    this._$logo = getElementByHook(this._$node, 'company-logo');\n    this._$placeholder = getElementByHook(this._$node, 'logo-placeholder');\n\n    this._tooltipReference = tooltipService.createReference(this._$node, {\n      text: this._textMap.get(TEXT_LABELS.LOGO_TOOLTIP),\n    });\n\n    this.setLogo(config.logo);\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  setLogo(url: string) {\n    if (url) {\n      this._$logo.classList.remove(this.styleNames.hidden);\n      this._$placeholder.classList.add(this.styleNames.hidden);\n      this._$logo.setAttribute('src', url);\n    } else {\n      this._$logo.classList.add(this.styleNames.hidden);\n      this._$placeholder.classList.remove(this.styleNames.hidden);\n      this._$logo.removeAttribute('src');\n    }\n  }\n\n  setDisplayAsLink(flag: boolean) {\n    if (flag) {\n      this._$node.classList.add(this.styleNames.link);\n      this._tooltipReference.enable();\n    } else {\n      this._$node.classList.remove(this.styleNames.link);\n      this._tooltipReference.disable();\n    }\n  }\n\n  private _bindCallbacks() {\n    this._onNodeClick = this._onNodeClick.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._onNodeClick);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._onNodeClick);\n  }\n\n  private _onNodeClick() {\n    this._$node.focus();\n    this._callbacks.onLogoClick();\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n    this._$logo = null;\n    this._$placeholder = null;\n\n    this._tooltipReference = null;\n    this._textMap = null;\n  }\n}\n\nLogoView.extendStyleNames(styles);\n\nexport default LogoView;\n","import playerAPI from '../../../../core/player-api-decorator';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { UI_EVENTS } from '../../../../constants';\nimport View from './logo.view';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ILogoControl, ILogoViewConfig } from './types';\nimport { IPlayerConfig } from '../../../../core/config';\n\nexport default class Logo implements ILogoControl {\n  static moduleName = 'logo';\n  static View = View;\n  static dependencies = ['config', 'eventEmitter', 'textMap', 'tooltipService'];\n\n  private _eventEmitter: IEventEmitter;\n  private _textMap: Playable.ITextMap;\n  private _tooltipService: Playable.ITooltipService;\n\n  private _interceptor: KeyboardInterceptor;\n  private _callback: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    config,\n    textMap,\n    tooltipService,\n  }: {\n    eventEmitter: IEventEmitter;\n    config: IPlayerConfig;\n    textMap: Playable.ITextMap;\n    tooltipService: Playable.ITooltipService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n\n    this._initUI();\n    this._initInterceptor();\n\n    const logoConfig = {\n      ...(typeof config.logo === 'object' ? config.logo : {}),\n    };\n\n    this.setLogo(logoConfig.src);\n    this.setLogoClickCallback(logoConfig.callback);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._triggerCallback = this._triggerCallback.bind(this);\n  }\n\n  private _initUI() {\n    const config: ILogoViewConfig = {\n      callbacks: {\n        onLogoClick: this._triggerCallback,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new Logo.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._triggerCallback();\n      },\n      [KEYCODES.ENTER]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._triggerCallback();\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _triggerCallback() {\n    if (this._callback) {\n      this._callback();\n    }\n  }\n\n  /**\n   * Method for setting source of image, that would be used as logo\n   * @param src - Source of logo\n   * @example\n   * player.setLogo('https://example.com/logo.png');\n   *\n   */\n  @playerAPI()\n  setLogo(src: string) {\n    this.view.setLogo(src);\n  }\n\n  /**\n   * Method for attaching callback for click on logo\n   *\n   * @param callback - Your function\n   *\n   * @example\n   * const callback = () => {\n   *   console.log('Click on title);\n   * }\n   * player.setLogoClickCallback(callback);\n   *\n   */\n  @playerAPI()\n  setLogoClickCallback(callback?: Function) {\n    this._callback = callback;\n    this.view.setDisplayAsLink(Boolean(this._callback));\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._textMap = null;\n  }\n}\n","import DependencyContainer from './dependency-container';\r\n\r\nimport RootContainer from '../modules/root-container/root-container';\r\nimport EventEmitter from '../modules/event-emitter/event-emitter';\r\nimport Engine from '../modules/playback-engine/playback-engine';\r\nimport ThemeService from '../modules/ui/core/theme';\r\nimport TextMap from '../modules/text-map/text-map';\r\n\r\nimport FullScreenManager from '../modules/full-screen-manager/full-screen-manager';\r\n\r\nimport LiveStateEngine from '../modules/playback-engine/live-state-engine';\r\nimport KeyboardControls from '../modules/keyboard-control/keyboard-control';\r\nimport DebugPanel from '../modules/ui/debug-panel/debug-panel';\r\n\r\nimport Screen from '../modules/ui/screen/screen';\r\nimport InteractionIndicator from '../modules/ui/interaction-indicator/interaction-indicator';\r\n\r\nimport Overlay from '../modules/ui/overlay/overlay';\r\nimport Loader from '../modules/ui/loader/loader';\r\n\r\nimport MainUIBlock from '../modules/ui/main-ui-block/main-ui-block';\r\nimport TopBlock from '../modules/ui/top-block/top-block';\r\nimport Title from '../modules/ui/title/title';\r\nimport LiveIndicator from '../modules/ui/live-indicator/live-indicator';\r\n\r\nimport BottomBlock from '../modules/ui/bottom-block/bottom-block';\r\nimport ProgressControl from '../modules/ui/controls/progress/progress';\r\nimport PlayControl from '../modules/ui/controls/play/play';\r\nimport TimeControl from '../modules/ui/controls/time/time';\r\nimport VolumeControl from '../modules/ui/controls/volume/volume';\r\nimport FullScreenControl from '../modules/ui/controls/full-screen/full-screen';\r\nimport Logo from '../modules/ui/controls/logo/logo';\r\n\r\nimport { TooltipService } from '../modules/ui/core/tooltip';\r\n\r\nconst { asClass } = DependencyContainer;\r\n\r\nexport const modules: { [id: string]: any } = {\r\n  RootContainer,\r\n  EventEmitter,\r\n  Engine,\r\n  ThemeService,\r\n  TextMap,\r\n\r\n  FullScreenManager,\r\n\r\n  LiveStateEngine,\r\n  KeyboardControls,\r\n  DebugPanel,\r\n\r\n  Screen,\r\n  InteractionIndicator,\r\n\r\n  Overlay,\r\n  Loader,\r\n\r\n  MainUIBlock,\r\n\r\n  TopBlock,\r\n  LiveIndicator,\r\n  Title,\r\n\r\n  BottomBlock,\r\n  ProgressControl,\r\n  PlayControl,\r\n  TimeControl,\r\n  VolumeControl,\r\n  FullScreenControl,\r\n  Logo,\r\n\r\n  TooltipService,\r\n};\r\n\r\nconst DIModules: { [id: string]: any } = Object.keys(modules).reduce(\r\n  (DIModules: { [id: string]: any }, key: string) => {\r\n    const module = modules[key] as any;\r\n    if (!module.moduleName) {\r\n      throw new Error(`No moduleName in module: ${key}`);\r\n    }\r\n\r\n    DIModules[module.moduleName] = asClass(module).scoped();\r\n    return DIModules;\r\n  },\r\n  {},\r\n);\r\n\r\nexport default DIModules;\r\n","/**\r\n * `true` if we are running inside a web browser, `false` otherwise (e.g. running inside Node.js).\r\n */\r\nexport const isBrowser = typeof window !== 'undefined';\r\n\r\n/**\r\n * This is a map which lists native support of formats and APIs.\r\n * It gets filled during runtime with the relevant values to the current environment.\r\n */\r\nexport const NativeEnvironmentSupport: { [format: string]: boolean } = {\r\n  MSE: false,\r\n  HLS: false,\r\n  DASH: false,\r\n  MP4: false,\r\n  WEBM: false,\r\n  OGG: false,\r\n  MOV: false,\r\n  MKV: false,\r\n};\r\n\r\n/* ignore coverage */\r\nfunction detectEnvironment() {\r\n  if (!isBrowser) {\r\n    return; // Not in a browser\r\n  }\r\n  NativeEnvironmentSupport.MSE =\r\n    'WebKitMediaSource' in window || 'MediaSource' in window;\r\n  const video = document.createElement('video');\r\n  if (typeof video.canPlayType !== 'function') {\r\n    return; // env doesn't support HTMLMediaElement (e.g PhantomJS)\r\n  }\r\n  if (\r\n    video.canPlayType('application/x-mpegURL') ||\r\n    video.canPlayType('application/vnd.apple.mpegURL')\r\n  ) {\r\n    NativeEnvironmentSupport.HLS = true;\r\n  }\r\n  if (video.canPlayType('application/dash+xml')) {\r\n    NativeEnvironmentSupport.DASH = true;\r\n  }\r\n  if (video.canPlayType('video/mp4')) {\r\n    NativeEnvironmentSupport.MP4 = true;\r\n  }\r\n  if (video.canPlayType('video/webm')) {\r\n    NativeEnvironmentSupport.WEBM = true;\r\n  }\r\n  if (video.canPlayType('video/ogg')) {\r\n    NativeEnvironmentSupport.OGG = true;\r\n  }\r\n  if (video.canPlayType('video/quicktime')) {\r\n    NativeEnvironmentSupport.MOV = true;\r\n  }\r\n  if (video.canPlayType('video/x-matroska')) {\r\n    NativeEnvironmentSupport.MKV = true;\r\n  }\r\n}\r\n\r\ndetectEnvironment(); // Run once\r\n","import { VIDEO_EVENTS, ERRORS } from '../../../constants';\r\n\r\nimport {\r\n  geOverallBufferLength,\r\n  getNearestBufferSegmentInfo,\r\n} from '../../../utils/video-data';\r\nimport { NativeEnvironmentSupport } from '../../../utils/environment-detection';\r\nimport { IPlaybackAdapter } from './types';\r\nimport { IEventEmitter } from '../../event-emitter/types';\r\n\r\nconst NATIVE_ERROR_CODES = {\r\n  ABORTED: 1,\r\n  NETWORK: 2,\r\n  DECODE: 3,\r\n  SRC_NOT_SUPPORTED: 4,\r\n};\r\n\r\nimport {\r\n  MediaStreamTypes,\r\n  MediaStreamDeliveryPriority,\r\n} from '../../../constants';\r\n\r\nexport default function getNativeAdapterCreator(\r\n  streamType: MediaStreamTypes,\r\n  deliveryPriority: MediaStreamDeliveryPriority,\r\n) {\r\n  class NativeAdapter implements IPlaybackAdapter {\r\n    static isSupported(): boolean {\r\n      return NativeEnvironmentSupport[streamType];\r\n    }\r\n\r\n    private mediaStreams: any;\r\n    private eventEmitter: IEventEmitter;\r\n    private currentLevel: number;\r\n    private videoElement: HTMLVideoElement;\r\n\r\n    constructor(eventEmitter: IEventEmitter) {\r\n      this.mediaStreams = null;\r\n      this.eventEmitter = eventEmitter;\r\n      this.currentLevel = 0;\r\n\r\n      this._bindCallbacks();\r\n    }\r\n\r\n    get currentUrl() {\r\n      return this.mediaStreams[this.currentLevel].url;\r\n    }\r\n    //@ts-ignore\r\n    get syncWithLiveTime() {\r\n      // TODO: implement syncWithLiveTime for `native`\r\n      return undefined;\r\n    }\r\n\r\n    get isDynamicContent() {\r\n      return !isFinite(this.videoElement.duration);\r\n    }\r\n\r\n    get isDynamicContentEnded() {\r\n      // TODO: implement isDynamicContentEnded\r\n      return false;\r\n    }\r\n\r\n    get isSyncWithLive() {\r\n      // TODO: implement isSyncWithLive for `native`\r\n      return false;\r\n    }\r\n\r\n    get isSeekAvailable() {\r\n      return true;\r\n      //Need to find better solution\r\n      /*\r\n      if (this.isDynamicContent) {\r\n        return false;\r\n      }\r\n\r\n      return Boolean(this.videoElement.seekable.length);\r\n      */\r\n    }\r\n\r\n    get mediaStreamDeliveryPriority() {\r\n      return deliveryPriority;\r\n    }\r\n\r\n    get mediaStreamType() {\r\n      return streamType;\r\n    }\r\n\r\n    get debugInfo() {\r\n      if (this.videoElement) {\r\n        const { buffered, currentTime } = this.videoElement;\r\n\r\n        const overallBufferLength = geOverallBufferLength(buffered);\r\n        const nearestBufferSegInfo = getNearestBufferSegmentInfo(\r\n          buffered,\r\n          currentTime,\r\n        );\r\n\r\n        return {\r\n          ...this.mediaStreams[0],\r\n          deliveryPriority: this.mediaStreamDeliveryPriority,\r\n          overallBufferLength,\r\n          nearestBufferSegInfo,\r\n        };\r\n      }\r\n\r\n      return {};\r\n    }\r\n\r\n    private _bindCallbacks() {\r\n      this._broadcastError = this._broadcastError.bind(this);\r\n    }\r\n\r\n    canPlay(mediaType: MediaStreamTypes) {\r\n      return mediaType === streamType;\r\n    }\r\n\r\n    setMediaStreams(mediaStreams: any) {\r\n      this.mediaStreams = mediaStreams;\r\n    }\r\n\r\n    private _logError(error: string, errorEvent: MediaError) {\r\n      this.eventEmitter.emit(VIDEO_EVENTS.ERROR, {\r\n        errorType: error,\r\n        streamType,\r\n        streamProvider: 'native',\r\n        errorInstance: errorEvent,\r\n      });\r\n    }\r\n\r\n    private _broadcastError() {\r\n      const error = this.videoElement.error;\r\n      if (!error) {\r\n        this._logError(ERRORS.UNKNOWN, null);\r\n        return;\r\n      }\r\n\r\n      switch (error.code) {\r\n        case NATIVE_ERROR_CODES.ABORTED:\r\n          //No need for broadcasting\r\n\r\n          break;\r\n        case NATIVE_ERROR_CODES.NETWORK:\r\n          this._logError(ERRORS.CONTENT_LOAD, error);\r\n          break;\r\n        case NATIVE_ERROR_CODES.DECODE:\r\n          this._logError(ERRORS.MEDIA, error);\r\n          break;\r\n        case NATIVE_ERROR_CODES.SRC_NOT_SUPPORTED:\r\n          /*\r\n            Our url checks would not allow not supported formats, so only case would be\r\n             when video tag couldn't retriev any info from endpoit\r\n          */\r\n\r\n          this._logError(ERRORS.CONTENT_LOAD, error);\r\n\r\n          break;\r\n        default:\r\n          this._logError(ERRORS.UNKNOWN, error);\r\n          break;\r\n      }\r\n    }\r\n\r\n    attach(videoElement: HTMLVideoElement) {\r\n      this.videoElement = videoElement;\r\n      this.videoElement.addEventListener('error', this._broadcastError);\r\n      this.videoElement.src = this.mediaStreams[this.currentLevel].url;\r\n    }\r\n\r\n    detach() {\r\n      this.videoElement.removeEventListener('error', this._broadcastError);\r\n      this.videoElement.removeAttribute('src');\r\n      this.videoElement = null;\r\n    }\r\n  }\r\n\r\n  return NativeAdapter;\r\n}\r\n","import getNativeAdapterCreator from './native';\r\n\r\nimport {\r\n  MediaStreamTypes,\r\n  MediaStreamDeliveryPriority,\r\n} from '../../../constants';\r\n\r\nconst defaultPlaybackAdapters = [\r\n  getNativeAdapterCreator(\r\n    MediaStreamTypes.DASH,\r\n    MediaStreamDeliveryPriority.NATIVE_ADAPTIVE,\r\n  ),\r\n  getNativeAdapterCreator(\r\n    MediaStreamTypes.HLS,\r\n    MediaStreamDeliveryPriority.NATIVE_ADAPTIVE,\r\n  ),\r\n  getNativeAdapterCreator(\r\n    MediaStreamTypes.MP4,\r\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\r\n  ),\r\n  getNativeAdapterCreator(\r\n    MediaStreamTypes.WEBM,\r\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\r\n  ), // Native WebM (Chrome, Firefox)\r\n  getNativeAdapterCreator(\r\n    MediaStreamTypes.OGG,\r\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\r\n  ), // Native WebM (Chrome, Firefox)\r\n  getNativeAdapterCreator(\r\n    MediaStreamTypes.MOV,\r\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\r\n  ), // Native QuickTime .mov (Safari)\r\n  getNativeAdapterCreator(\r\n    MediaStreamTypes.MKV,\r\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\r\n  ),\r\n];\r\n\r\nexport default defaultPlaybackAdapters;\r\n","import DependencyContainer from './dependency-container';\nimport PlayerFacade from './player-facade';\n\nimport defaultModules from './default-modules';\nimport defaultPlaybackAdapters from '../modules/playback-engine/adapters/default-set';\n\nimport { IPlayerConfig } from './config';\n\nlet additionalModules: { [id: string]: any } = {};\nlet playbackAdapters: any[] = [...defaultPlaybackAdapters];\n\nexport const container = DependencyContainer.createContainer();\ncontainer.register(defaultModules);\nconst defaultModulesNames = Object.keys(defaultModules);\n\nexport function registerModule(id: string, module: any) {\n  additionalModules[id] = module;\n}\n\nexport function registerPlaybackAdapter(adapter: any) {\n  playbackAdapters.push(adapter);\n}\n\nexport function clearAdditionalModules() {\n  additionalModules = {};\n}\n\nexport function clearPlaybackAdapters() {\n  playbackAdapters = [...defaultPlaybackAdapters];\n}\n\nexport function create(\n  params: IPlayerConfig = {},\n  themeConfig?: Playable.IThemeConfig,\n) {\n  const scope = container.createScope();\n\n  const additionalModuleNames = Object.keys(additionalModules);\n\n  if (additionalModuleNames.length) {\n    additionalModuleNames.forEach(moduleName =>\n      scope.registerClass(moduleName, additionalModules[moduleName], {\n        lifetime: DependencyContainer.Lifetime.Scoped,\n      }),\n    );\n  }\n\n  scope.registerValue('availablePlaybackAdapters', playbackAdapters);\n\n  return new PlayerFacade(\n    params,\n    scope,\n    defaultModulesNames,\n    additionalModuleNames,\n    themeConfig,\n  );\n}\n","import * as playerFactoryMethods from './core/player-factory';\r\nimport { modules as DefaultModules } from './core/default-modules';\r\nimport playerAPIDecorator from './core/player-api-decorator';\r\nimport {\r\n  ERRORS,\r\n  UI_EVENTS,\r\n  VIDEO_EVENTS,\r\n  TEXT_LABELS,\r\n  MediaStreamTypes as MEDIA_STREAM_TYPES,\r\n  MediaStreamDeliveryPriority as MEDIA_STREAM_DELIVERY_PRIORITY,\r\n  EngineState as ENGINE_STATES,\r\n  LiveState as LIVE_STATES,\r\n} from './constants';\r\nimport { Tooltip } from './modules/ui/core/tooltip';\r\nimport { IPlaybackAdapter } from './modules/playback-engine/adapters/types';\r\nimport { VideoViewMode as VIDEO_VIEW_MODES } from './modules/ui/screen/types';\r\n\r\nexport {\r\n  ERRORS,\r\n  UI_EVENTS,\r\n  VIDEO_EVENTS,\r\n  TEXT_LABELS,\r\n  MEDIA_STREAM_TYPES,\r\n  MEDIA_STREAM_DELIVERY_PRIORITY,\r\n  ENGINE_STATES,\r\n  LIVE_STATES,\r\n  VIDEO_VIEW_MODES,\r\n  Tooltip,\r\n  playerAPIDecorator,\r\n  DefaultModules,\r\n  IPlaybackAdapter,\r\n};\r\n\r\nexport * from './core/player-factory';\r\n\r\nexport default {\r\n  ...playerFactoryMethods,\r\n  UI_EVENTS,\r\n  VIDEO_EVENTS,\r\n  TEXT_LABELS,\r\n  MEDIA_STREAM_TYPES,\r\n  MEDIA_STREAM_DELIVERY_PRIORITY,\r\n  ENGINE_STATES,\r\n  LIVE_STATES,\r\n  VIDEO_VIEW_MODES,\r\n  Tooltip,\r\n  playerAPIDecorator,\r\n  DefaultModules,\r\n};\r\n"],"names":["extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","Lifetime","message","_super","_this","enumerable","value","name","Error","captureStackTrace","tslib_1.__extends","functionName","expectedType","givenType","ExtendableError","PROPERTY_FOR_DEPENDENCIES","makeFluidInterface","obj","setLifetime","lifetime","transient","Transient","scoped","Scoped","singleton","Singelton","asValue","resolve","asFunction","fn","options","NotAFunctionError","defaults","generateResolve","result","bind","asClass","Type","_i","args","dependencyParseTarget","dependencies","container","wrapper","reduce","dependency","createErrorMessage","resolutionStack","slice","push","resolutionPathString","join","msg","FAMILY_TREE","_parentContainer","concat","cache","Container","registrations","_registrations","verbatimValue","nameValueToObject","keys","forEach","valueToRegister","isArray","register","registration","_registerAs","root","_resolutionStack","indexOf","ResolutionError","cached","resolved","undefined","_a","pop","err","createContainer","__parentContainer","IPHONE_PATTERN","IPOD_PATTERN","IPAD_PATTERN","ANDROID_PATTERN","SAFARI_PATTERN","isIE","window","MSStream","getUserAgent","navigator","userAgent","isIPhone","test","isIPod","isIPad","isIOS","isAndroid","isSafari","convertToDeviceRelatedConfig","params","showInteractionIndicator","screen","disableClickProcessing","nativeControls","title","loader","controls","convertUIConfigForIOS","convertUIConfigForAndroid","playerAPI","property","descriptor","desc1","desc2","methodName","get","set","scope","defaultModulesNames","additionalModuleNames","themeConfig","registerValue","config","_config","_resolveAdditionalModules","_resolveDefaultModules","Player","modulesNames","_defaultModules","modules","moduleName","_additionalModules","resolvedModule","_addPlayerAPIFromModule","module","_destroyed","apply","playerMethodDescriptor","configurable","_getWrappedCallToModuleFunction","apiKey","_getPlayerAPIMethodDescriptor","_clearPlayerAPIForModule","destroy","MapShim","Map","getIndex","arr","some","entry","index","anonymous","__entries__","prototypeAccessors","size","delete","entries","splice","has","clear","callback","ctx","list","defineProperties","isBrowser","document","global$1","global","Math","self","Function","requestAnimationFrame$1","requestAnimationFrame","setTimeout","Date","now","trailingTimeout","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","throttle","addObserver","observer","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","filter","gatherActive","hasActive","broadcastActive","addEventListener","observe","attributes","childList","characterData","subtree","removeEventListener","disconnect","ref","propertyName","getInstance","instance_","defineConfigurable","props","writable","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","styles","positions","len","position","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","paddings","getPaddings","horizPad","left","right","vertPad","top","bottom","width","height","boxSizing","round","documentElement","isDocumentElement","vertScrollbar","horizScrollbar","abs","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","getBBox","getContentRect","bbox","getSVGContentRect","x","y","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","rect","broadcastRect","ResizeObserverEntry","rectInit","Constr","contentRect","DOMRectReadOnly","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","this$1","observation","map","WeakMap","ResizeObserver","method","_activePointers","_activeKeys","pointerStartEvents","pointerEndEvents","event","isPrimary","touches","setImmediate","max","keyCode","which","pointer","Boolean","interactionTypeHandler","engage","handleWindowBlurEvent","handleKeyStartEvent","handleKeyEndEvent","handlePointerStartEvent","handlePointerEndEvent","getInteractionType","disengage","supportsFocusIn","focusEventName","blurEventName","current","lock","used","script","initial","source","type","interactionType","setAttribute","MediaStreamTypes","MediaStreamDeliveryPriority","handleFocusEvent","engageInteractionTypeObserver","getUsedFocusSource","getCurrentFocusSource","lockFocusSource","unlock","unlockFocusSource","removeAttribute","EngineState","UI_EVENTS","PLAY_TRIGGERED","PLAY_OVERLAY_TRIGGERED","PAUSE_TRIGGERED","PROGRESS_CHANGE_TRIGGERED","VOLUME_CHANGE_TRIGGERED","MUTE_STATUS_TRIGGERED","FULLSCREEN_STATUS_CHANGED","MOUSE_ENTER_ON_PLAYER_TRIGGERED","MOUSE_MOVE_ON_PLAYER_TRIGGERED","MOUSE_LEAVE_ON_PLAYER_TRIGGERED","CONTROL_BLOCK_HIDE_TRIGGERED","CONTROL_BLOCK_SHOW_TRIGGERED","PROGRESS_MANIPULATION_STARTED","PROGRESS_MANIPULATION_ENDED","KEYBOARD_KEYDOWN_INTERCEPTED","LOADER_SHOW_TRIGGERED","LOADER_HIDE_TRIGGERED","LOADING_COVER_SHOW_TRIGGERED","LOADING_COVER_HIDE_TRIGGERED","TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED","GO_BACKWARD_WITH_KEYBOARD_TRIGGERED","GO_FORWARD_WITH_KEYBOARD_TRIGGERED","INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED","DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED","MUTE_SOUND_WITH_KEYBOARD_TRIGGERED","UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED","HIDE_INTERACTION_INDICATOR_TRIGGERED","PLAYER_WIDTH_CHANGE_TRIGGERED","PLAYER_HEIGHT_CHANGE_TRIGGERED","PLAY_WITH_SCREEN_CLICK_TRIGGERED","PAUSE_WITH_SCREEN_CLICK_TRIGGERED","CONTROL_DRAG_START","CONTROL_DRAG_END","MAIN_BLOCK_HIDE_TRIGGERED","MAIN_BLOCK_SHOW_TRIGGERED","PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED","PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED","RESIZE","VIDEO_EVENTS","ERROR","STATE_CHANGED","LIVE_STATE_CHANGED","DYNAMIC_CONTENT_ENDED","CHUNK_LOADED","CURRENT_TIME_UPDATED","DURATION_UPDATED","VOLUME_STATUS_CHANGED","VOLUME_CHANGED","MUTE_CHANGED","SEEK_IN_PROGRESS","UPLOAD_STALLED","UPLOAD_SUSPEND","PLAY_REQUEST_TRIGGERED","PLAY_ABORTED","RESET","Errors","SRC_PARSE","MANIFEST_LOAD","MANIFEST_PARSE","MANIFEST_INCOMPATIBLE","LEVEL_LOAD","CONTENT_LOAD","CONTENT_PARSE","MEDIA","UNKNOWN","LOGO_LABEL","LOGO_TOOLTIP","LIVE_INDICATOR_TEXT","LIVE_SYNC_LABEL","LIVE_SYNC_TOOLTIP","ENTER_FULL_SCREEN_LABEL","ENTER_FULL_SCREEN_TOOLTIP","EXIT_FULL_SCREEN_LABEL","EXIT_FULL_SCREEN_TOOLTIP","PLAY_CONTROL_LABEL","PAUSE_CONTROL_LABEL","PROGRESS_CONTROL_LABEL","PROGRESS_CONTROL_VALUE","UNMUTE_CONTROL_LABEL","UNMUTE_CONTROL_TOOLTIP","MUTE_CONTROL_LABEL","MUTE_CONTROL_TOOLTIP","VOLUME_CONTROL_LABEL","VOLUME_CONTROL_VALUE","LiveState","html","div","createElement","innerHTML","trim","firstChild","classnames","commonjsHelpers.createCommonjsModule","hasOwn","classNames","classes","arg","argType","exports","theme","moduleTheme","_moduleTheme","registerModuleTheme","_themeStyles","Stylable","_styles","sourceStyles","partialStyles","styleName","extendStyles","styleInject","css","insertAt","head","getElementsByTagName","style","insertBefore","appendChild","styleSheet","cssText","createTextNode","fillAllSpace","callbacks","_callbacks","_$node","htmlToElement","styleNames","setFillAllSpaceFlag","setWidth","setHeight","_bindEvents","RootContainerView","onMouseEnter","onMouseMove","onMouseLeave","offsetWidth","offsetHeight","classList","add","hidden","remove","node","isFullScreen","fullScreen","isFillAllSpace","_unbindEvents","parentNode","removeChild","View","arrayLike","initialValue","string","pattern","match","exec","extendStyleNames","matchesSelectorFn","ALIASES","HTMLElement","isElementMatchesSelector","element","selector","querySelectorAll","CSS_SELECTOR_PATTERN","QUERY_ATTR_PATTERN","cssSelector","results","forEachMatch","replace","selectorPart1","attribute","_b","prefix","mode","parseInt","styleSheets","rules","cssRules","rule","selectorText","getQueriesFromCssSelector","getQueriesFromRules","e","DEFAULT_QUERY_PREFIX","_element","_queryPrefix","_queries","matchedSelectors","queries","getQueries","query","_query","sort","a","getQueriesForElement","ElementQueries","elementWidth","attributeName","attributeValue","_getQueryAttributeValue","_setQueryAttribute","DEFAULT_CONFIG","eventEmitter","_eventEmitter","isHidden","_bindCallbacks","_initUI","RootContainer","view","getNode","_onResized","_broadcastMouseEnter","_broadcastMouseMove","_broadcastMouseLeave","bindEvents","setFullScreenStatus","sizeConfig","_elementQueries","appendComponentNode","emit","running","last","action","removeClass","update","_disengageFocusWithin","elem","activeElement","getElementsByClassName","_disengageFocusSource","focusSource","getWidth","getHeight","_enableFocusInterceptors","_resizeObserver","flag","hide","show","_disableFocusInterceptors","tslib_1.__decorate","eventemitter3_1","Events","addListener","emitter","context","once","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","eventNames","events","names","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","a1","a2","a3","a4","a5","removeListener","j","on","removeAllListeners","off","prefixed","EventEmitterModule","eventsMap","defaultFnContext","eventName","fnContext","unbindEvent","NATIVE_VIDEO_EVENTS_TO_STATE","video","_video","_currentState","_isMetadataLoaded","_statesTimestamps","StateEngine","_processEventFromVideo","_initialTimeStamp","state","_setInitialTimeStamp","videoEl","setState","LOAD_STARTED","_setStateTimestamp","METADATA_LOADED","READY_TO_PLAY","PLAY_REQUESTED","paused","PLAYING","WAITING","played","PAUSED","ENDED","prevState","nextState","NATIVE_VIDEO_TO_BROADCAST","_currentMute","muted","_currentVolume","volume","NativeEventsBroadcaster","currentTime","duration","mediaStreams","availableAdapters","playableAdapters","groupedStreams","typeMap","mediaStream","groupStreamsByMediaType","groupedStreamKeys","adapter","mediaType","mediaStreams_1","canPlay","setMediaStreams","firstAdapter","secondAdapter","mediaStreamDeliveryPriority","extensionsMap","mp4","MP4","webm","WEBM","m3u8","HLS","mpd","DASH","ogg","OGG","mkv","MKV","mov","MOV","playbackAdapters","_playableAdapters","_availableAdapters","_attachedAdapter","isSupported","AdaptersStrategy","mediaSources","mediaSource","url","anchorElement","href","path","pathname","split","toLowerCase","errorType","ERRORS","streamSrc","src","_autoDetectSourceTypes","resolveAdapters","attach","detach","_detachCurrentAdapter","_resolvePlayableAdapters","_connectAdapterToVideo","availablePlaybackAdapters","_currentSrc","_createVideoTag","videoElement","_stateEngine","_nativeEventsBroadcaster","_adapterStrategy","AdapterStrategy","_applyConfig","Engine","tagName","preload","autoPlay","loop","playInline","crossOrigin","setPreload","setAutoPlay","setLoop","setMute","setVolume","setPlayInline","setCrossOrigin","setSrc","attachedAdapter","isDynamicContent","isDynamicContentEnded","isSeekAvailable","isMetadataLoaded","getPreload","getAutoPlay","isSyncWithLive","clearTimestamps","connectAdapter","SRC_SET","pause","setCurrentTime","_pauseRequested","_playPromise","play","then","catch","isVideoPaused","ended","syncWithLiveTime","sec","getDurationTime","getCurrentTime","min","parsedVolume","Number","isNaN","getVolume","isMuted","isAutoPlay","autoplay","isLoop","rate","playbackRate","time","videoWidth","videoHeight","buffered","isPlayInline","getAttribute","data","debugInfo","viewDimensions","_getViewDimensions","loadingStateTimestamps","stateTimestamps","SHORTHAND_HEX_COLOR_PATTERN","HEX_COLOR_PATTERN","color","alpha","_","g","generatedIds","classImportName","kebabName","camelToKebab","className","newID","getUniquePostfix","acc","getUniqueId","getUniqueClassName","StyleSheet","_styleNode","discoveredStyles","_rulesByModule","_getModuleCSS","_data","_classNamesByModule","generateClassNames","moduleRules","moduleClassNames","_getRuleCSS","ruleClassName","complexRules","ruleName","_getRuleStyles","DEFAULT_THEME_CONFIG","liveColor","progressColor","_styleSheet","ThemeService","getModuleClassNames","TEXT_LABELS","_textMap","DEFAULT_TEXTS","texts","TextMap","id","text","fnMap","_elem","_callback","_fullscreenFn","ret","getFullScreenFn","DesktopFullScreen","fullscreenElement","isAPIExist","fullscreenEnabled","fullscreenchange","isEnabled","request","requestFullscreen","ALLOW_KEYBOARD_INPUT","exitFullscreen","isFullScreenRequested","_enterWhenHasMetaData","IOSFullScreen","webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","isInFullScreen","readyState","webkitExitFullscreen","exitFullScreenOnEnd","enterFullScreenOnPlay","exitFullScreenOnPause","pauseVideoOnFullScreenExit","engine","rootContainer","_engine","_isEnabled","_exitFullScreenOnEnd","_enterFullScreenOnPlay","_exitFullScreenOnPause","_pauseVideoOnFullScreenExit","_onChange","_helper","FullScreenManager","_processNextStateFromEngine","_enterOnPlayRequested","exitFullScreen","enterFullScreen","_exitOnEnd","_exitOnPauseRequested","exit","SEEK_BY_UI_EVENTS","_state","NONE","_isSeekedByUIWhilePlaying","LiveStateEngine","_processStateChange","_processSeekByUI","_onDynamicContentEnded","_setState","INITIAL","syncWithLive","NOT_SYNC","SYNC","getCurrentState","KEYCODES","SPACE_BAR","ENTER","TAB","LEFT_ARROW","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","DEBUG_KEY","_node","_attachCallbacks","KeyboardInterceptorCore","keyCodeCallbacks","_processKeyboardInput","_unattachCallbacks","_rootNode","disableControlWithKeyboard","_initInterceptor","KeyboardControl","_keyboardInterceptor","KeyboardInterceptor","_attachDefaultControls","addCallbacks","preventDefault","togglePlayback","goBackward","goForward","increaseVolume","decreaseVolume","_destroyInterceptor","hook","querySelector","shouldAdd","_initDOM","DebugPanelView","_$closeButton","getElementByHook","_$infoContainer","onCloseButtonClick","toggleNodeClass","info","json","JSON","stringify","cls","number","boolean","null","VideoViewMode","keyboardControl","addKeyControl","_keyControlCallback","DebugPanel","ctrlKey","shiftKey","updateInfo","deliveryPriority","currentBitrate","overallBufferLength","nearestBufferSegInfo","bitrates","bwEstimate","setInfo","getDebugInfo","clearUpdateInterval","_interval","setInterval","clearInterval","setUpdateInterval","playbackViewNode","_styleNamesByViewMode","REGULAR","regularMode","BLUR","blurMode","FILL","fillMode","setViewMode","ScreenView","_updateBackground","_$playbackNode","_$canvas","_ctx","getContext","onWrapperMouseClick","onWrapperMouseDblClick","widthHeightRatio","_widthHeightRatio","isHorizontal","horizontalVideo","verticalVideo","focus","hiddenCursor","viewMode","resetBackground","_startUpdatingBackground","_stopUpdatingBackground","_currentMode","setBackgroundWidth","setBackgroundHeight","_requestAnimationFrameID","cancelAnimationFrame","_clearBackground","area","sourceX","sourceY","sourceWidth","sourceHeight","areaX","areaY","areaWidth","areaHeight","drawImage","canvasWidth","canvasHeight","sourceAreas","_getSourceAreas","canvasAreas","_getCanvasAreas","_drawAreaFromSource","_drawBackground","clearRect","fullScreenManager","interactionIndicator","_fullScreenManager","_interactionIndicator","_isInFullScreen","_delayedToggleVideoPlaybackTimeout","screenConfig","_isClickProcessingDisabled","Screen","_processNodeClick","_processNodeDblClick","_toggleVideoPlayback","isNativeControls","_setFullScreenStatus","focusOnNode","_updateBackgroundSize","resetAspectRatio","setBackgroundSize","showCursor","hideCursor","_showPlaybackChangeIndicator","_setDelayedPlaybackToggle","_isDelayedPlaybackToggleExist","_clearDelayedPlaybackToggle","_hideDelayedPlaybackChangeIndicator","_toggleFullScreen","showPause","showPlay","hideIcons","clearTimeout","_exitFullScreen","_enterFullScreen","_playIcon","playIconTemplate","_pauseIcon","pauseIconTemplate","_forwardIcon","forwardIconTemplate","SECONDS_COUNT","_rewindIcon","rewindIconTemplate","_increaseVolumeIcon","increaseVolumeIconTemplate","_decreaseVolumeIcon","decreaseVolumeIconTemplate","_muteIcon","muteIconTemplate","InteractionIndicatorView","InteractionIndicator","showRewind","showForward","showIncreaseVolume","showDecreaseVolume","showMute","activatePauseIcon","activatePlayIcon","activateRewindIcon","activateForwardIcon","activateMuteVolumeIcon","activateIncreaseVolumeIcon","activateDecreaseVolumeIcon","deactivateIcon","setPoster","OverlayView","themeStyles","_$content","_$playButton","onPlayClick","active","backgroundImage","setTheme","overlayPlaySvgFill","fill","overlayPlaySvgStroke","stroke","_theme","overlay","Overlay","overlayConfig","poster","viewConfig","_playVideo","_updatePlayingStatus","_tryShowContent","_hideContent","_showContent","hideContent","showContent","LoaderView","Loader","_checkForWaitingState","startDelayedShow","isPreloadAvailable","stopDelayedShow","isDelayedShowScheduled","_delayedShowTimeout","elements","MainUIBlockView","$tooltipContainerWrapper","tooltipContainerWrapper","tooltipContainer","topBlock","bottomBlock","shouldAlwaysShow","tooltipService","_topBlock","_bottomBlock","_screen","mainBlockConfig","_shouldAlwaysShow","tooltipContainerNode","_bindViewCallbacks","MainUIBlock","_startHideBlockTimeout","_tryHideContent","_onControlDragStart","_onControlDragEnd","_shouldShowContent","isFocused","_stopHideBlockTimeout","_hideTimeout","_isContentShowingEnabled","_isDragging","_isContentShown","_isBlockFocused","TopBlockView","$titleContainer","$liveIndicatorContainer","liveIndicator","stopPropagation","_preventClickPropagation","activated","_getElementsNodes","TopBlock","elementNodes","TitleView","_$title","onClick","link","titleText","setTitleClickCallback","setTitle","TitleControl","_triggerCallback","setDisplayAsLink","textMap","_tooltipService","LiveIndicatorView","_$liveIndicatorText","_tooltipReference","createReference","toggle","toggleActive","toggleEnded","shouldActivate","disable","enable","isEnded","innerText","shouldShow","LiveIndicator","_isHidden","_isActive","_toggle","_syncWithLive","_toggleActive","_toggleEnded","_isEnded","BottomBlockView","$playContainer","$volumeContainer","$timeContainer","$fullScreenContainer","$logoContainer","$progressBarContainer","logo","progress","onBlockMouseMove","onBlockMouseOut","isShowAlways","showLogoAlways","showLogo","playControlHidden","timeControlHidden","volumeControlHidden","fullScreenControlHidden","logoHidden","progressControlHidden","_initLogo","BottomBlock","playControl","progressControl","timeControl","volumeControl","fullScreenControl","_setFocusState","_removeFocusState","logoConfig","setLogoAlwaysShowFlag","showAlways","hideLogo","setShouldLogoShowAlwaysFlag","showPlayControl","showVolumeControl","showTimeControl","showFullScreenControl","showProgressControl","hidePlayControl","hideVolumeControl","hideTimeControl","hideFullScreenControl","hideProgressControl","seconds","isValid","isFinite","isNegative","date","setSeconds","floor","toISOString","substr","TooltipPositionPlacement","Tooltip","_$tooltipInner","tooltipVisible","styleKey","tooltipReferenceOffsetX","tooltipReferenceWidth","tooltipReferenceNode","tooltipCenterXfn","tooltipReferenceRect","getBoundingClientRect","tooltipContainerRect","placement","BOTTOM","TOP","SHOW_EVENTS","HIDE_EVENTS","reference","_$reference","_options","_eventListeners","TooltipReference","_isDisabled","getTooltipPositionByReferenceNode","setText","tooltip","_tooltip","TooltipContainer","_getTooltipLeftX","tooltipCenterX","tooltipRect","tooltipLeftX","_tooltipContainer","TooltipService","setStyle","getTooltipPositionStyles","progressPlayed","backgroundColor","progressSeekTo","transperentizeColor","progressBackground","progressSeekBtn","progressSyncBtn","borderColor","getPercentBasedOnXPosition","boundingRect","positionX","clientX","_setPlayedDOMAttributes","_setBufferedDOMAttributes","setUsualMode","ProgressView","_$played","_$buffered","_$seekTo","_$timeIndicators","_$seekButton","_$syncButton","_syncButtonTooltipReference","_$hitbox","_setPlayedByDrag","_startDragOnMouseDown","_stopDragOnMouseUp","_startSeekToByMouse","_stopSeekToByMouse","onSyncWithLiveMouseEnter","onSyncWithLiveMouseLeave","button","percent","onChangePlayedProgress","_startDrag","_stopDrag","_setSeekToDOMAttributes","onSeekToByMouseStart","onSeekToByMouseEnd","onDragStart","isDragging","onDragEnd","String","onSyncWithLiveClick","isSync","liveSync","formatTime","progressPercent","progressNode","progressNodeOffsetX","progressNodeWidth","calcProgressTimeTooltipCenterX","getProgressTimeTooltipPosition","inLive","showSyncWithLive","hideSyncWithLive","durationTime","toFixed","start","end","progressViewTheme","liveStateEngine","_liveStateEngine","_isUserInteracting","_currentProgress","_timeIndicatorsToAdd","setPlayed","setBuffered","ProgressControl","_processLiveStateChange","_updateBufferIndicator","_updateAllIndicators","_onSyncWithLiveMouseEnter","_onSyncWithLiveMouseLeave","_changePlayedProgress","_onSeekToByMouseStart","_onSeekToByMouseEnd","_onUserInteractionStarts","_onUserInteractionEnds","_interceptor","_updateControlOnInterval","_playVideoOnProgressManipulationEnd","_changeCurrentTimeOfVideo","_updateControlInterval","_stopIntervalUpdates","seekTime","showProgressTimeTooltip","hideProgressTimeTooltip","_pauseVideoOnProgressManipulationStart","_updatePlayedIndicator","reset","_initTimeIndicators","_startIntervalUpdates","setLiveSyncStatus","setLiveMode","currentState","_shouldPlayAfterManipulationEnd","getBuffered","updateBuffered","getTimePercent","getNearestBufferSegmentInfo","getOverallBufferedPercent","updatePlayed","getOverallPlayedPercent","_addTimeIndicator","addTimeIndicator","addTimeIndicators","times","clearTimeIndicators","label","_$playbackControl","isPlaying","PlayView","_onButtonClick","onButtonClick","playSvgFill","_isPlaying","setControlStatus","PlayControl","_togglePlayback","_pauseVideo","TimeView","_$currentTime","_$durationTime","_duration","_updateDurationTime","_current","_updateCurrentTime","_isBackward","timeText","setDurationTime","TimeControl","_toggleIntervalUpdates","showDuration","setCurrentTimeBackward","volumeSvgFill","volumeSvgStroke","volumeProgress","&:after","volumeProgressBackground","VolumeView","muteLabel","volumeLabel","_$muteButton","_$volumeNode","_$volume","_muteButtonTooltipReference","_setVolumeByWheel","_setVolumeByClick","_setVolumeByDrag","onVolumeLevelChangeFromInput","deltaX","deltaY","onVolumeLevelChangeFromWheel","iconTemplateProps","volume50IconTemplate","volume0IconTemplate","onToggleMuteClick","_setVolumeDOMAttributes","_setMuteDOMAttributes","volumeViewTheme","_isMuted","getMute","_volume","VolumeControl","_broadcastDragStart","_broadcastDragEnd","_getVolumeLevelFromInput","_getVolumeLevelFromWheel","_toggleMuteStatus","_buttonInterceptor","getButtonNode","_inputInterceptor","getInputNode","_updateVolumeStatus","level","delta","adjustedVolume","validatedVolume","_changeVolumeStatus","_changeVolumeLevel","setVolumeLevel","setMuteStatus","_$toggleFullScreenControl","FullScreenView","inFullScreen","enterFullScreenIconTemplate","fullScreenSvgFill","FullScreenControl","_$logo","_$placeholder","setLogo","LogoView","_onNodeClick","onLogoClick","setLogoClickCallback","Logo","KeyboardControls","Title","DIModules","NativeEnvironmentSupport","MSE","canPlayType","detectEnvironment","NATIVE_ERROR_CODES","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED","streamType","currentLevel","NativeAdapter","geOverallBufferLength","_broadcastError","error","errorEvent","streamProvider","errorInstance","code","_logError","defaultPlaybackAdapters","getNativeAdapterCreator","NATIVE_ADAPTIVE","NATIVE_PROGRESSIVE","additionalModules","DependencyContainer","defaultModules","createScope","registerClass","PlayerFacade","MEDIA_STREAM_TYPES","MEDIA_STREAM_DELIVERY_PRIORITY","ENGINE_STATES","LIVE_STATES","VIDEO_VIEW_MODES","playerAPIDecorator","DefaultModules"],"mappings":"2LAgBA,IAAIA,EAAgBC,OAAOC,iBACpBC,wBAA2BC,OAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIC,KAAKD,EAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,KAElE,SAASE,EAAUJ,EAAGC,GAEzB,SAASI,IAAOC,KAAKC,YAAcP,EADnCL,EAAcK,EAAGC,GAEjBD,EAAEQ,UAAkB,OAANP,EAAaL,OAAOa,OAAOR,IAAMI,EAAGG,UAAYP,EAAEO,UAAW,IAAIH,GAG5E,IAAIK,EAAWd,OAAOe,QAAU,SAAkBC,GACrD,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIZ,KADTW,EAAIG,UAAUF,GACOlB,OAAOY,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAE9E,OAAOU,GAaJ,SAASO,EAAWC,EAAYC,EAAQC,EAAKC,GAChD,IAA2HvB,EAAvHwB,EAAIR,UAAUC,OAAQQ,EAAID,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAO3B,OAAO8B,yBAAyBL,EAAQC,GAAOC,EACrH,GAAuB,iBAAZI,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASR,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIT,EAAIM,EAAWH,OAAS,EAAGH,GAAK,EAAGA,KAASd,EAAIoB,EAAWN,MAAIW,GAAKD,EAAI,EAAIxB,EAAEyB,GAAKD,EAAI,EAAIxB,EAAEqB,EAAQC,EAAKG,GAAKzB,EAAEqB,EAAQC,KAASG,GAChJ,OAAOD,EAAI,GAAKC,GAAK7B,OAAOiC,eAAeR,EAAQC,EAAKG,GAAIA,EChDhE,ICAKK,gBDCH,WAAYC,GAAZ,MACEC,YAAMD,gBAENnC,OAAOiC,eAAeI,EAAM,WAC1BC,YAAY,EACZC,MAAOJ,IAGTnC,OAAOiC,eAAeI,EAAM,QAC1BC,YAAY,EACZC,MAAOF,EAAK1B,YAAY6B,OAG1BC,MAAMC,kBAAkBL,EAAMA,EAAK1B,eAEvC,OAhB6CgC,UAAAF,qBEG3C,WAAYG,EAAsBC,EAAsBC,UACtDV,YACE,gBAAgBQ,iBAA2BC,OAAiBC,mBAGlE,OAN+CH,UAAAI,IDF/C,SAAKb,GACHA,wBACAA,wBACAA,kBAHF,CAAKA,IAAAA,aAMUA,EEGFc,EAA4B,eAE5BC,EAAqB,SAACC,GACjC,IAAMC,EAAc,SAACZ,GAEnB,OADAW,EAAIE,SAAWb,EACRW,GAGT,OACEC,cACAE,UAAW,WAAM,OAAAF,EAAYjB,EAASoB,YACtCC,OAAQ,WAAM,OAAAJ,EAAYjB,EAASsB,SACnCC,UAAW,WAAM,OAAAN,EAAYjB,EAASwB,cAI7BC,EAAU,SAACpB,GAGtB,OACEqB,QAHc,WAAM,OAAArB,GAIpBa,SAAUlB,EAASoB,YAIVO,EAAkB,SAACC,EAAcC,GAC5C,GAAkB,mBAAPD,EACT,MAAM,IAAIE,EAAkB,aAAc,kBAAmBF,GAG/D,IAAMG,GACJb,SAAUlB,EAASoB,WAGrBS,EAAUjD,KAAamD,EAAUF,GAEjC,IAAMH,EAAUM,EAAgBJ,GAC1BK,GACJP,UACAR,SAAUW,EAAQX,UAKpB,OAHAe,EAAOP,QAAUA,EAAQQ,KAAKD,GAC9BrD,EAASqD,EAAQlB,EAAmBkB,IAE7BA,GAGIE,EAAe,SAC1BC,EACAP,GAEA,GAAoB,mBAATO,EACT,MAAM,IAAIN,EAAkB,UAAW,eAAgBM,GAGzD,IAAML,GACJb,SAAUlB,EAASoB,WAGrBS,EAAUjD,KAAamD,EAAUF,GAGjC,IAEMH,EAAUM,EAFC,eAAC,aAAAK,mBAAAA,IAAAC,kBAAmB,WAAIF,aAAAA,kBAAQE,MAEPF,GACpCH,GACJP,UACAR,SAAUW,EAAQX,UAKpB,OAHAe,EAAOP,QAAUA,EAAQQ,KAAKD,GAC9BrD,EAASqD,EAAQlB,EAAmBkB,IAE7BA,GAGT,WAAyBL,EAAcW,GAEhCA,IACHA,EAAwBX,GAG1B,IAAMY,EAAeD,EAAsBzB,OAG3C,OAAO,SAAiB2B,GACtB,GAAID,EAAarD,OAAS,EAAG,CAC3B,IAAMuD,EAAcF,EAAaG,OAC/B,SAACD,EAAcE,GAEb,OADAF,EAAQE,GAAcH,EAAUf,QAAQkB,GACjCF,OAKX,OAAOd,EAAGc,EAASD,GAErB,OAAOb,EAAGa,WAKZhB,UACAE,aACAQ,WC9GIU,EAAqB,SACzBvC,EACAwC,EACA7C,IAEA6C,EAAkBA,EAAgBC,SAClBC,KAAK1C,GACrB,IAAM2C,EAAuBH,EAAgBI,KAAK,QAC9CC,EAAM,sBAAsB7C,OAKhC,OAJIL,IACFkD,GAAO,IAAIlD,4BAAiCgD,GAGvCE,iBAIP,WAAY7C,EAAcwC,EAA2B7C,UACnDC,YAAM2C,EAAmBvC,EAAMwC,EAAiB7C,UAEpD,OAJ6CQ,UAAAI,cChBrBP,EAAuBD,GAC7C,MAAoB,iBAATC,EACF1B,UAAY0B,GAAOD,MAGrBC,QCCT,IAAM8C,EAAc,8BAWlB,WAAYvB,EAAoBwB,GARxB7E,uBACAA,yBAQNA,KAAKqD,QAAUjD,KAAaiD,GAC5BrD,KAAK6E,iBAAmBA,GAAoB,KAC5C7E,KAAK4E,GAAe5E,KAAK6E,kBACpB7E,MAAM8E,OAAO9E,KAAK6E,iBAAiBD,KACnC5E,MACLA,KAAK+E,SA8JT,OA3JEzF,sBAAI0F,iCAAJ,WACE,OAAO5E,KAELJ,KAAK6E,kBAAoB7E,KAAK6E,iBAAiBI,cAC/CjF,KAAKkF,iDAIDF,wBAAR,SACE5B,EACA+B,EACArD,EACAD,EACAwB,GALF,WAOQ4B,EAAqBG,EAAkBtD,EAAMD,GAmBnD,OAjBAvC,OAAO+F,KAAKJ,GAAeK,QAAQ,SAAAtE,GACjC,IAAIuE,EAAkBN,EAAcjE,GAGpCqC,EAAUjD,KAAaiD,IAGlB8B,GAAiB1F,MAAM+F,QAAQD,KAElClC,EAAUjD,KAAaiD,EAASkC,EAAgB,IAChDA,EAAkBA,EAAgB,IAGpC5D,EAAK8D,SAASzE,EAAKoC,EAAGmC,EAAiBlC,MAIlCrD,MAGTgF,wBAAA,WACE,OAAO,IAAIA,EAAUhF,KAAKqD,QAASrD,OAGrCgF,qBAAA,SAASlD,EAAuB4D,GAAhC,WACQlD,EAAW4C,EAAkBtD,EAAM4D,GAKzC,OAJApG,OAAO+F,KAAK7C,GAAK8C,QAAQ,SAAAtE,GACvBW,EAAKuD,eAAelE,GAAOwB,EAAIxB,KAG1BhB,MAGTgF,0BAAA,SACElD,EACAD,EACAwB,GAEA,OAAOrD,KAAK2F,YAAYhC,GAAS,EAAO7B,EAAMD,EAAOwB,IAGvD2B,6BAAA,SACElD,EACAD,EACAwB,GAEA,OAAOrD,KAAK2F,YAAYxC,GAAY,EAAOrB,EAAMD,EAAOwB,IAG1D2B,0BAAA,SACElD,EACAD,EACAwB,GAEA,OAAOrD,KAAK2F,YAAY1C,GAAS,EAAMnB,EAAMD,EAAOwB,IAGtD2B,oBAAA,SAAQlD,GAGN,IAAM8D,EAAkB5F,KAAK4E,GAAa5E,KAAK4E,GAAajE,OAAS,GAErE,IAEE,IAAM+E,EAAe1F,KAAKiF,cAAcnD,GAExC,GAAI9B,KAAK6F,iBAAiBC,QAAQhE,IAAS,EACzC,MAAM,IAAIiE,EACRjE,EACA9B,KAAK6F,iBACL,iCAIJ,IAAKH,EACH,MAAM,IAAIK,EAAgBjE,EAAM9B,KAAK6F,kBAIvC7F,KAAK6F,iBAAiBrB,KAAK1C,GAG3B,IAAIkE,SACAC,SAEJ,OAAQP,EAAahD,UACnB,KAAKlB,EAASoB,UAEZqD,EAAWP,EAAaxC,QAAQlD,MAChC,MACF,KAAKwB,EAASwB,eAGGkD,KADfF,EAASJ,EAAKb,MAAMjD,KAElBmE,EAAWP,EAAaxC,QAAQlD,MAChC4F,EAAKb,MAAMjD,GAAQmE,GAEnBA,EAAWD,EAEb,MACF,KAAKxE,EAASsB,OAOZ,IAAwC,QAAAqD,EAAAnG,KAAK4E,GAALf,WAAAA,KAEtC,QAAeqC,KADfF,OAAmCjB,MAAMjD,IACf,CAExBmE,EAAWD,EACX,YAKWE,IAAXF,IACFC,EAAWP,EAAaxC,QAAQlD,MAChCA,KAAK+E,MAAMjD,GAAQmE,GAErB,MACF,QACE,MAAM,IAAIF,EACRjE,EACA9B,KAAK6F,iBACL,qBAAqBH,EAAahD,cAKxC,OADA1C,KAAK6F,iBAAiBO,MACfH,EACP,MAAOI,GAGP,MADArG,KAAK6F,oBACCQ,kBC/KVC,yBDqLAjD,EACAkD,GAEA,OAAO,IAAIvB,EAAU3B,EAASkD,ICvL9B/E,YACGyD,GCFCuB,EAAiB,UACjBC,EAAe,QACfC,EAAe,QACfC,EAAkB,aAClBC,EAAiB,iCAKjBC,EAAO,WAAM,QAAEC,OAAOC,UAEtBC,EAAe,WAAM,OAAAF,OAAOG,WAAaH,OAAOG,UAAUC,WAE1DC,EAAW,WAAM,OAACN,KAAUL,EAAeY,KAAKJ,MAEhDK,EAAS,WAAM,OAACR,KAAUJ,EAAaW,KAAKJ,MAE5CM,EAAS,WAAM,OAACT,KAAUH,EAAaU,KAAKJ,MAE5CO,EAAQ,WAAM,OAAAJ,KAAcE,KAAYC,KAExCE,EAAY,WAAM,OAAAb,EAAgBS,KAAKJ,MAIvCS,EAAW,WAAM,OAAAb,EAAeQ,KAAKJ,MCmCrCU,EAA+B,SAACC,GACpC,OAAIJ,IAtBwB,SAACI,GAAyC,YACnEA,GACHC,0BAA0B,EAC1BC,YACKF,EAAOE,QACVC,wBAAwB,EACxBC,gBAAgB,IAElBC,OAAO,EACPC,QAAQ,EACRC,UAAU,IAaDC,CAAsBR,GAG3BH,IAb4B,SAACG,GAAyC,YACvEA,GACHE,YACKF,EAAOE,QACVC,wBAAwB,MAUjBM,CAA0BT,GAG5BA,GChEHU,EAAY,SAACvG,GAAkB,OAAA,SACnCf,EACAuH,EACAC,GAEA,IAZAC,EACAC,EAWMC,EAAa5G,GAAQwG,EAM3B,GAJKvH,EAA0B,eAC7BA,EAA0B,iBAGxBA,EAA0B,aAAE2H,KAlBhCF,EAqBMzH,EAA0B,aAAE2H,GApBlCD,EAqBMF,EAnBNC,EAAM3G,QAAU4G,EAAM5G,OACtB2G,EAAMG,MAAQF,EAAME,KACpBH,EAAMI,MAAQH,EAAMG,KAoBhB,MAAM,IAAI7G,MACR,WAAW2G,yBACT3H,EAAOd,YAAY6B,4BAM3Bf,EAA0B,aAAE2H,GAAcH,iBCzB1C,WACEZ,EACAkB,EACAC,EACAC,EACAC,gBAFAF,mBACAC,MAGAF,EAAMI,eACJC,OAAQxB,EAA6BC,KAGvCkB,EAAMI,eACJD,gBAGFhJ,KAAKmJ,QAAUN,EAAM3F,QAAQ,UAE7BlD,KAAKoJ,0BAA0BP,EAAOE,GACtC/I,KAAKqJ,uBAAuBR,EAAOC,GAwIvC,OA/HUQ,mCAAR,SAA+BT,EAAkBU,GAAjD,WACEvJ,KAAKwJ,gBAAkBD,EAAapF,OAClC,SAACsF,EAAgCC,GAC/B,GAAI/H,EAAKgI,mBAAmBD,GAC1B,OAAOD,EAGT,IAAMG,EAAiBf,EAAM3F,QAAQwG,GAKrC,OAHA/H,EAAKkI,wBAAwBD,GAE7BH,EAAQC,GAAcE,EACfH,QAMLH,sCAAR,SAAkCT,EAAkBU,GAApD,WACEvJ,KAAK2J,mBAAqBJ,EAAapF,OACrC,SAACsF,EAAgCC,GAC/B,IAAME,EAAiBf,EAAM3F,QAAQwG,GAKrC,OAHA/H,EAAKkI,wBAAwBD,GAE7BH,EAAQC,GAAcE,EACfH,QAMLH,4CAAR,SAAwCQ,EAAa1G,GAArD,WACE,OAAO,eAAC,aAAAS,mBAAAA,IAAAC,kBACN,GAAInC,EAAKoI,WACP,MAAM,IAAIhI,MAAM,gCAGlB,OAAOqB,EAAG4G,MAAMF,EAAQhG,KAIpBwF,0CAAR,SACEQ,EACAvB,GAEA,IAAM0B,GACJrI,YAAY,EACZsI,cAAc,GAGRvB,QAAKC,QAAK/G,UAuBlB,OArBI8G,IACFsB,EAAuBtB,IAAM3I,KAAKmK,gCAChCL,EACAnB,IAIAC,IACFqB,EAAuBrB,IAAM5I,KAAKmK,gCAChCL,EACAlB,IAIA/G,IACFoI,EAAuBpI,MAAQ7B,KAAKmK,gCAClCL,EACAjI,IAIGoI,GAGDX,oCAAR,SAAgCQ,GAAhC,WACMA,EAA0B,cAC5BxK,OAAO+F,KAAKyE,EAA0B,cAAGxE,QAAQ,SAAA8E,GAC/C,GAAKzI,EAAayI,GAChB,MAAM,IAAIrI,MACR,cAAcqI,0CAIlB9K,OAAOiC,eACLI,EACAyI,EACAzI,EAAK0I,8BACHP,EACAA,EAA0B,aAAEM,QAO9Bd,qCAAR,SAAiCQ,GAAjC,WACMA,EAA0B,cAC5BxK,OAAO+F,KAAKyE,EAA0B,cAAGxE,QAAQ,SAAA8E,UACvCzI,EAAayI,MAK3Bd,oBAAA,WAAA,WACEhK,OAAO+F,KAAKrF,KAAKwJ,iBAAiBlE,QAAQ,SAAAoE,GACxC,IAAMI,EAASnI,EAAK6H,gBAAgBE,GACpC/H,EAAK2I,yBAAyBR,GAC9BA,EAAOS,YAGTjL,OAAO+F,KAAKrF,KAAK2J,oBAAoBrE,QAAQ,SAAAoE,GAC3C,IAAMI,EAASnI,EAAKgI,mBAAmBD,GACvC/H,EAAK2I,yBAAyBR,GAC1BA,EAAOS,SACTT,EAAOS,YAIXvK,KAAKwJ,gBAAkB,KACvBxJ,KAAK2J,mBAAqB,KAC1B3J,KAAKmJ,QAAU,KAEfnJ,KAAK+J,YAAa,QC5JlBS,EAAU,WACV,GAAmB,oBAARC,IACP,OAAOA,IAUX,SAASC,EAASC,EAAK3J,GACnB,IAAIyC,GAAU,EAYd,OAVAkH,EAAIC,KAAK,SAAUC,EAAOC,GACtB,OAAID,EAAM,KAAO7J,IACbyC,EAASqH,GAEF,KAMRrH,EAGX,OAAQ,WACJ,SAASsH,IACL/K,KAAKgL,eAGT,IAAIC,GAAuBC,MAAQhB,cAAc,IAiFjD,OA5EAe,EAAmBC,KAAKvC,IAAM,WAC1B,OAAO3I,KAAKgL,YAAYrK,QAO5BoK,EAAU7K,UAAUyI,IAAM,SAAU3H,GAChC,IAAI8J,EAAQJ,EAAS1K,KAAKgL,YAAahK,GACnC6J,EAAQ7K,KAAKgL,YAAYF,GAE7B,OAAOD,GAASA,EAAM,IAQ1BE,EAAU7K,UAAU0I,IAAM,SAAU5H,EAAKa,GACrC,IAAIiJ,EAAQJ,EAAS1K,KAAKgL,YAAahK,IAElC8J,EACD9K,KAAKgL,YAAYF,GAAO,GAAKjJ,EAE7B7B,KAAKgL,YAAYxG,MAAMxD,EAAKa,KAQpCkJ,EAAU7K,UAAUiL,OAAS,SAAUnK,GACnC,IAAIoK,EAAUpL,KAAKgL,YACfF,EAAQJ,EAASU,EAASpK,IAEzB8J,GACDM,EAAQC,OAAOP,EAAO,IAQ9BC,EAAU7K,UAAUoL,IAAM,SAAUtK,GAChC,SAAU0J,EAAS1K,KAAKgL,YAAahK,IAMzC+J,EAAU7K,UAAUqL,MAAQ,WACxBvL,KAAKgL,YAAYK,OAAO,IAQ5BN,EAAU7K,UAAUoF,QAAU,SAAUkG,EAAUC,QAEjC,IAARA,IAAiBA,EAAM,MAE5B,IAAK,IAAIjL,EAAI,EAAGkL,EAHH1L,KAGiBgL,YAAaxK,EAAIkL,EAAK/K,OAAQH,GAAK,EAAG,CAChE,IAAIqK,EAAQa,EAAKlL,GAEjBgL,EAAS5K,KAAK6K,EAAKZ,EAAM,GAAIA,EAAM,MAI3CvL,OAAOqM,iBAAkBZ,EAAU7K,UAAW+K,GAEvCF,KAlHD,GAyHVa,EAA8B,oBAAX9E,QAA8C,oBAAb+E,UAA4B/E,OAAO+E,WAAaA,SAGpGC,EACsB,oBAAXC,QAA0BA,OAAOC,OAASA,KAC1CD,OAGS,oBAATE,MAAwBA,KAAKD,OAASA,KACtCC,KAGW,oBAAXnF,QAA0BA,OAAOkF,OAASA,KAC1ClF,OAIJoF,SAAS,cAATA,GASPC,EACqC,mBAA1BC,sBAIAA,sBAAsB1I,KAAKoI,GAG/B,SAAUN,GAAY,OAAOa,WAAW,WAAc,OAAOb,EAASc,KAAKC,QAAW,IAAO,KAIpGC,EAAkB,EAiFlBC,GAAkB,MAAO,QAAS,SAAU,OAAQ,QAAS,SAAU,OAAQ,UAG/EC,EAAwD,oBAArBC,iBAKnCC,EAA2B,WAC3B5M,KAAK6M,YAAa,EAClB7M,KAAK8M,sBAAuB,EAC5B9M,KAAK+M,mBAAqB,KAC1B/M,KAAKgN,cAELhN,KAAKiN,iBAAmBjN,KAAKiN,iBAAiBvJ,KAAK1D,MACnDA,KAAKkN,QAtFM,SAAU1B,EAAU2B,GAC/B,IAAIC,GAAc,EACdC,GAAe,EACfC,EAAe,EAQnB,SAASC,IACDH,IACAA,GAAc,EAEd5B,KAGA6B,GACAG,IAWR,SAASC,IACLtB,EAAwBoB,GAQ5B,SAASC,IACL,IAAIE,EAAYpB,KAAKC,MAErB,GAAIa,EAAa,CAEb,GAAIM,EAAYJ,EAAed,EAC3B,OAOJa,GAAe,OAEfD,GAAc,EACdC,GAAe,EAEfhB,WAAWoB,EAAiBN,GAGhCG,EAAeI,EAGnB,OAAOF,EAuBQG,CAAS3N,KAAKkN,QAAQxJ,KAAK1D,MAnB1B,KAgDpB4M,EAAyB1M,UAAU0N,YAAc,SAAUC,IACjD7N,KAAKgN,WAAWlH,QAAQ+H,IAC1B7N,KAAKgN,WAAWxI,KAAKqJ,GAIpB7N,KAAK6M,YACN7M,KAAK8N,YAUblB,EAAyB1M,UAAU6N,eAAiB,SAAUF,GAC1D,IAAIG,EAAYhO,KAAKgN,WACjBlC,EAAQkD,EAAUlI,QAAQ+H,IAGzB/C,GACDkD,EAAU3C,OAAOP,EAAO,IAIvBkD,EAAUrN,QAAUX,KAAK6M,YAC1B7M,KAAKiO,eAUbrB,EAAyB1M,UAAUgN,QAAU,WACnBlN,KAAKkO,oBAKvBlO,KAAKkN,WAYbN,EAAyB1M,UAAUgO,iBAAmB,WAElD,IAAIC,EAAkBnO,KAAKgN,WAAWoB,OAAO,SAAUP,GACnD,OAAOA,EAASQ,eAAgBR,EAASS,cAU7C,OAFAH,EAAgB7I,QAAQ,SAAUuI,GAAY,OAAOA,EAASU,oBAEvDJ,EAAgBxN,OAAS,GASpCiM,EAAyB1M,UAAU4N,SAAW,WAGrClC,IAAa5L,KAAK6M,aAOvBhB,SAAS2C,iBAAiB,gBAAiBxO,KAAKiN,kBAEhDnG,OAAO0H,iBAAiB,SAAUxO,KAAKkN,SAEnCR,GACA1M,KAAK+M,mBAAqB,IAAIJ,iBAAiB3M,KAAKkN,SAEpDlN,KAAK+M,mBAAmB0B,QAAQ5C,UAC5B6C,YAAY,EACZC,WAAW,EACXC,eAAe,EACfC,SAAS,MAGbhD,SAAS2C,iBAAiB,qBAAsBxO,KAAKkN,SAErDlN,KAAK8M,sBAAuB,GAGhC9M,KAAK6M,YAAa,IAStBD,EAAyB1M,UAAU+N,YAAc,WAGxCrC,GAAc5L,KAAK6M,aAIxBhB,SAASiD,oBAAoB,gBAAiB9O,KAAKiN,kBACnDnG,OAAOgI,oBAAoB,SAAU9O,KAAKkN,SAEtClN,KAAK+M,oBACL/M,KAAK+M,mBAAmBgC,aAGxB/O,KAAK8M,sBACLjB,SAASiD,oBAAoB,qBAAsB9O,KAAKkN,SAG5DlN,KAAK+M,mBAAqB,KAC1B/M,KAAK8M,sBAAuB,EAC5B9M,KAAK6M,YAAa,IAUtBD,EAAyB1M,UAAU+M,iBAAmB,SAAU+B,GACxD,IAAIC,EAAeD,EAAIC,kBAAoC,IAAjBA,IAA0BA,EAAe,IAGhExC,EAAe7B,KAAK,SAAU5J,GACjD,SAAUiO,EAAanJ,QAAQ9E,MAI/BhB,KAAKkN,WASbN,EAAyBsC,YAAc,WAKnC,OAJKlP,KAAKmP,YACNnP,KAAKmP,UAAY,IAAIvC,GAGlB5M,KAAKmP,WAGhBvC,EAAyBuC,UAAY,KASrC,IAAIC,WAAgCrO,EAAQsO,GACxC,IAAK,IAAI7O,EAAI,EAAGkL,EAAOpM,OAAO+F,KAAKgK,GAAQ7O,EAAIkL,EAAK/K,OAAQH,GAAK,EAAG,CAChE,IAAIQ,EAAM0K,EAAKlL,GAEflB,OAAOiC,eAAeR,EAAQC,GAC1Ba,MAAOwN,EAAMrO,GACbY,YAAY,EACZ0N,UAAU,EACVpF,cAAc,IAItB,OAAOnJ,GASPwO,WAAyBxO,GAQzB,OAJkBA,GAAUA,EAAOyO,eAAiBzO,EAAOyO,cAAcC,aAInD3D,GAItB4D,EAAYC,GAAe,EAAG,EAAG,EAAG,GAQxC,SAASC,EAAQ/N,GACb,OAAOgO,WAAWhO,IAAU,EAUhC,SAASiO,EAAeC,GAEpB,IADA,IAAIC,KAAgBC,EAAMvP,UAAUC,OAAS,EACrCsP,KAAQ,GAAID,EAAWC,GAAQvP,UAAWuP,EAAM,GAExD,OAAOD,EAAU7L,OAAO,SAAU+G,EAAMgF,GAGpC,OAAOhF,EAAO0E,EAFFG,EAAO,UAAYG,EAAW,YAG3C,GA2CP,SAASC,EAA0BpP,GAG/B,IAAIqP,EAAcrP,EAAOqP,YACrBC,EAAetP,EAAOsP,aAU1B,IAAKD,IAAgBC,EACjB,OAAOX,EAGX,IAAIK,EAASR,EAAYxO,GAAQuP,iBAAiBvP,GAC9CwP,EArDR,SAAqBR,GAIjB,IAHA,IACIQ,KAEK/P,EAAI,EAAGkL,GAHC,MAAO,QAAS,SAAU,QAGTlL,EAAIkL,EAAK/K,OAAQH,GAAK,EAAG,CACvD,IAAI0P,EAAWxE,EAAKlL,GAEhBqB,EAAQkO,EAAO,WAAaG,GAEhCK,EAASL,GAAYN,EAAQ/N,GAGjC,OAAO0O,EAyCQC,CAAYT,GACvBU,EAAWF,EAASG,KAAOH,EAASI,MACpCC,EAAUL,EAASM,IAAMN,EAASO,OAMlCC,EAAQnB,EAAQG,EAAOgB,OACvBC,EAASpB,EAAQG,EAAOiB,QAwB5B,GApByB,eAArBjB,EAAOkB,YAOHjF,KAAKkF,MAAMH,EAAQN,KAAcL,IACjCW,GAASjB,EAAeC,EAAQ,OAAQ,SAAWU,GAGnDzE,KAAKkF,MAAMF,EAASJ,KAAaP,IACjCW,GAAUlB,EAAeC,EAAQ,MAAO,UAAYa,KA0DhE,SAA2B7P,GACvB,OAAOA,IAAWwO,EAAYxO,GAAQ8K,SAASsF,gBAnD1CC,CAAkBrQ,GAAS,CAK5B,IAAIsQ,EAAgBrF,KAAKkF,MAAMH,EAAQN,GAAYL,EAC/CkB,EAAiBtF,KAAKkF,MAAMF,EAASJ,GAAWP,EAOpB,IAA5BrE,KAAKuF,IAAIF,KACTN,GAASM,GAGoB,IAA7BrF,KAAKuF,IAAID,KACTN,GAAUM,GAIlB,OAAO3B,GAAeY,EAASG,KAAMH,EAASM,IAAKE,EAAOC,GAS9D,IAAIQ,EAGkC,oBAAvBC,mBACA,SAAU1Q,GAAU,OAAOA,aAAkBwO,EAAYxO,GAAQ0Q,oBAMrE,SAAU1Q,GAAU,OAAOA,aAAkBwO,EAAYxO,GAAQ2Q,YAAwC,mBAAnB3Q,EAAO4Q,SAmBxG,SAASC,EAAe7Q,GACpB,OAAK6K,EAID4F,EAAqBzQ,GAjI7B,SAA2BA,GACvB,IAAI8Q,EAAO9Q,EAAO4Q,UAElB,OAAOhC,GAAe,EAAG,EAAGkC,EAAKd,MAAOc,EAAKb,QA+HlCc,CAAkB/Q,GAGtBoP,EAA0BpP,GAPtB2O,EAiDf,SAASC,GAAeoC,EAAGC,EAAGjB,EAAOC,GACjC,OAASe,EAAGA,EAAGC,EAAGA,EAAGjB,MAAOA,EAAOC,OAAQA,GAO/C,IAAIiB,GAAoB,SAASlR,GAC7Bf,KAAKkS,eAAiB,EACtBlS,KAAKmS,gBAAkB,EACvBnS,KAAKoS,aAAezC,GAAe,EAAG,EAAG,EAAG,GAE5C3P,KAAKe,OAASA,GAuBlBkR,GAAkB/R,UAAUmS,SAAW,WACnC,IAAIC,EAAOV,EAAe5R,KAAKe,QAI/B,OAFAf,KAAKoS,aAAeE,EAEbA,EAAKvB,QAAU/Q,KAAKkS,gBAAkBI,EAAKtB,SAAWhR,KAAKmS,iBAStEF,GAAkB/R,UAAUqS,cAAgB,WACxC,IAAID,EAAOtS,KAAKoS,aAKhB,OAHApS,KAAKkS,eAAiBI,EAAKvB,MAC3B/Q,KAAKmS,gBAAkBG,EAAKtB,OAErBsB,GAGX,IAAIE,GAAsB,SAASzR,EAAQ0R,GACvC,IA5FwBzD,EACpB+C,EACAC,EACAjB,EACAC,EAGA0B,EACAJ,EAoFAK,GA3FAZ,GADoB/C,EA4FayD,GA3FzBV,EACRC,EAAIhD,EAAIgD,EACRjB,EAAQ/B,EAAI+B,MACZC,EAAShC,EAAIgC,OAGb0B,EAAoC,oBAApBE,gBAAkCA,gBAAkBtT,OACpEgT,EAAOhT,OAAOa,OAAOuS,EAAOxS,WAGhCkP,EAAmBkD,GACfP,EAAGA,EAAGC,EAAGA,EAAGjB,MAAOA,EAAOC,OAAQA,EAClCH,IAAKmB,EACLrB,MAAOoB,EAAIhB,EACXD,OAAQE,EAASgB,EACjBtB,KAAMqB,IAGHO,GAiFPlD,EAAmBpP,MAAQe,OAAQA,EAAQ4R,YAAaA,KAGxDE,GAAoB,SAASrH,EAAUsH,EAAYC,GAInD,GAHA/S,KAAKgT,uBACLhT,KAAKiT,cAAgB,IAAIzI,EAED,mBAAbgB,EACP,MAAM,IAAI0H,UAAU,2DAGxBlT,KAAKmT,UAAY3H,EACjBxL,KAAKoT,YAAcN,EACnB9S,KAAKqT,aAAeN,GA+BxBF,GAAkB3S,UAAUuO,QAAU,SAAU1N,GAC5C,IAAKL,UAAUC,OACX,MAAM,IAAIuS,UAAU,4CAIxB,GAAuB,oBAAZI,SAA6BA,mBAAmBhU,OAA3D,CAIA,KAAMyB,aAAkBwO,EAAYxO,GAAQuS,SACxC,MAAM,IAAIJ,UAAU,yCAGxB,IAAIK,EAAevT,KAAKiT,cAGpBM,EAAajI,IAAIvK,KAIrBwS,EAAa3K,IAAI7H,EAAQ,IAAIkR,GAAkBlR,IAE/Cf,KAAKoT,YAAYxF,YAAY5N,MAG7BA,KAAKoT,YAAYlG,aASrB2F,GAAkB3S,UAAUsT,UAAY,SAAUzS,GAC9C,IAAKL,UAAUC,OACX,MAAM,IAAIuS,UAAU,4CAIxB,GAAuB,oBAAZI,SAA6BA,mBAAmBhU,OAA3D,CAIA,KAAMyB,aAAkBwO,EAAYxO,GAAQuS,SACxC,MAAM,IAAIJ,UAAU,yCAGxB,IAAIK,EAAevT,KAAKiT,cAGnBM,EAAajI,IAAIvK,KAItBwS,EAAapI,OAAOpK,GAEfwS,EAAarI,MACdlL,KAAKoT,YAAYrF,eAAe/N,SASxC6S,GAAkB3S,UAAU6O,WAAa,WACrC/O,KAAKyT,cACLzT,KAAKiT,cAAc1H,QACnBvL,KAAKoT,YAAYrF,eAAe/N,OASpC6S,GAAkB3S,UAAUmO,aAAe,WACnC,IAAIqF,EAAS1T,KAEjBA,KAAKyT,cAELzT,KAAKiT,cAAc3N,QAAQ,SAAUqO,GAC7BA,EAAYtB,YACZqB,EAAOV,oBAAoBxO,KAAKmP,MAW5Cd,GAAkB3S,UAAUqO,gBAAkB,WAE1C,GAAKvO,KAAKsO,YAAV,CAIA,IAAI7C,EAAMzL,KAAKqT,aAGXjI,EAAUpL,KAAKgT,oBAAoBY,IAAI,SAAUD,GACjD,OAAO,IAAInB,GAAoBmB,EAAY5S,OAAQ4S,EAAYpB,mBAGnEvS,KAAKmT,UAAUvS,KAAK6K,EAAKL,EAASK,GAClCzL,KAAKyT,gBAQTZ,GAAkB3S,UAAUuT,YAAc,WACtCzT,KAAKgT,oBAAoB3H,OAAO,IAQpCwH,GAAkB3S,UAAUoO,UAAY,WACpC,OAAOtO,KAAKgT,oBAAoBrS,OAAS,GAM7C,IAAIqN,GAA+B,oBAAZ6F,QAA0B,IAAIA,QAAY,IAAIrJ,EAMjEsJ,GAAiB,SAAStI,GAC1B,KAAMxL,gBAAgB8T,IAClB,MAAM,IAAIZ,UAAU,sCAExB,IAAKxS,UAAUC,OACX,MAAM,IAAIuS,UAAU,4CAGxB,IAAIJ,EAAalG,EAAyBsC,cACtCrB,EAAW,IAAIgF,GAAkBrH,EAAUsH,EAAY9S,MAE3DgO,GAAUpF,IAAI5I,KAAM6N,KAIvB,UAAW,YAAa,cAAcvI,QAAQ,SAAUyO,GACrDD,GAAe5T,UAAU6T,GAAU,WAC/B,OAAQ/E,EAAMhB,GAAUrF,IAAI3I,OAAO+T,GAAQ/J,MAAMgF,EAAKtO,WACtD,IAAIsO,KAIZ,IAAIlE,QAEuC,IAA5BgB,EAASgI,eACThI,EAASgI,eAGbA,GC/+BPE,GAAkB,EAClBC,GAAc,EAEZC,IACJ,aACA,cACA,gBACA,aAEIC,IACJ,WACA,cACA,YACA,cACA,gBACA,kBACA,WAGF,cAEEH,GAAkB,EAClBC,GAAc,EAGhB,YAAiCG,IACP,IAApBA,EAAMC,YAQVL,IAAmB,GAGrB,YAA+BI,IACL,IAApBA,EAAMC,YAICD,EAAME,QACfN,GAAkBI,EAAME,QAAQ3T,QAKjCmG,OAAOyN,cAAgBzN,OAAOuF,YAAY,WAGzC2H,GAAkBhI,KAAKwI,IAAIR,GAAkB,EAAG,MAIpD,YAA6BI,GAE3B,OAAQA,EAAMK,SAAWL,EAAMM,OAC7B,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACH,OAOJT,IAAe,EAGjB,YAA2BG,GAEzB,OAAQA,EAAMK,SAAWL,EAAMM,OAC7B,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACH,QAMH5N,OAAOyN,cAAgBzN,OAAOuF,YAAY,WAGzC4H,GAAcjI,KAAKwI,IAAIP,GAAc,EAAG,KAI5C,cACE,OACEU,QAASC,QAAQZ,IACjBhT,IAAK4T,QAAQX,SC3EbY,OD0IaC,OA9BjB,WAyBE,OAvBAhO,OAAO0H,iBAAiB,OAAQuG,IAAuB,GAEvDlJ,SAASsF,gBAAgB3C,iBACvB,UACAwG,IACA,GAEFnJ,SAASsF,gBAAgB3C,iBAAiB,QAASyG,IAAmB,GACtEf,GAAmB5O,QAAQ,SAAA8O,GACzBvI,SAASsF,gBAAgB3C,iBACvB4F,EACAc,IACA,KAGJf,GAAiB7O,QAAQ,SAAA8O,GACvBvI,SAASsF,gBAAgB3C,iBACvB4F,EACAe,IACA,MAKFxM,IAAKyM,KAIgBC,UA3DzB,WACErB,GAAkBC,GAAc,EAChCnN,OAAOgI,oBAAoB,OAAQiG,IAAuB,GAC1DlJ,SAASsF,gBAAgBrC,oBACvB,UACAkG,IACA,GAEFnJ,SAASsF,gBAAgBrC,oBACvB,QACAmG,IACA,GAEFf,GAAmB5O,QAAQ,SAAA8O,GACzBvI,SAASsF,gBAAgBrC,oBACvBsF,EACAc,IACA,KAGJf,GAAiB7O,QAAQ,SAAA8O,GACvBvI,SAASsF,gBAAgBrC,oBACvBsF,EACAe,IACA,OC7GAG,GACgB,oBAAbzJ,UAA4B,cAAeA,SAC9C0J,GAAiBD,GAAkB,UAAY,QAC/CE,GAAgBF,GAAkB,WAAa,OAKjDG,GAAe,KAEfC,GAAY,KAEVC,IACJhB,SAAS,EACT3T,KAAK,EACL4U,QAAQ,EACRC,SAAS,GAGX,YAA0BzB,GACxB,IAAI0B,EAAS,GACb,GAAI1B,EAAM2B,OAASR,GAAgB,CACjC,IAAMS,EAAkBnB,GAAuBlM,MAC/CmN,EACEJ,IACCM,EAAgBrB,SAAW,WAC3BqB,EAAgBhV,KAAO,OACxB,aACsB,YAAfoT,EAAM2B,OACfD,EAAS,WAGXjK,SAASsF,gBAAgB8E,aAAa,oBAAqBH,GAEvD1B,EAAM2B,OAASP,KACjBG,GAAKG,IAAU,EACfL,GAAUK,GAId,cACE,OAAOL,GAGT,YAA4BK,GAC1B,OAAOH,GAAKG,GAGd,YAAyBA,GACvBJ,GAAOI,EAGT,cACEJ,IAAO,MClFJQ,GAUAC,ODyHYrB,OAxBjB,WAgBE,OAfAjJ,SAASsF,gBAAgB3C,iBACvB+G,GACAa,IACA,GAEFvK,SAASsF,gBAAgB3C,iBACvBgH,GACAY,IACA,GAGFvB,GAAyBwB,GAA8BvB,SAEvDsB,IAAmBL,KAAM,aAGvBJ,KAAMW,GACNb,QAASc,GACTb,KAAMc,GACNC,OAAQC,KAIarB,UA9CzB,WAEEe,IAAmBL,KAAMP,KACzBC,GAAUC,GAAO,KACjBpW,OAAO+F,KAAKsQ,IAAMrQ,QAAQ,SAAStE,GACjC2U,GAAK3U,IAAO,IAGdqV,GAA8BhB,YAC9BxJ,SAASsF,gBAAgBrC,oBACvByG,GACAa,IACA,GAEFvK,SAASsF,gBAAgBrC,oBACvB0G,GACAY,IACA,GAEFvK,SAASsF,gBAAgBwF,gBAAgB,wBCxGtCT,GAAAA,uBAAAA,oCAEHA,eACAA,aACAA,eACAA,aACAA,aACAA,cAGGC,GAAAA,mCAAAA,oFAEHA,6CACAA,2CACAA,yBCdF,ICAKS,GDACC,IACJC,eAAgB,2BAChBC,uBAAwB,mCACxBC,gBAAiB,4BACjBC,0BAA2B,sCAC3BC,wBAAyB,oCACzBC,sBAAuB,kCACvBC,0BAA2B,sCAG3BC,gCAAiC,4CACjCC,+BAAgC,2CAChCC,gCAAiC,4CACjCC,6BAA8B,yCAC9BC,6BAA8B,yCAC9BC,8BAA+B,0CAC/BC,4BAA6B,wCAC7BC,6BAA8B,yCAC9BC,sBAAuB,kCACvBC,sBAAuB,kCACvBC,6BAA8B,yCAC9BC,6BAA8B,yCAC9BC,wCACE,oDACFC,oCACE,gDACFC,mCACE,+CACFC,wCACE,oDACFC,wCACE,oDACFC,mCACE,+CACFC,qCACE,iDACFC,qCACE,iDAEFC,8BAA+B,0CAC/BC,+BAAgC,2CAEhCC,iCACE,6CACFC,kCACE,8CAGFC,mBAAoB,+BACpBC,iBAAkB,6BAClBC,0BAA2B,sCAC3BC,0BAA2B,sCAC3BC,2CACE,uDACFC,2CACE,uDACFC,OAAQ,oBExDJC,IACJC,MAAO,qBACPC,cAAe,6BACfC,mBAAoB,kCACpBC,sBAAuB,qCACvBC,aAAc,4BACdC,qBAAsB,oCACtBC,iBAAkB,gCAClBC,sBAAuB,qCACvBC,eAAgB,8BAChBC,aAAc,4BACdC,iBAAkB,gCAClBC,eAAgB,8BAChBC,eAAgB,8BAChBC,uBAAwB,sCACxBC,aAAc,4BACdC,MAAO,+BChBHC,IACJC,UAAW,kBACXC,cAAe,sBACfC,eAAgB,uBAChBC,sBAAuB,8BACvBC,WAAY,mBACZC,aAAc,qBACdC,cAAe,sBACfC,MAAO,cACPC,QAAS,qBCRTC,WAAY,aACZC,aAAc,eACdC,oBAAqB,sBACrBC,gBAAiB,yBACjBC,kBAAmB,2BACnBC,wBAAyB,0BACzBC,0BAA2B,4BAC3BC,uBAAwB,yBACxBC,yBAA0B,2BAC1BC,mBAAoB,qBACpBC,oBAAqB,sBACrBC,uBAAwB,yBACxBC,uBAAwB,yBACxBC,qBAAsB,uBACtBC,uBAAwB,uBACxBC,mBAAoB,qBACpBC,qBAAsB,uBACtBC,qBAAsB,uBACtBC,qBAAsB,yBHnBxB,SAAKrF,GACHA,iCACAA,2CACAA,iDACAA,6CACAA,mDACAA,+CACAA,iCACAA,iCACAA,+BACAA,6BAVF,CAAKA,KAAAA,YIAAsF,MJaUtF,IIbf,SAAKsF,GACHA,yBACAA,+BACAA,iCACAA,yBACAA,2BALF,CAAKA,KAAAA,eAQUA,GCRf,YAAuBC,GACrB,IAAMC,EAAsBvQ,SAASwQ,cAAc,OAEnD,OADAD,EAAIE,UAAYH,EAAKI,OACdH,EAAII,yECDb,IAAIC,GAAaC,GAAqC,SAAU5S,IAQ/D,WAGA,IAAI6S,KAAY9c,eAEhB,SAAS+c,IAGR,IAFA,IAAIC,KAEKrc,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAK,CAC1C,IAAIsc,EAAMpc,UAAUF,GACpB,GAAKsc,EAAL,CAEA,IAAIC,SAAiBD,EAErB,GAAgB,WAAZC,GAAoC,WAAZA,EAC3BF,EAAQrY,KAAKsY,QACP,GAAIrd,MAAM+F,QAAQsX,GACxBD,EAAQrY,KAAKoY,EAAW5S,MAAM,KAAM8S,SAC9B,GAAgB,WAAZC,EACV,IAAK,IAAI/b,KAAO8b,EACXH,EAAO/b,KAAKkc,EAAK9b,IAAQ8b,EAAI9b,IAChC6b,EAAQrY,KAAKxD,IAMjB,OAAO6b,EAAQnY,KAAK,KAGWoF,EAAOkT,QACtClT,EAAOkT,QAAUJ,EAOjB9V,OAAO8V,WAAaA,EAtCtB,KCRA,kBAOE,WAAYK,GAFJjd,qBAGN,IAAMkd,EAAgCld,KAAKC,YAAakd,aACpDF,GAASC,IACXD,EAAMG,oBAAoBpd,KAAMkd,GAChCld,KAAKqd,aAAeJ,EAAMtU,IAAI3I,OAwBpC,OApBSsd,WAAP,SAAgBL,GACdjd,KAAKmd,aAAeF,GAGfK,mBAAP,SAAwBvN,GACtB/P,KAAKud,QCnBT,SACEC,EACAC,GAEA,IAAM1N,OACDyN,GASL,OANAle,OAAO+F,KAAKoY,GAAenY,QAAQ,SAAAoY,GACjC3N,EAAO2N,GAAa3N,EAAO2N,GACvBjB,GAAW1M,EAAO2N,GAAYD,EAAcC,IAC5CD,EAAcC,KAGb3N,EDKU4N,CAAa3d,KAAKud,QAASxN,IAGrCuN,cAAP,WACEtd,KAAKud,YAGPje,sBAAIge,+BAAJ,WACE,OAAOtd,KAAKqd,8CAGd/d,sBAAIge,8BAAJ,WAEE,OAAQtd,KAAKC,YAAoBsd,6CA9BpBD,iCEHjB,4DACsC,OADSrb,UAAAqb,ICF/C,SAASM,GAAYC,EAAK7O,QACX,IAARA,IAAiBA,MACtB,IAAI8O,EAAW9O,EAAI8O,SAEnB,GAAKD,GAA2B,oBAAbhS,SAAnB,CAEA,IAAIkS,EAAOlS,SAASkS,MAAQlS,SAASmS,qBAAqB,QAAQ,GAC9DC,EAAQpS,SAASwQ,cAAc,SACnC4B,EAAMlI,KAAO,WAEI,QAAb+H,GACEC,EAAKvB,WACPuB,EAAKG,aAAaD,EAAOF,EAAKvB,YAKhCuB,EAAKI,YAAYF,GAGfA,EAAMG,WACRH,EAAMG,WAAWC,QAAUR,EAE3BI,EAAME,YAAYtS,SAASyS,eAAeT,05DCV5C,WAAY3U,GAAZ,MACExH,mBACQqP,UAAOC,WAAQuN,iBAAcC,qBACrC7c,EAAK8c,WAAaD,EAClB7c,EAAK+c,OAASC,6DAAkC5O,OAAQpO,EAAKid,4CAE7Djd,EAAKkd,oBAAoBN,GAEzB5c,EAAKmd,SAAS/N,GACdpP,EAAKod,UAAU/N,GAEfrP,EAAKqd,gBAmFT,OAnGgC/c,OAmBtBgd,wBAAR,WACEjf,KAAK0e,OAAOlQ,iBAAiB,aAAcxO,KAAKye,WAAWS,cAC3Dlf,KAAK0e,OAAOlQ,iBAAiB,YAAaxO,KAAKye,WAAWU,aAC1Dnf,KAAK0e,OAAOlQ,iBAAiB,aAAcxO,KAAKye,WAAWW,eAGrDH,0BAAR,WACEjf,KAAK0e,OAAO5P,oBAAoB,aAAc9O,KAAKye,WAAWS,cAC9Dlf,KAAK0e,OAAO5P,oBAAoB,YAAa9O,KAAKye,WAAWU,aAC7Dnf,KAAK0e,OAAO5P,oBAAoB,aAAc9O,KAAKye,WAAWW,eAGhEH,qBAAA,SAASlO,GACFA,IAIL/Q,KAAK0e,OAAOT,MAAMlN,MAAWA,SAG/BkO,sBAAA,SAAUjO,GACHA,IAILhR,KAAK0e,OAAOT,MAAMjN,OAAYA,SAGhCiO,qBAAA,WACE,OAAOjf,KAAK0e,OAAOW,aAGrBJ,sBAAA,WACE,OAAOjf,KAAK0e,OAAOY,cAGrBL,iBAAA,WACEjf,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5CR,iBAAA,WACEjf,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/CR,gCAAA,SAAoBU,GAClB3f,KAAK0e,OAAOP,YAAYwB,IAG1BV,oBAAA,WACE,OAAOjf,KAAK0e,QAGdO,gCAAA,SAAoBW,GACdA,GACF5f,KAAK0e,OAAOzI,aAAa,sBAAuB,QAChDjW,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWiB,cAE1C7f,KAAK0e,OAAOzI,aAAa,sBAAuB,SAChDjW,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWiB,cAIjDZ,gCAAA,SAAoBa,gBAAAA,MACdA,EACF9f,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWL,cAE1Cve,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWL,eAIjDU,oBAAA,WACEjf,KAAK+f,gBACL/f,KAAKye,WAAa,KAEdze,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,SAjGcwB,ICRhC,YACEC,EACA3U,EACA4U,GAEA,OAAO3gB,MAAMS,UAAUiE,OAAOvD,KAAKuf,EAAW3U,EAAU4U,GAG1D,YAAsBC,EAAgBC,EAAiB9U,GAGrD,IAFA,IAAI+U,EAAQD,EAAQE,KAAKH,GAER,OAAVE,GACL/U,EAAS+U,GACTA,EAAQD,EAAQE,KAAKH,GDgGzBpB,GAAkBwB,gIE7GlB,IAOIC,GAPEC,IACJ,UACA,wBACA,qBACA,qBAKF,GAA2B,oBAAhBC,YACT,IAAK,IAAIpgB,GAAI,EAAGA,GAAImgB,GAAQhgB,UAC1B+f,GAAqBpN,QAAgBpT,UAAUygB,GAAQngB,MADrBA,MAStC,IAAMqgB,GAA2BH,GAC7B,SAACI,EAAsBC,GACrB,OAAAL,GAAkB9f,KAAKkgB,EAASC,IAClC,SAACD,EAAsBC,GACrB,OAGO,IAHPthB,MAAMS,UAAU4F,QAAQlF,KACtBiL,SAASmV,iBAAiBD,GAC1BD,ICpBFG,GAAuB,8HACvBC,GAAqB,yFAE3B,YAAmCC,GACjC,IAAMC,KAEN,OACwC,IAAtCD,EAAYrb,QAAQ,eACkB,IAAtCqb,EAAYrb,QAAQ,iBAOtBub,GAFAF,EAAcA,EAAYG,QAAQ,KAAM,KAEdL,GAAsB,SAACV,GACzC,IAAApa,aAACob,OAAeC,OAChBT,EAAWQ,OAEjBF,GAAaG,EAAWN,GAAoB,SAACX,GACrC,IAAApa,aAACsb,OAAAC,kBAAaC,OAAM5Q,OAE1BqQ,EAAQ5c,MACNuc,WACAW,SACAC,OACA5Q,MAAO6Q,SAAS7Q,EAAO,UAKtBqQ,GAwBT,cACE,OAAOjd,GACL0H,SAASgW,YACT,SAACT,EAAgBhD,GAEf,IACE,IAAM0D,EAAQ1D,EAAW2D,UAAY3D,EAAW0D,MAEhD,GAAIA,EACF,OAAOV,EAAQtc,OA9BzB,SAA6Bgd,GAC3B,OAAO3d,GACL2d,EACA,SAACV,EAAgBY,GAGf,GAAkB,IAAdA,EAAKjM,KAAY,CACnB,IAAMgL,EAAWiB,EAAKC,cAAgBD,EAAK3D,QAE3C,OAAO+C,EAAQtc,OAAOod,GAA0BnB,IAMlD,OAAOK,OAemBe,CAAoBL,IAG5C,GAAI1D,EAAWC,QACb,OAAO+C,EAAQtc,OAAOod,GAA0B9D,EAAWC,UAE7D,MAAO+D,IAET,OAAOhB,OC3Eb,IAAMiB,GAAuB,qBAO3B,WAAYvB,EAAsB3a,OAAEsb,2BAAAC,kBAClC1hB,KAAKsiB,SAAWxB,EAChB9gB,KAAKuiB,aAAeb,EACpB1hB,KAAKwiB,SDuET,SAA8B1B,EAAsBY,gBAAAA,MAClD,IAAMe,EAAmB,IAAIhY,IACvBiY,KA2BN,OAzBAC,KAAard,QAAQ,SAACsd,GACfH,EAAiBnX,IAAIsX,EAAM7B,WAC9B0B,EAAiB7Z,IACfga,EAAM7B,SACNF,GAAyBC,EAAS8B,EAAM7B,WAIvC0B,EAAiB9Z,IAAIia,EAAM7B,YAK9B6B,EAAMlB,SAAWA,GAChBgB,EAAQ9X,KACP,SAAAiY,GAAU,OAAAA,EAAOlB,OAASiB,EAAMjB,MAAQkB,EAAO9R,QAAU6R,EAAM7R,SAGjE2R,EAAQle,MACNmd,KAAMiB,EAAMjB,KACZ5Q,MAAO6R,EAAM7R,WAKZ2R,EAAQI,KAAK,SAACC,EAAGpjB,GAAM,OAAAojB,EAAEhS,MAAQpR,EAAEoR,QCpGxBiS,CAAqBlC,EAASY,GAoClD,OAjCUuB,oCAAR,SAAgCtB,EAAcuB,GAC5C,OAAOljB,KAAKwiB,SACTpU,OACC,SAAAwU,GACE,OAAAA,EAAMjB,OAASA,IACJ,QAATA,GAAkBiB,EAAM7R,OAASmS,GACvB,QAATvB,GAAkBiB,EAAM7R,OAASmS,KAEvCtP,IAAI,SAAAgP,GAAS,OAAGA,EAAM7R,aACtBrM,KAAK,MAGFue,+BAAR,SAA2BtB,EAAcuB,GACvC,IAAMC,EAAgBnjB,KAAKuiB,aACpBviB,KAAKuiB,iBAAgBZ,WACrBA,WACDyB,EAAiBpjB,KAAKqjB,wBAAwB1B,EAAMuB,GAEtDE,EACFpjB,KAAKsiB,SAASrM,aAAakN,EAAeC,GAE1CpjB,KAAKsiB,SAAS3L,gBAAgBwM,IAIlCF,qBAAA,SAASlS,GACP/Q,KAAKsjB,mBAAmB,MAAOvS,GAC/B/Q,KAAKsjB,mBAAmB,MAAOvS,IAGjCkS,oBAAA,WACEjjB,KAAKsiB,SAAW,WC/BdiB,IACU,gBAoBd,WAAYpd,OACVqd,iBACAta,WAKAlJ,KAAKyjB,cAAgBD,EACrBxjB,KAAK0jB,UAAW,EAEhB1jB,KAAK2jB,iBACL3jB,KAAK4jB,QAAQ1a,GAEblJ,KAAKgf,cA4NT,OApNE1f,sBAAIukB,wBAAJ,WACE,OAAO7jB,KAAK8jB,KAAKC,2CAGXF,2BAAR,WACE7jB,KAAKgkB,WAAahkB,KAAKgkB,WAAWtgB,KAAK1D,MACvCA,KAAKikB,qBAAuBjkB,KAAKikB,qBAAqBvgB,KAAK1D,MAC3DA,KAAKkkB,oBAAsBlkB,KAAKkkB,oBAAoBxgB,KAAK1D,MACzDA,KAAKmkB,qBAAuBnkB,KAAKmkB,qBAAqBzgB,KAAK1D,OAGrD6jB,wBAAR,WACE7jB,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAGlCvN,GAAUO,0BACVpX,KAAK8jB,KAAKO,oBACVrkB,KAAK8jB,OAGT9jB,OAII6jB,oBAAR,SAAgB3a,GACd,IAAMob,OACDpb,EAAOgC,MAEZlL,KAAK8jB,KAAO,IAAI5D,IACd1B,WACEU,aAAclf,KAAKikB,qBACnB7E,aAAcpf,KAAKmkB,qBACnBhF,YAAanf,KAAKkkB,qBAEpBnT,MAAOuT,EAAWvT,OAAS,KAC3BC,OAAQsT,EAAWtT,QAAU,KAC7BuN,aAAcrV,EAAOqV,cAAgBgF,KAGvCvjB,KAAKukB,gBAAkB,IAAItB,GAAejjB,KAAK2f,MAC7C+B,OAAQ,MAIZmC,gCAAA,SAAoBlE,GAClB3f,KAAK8jB,KAAKU,oBAAoB7E,IAGxBkE,iCAAR,WACE7jB,KAAKyjB,cAAcgB,KAAK5N,GAAUQ,kCAG5BwM,gCAAR,WACE7jB,KAAKyjB,cAAcgB,KAAK5N,GAAUS,iCAG5BuM,iCAAR,WACE7jB,KAAKyjB,cAAcgB,KAAK5N,GAAUU,kCAG5BsM,qCAAR,WCpHkB,IAMZa,EACAC,EACEC,EAPFrgB,EACAsgB,EAGAC,EDgHC9kB,KAAK+kB,wBACR/kB,KAAK+kB,uBCrHHxgB,KAAWA,MACXsgB,EAAc,SAACG,GACnBA,EAAKzF,UAAUG,OAAO,iBAKhBkF,EAAS,WACb,IAAI9D,EAAejV,SAASoZ,cAG5B,GADAP,GAAU,EACNC,IAAS7D,EAKX,IAJA6D,EAAO7D,EACPvc,EACG3D,KAAKiL,SAASqZ,uBAAuB,iBACrC5f,QAAQuf,GACJ/D,GAAWA,EAAQvB,WACxBuB,EAAQvB,UAAUC,IAAI,gBACtBsB,EAAUA,EAAQd,YAdpB8E,EAmBG,WACAJ,IACHtY,sBAAsBwY,GACtBF,GAAU,IAKhB7Y,SAAS2C,iBAAiB,QAASsW,GAAQ,GAC3CjZ,SAAS2C,iBAAiB,OAAQsW,GAAQ,GAC1CA,IAEO,WACLjZ,SAASiD,oBAAoB,QAASgW,GAAQ,GAC9CjZ,SAASiD,oBAAoB,OAAQgW,GAAQ,MDmFxC9kB,KAAKmlB,wBACRC,GAAYtQ,SACZ9U,KAAKmlB,sBAAwBC,GAAY/P,YAIrCwO,sCAAR,WACM7jB,KAAKmlB,wBACPnlB,KAAKmlB,wBACLnlB,KAAKmlB,sBAAwB,MAG3BnlB,KAAK+kB,wBACP/kB,KAAK+kB,wBACL/kB,KAAK+kB,sBAAwB,OAIzBlB,uBAAR,WACE,IAAM9S,EAAQ/Q,KAAK8jB,KAAKuB,WAClBrU,EAAShR,KAAK8jB,KAAKwB,YAEzBtlB,KAAKukB,gBAAgBzF,SAAS/N,GAE9B/Q,KAAKyjB,cAAcgB,KAAK5N,GAAUsC,QAAUpI,QAAOC,YAgBrD6S,4BAAA,SAAgB/C,GACd9gB,KAAKulB,2BAELzE,EAAQ3C,YAAYne,KAAK2f,MAEpB3f,KAAKwlB,kBAERxlB,KAAKwlB,gBAAkB,IAAI1R,GAAe9T,KAAKgkB,YAE/ChkB,KAAKwlB,gBAAgB/W,QAAQzO,KAAK2f,QAWtCkE,qBAAA,SAAS9S,GACP/Q,KAAK8jB,KAAKhF,SAAS/N,GACnB/Q,KAAKyjB,cAAcgB,KAAK5N,GAAU4B,8BAA+B1H,IASnE8S,qBAAA,WACE,OAAO7jB,KAAK8jB,KAAKuB,YAUnBxB,sBAAA,SAAU7S,GACRhR,KAAK8jB,KAAK/E,UAAU/N,GACpBhR,KAAKyjB,cAAcgB,KAAK5N,GAAU6B,+BAAgC1H,IASpE6S,sBAAA,WACE,OAAO7jB,KAAK8jB,KAAKwB,aAUnBzB,4BAAA,SAAgB4B,GACdzlB,KAAK8jB,KAAKjF,oBAAoB4G,IAShC5B,iBAAA,WACE7jB,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QASZ7B,iBAAA,WACE7jB,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAGZ9B,oBAAA,WACE7jB,KAAK+f,gBACL/f,KAAK4lB,4BAED5lB,KAAKwlB,kBACPxlB,KAAKwlB,gBAAgBhS,UAAUxT,KAAK2f,MACpC3f,KAAKwlB,gBAAkB,MAGzBxlB,KAAKukB,gBAAgBha,UACrBvK,KAAKukB,gBAAkB,KAEvBvkB,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,MAvPhBI,aAAa,gBACbA,gBAAgB,eAAgB,UAoCvCgC,GADCxd,8BA0GDwd,GADCxd,yCAqBDwd,GADCxd,kCAYDwd,GADCxd,kCAYDwd,GADCxd,mCAYDwd,GADCxd,mCAYDwd,GADCxd,yCAWDwd,GADCxd,8BAYDwd,GADCxd,mCEiGCyd,GArVgBpJ,GAAqC,SAAU5S,GAGnE,IAAIwB,EAAMhM,OAAOY,UAAUL,eACvB6hB,EAAS,IASb,SAASqE,KA6CT,SAASC,EAAYC,EAAS7R,EAAOhR,EAAI8iB,EAASC,GAChD,GAAkB,mBAAP/iB,EACT,MAAM,IAAI8P,UAAU,mCAGtB,IAAIkT,EAAW,IAtBjB,SAAYhjB,EAAI8iB,EAASC,GACvBnmB,KAAKoD,GAAKA,EACVpD,KAAKkmB,QAAUA,EACflmB,KAAKmmB,KAAOA,IAAQ,EAmBL,CAAO/iB,EAAI8iB,GAAWD,EAASE,GAC1CE,EAAM3E,EAASA,EAAStN,EAAQA,EAMpC,OAJK6R,EAAQK,QAAQD,GACXJ,EAAQK,QAAQD,GAAKjjB,GAC1B6iB,EAAQK,QAAQD,IAAQJ,EAAQK,QAAQD,GAAMD,GADhBH,EAAQK,QAAQD,GAAK7hB,KAAK4hB,IADlCH,EAAQK,QAAQD,GAAOD,EAAUH,EAAQM,gBAI7DN,EAUT,SAASO,EAAWP,EAASI,GACI,KAAzBJ,EAAQM,aAAoBN,EAAQK,QAAU,IAAIP,SAC5CE,EAAQK,QAAQD,GAU9B,SAASI,IACPzmB,KAAKsmB,QAAU,IAAIP,EACnB/lB,KAAKumB,aAAe,EAxElBjnB,OAAOa,SACT4lB,EAAO7lB,UAAYZ,OAAOa,OAAO,OAM5B,IAAI4lB,GAASvmB,YAAWkiB,GAAS,IA2ExC+E,EAAavmB,UAAUwmB,WAAa,WAClC,IACIC,EACA7kB,EAFA8kB,KAIJ,GAA0B,IAAtB5mB,KAAKumB,aAAoB,OAAOK,EAEpC,IAAK9kB,KAAS6kB,EAAS3mB,KAAKsmB,QACtBhb,EAAI1K,KAAK+lB,EAAQ7kB,IAAO8kB,EAAMpiB,KAAKkd,EAAS5f,EAAKyC,MAAM,GAAKzC,GAGlE,OAAIxC,OAAOunB,sBACFD,EAAM9hB,OAAOxF,OAAOunB,sBAAsBF,IAG5CC,GAUTH,EAAavmB,UAAU4mB,UAAY,SAAmB1S,GACpD,IAAIiS,EAAM3E,EAASA,EAAStN,EAAQA,EAChC2S,EAAW/mB,KAAKsmB,QAAQD,GAE5B,IAAKU,EAAU,SACf,GAAIA,EAAS3jB,GAAI,OAAQ2jB,EAAS3jB,IAElC,IAAK,IAAI5C,EAAI,EAAGwmB,EAAID,EAASpmB,OAAQsmB,EAAK,IAAIxnB,MAAMunB,GAAIxmB,EAAIwmB,EAAGxmB,IAC7DymB,EAAGzmB,GAAKumB,EAASvmB,GAAG4C,GAGtB,OAAO6jB,GAUTR,EAAavmB,UAAUgnB,cAAgB,SAAuB9S,GAC5D,IAAIiS,EAAM3E,EAASA,EAAStN,EAAQA,EAChC0S,EAAY9mB,KAAKsmB,QAAQD,GAE7B,OAAKS,EACDA,EAAU1jB,GAAW,EAClB0jB,EAAUnmB,OAFM,GAYzB8lB,EAAavmB,UAAUukB,KAAO,SAAcrQ,EAAO+S,EAAIC,EAAIC,EAAIC,EAAIC,GACjE,IAAIlB,EAAM3E,EAASA,EAAStN,EAAQA,EAEpC,IAAKpU,KAAKsmB,QAAQD,GAAM,OAAO,EAE/B,IAEIviB,EACAtD,EAHAsmB,EAAY9mB,KAAKsmB,QAAQD,GACzBpW,EAAMvP,UAAUC,OAIpB,GAAImmB,EAAU1jB,GAAI,CAGhB,OAFI0jB,EAAUX,MAAMnmB,KAAKwnB,eAAepT,EAAO0S,EAAU1jB,QAAI8C,GAAW,GAEhE+J,GACN,KAAK,EAAG,OAAO6W,EAAU1jB,GAAGxC,KAAKkmB,EAAUZ,UAAU,EACrD,KAAK,EAAG,OAAOY,EAAU1jB,GAAGxC,KAAKkmB,EAAUZ,QAASiB,IAAK,EACzD,KAAK,EAAG,OAAOL,EAAU1jB,GAAGxC,KAAKkmB,EAAUZ,QAASiB,EAAIC,IAAK,EAC7D,KAAK,EAAG,OAAON,EAAU1jB,GAAGxC,KAAKkmB,EAAUZ,QAASiB,EAAIC,EAAIC,IAAK,EACjE,KAAK,EAAG,OAAOP,EAAU1jB,GAAGxC,KAAKkmB,EAAUZ,QAASiB,EAAIC,EAAIC,EAAIC,IAAK,EACrE,KAAK,EAAG,OAAOR,EAAU1jB,GAAGxC,KAAKkmB,EAAUZ,QAASiB,EAAIC,EAAIC,EAAIC,EAAIC,IAAK,EAG3E,IAAK/mB,EAAI,EAAGsD,EAAO,IAAIrE,MAAMwQ,EAAK,GAAIzP,EAAIyP,EAAKzP,IAC7CsD,EAAKtD,EAAI,GAAKE,UAAUF,GAG1BsmB,EAAU1jB,GAAG4G,MAAM8c,EAAUZ,QAASpiB,OACjC,CACL,IACI2jB,EADA9mB,EAASmmB,EAAUnmB,OAGvB,IAAKH,EAAI,EAAGA,EAAIG,EAAQH,IAGtB,OAFIsmB,EAAUtmB,GAAG2lB,MAAMnmB,KAAKwnB,eAAepT,EAAO0S,EAAUtmB,GAAG4C,QAAI8C,GAAW,GAEtE+J,GACN,KAAK,EAAG6W,EAAUtmB,GAAG4C,GAAGxC,KAAKkmB,EAAUtmB,GAAG0lB,SAAU,MACpD,KAAK,EAAGY,EAAUtmB,GAAG4C,GAAGxC,KAAKkmB,EAAUtmB,GAAG0lB,QAASiB,GAAK,MACxD,KAAK,EAAGL,EAAUtmB,GAAG4C,GAAGxC,KAAKkmB,EAAUtmB,GAAG0lB,QAASiB,EAAIC,GAAK,MAC5D,KAAK,EAAGN,EAAUtmB,GAAG4C,GAAGxC,KAAKkmB,EAAUtmB,GAAG0lB,QAASiB,EAAIC,EAAIC,GAAK,MAChE,QACE,IAAKvjB,EAAM,IAAK2jB,EAAI,EAAG3jB,EAAO,IAAIrE,MAAMwQ,EAAK,GAAIwX,EAAIxX,EAAKwX,IACxD3jB,EAAK2jB,EAAI,GAAK/mB,UAAU+mB,GAG1BX,EAAUtmB,GAAG4C,GAAG4G,MAAM8c,EAAUtmB,GAAG0lB,QAASpiB,IAKpD,OAAO,GAYT2iB,EAAavmB,UAAUwnB,GAAK,SAAYtT,EAAOhR,EAAI8iB,GACjD,OAAOF,EAAYhmB,KAAMoU,EAAOhR,EAAI8iB,GAAS,IAY/CO,EAAavmB,UAAUimB,KAAO,SAAc/R,EAAOhR,EAAI8iB,GACrD,OAAOF,EAAYhmB,KAAMoU,EAAOhR,EAAI8iB,GAAS,IAa/CO,EAAavmB,UAAUsnB,eAAiB,SAAwBpT,EAAOhR,EAAI8iB,EAASC,GAClF,IAAIE,EAAM3E,EAASA,EAAStN,EAAQA,EAEpC,IAAKpU,KAAKsmB,QAAQD,GAAM,OAAOrmB,KAC/B,IAAKoD,EAEH,OADAojB,EAAWxmB,KAAMqmB,GACVrmB,KAGT,IAAI8mB,EAAY9mB,KAAKsmB,QAAQD,GAE7B,GAAIS,EAAU1jB,GAEV0jB,EAAU1jB,KAAOA,GACf+iB,IAAQW,EAAUX,MAClBD,GAAWY,EAAUZ,UAAYA,GAEnCM,EAAWxmB,KAAMqmB,OAEd,CACL,IAAK,IAAI7lB,EAAI,EAAGmmB,KAAahmB,EAASmmB,EAAUnmB,OAAQH,EAAIG,EAAQH,KAEhEsmB,EAAUtmB,GAAG4C,KAAOA,GACnB+iB,IAASW,EAAUtmB,GAAG2lB,MACtBD,GAAWY,EAAUtmB,GAAG0lB,UAAYA,IAErCS,EAAOniB,KAAKsiB,EAAUtmB,IAOtBmmB,EAAOhmB,OAAQX,KAAKsmB,QAAQD,GAAyB,IAAlBM,EAAOhmB,OAAegmB,EAAO,GAAKA,EACpEH,EAAWxmB,KAAMqmB,GAGxB,OAAOrmB,MAUTymB,EAAavmB,UAAUynB,mBAAqB,SAA4BvT,GACtE,IAAIiS,EAUJ,OARIjS,GACFiS,EAAM3E,EAASA,EAAStN,EAAQA,EAC5BpU,KAAKsmB,QAAQD,IAAMG,EAAWxmB,KAAMqmB,KAExCrmB,KAAKsmB,QAAU,IAAIP,EACnB/lB,KAAKumB,aAAe,GAGfvmB,MAMTymB,EAAavmB,UAAU0nB,IAAMnB,EAAavmB,UAAUsnB,eACpDf,EAAavmB,UAAU8lB,YAAcS,EAAavmB,UAAUwnB,GAK5DjB,EAAaoB,SAAWnG,EAKxB+E,EAAaA,aAAeA,EAM1B3c,EAAOkT,QAAUyJ,IAMiBA,4BCjVpC,4DAoGA,OApGgDxkB,OAwB9C6lB,eAAA,SAAG1T,EAAehR,EAAgB8iB,GAChC,OAAOxkB,YAAMgmB,aAAGtT,EAAOhR,EAAI8iB,IA6B7B4B,gBAAA,SAAI1T,EAAehR,EAAiB8iB,EAAeC,GACjD,OAAOzkB,YAAMkmB,cAAIxT,EAAOhR,EAAI8iB,EAASC,IAyBvC2B,uBAAA,SAAWC,EAAwBC,GAAnC,WACQrB,KASN,OAPAoB,EAAUziB,QAAQ,SAACa,OAAC8hB,OAAW7kB,OAAIqe,OAAAyG,iBACjCvmB,EAAK+lB,GAAGO,EAAW7kB,EAAI8kB,GACvBvB,EAAOniB,KAAK,WACV7C,EAAKimB,IAAIK,EAAW7kB,EAAI8kB,OAIrB,WACLvB,EAAOrhB,QAAQ,SAAA6iB,GACbA,QAKNL,oBAAA,WACE9nB,KAAK2nB,sBAhGAG,aAAa,eAsBpBjC,GADCxd,4BA+BDwd,GADCxd,gCArD6Coe,ICAnC2B,IACX,YACA,iBACA,UACA,OACA,UACA,QACA,QACA,UACA,UACA,wBAWA,WAAY5E,EAA6B6E,GACvCroB,KAAKyjB,cAAgBD,EACrBxjB,KAAKsoB,OAASD,EAEdroB,KAAKuoB,cAAgB,KAErBvoB,KAAKwoB,mBAAoB,EACzBxoB,KAAKyoB,qBAELzoB,KAAK2jB,iBACL3jB,KAAKgf,cAgJT,OA7IU0J,2BAAR,WACE1oB,KAAK2oB,uBAAyB3oB,KAAK2oB,uBAAuBjlB,KAAK1D,OAGzD0oB,wBAAR,WAAA,WACEN,GAA6B9iB,QAAQ,SAAA8O,GACnC,OAAAzS,EAAK2mB,OAAO9Z,iBAAiB4F,EAAOzS,EAAKgnB,2BAIrCD,0BAAR,WAAA,WACEN,GAA6B9iB,QAAQ,SAAA8O,GACnC,OAAAzS,EAAK2mB,OAAOxZ,oBAAoBsF,EAAOzS,EAAKgnB,2BAIhDD,4BAAA,WACE1oB,KAAKyoB,sBAGCC,iCAAR,WACE1oB,KAAK4oB,kBAAoBtc,KAAKC,OAGxBmc,+BAAR,SAA2BG,GACpB7oB,KAAKyoB,kBAAkBI,KAC1B7oB,KAAKyoB,kBAAkBI,GAASvc,KAAKC,MAAQvM,KAAK4oB,kBAClD5oB,KAAK8oB,yBAITxpB,sBAAIopB,mCAAJ,WACE,OAAO1oB,KAAKyoB,mDAGNC,mCAAR,SAA+BtU,gBAAAA,MAC7B,IAAM2U,EAAU/oB,KAAKsoB,OAErB,OAAQlU,EAAM2B,MACZ,IAAK,YACH/V,KAAK8oB,uBACL9oB,KAAKgpB,SAASpS,GAAYqS,cAC1B,MAEF,IAAK,iBACHjpB,KAAKkpB,mBAAmBtS,GAAYuS,iBACpCnpB,KAAKgpB,SAASpS,GAAYuS,iBAC1BnpB,KAAKwoB,mBAAoB,EACzB,MAEF,IAAK,UACHxoB,KAAKkpB,mBAAmBtS,GAAYwS,eACpCppB,KAAKgpB,SAASpS,GAAYwS,eAC1B,MAEF,IAAK,OACHppB,KAAKgpB,SAASpS,GAAYyS,gBAC1B,MAEF,IAAK,UAEC5hB,KACGshB,EAAQO,QAIbtpB,KAAKgpB,SAASpS,GAAY2S,SAE5B,MAEF,IAAK,UACHvpB,KAAKgpB,SAASpS,GAAY4S,SAC1B,MAEF,IAAK,QAEC/hB,IACEshB,EAAQU,OAAO9oB,QACjBX,KAAKgpB,SAASpS,GAAY8S,QAG5B1pB,KAAKgpB,SAASpS,GAAY8S,QAE5B,MAEF,IAAK,QACH1pB,KAAKgpB,SAASpS,GAAY+S,OAC1B,MAEF,IAAK,UACH3pB,KAAKgpB,SAASpS,GAAYmD,kBAC1B,MAEF,IAAK,SACH/Z,KAAKgpB,SACHD,EAAQO,OAAS1S,GAAY8S,OAAS9S,GAAY2S,WAS1Db,qBAAA,SAASG,GACHA,IAAU7oB,KAAKuoB,gBAKfvoB,KAAKuoB,gBAAkB3R,GAAYuS,iBAEnCN,IAAUjS,GAAYmD,kBACtB8O,IAAUjS,GAAY8S,UAM1B1pB,KAAKyjB,cAAcgB,KAAKrL,GAAaE,eACnCsQ,UAAW5pB,KAAKuoB,cAChBsB,UAAWhB,IAEb7oB,KAAKyjB,cAAcgB,KAAKoE,GACxB7oB,KAAKuoB,cAAgBM,IAGvBvpB,sBAAIopB,oCAAJ,WACE,OAAO1oB,KAAKwoB,mDAGdlpB,sBAAIopB,yBAAJ,WACE,OAAO1oB,KAAKuoB,+CAGdG,oBAAA,WACE1oB,KAAK+f,gBAEL/f,KAAKyjB,cAAgB,KACrBzjB,KAAKsoB,OAAS,WC/KLwB,IACX,WACA,QACA,UACA,UACA,iBACA,aACA,eACA,yBASA,WAAYtG,EAA6B6E,GACvCroB,KAAKyjB,cAAgBD,EACrBxjB,KAAKsoB,OAASD,EAEdroB,KAAK+pB,aAAe/pB,KAAKsoB,OAAO0B,MAChChqB,KAAKiqB,eAAiBjqB,KAAKsoB,OAAO4B,OAElClqB,KAAK2jB,iBACL3jB,KAAKgf,cAuFT,OApFUmL,2BAAR,WACEnqB,KAAK2oB,uBAAyB3oB,KAAK2oB,uBAAuBjlB,KAAK1D,OAGzDmqB,wBAAR,WAAA,WACEL,GAA0BxkB,QAAQ,SAAA8O,GAChC,OAAAzS,EAAK2mB,OAAO9Z,iBAAiB4F,EAAOzS,EAAKgnB,2BAIrCwB,0BAAR,WAAA,WACEL,GAA0BxkB,QAAQ,SAAA8O,GAChC,OAAAzS,EAAK2mB,OAAOxZ,oBAAoBsF,EAAOzS,EAAKgnB,2BAIxCwB,mCAAR,SAA+B/V,gBAAAA,MAC7B,IAAM2U,EAAU/oB,KAAKsoB,OAErB,OAAQlU,EAAM2B,MACZ,IAAK,WACH/V,KAAKyjB,cAAcgB,KAAKrL,GAAaK,cACrC,MAEF,IAAK,UACHzZ,KAAKyjB,cAAcgB,KAAKrL,GAAaY,gBACrC,MAEF,IAAK,UACHha,KAAKyjB,cAAcgB,KAAKrL,GAAaa,gBACrC,MAEF,IAAK,UACHja,KAAKyjB,cAAcgB,KACjBrL,GAAaW,iBACbgP,EAAQqB,aAEV,MAEF,IAAK,iBACHpqB,KAAKyjB,cAAcgB,KACjBrL,GAAaO,iBACboP,EAAQsB,UAEV,MAEF,IAAK,aACHrqB,KAAKyjB,cAAcgB,KACjBrL,GAAaM,qBACbqP,EAAQqB,aAEV,MAEF,IAAK,eACCpqB,KAAKiqB,iBAAmBlB,EAAQmB,SAClClqB,KAAKiqB,eAAkC,IAAjBlB,EAAQmB,OAC9BlqB,KAAKyjB,cAAcgB,KACjBrL,GAAaS,eACb7Z,KAAKiqB,iBAILjqB,KAAK+pB,eAAiBhB,EAAQiB,QAChChqB,KAAK+pB,aAAehB,EAAQiB,MAC5BhqB,KAAKyjB,cAAcgB,KAAKrL,GAAaU,aAAc9Z,KAAK+pB,eAG1D/pB,KAAKyjB,cAAcgB,KAAKrL,GAAaQ,uBACnCsQ,OAAQnB,EAAQmB,OAChBF,MAAOjB,EAAQiB,UASvBG,oBAAA,WACEnqB,KAAK+f,gBAEL/f,KAAKsoB,OAAS,KACdtoB,KAAKyjB,cAAgB,uBC7GvB6G,EACAC,GAEA,IAAMC,KAEAC,EAyBR,SAAiCH,GAC/B,IAAMI,KAYN,OAXAJ,EAAahlB,QAAQ,SAACqlB,GACfA,EAAY5U,OAIZtW,MAAM+F,QAAQklB,EAAQC,EAAY5U,SACrC2U,EAAQC,EAAY5U,UAEtB2U,EAAQC,EAAY5U,MAAMvR,KAAKmmB,MAG1BD,EAtCgBE,CAAwBN,GACzCO,EAAoBvrB,OAAO+F,KAAKolB,GAqBtC,OAnBAF,EAAkBjlB,QAAQ,SAAAwlB,GACxB,IAAK,IAAItqB,EAAI,EAAGA,EAAIqqB,EAAkBlqB,OAAQH,GAAK,EAAG,CACpD,IAAMuqB,EAAYF,EAAkBrqB,GAC9BwqB,EAAeP,EAAeM,GAEpC,GAAID,EAAQG,QAAQF,GAAY,CAC9BD,EAAQI,gBAAgBF,GACxBR,EAAiBhmB,KAAKsmB,GACtB,UAKNN,EAAiB1H,KACf,SAACqI,EAAcC,GACb,OAAAA,EAAcC,4BACdF,EAAaE,8BAGVb,EC9BT,IAAMc,GAAgBhsB,OAAOa,OAAO,MACpCmrB,GAAcC,IAAMrV,qBAAiBsV,IACrCF,GAAcG,KAAOvV,qBAAiBwV,KACtCJ,GAAcK,KAAOzV,qBAAiB0V,IACtCN,GAAcO,IAAM3V,qBAAiB4V,KACrCR,GAAcS,IAAM7V,qBAAiB8V,IACrCV,GAAcW,IAAM/V,qBAAiBgW,IACrCZ,GAAca,IAAMjW,qBAAiBkW,ICCrC,kBAOE,WACE5I,EACA6E,EACAgE,gBAAAA,MAHF,WAKErsB,KAAKsoB,OAASD,EACdroB,KAAKyjB,cAAgBD,EACrBxjB,KAAKssB,qBACLtsB,KAAKusB,sBACLvsB,KAAKwsB,iBAAmB,KAExBH,EAAiB/mB,QACf,SAAAwlB,GACE,OAAAA,EAAQ2B,eACR9qB,EAAK4qB,mBAAmB/nB,KAAK,IAAIsmB,EAAQtH,MAwEjD,OApEUkJ,mCAAR,SACEC,GADF,WAGE,OAAOA,EAAa/Y,IAAI,SAACgZ,GACvB,GAA2B,iBAAhBA,EAA0B,CACnC,IAAM7W,GD7BgB8W,EC6BKD,GD5B3BE,EAAgBjhB,SAASwQ,cAAc,MAC/B0Q,KAAOF,EACFvB,IAKU0B,EALmBF,EAAcG,SAMvDD,EACJE,MAAM,KACN9mB,MACA+mB,kBAPkB,GC+Bf,OANKpX,GACHpU,EAAK8hB,cAAcgB,KAAKrL,GAAaC,OACnC+T,UAAWC,GAAO/S,UAClBgT,UAAWV,KAGNC,IAAKD,EAAa7W,YDpCL8W,EAQCG,EAPvBF,ECsCF,OAAOF,KAIHF,qCAAR,SAAiCa,GAC/B,GAAKA,EAAL,CAKA,IAAMZ,KAAkB7nB,OAAOyoB,GACzBjD,EAAetqB,KAAKwtB,uBAAuBb,GACjD3sB,KAAKssB,kBAAoBmB,GACvBnD,EACAtqB,KAAKusB,yBARLvsB,KAAKssB,sBAYDI,mCAAR,WACM1sB,KAAKssB,kBAAkB3rB,OAAS,IAGlCX,KAAKwsB,iBAAmBxsB,KAAKssB,kBAAkB,GAC/CtsB,KAAKwsB,iBAAiBkB,OAAO1tB,KAAKsoB,UAI9BoE,kCAAR,WACM1sB,KAAKwsB,mBACPxsB,KAAKwsB,iBAAiBmB,SACtB3tB,KAAKwsB,iBAAmB,OAI5BltB,sBAAIotB,mCAAJ,WACE,OAAO1sB,KAAKwsB,kDAGdE,2BAAA,SAAea,GACbvtB,KAAK4tB,wBACL5tB,KAAK6tB,yBAAyBN,GAC9BvtB,KAAK8tB,0BAGPpB,oBAAA,WACE1sB,KAAK4tB,wBAEL5tB,KAAKwsB,iBAAmB,KACxBxsB,KAAKusB,mBAAqB,KAC1BvsB,KAAKssB,kBAAoB,KAEzBtsB,KAAKsoB,OAAS,yBC7DhB,WAAYniB,OACVqd,iBACAta,WACAuY,8BAAAsM,kBAEA/tB,KAAKyjB,cAAgBD,EAErBxjB,KAAKguB,YAAc,KAEnBhuB,KAAKiuB,gBAAgB/kB,EAAOglB,cAE5BluB,KAAKmuB,aAAe,IAAIzF,GAAYlF,EAAcxjB,KAAKsoB,QACvDtoB,KAAKouB,yBAA2B,IAAIjE,GAClC3G,EACAxjB,KAAKsoB,QAEPtoB,KAAKquB,iBAAmB,IAAIC,GAC1BtuB,KAAKyjB,cACLzjB,KAAKsoB,OACLyF,GAGF/tB,KAAKuuB,aAAarlB,GA4mBtB,OAzmBUslB,4BAAR,SAAwBN,GAClBA,GAAyC,UAAzBA,EAAaO,QAC/BzuB,KAAKsoB,OAAS4F,EAEdluB,KAAKsoB,OAASzc,SAASwQ,cAAc,UAGjCmS,yBAAR,SAAqBtlB,gBAAAA,MAEjB,IAAAwlB,YACAC,aACAC,SACA5E,UACAE,WACA2E,eACAC,gBACAvB,QAGFvtB,KAAK+uB,WAAWL,GAChB1uB,KAAKgvB,YAAYL,GACjB3uB,KAAKivB,QAAQL,GACb5uB,KAAKkvB,QAAQlF,GACbhqB,KAAKmvB,UAAUjF,GACflqB,KAAKovB,cAAcP,GACnB7uB,KAAKqvB,eAAeP,GAEpB9uB,KAAKsvB,OAAO/B,IAGdiB,oBAAA,WACE,OAAOxuB,KAAKsoB,QAGNkG,+BAAR,WACE,OACEzd,MAAO/Q,KAAKsoB,OAAOjJ,YACnBrO,OAAQhR,KAAKsoB,OAAOhJ,eAIxBhgB,sBAAIkvB,oCAAJ,WACE,QAAKxuB,KAAKuvB,iBAIHvvB,KAAKuvB,gBAAgBC,kDAG9BlwB,sBAAIkvB,yCAAJ,WACE,QAAKxuB,KAAKuvB,iBAIHvvB,KAAKuvB,gBAAgBE,uDAG9BnwB,sBAAIkvB,mCAAJ,WACE,QAAKxuB,KAAKuvB,iBAIHvvB,KAAKuvB,gBAAgBG,iDAG9BpwB,sBAAIkvB,oCAAJ,WACE,OAAOxuB,KAAKmuB,aAAawB,kDAG3BrwB,sBAAIkvB,sCAAJ,WACE,QAAIlnB,KAAYH,KAAcE,KAAYG,MAIb,SAAtBxH,KAAK4vB,8CAGdtwB,sBAAIkvB,uCAAJ,WACE,QAAIlnB,KAAYH,KAAcE,KAAYG,MAInCxH,KAAK6vB,+CAGdvwB,sBAAIkvB,kCAAJ,WACE,QAAKxuB,KAAKuvB,iBAIHvvB,KAAKuvB,gBAAgBO,gDAG9BxwB,sBAAIkvB,mCAAJ,WACE,OAAOxuB,KAAKquB,iBAAiBkB,iDAgB/Bf,mBAAA,SAAOjB,GACDA,IAAQvtB,KAAKguB,cAIjBhuB,KAAKmuB,aAAa4B,kBAClB/vB,KAAKguB,YAAcT,EACnBvtB,KAAKquB,iBAAiB2B,eAAehwB,KAAKguB,aAE1ChuB,KAAKmuB,aAAanF,SAASpS,GAAYqZ,WASzCzB,mBAAA,WACE,OAAOxuB,KAAKguB,aAIdQ,kBAAA,WACExuB,KAAKkwB,QACLlwB,KAAKmwB,eAAe,GACpBnwB,KAAKyjB,cAAcgB,KAAKrL,GAAagB,QASvCoU,iBAAA,WADA,WAGExuB,KAAKyjB,cAAcgB,KAAKrL,GAAac,wBAErCla,KAAKowB,iBAAkB,EAElBpwB,KAAKqwB,eACRrwB,KAAKqwB,aAAerwB,KAAKsoB,OAAOgI,YACNpqB,IAAtBlG,KAAKqwB,cACPrwB,KAAKqwB,aACFE,KAAK,WACJ5uB,EAAK0uB,aAAe,KAEhB1uB,EAAKyuB,iBACPzuB,EAAKuuB,UAGRM,MAAM,SAAApc,GACLzS,EAAK8hB,cAAcgB,KAAKrL,GAAae,aAAc/F,GACnDzS,EAAK0uB,aAAe,SAY9B7B,kBAAA,WACMxuB,KAAKqwB,aACPrwB,KAAKowB,iBAAkB,GAEvBpwB,KAAKsoB,OAAO4H,QACZlwB,KAAKowB,iBAAkB,IAU3B5B,2BAAA,WACMxuB,KAAKywB,cACPzwB,KAAKswB,OAELtwB,KAAKkwB,SAeT1B,0BAAA,WACExuB,KAAKkwB,QACLlwB,KAAKmwB,eAAe,GACpBnwB,KAAKyjB,cAAcgB,KAAKrL,GAAagB,QAWvC9a,sBAAIkvB,iCAAJ,WACE,OAAOxuB,KAAKsoB,OAAOgB,wCAWrBhqB,sBAAIkvB,gCAAJ,WACE,OAAOxuB,KAAKsoB,OAAOoI,uCASrBlC,yBAAA,WAEIxuB,KAAKuvB,iBACLvvB,KAAKuvB,gBAAgBC,mBACpBxvB,KAAKuvB,gBAAgBE,wBACrBzvB,KAAK8vB,iBAEN9vB,KAAKmwB,eAAenwB,KAAKuvB,gBAAgBoB,kBAEzC3wB,KAAKswB,SAWT9B,sBAAA,SAAUoC,GACR,IAAMvG,EAAWrqB,KAAK6wB,kBAEtB,GAAIxG,EAAU,CACZ,IAAM5U,EAAUzV,KAAK8wB,iBACrB9wB,KAAKmwB,eAAenkB,KAAK+kB,IAAItb,EAAUmb,EAAKvG,MAWhDmE,uBAAA,SAAWoC,GAGT,GAFiB5wB,KAAK6wB,kBAER,CACZ,IAAMpb,EAAUzV,KAAK8wB,iBACrB9wB,KAAKmwB,eAAenkB,KAAKwI,IAAIiB,EAAUmb,EAAK,MAWhDpC,sBAAA,SAAUtE,GACR,IAAM8G,EAAeC,OAAO/G,GAC5BlqB,KAAKsoB,OAAO4B,OAASgH,MAAMF,GACvB,EACAhlB,KAAKwI,IAAI,EAAGxI,KAAK+kB,IAAIE,OAAO/G,GAAU,IAAK,KASjDsE,sBAAA,WACE,OAA4B,IAArBxuB,KAAKsoB,OAAO4B,QAUrBsE,2BAAA,SAAe3sB,GACb7B,KAAKmvB,UAAUnvB,KAAKmxB,YAActvB,IAUpC2sB,2BAAA,SAAe3sB,GACb7B,KAAKmvB,UAAUnvB,KAAKmxB,YAActvB,IAUpC2sB,oBAAA,SAAQ4C,GACNpxB,KAAKsoB,OAAO0B,MAAQpV,QAAQwc,IAS9B5C,oBAAA,WACE,OAAOxuB,KAAKsoB,OAAO0B,OASrBwE,wBAAA,SAAY6C,GACVrxB,KAAKsoB,OAAOgJ,SAAW1c,QAAQyc,IASjC7C,wBAAA,WACE,OAAOxuB,KAAKsoB,OAAOgJ,UAUrB9C,oBAAA,SAAQ+C,GACNvxB,KAAKsoB,OAAOsG,KAAOha,QAAQ2c,IAS7B/C,oBAAA,WACE,OAAOxuB,KAAKsoB,OAAOsG,MAOrBJ,4BAAA,SAAgBgD,GACdxxB,KAAKsoB,OAAOmJ,aAAeD,GAO7BhD,4BAAA,WACE,OAAOxuB,KAAKsoB,OAAOmJ,cASrBjD,uBAAA,SAAWE,GACT1uB,KAAKsoB,OAAOoG,QAAUA,GAAW,QASnCF,uBAAA,WACE,OAAOxuB,KAAKsoB,OAAOoG,SASrBF,2BAAA,WACE,OAAOxuB,KAAKsoB,OAAO8B,aAUrBoE,2BAAA,SAAekD,GACb1xB,KAAKsoB,OAAO8B,YAAcsH,GAS5BlD,4BAAA,WACE,OAAOxuB,KAAKsoB,OAAO+B,UAAY,GASjCmE,0BAAA,WACE,OAAOxuB,KAAKsoB,OAAOqJ,YASrBnD,2BAAA,WACE,OAAOxuB,KAAKsoB,OAAOsJ,aAGrBpD,wBAAA,WACE,OAAOxuB,KAAKsoB,OAAOuJ,UAUrBrD,0BAAA,SAAcsD,GACRA,EACF9xB,KAAKsoB,OAAOrS,aAAa,cAAe,QAExCjW,KAAKsoB,OAAO3R,gBAAgB,gBAUhC6X,0BAAA,WACE,MAAmD,SAA5CxuB,KAAKsoB,OAAOyJ,aAAa,gBASlCvD,2BAAA,SAAeM,GACTA,EACF9uB,KAAKsoB,OAAOrS,aAAa,cAAe6Y,GAExC9uB,KAAKsoB,OAAO3R,gBAAgB,gBAUhC6X,2BAAA,WACE,OAAOxuB,KAAKsoB,OAAOyJ,aAAa,gBAOlCvD,4BAAA,WACE,OAAOxuB,KAAKmuB,aAAatF,OA4C3B2F,yBAAA,WACQ,IACFwD,EADE7rB,cAAEkkB,aAAUD,gBAOlB,OAJIpqB,KAAKquB,iBAAiBkB,kBACxByC,EAAOhyB,KAAKquB,iBAAiBkB,gBAAgB0C,gBAI1CD,GACHE,eAAgBlyB,KAAKmyB,qBACrB/H,cACAC,WACA+H,uBAAwBpyB,KAAKmuB,aAAakE,mBAI9C7D,oBAAA,WACExuB,KAAKmuB,aAAa5jB,UAClBvK,KAAKouB,yBAAyB7jB,UAC9BvK,KAAKquB,iBAAiB9jB,UACtBvK,KAAKsoB,OAAOtI,YAAchgB,KAAKsoB,OAAOtI,WAAWC,YAAYjgB,KAAKsoB,QAElEtoB,KAAKmuB,aAAe,KACpBnuB,KAAKouB,yBAA2B,KAChCpuB,KAAKquB,iBAAmB,KACxBruB,KAAKyjB,cAAgB,KACrBzjB,KAAKsoB,OAAS,MA5oBTkG,aAAa,SACbA,gBAAgB,eAAgB,SAAU,6BAkJjD3I,GADCxd,gCAmBDwd,GADCxd,gCAMDwd,GADCxd,+BAaDwd,GADCxd,8BAgCDwd,GADCxd,+BAgBDwd,GADCxd,wCAoBDwd,GADCxd,uCAeDwd,GADCxd,uCAaDwd,GADCxd,sCAWDwd,GADCxd,sCAqBDwd,GADCxd,mCAiBDwd,GADCxd,oCAiBDwd,GADCxd,mCAcDwd,GADCxd,mCAYDwd,GADCxd,wCAYDwd,GADCxd,wCAYDwd,GADCxd,iCAWDwd,GADCxd,iCAWDwd,GADCxd,qCAWDwd,GADCxd,qCAYDwd,GADCxd,iCAWDwd,GADCxd,iCASDwd,GADCxd,yCASDwd,GADCxd,yCAWDwd,GADCxd,oCAWDwd,GADCxd,oCAWDwd,GADCxd,wCAYDwd,GADCxd,EAAU,4CAWXwd,GADCxd,yCAWDwd,GADCxd,EAAU,wDAWXwd,GADCxd,EAAU,0DAgBXwd,GADCxd,uCAeDwd,GADCxd,uCAWDwd,GADCxd,wCAeDwd,GADCxd,wCASDwd,GADCxd,EAAU,gEA8CXwd,GADCxd,2CC5oBGiqB,GAA8B,mCAC9BC,GAAoB,4CCC1B,YAA6BC,EAAeC,GACpC,IDYAhvB,ECZA0C,GDYA1C,IALI6d,QACRgR,GACA,SAACI,EAAGvxB,EAAGwxB,EAAGhzB,GAAM,OAAAwB,EAAIA,EAAIwxB,EAAIA,EAAIhzB,EAAIA,IAGnB4gB,MAAMgS,MAGnBpxB,EAAGygB,SAASne,EAAO,GAAI,IACvBkvB,EAAG/Q,SAASne,EAAO,GAAI,IACvB9D,EAAGiiB,SAASne,EAAO,GAAI,KAEzB,KClBJ,MAAO,gCAAuBgvB,MCJhC,YAAsBpS,GACpB,OAAOA,EAAOiB,QAAQ,kBAAmB,SAAS6L,cCCpD,IAAMyF,GAAoC,IAAInoB,IAc9C,YAAqBooB,GACnB,IAAMC,EAAoBC,GAAaF,GAEvC,MAAO,GAAGC,EAfZ,SAA0BE,GACxB,GAAIJ,GAAatnB,IAAI0nB,GAAY,CAC/B,IAAMC,EAAgBL,GAAajqB,IAAIqqB,GAAa,EAGpD,OAFAJ,GAAahqB,IAAIoqB,EAAWC,GAErB,GAAGA,EAIZ,OADAL,GAAahqB,IAAIoqB,EAAW,GACrB,GAMeE,CAAiBJ,GCbzC,YAA4BhR,GAC1B,OAAOxiB,OAAO+F,KAAKyc,GAAO3d,OACxB,SAACgvB,EAAKN,GAAoB,YACrBM,UACFN,GARP,SAA4BA,GAC1B,MAAO,iBAAiBO,GAAYP,GAObQ,CAAmBR,kBCP5C,qBAAA,aACU7yB,oBAAkD,IAAIyK,IACtDzK,yBAAqD,IAAIyK,IACzDzK,cAiGV,OA9FEszB,mBAAA,WAAA,WACEtzB,KAAKuzB,WAAavzB,KAAKuzB,YAAc1nB,SAASwQ,cAAc,SAE5D,IAAMmX,KACNxzB,KAAKyzB,eAAenuB,QAAQ,SAACotB,EAAG5oB,GAC9B0pB,EAAiBhvB,KAAK7C,EAAK+xB,cAAc5pB,MAG3C9J,KAAKuzB,WAAWjX,UAAYkX,EAAiB9uB,KAAK,KAElDmH,SAASmS,qBAAqB,QAAQ,GAAGG,YAAYne,KAAKuzB,aAG5DD,mBAAA,SAAOtB,GACLhyB,KAAK2zB,WACA3zB,KAAK2zB,MACL3B,GAGDhyB,KAAKuzB,YACPvzB,KAAK0tB,UAIT4F,gCAAA,SAAoBxpB,EAAgBgY,GAElC,GAAI9hB,KAAKyzB,eAAe9qB,IAAImB,GAC1B,MAAM,IAAI/H,MAAM,iDAGlB/B,KAAKyzB,eAAe7qB,IAAIkB,EAAQgY,GAChC9hB,KAAK4zB,oBAAoBhrB,IAAIkB,EAAQ+pB,GAAmB/R,KAG1DwR,gCAAA,SAAoBxpB,GAClB,OAAO9J,KAAK4zB,oBAAoBjrB,IAAImB,IAG9BwpB,0BAAR,SAAsBxpB,GAAtB,WACQgqB,EAAc9zB,KAAKyzB,eAAe9qB,IAAImB,GACtCiqB,EAAmB/zB,KAAK4zB,oBAAoBjrB,IAAImB,GAEtD,OAAKgqB,GAAgBC,EAIdz0B,OAAO+F,KAAKyuB,GAChBlgB,IAAI,SAAAif,GACH,OAAAlxB,EAAKqyB,YACHF,EAAYjB,GACZkB,EAAiBlB,MAGpBnuB,KAAK,KAVC,IAaH4uB,wBAAR,SAAoBtR,EAAyBiS,GAA7C,WACE,IAAKjS,IAASiS,EACZ,MAAO,GAGT,IAMMC,EANmB50B,OAAO+F,KAAK2c,GAClC5T,OAAO,SAAA+lB,GAAY,MAA0B,iBAAnBnS,EAAKmS,KAC/BvgB,IACC,SAAAugB,GAAY,OAA4B,IAA3BA,EAASruB,QAAQ,KAAcquB,EAAW,KAAKA,IAI7DvgB,IAAI,SAAAugB,GAGH,OAFiBA,EAAS7S,QAAQ,KAAM,IAAI2S,QAErBtyB,EAAKyyB,eAAepS,EAAKmS,UAEjDzvB,KAAK,KAER,MAAO,IAAIuvB,OAAkBj0B,KAAKo0B,eAAepS,QAAUkS,GAGrDZ,2BAAR,SAAuBtR,GAAvB,WAKE,OAJuC1iB,OAAO+F,KAAK2c,GAAM5T,OACvD,SAAA+lB,GAAY,MAA0B,iBAAnBnS,EAAKmS,KAIvBvgB,IACC,SAAAugB,GACE,OAAGpB,GAAaoB,SACY,mBAAnBnS,EAAKmS,GACPnS,EAAKmS,GAAwCxyB,EAAKgyB,OACnD3R,EAAKmS,MAGdzvB,KAAK,YCjGN2vB,IACJ7B,MAAO,OACP8B,UAAW,UACXC,cAAe,sBASf,WAAYpuB,OAAE6C,uBACZhJ,KAAKw0B,YAAc,IAAIlB,GAEvBtzB,KAAKw0B,YAAY1P,YACZuP,GACArrB,IAILlC,OAAOuF,WAAW,WAChB1K,EAAK6yB,aAAe7yB,EAAK6yB,YAAY9G,UACpC,GAiCP,OAfE+G,wBAAA,SAAYzrB,GACVhJ,KAAKw0B,YAAY1P,OAAO9b,IAG1ByrB,gCAAA,SAAoB3qB,EAAgBgY,GAClC9hB,KAAKw0B,YAAYpX,oBAAoBtT,EAAQgY,IAG/C2S,gBAAA,SAAI3qB,GACF,OAAO9J,KAAKw0B,YAAYE,oBAAoB5qB,IAG9C2qB,oBAAA,WACEz0B,KAAKw0B,YAAc,MA/CdC,aAAa,QACbA,gBAAgB,eAiCvB5O,GADCxd,0CC1CGuL,YACH+gB,GAAY5Z,YAAa,gBAC1B5U,GAACwuB,GAAY3Z,cAAe,gBAC5B7U,GAACwuB,GAAY1Z,qBAAsB,SAAC9U,GAClC,iBAAoB,aAAT,QACbA,GAACwuB,GAAYzZ,iBAAkB,eAC/B/U,GAACwuB,GAAYxZ,mBAAoB,eACjChV,GAACwuB,GAAYlZ,qBAAsB,QACnCtV,GAACwuB,GAAYnZ,oBAAqB,OAClCrV,GAACwuB,GAAYjZ,wBAAyB,mBACtCvV,GAACwuB,GAAYhZ,wBAAyB,SAACxV,GACrC,MAAA,iCACFA,GAACwuB,GAAY7Y,oBAAqB,OAClC3V,GAACwuB,GAAY5Y,sBAAuB,OACpC5V,GAACwuB,GAAY/Y,sBAAuB,SACpCzV,GAACwuB,GAAY9Y,wBAAyB,SACtC1V,GAACwuB,GAAY3Y,sBAAuB,iBACpC7V,GAACwuB,GAAY1Y,sBAAuB,SAAC9V,GAAe,MAAA,2BACpDA,GAACwuB,GAAYvZ,yBAA0B,yBACvCjV,GAACwuB,GAAYtZ,2BAA4B,yBACzClV,GAACwuB,GAAYrZ,wBAAyB,wBACtCnV,GAACwuB,GAAYpZ,0BAA2B,0CCbxC,WAAYpV,OAAE+C,WACZlJ,KAAK40B,cACAC,GACA3rB,EAAO4rB,OAqBhB,OAjBEC,gBAAA,SAAIC,EAAYlxB,GACd,GAAK9D,KAAK40B,SAAV,CAIA,IAAMK,EAAOj1B,KAAK40B,SAASI,GAE3B,MAAoB,mBAATC,EACFA,EAAKnxB,GAGPmxB,IAGTF,oBAAA,WACE/0B,KAAK40B,SAAW,MA3BXG,aAAa,UACbA,gBAAgB,eCJnBG,KAEF,oBACA,iBACA,oBACA,oBACA,mBACA,oBAIA,0BACA,uBACA,0BACA,0BACA,yBACA,0BAIA,0BACA,yBACA,iCACA,yBACA,yBACA,0BAGA,uBACA,sBACA,uBACA,uBACA,sBACA,uBAGA,sBACA,mBACA,sBACA,sBACA,qBACA,sBAwBJ,kBAKE,WAAYlQ,EAAmBxZ,GAC7BxL,KAAKm1B,MAAQnQ,EACbhlB,KAAKo1B,UAAY5pB,EACjBxL,KAAKq1B,cA3BT,WAGE,IAFA,IAAMC,KAEG90B,EAAI,EAAGA,EAAI00B,GAAMv0B,OAAQH,GAAK,EACrC,GAAI00B,GAAM10B,GAAG,KAAMqL,SAAU,CAC3B,IAAK,IAAI4b,EAAI,EAAGA,EAAIyN,GAAM10B,GAAGG,OAAQ8mB,GAAK,EACxC6N,EAAIJ,GAAM,GAAGzN,IAAMyN,GAAM10B,GAAGinB,GAE9B,OAAO6N,EAIX,OAAO,EAegBC,GAErBv1B,KAAKgf,cAkFT,OA/EE1f,sBAAIk2B,8BAAJ,WACE,OAAO5gB,QAAQ5U,KAAKq1B,gDAGtB/1B,sBAAIk2B,kCAAJ,WACE,MAAkC,kBAAvBx1B,KAAKq1B,eAITzgB,QAAS/I,SAAiB7L,KAAKq1B,cAAcI,qDAGtDn2B,sBAAIk2B,6BAAJ,WACE,MAAkC,kBAAvBx1B,KAAKq1B,gBAKdr1B,KAAK01B,YAAe7pB,SAAiB7L,KAAKq1B,cAAcM,qDAIpDH,wBAAR,WACE,GAAkC,kBAAvBx1B,KAAKq1B,cACd,OAAO,EAGTxpB,SAAS2C,iBACPxO,KAAKq1B,cAAcO,iBACnB51B,KAAKo1B,YAIDI,0BAAR,WACE,GAAkC,kBAAvBx1B,KAAKq1B,cACd,OAAO,EAGTxpB,SAASiD,oBACP9O,KAAKq1B,cAAcO,iBACnB51B,KAAKo1B,YAITI,oBAAA,WACE,GAAKx1B,KAAK61B,UAAV,CAIA,IAAMC,EAAW91B,KAAKq1B,cAAmCU,kBAOrD,oBAAoB3uB,KAAKH,UAAUC,WACpClH,KAAKm1B,MAAcW,KAEnB91B,KAAKm1B,MAAcW,GAAUxiB,QAAgB0iB,wBAIlDR,iBAAA,WACOx1B,KAAK61B,WAIThqB,SACE7L,KAAKq1B,cAAmCY,mBAI7CT,oBAAA,WACEx1B,KAAK+f,gBAEL/f,KAAKm1B,MAAQ,KACbn1B,KAAKo1B,UAAY,WCzJjBc,IAAwB,gBAM1B,WAAYlR,EAAwBxZ,GAClCxL,KAAKm1B,MAAQnQ,EACbhlB,KAAKo1B,UAAY5pB,EAEjBxL,KAAKgf,cAELhf,KAAKm2B,sBAAwBn2B,KAAKm2B,sBAAsBzyB,KAAK1D,MA4EjE,OAzEEV,sBAAI82B,8BAAJ,WACE,OAAOxhB,QAAQ5U,KAAKm1B,OAASn1B,KAAKm1B,MAAMkB,2DAG1C/2B,sBAAI82B,kCAAJ,WACE,OAAOxhB,QAAQ5U,KAAKm1B,OAASn1B,KAAKm1B,MAAMmB,6DAG1Ch3B,sBAAI82B,6BAAJ,WACE,OAAOp2B,KAAK01B,4CAGNU,wBAAR,WACEp2B,KAAKm1B,MAAM3mB,iBAAiB,wBAAyBxO,KAAKo1B,WAC1Dp1B,KAAKm1B,MAAM3mB,iBAAiB,sBAAuBxO,KAAKo1B,YAGlDgB,0BAAR,WACEp2B,KAAKm1B,MAAMrmB,oBAAoB,wBAAyB9O,KAAKo1B,WAC7Dp1B,KAAKm1B,MAAMrmB,oBAAoB,sBAAuB9O,KAAKo1B,WAE3Dp1B,KAAKm1B,MAAMrmB,oBACT,iBACA9O,KAAKm2B,wBAIDC,kCAAR,WACEp2B,KAAKm1B,MAAMrmB,oBACT,iBACA9O,KAAKm2B,uBAGPD,IAAwB,EAExBl2B,KAAKm1B,MAAMoB,yBAGbH,oBAAA,WACE,IAAKp2B,KAAK61B,WAAa71B,KAAKw2B,eAC1B,OAAO,EAGT,IACEx2B,KAAKm1B,MAAMoB,wBACX,MAAOnU,GACP,GAAIpiB,KAAKm1B,MAAMsB,WA/DC,EA+D2B,CACzC,GAAIP,GACF,OAEFl2B,KAAKm1B,MAAM3mB,iBACT,iBACAxO,KAAKm2B,uBAEPD,IAAwB,KAK9BE,iBAAA,WACE,IAAKp2B,KAAK61B,YAAc71B,KAAKw2B,eAC3B,OAAO,EAGTx2B,KAAKm1B,MAAMuB,wBAGbN,oBAAA,WACEp2B,KAAK+f,gBAEL/f,KAAKm1B,MAAQ,KACbn1B,KAAKo1B,UAAY,WC3Ef7R,IACJoT,qBAAqB,EACrBC,uBAAuB,EACvBC,uBAAuB,EACvBC,4BAA4B,iBAoB5B,WAAY3wB,OACVqd,iBACAuT,WACAC,kBACA9tB,WAUA,GAvBMlJ,2BAAgC,EAChCA,6BAAkC,EAClCA,6BAAkC,EAClCA,kCAAuC,EAiB7CA,KAAKyjB,cAAgBD,EACrBxjB,KAAKi3B,QAAUF,GAEW,IAAtB7tB,EAAO2W,WACT7f,KAAKk3B,YAAa,MACb,CACLl3B,KAAKk3B,YAAa,EAClB,IAAM/tB,OACDoa,GAC8B,iBAAtBra,EAAO2W,WAA0B3W,EAAO2W,eAGrD7f,KAAKm3B,qBAAuBhuB,EAAQwtB,oBACpC32B,KAAKo3B,uBAAyBjuB,EAAQytB,sBACtC52B,KAAKq3B,uBAAyBluB,EAAQ0tB,sBACtC72B,KAAKs3B,4BAA8BnuB,EAAQ2tB,2BAE7C92B,KAAKu3B,UAAYv3B,KAAKu3B,UAAU7zB,KAAK1D,MAEjCuH,IACFvH,KAAKw3B,QAAU,IAAIpB,GAAcp2B,KAAKi3B,QAAQlT,UAAW/jB,KAAKu3B,WAE9Dv3B,KAAKw3B,QAAU,IAAIhC,GAAkBwB,EAAcrX,KAAM3f,KAAKu3B,WAGhEv3B,KAAKgf,cAsHT,OAnHUyY,sBAAR,YACOz3B,KAAKw3B,QAAQhB,gBAAkBx2B,KAAKs3B,6BACvCt3B,KAAKi3B,QAAQ/G,QAEflwB,KAAKyjB,cAAcgB,KACjB5N,GAAUO,0BACVpX,KAAKw3B,QAAQhB,iBAITiB,wBAAR,WACEz3B,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAEnChL,GAAaE,cAAetZ,KAAK03B,8BACjCte,GAAac,uBAAwBla,KAAK23B,wBAE7C33B,OAIIy3B,uBAAR,WACMz3B,KAAKm3B,sBAAwBn3B,KAAKw2B,gBACpCx2B,KAAK43B,kBAIDH,kCAAR,WACMz3B,KAAKo3B,yBAA2Bp3B,KAAKw2B,gBACvCx2B,KAAK63B,mBAIDJ,kCAAR,WACMz3B,KAAKq3B,wBAA0Br3B,KAAKw2B,gBACtCx2B,KAAK43B,kBAIDH,wCAAR,SAAoCtxB,GAKlC,oBACE,KAAKyQ,GAAY+S,MACf3pB,KAAK83B,aACL,MAEF,KAAKlhB,GAAY8S,OACf1pB,KAAK+3B,0BAiBXN,4BAAA,WACOz3B,KAAK61B,WAIV71B,KAAKw3B,QAAQ1B,WASf2B,2BAAA,WACOz3B,KAAK61B,WAIV71B,KAAKw3B,QAAQQ,QASf14B,sBAAIm4B,kCAAJ,WACE,QAAKz3B,KAAK61B,WAIH71B,KAAKw3B,QAAQhB,gDAGtBl3B,sBAAIm4B,6BAAJ,WACE,OAAOz3B,KAAKw3B,QAAQ3B,WAAa71B,KAAKk3B,4CAGxCO,oBAAA,WACEz3B,KAAK+f,gBAEL/f,KAAKw3B,QAAQjtB,UACbvK,KAAKw3B,QAAU,KAEfx3B,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,MAxKVQ,aAAa,oBACbA,gBAAgB,eAAgB,SAAU,gBAAiB,UAwHlE5R,GADCxd,yCAeDwd,GADCxd,wCAeDwd,GADCxd,6CCjKG4vB,IACJphB,GAAUsB,mCACVtB,GAAUqB,oCACVrB,GAAUI,yCAeV,WAAY9Q,OAAEqd,iBAAcuT,WAC1B/2B,KAAKyjB,cAAgBD,EACrBxjB,KAAKi3B,QAAUF,EACf/2B,KAAKk4B,OAAShc,GAAUic,KAExBn4B,KAAKo4B,0BAA4B,KAEjCp4B,KAAKgf,cA0GT,OAvGE1f,sBAAI+4B,yBAAJ,WACE,OAAOr4B,KAAKk4B,wCAGNG,wBAAR,WAAA,WACEr4B,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAEnChL,GAAaE,cAAetZ,KAAKs4B,6BAC/BL,GAAkBrkB,IACnB,SAAAqU,GAAa,OAACA,EAAWtmB,EAAK42B,sBAE/Bnf,GAAaI,sBAAuBxZ,KAAKw4B,0BAE5Cx4B,OAIIq4B,gCAAR,SAA4BlyB,OAC1ByjB,cACAC,cAKA,GAAIA,IAAcjT,GAAYqZ,SAK9B,GAAKjwB,KAAKi3B,QAAQzH,mBAAoBxvB,KAAKi3B,QAAQxH,sBAInD,OAAQ5F,GACN,KAAKjT,GAAYuS,gBACfnpB,KAAKy4B,UAAUvc,GAAUwc,SACzB,MAEF,KAAK9hB,GAAYyS,eACXrpB,KAAKk4B,SAAWhc,GAAUwc,SAC5B14B,KAAKi3B,QAAQ0B,eAEf,MAEF,KAAK/hB,GAAY2S,SAGbvpB,KAAKk4B,SAAWhc,GAAUwc,SAC1B14B,KAAKk4B,SAAWhc,GAAU0c,UAC1B54B,KAAKo4B,6BAELp4B,KAAKy4B,UACHz4B,KAAKi3B,QAAQnH,eAAiB5T,GAAU2c,KAAO3c,GAAU0c,UAE3D54B,KAAKo4B,2BAA4B,GAEnC,MAEF,KAAKxhB,GAAY8S,OAEXE,IAAchT,GAAY2S,SAC5BvpB,KAAKy4B,UAAUvc,GAAU0c,gBApC7B54B,KAAKy4B,UAAUvc,GAAUic,OA6CrBE,6BAAR,WAEIr4B,KAAKi3B,QAAQzH,kBACbxvB,KAAKi3B,QAAQ6B,oBAAsBliB,GAAY2S,UAG/CvpB,KAAKo4B,2BAA4B,IAI7BC,mCAAR,WACEr4B,KAAKy4B,UAAUvc,GAAUyN,QAGnB0O,sBAAR,SAAkBxP,GAChB,GAAI7oB,KAAKk4B,SAAWrP,EAAO,CACzB,IAAMe,EAAY5pB,KAAKk4B,OACjBrO,EAAYhB,EAElB7oB,KAAKk4B,OAASrP,EACd7oB,KAAKyjB,cAAcgB,KAAKrL,GAAaG,oBACnCqQ,YACAC,gBAKNwO,oBAAA,WACEr4B,KAAK+f,gBACL/f,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,KACfj3B,KAAKk4B,OAAS,MA1HTG,aAAa,kBACbA,gBAAgB,eAAgB,eChB5BU,IACXC,UAAW,GACXC,MAAO,GACPC,IAAK,EACLC,WAAY,GACZC,YAAa,GACbC,SAAU,GACVC,WAAY,GACZC,UAAW,kBAYX,WAAY5Z,EAAmBnB,GAC7Bxe,KAAKyjB,cAAgB,IAAIgD,GACzBzmB,KAAKw5B,MAAQ7Z,EAEbnB,GAAaxe,KAAKy5B,iBAAiBjb,GACnCxe,KAAK2jB,iBACL3jB,KAAKgf,cAmDT,OAhDU0a,6BAAR,SAAyBlb,GAAzB,WACElf,OAAO+F,KAAKmZ,GAAWlZ,QAAQ,SAACmP,GAC9B,IAAMklB,EAAmBnb,EAAU/J,GAC/BhV,MAAM+F,QAAQm0B,GAChBA,EAAiBr0B,QAAQ,SAAAkG,GACvB,OAAA7J,EAAK8hB,cAAciE,GAAGjT,EAASjJ,KAGjC7J,EAAK8hB,cAAciE,GAAGjT,EAASklB,MAK7BD,+BAAR,WACE15B,KAAKyjB,cAAckE,sBAGb+R,2BAAR,WACE15B,KAAK45B,sBAAwB55B,KAAK45B,sBAAsBl2B,KAAK1D,OAGvD05B,wBAAR,WACE15B,KAAKw5B,MAAMhrB,iBAAiB,UAAWxO,KAAK45B,uBAAuB,IAG7DF,0BAAR,WACE15B,KAAKw5B,MAAM1qB,oBACT,UACA9O,KAAK45B,uBACL,IAIJF,yBAAA,SAAalb,GACXxe,KAAKy5B,iBAAiBjb,IAGhBkb,kCAAR,SAA8BtX,GAC5BpiB,KAAKyjB,cAAcgB,KAAKrC,EAAE3N,QAAS2N,IAGrCsX,oBAAA,WACE15B,KAAK+f,gBACL/f,KAAK65B,qBACL75B,KAAKyjB,cAAgB,KAErBzjB,KAAKw5B,MAAQ,yBC9Cf,WAAYrzB,OACV+C,WACAsa,iBACAwT,kBACAD,WAOA/2B,KAAKyjB,cAAgBD,EACrBxjB,KAAKi3B,QAAUF,EACf/2B,KAAK85B,UAAY9C,EAAcrX,KAE3BxY,KAAcE,KAAYC,KAAYE,IACxCxH,KAAKk3B,YAAa,EAElBl3B,KAAKk3B,YAAmD,IAAtChuB,EAAO6wB,2BAG3B/5B,KAAKg6B,mBAmFT,OAhFUC,6BAAR,WACMj6B,KAAKk3B,aACPl3B,KAAKk6B,qBAAuB,IAAIC,GAAoBn6B,KAAK85B,WACzD95B,KAAKo6B,2BAIDH,mCAAR,WAAA,aACEj6B,KAAKk6B,qBAAqBG,qBACvBtB,GAASG,KAAM,WACdv3B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,+BAEpCzR,EAAC4yB,GAASC,WAAY,SAAA5W,GACpBA,EAAEkY,iBACF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KACjB5N,GAAUoB,yCAEZtW,EAAKs1B,QAAQsD,kBAEfp0B,EAAC4yB,GAASI,YAAa,SAAA/W,GACjBzgB,EAAKs1B,QAAQvH,kBACftN,EAAEkY,iBACF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KACjB5N,GAAUqB,qCAEZvW,EAAKs1B,QAAQuD,WAhEe,KAmEhCr0B,EAAC4yB,GAASK,aAAc,SAAAhX,GAClBzgB,EAAKs1B,QAAQvH,kBACftN,EAAEkY,iBACF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KAAK5N,GAAUsB,oCAClCxW,EAAKs1B,QAAQwD,UAxEe,KA2EhCt0B,EAAC4yB,GAASM,UAAW,SAAAjX,GACnBA,EAAEkY,iBACF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KACjB5N,GAAUuB,yCAEZzW,EAAKs1B,QAAQ/H,SAAQ,GACrBvtB,EAAKs1B,QAAQyD,eAjFkB,KAmFjCv0B,EAAC4yB,GAASO,YAAa,SAAAlX,GACrBA,EAAEkY,iBACF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KACjB5N,GAAUwB,yCAEZ1W,EAAKs1B,QAAQ/H,SAAQ,GACrBvtB,EAAKs1B,QAAQ0D,eA1FkB,UA+F7BV,gCAAR,WACMj6B,KAAKk6B,sBACPl6B,KAAKk6B,qBAAqB3vB,WAI9B0vB,0BAAA,SAAcj5B,EAAawK,SACrBxL,KAAKk3B,YACPl3B,KAAKk6B,qBAAqBG,qBACvBr5B,GAAMwK,OAKbyuB,oBAAA,WACEj6B,KAAK46B,sBAEL56B,KAAK85B,UAAY,KACjB95B,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,MA/GVgD,aAAa,kBACbA,gBAAgB,SAAU,eAAgB,gBAAiB,eCvBpE,YAA0BnZ,EAAsB+Z,GAC9C,OAAO/Z,EAAQga,cAAc,eAAeD,QCD9C,YACElb,EACAqT,EACA+H,GAEIA,EACFpb,EAAKJ,UAAUC,IAAIwT,GAEnBrT,EAAKJ,UAAUG,OAAOsT,2qCCkBxB,WAAY9pB,GAAZ,MACExH,mBACQ8c,qBAER7c,EAAK8c,WAAaD,EAElB7c,EAAKq5B,WACLr5B,EAAKqd,gBAkET,OAjF6B/c,OAkBnBg5B,qBAAR,iBACEj7B,KAAK0e,OAASC,sBAEV5O,OAAQ/P,KAAK4e,yNAIjB5e,KAAKk7B,cAAgBC,GACnBn7B,KAAK0e,OACL,4BAEF1e,KAAKo7B,gBAAkBD,GACrBn7B,KAAK0e,OACL,+BAIIuc,wBAAR,WACEj7B,KAAKk7B,cAAc1sB,iBACjB,QACAxO,KAAKye,WAAW4c,qBAIZJ,0BAAR,WACEj7B,KAAKk7B,cAAcpsB,oBACjB,QACA9O,KAAKye,WAAW4c,qBAIpBJ,iBAAA,WACEK,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAWa,QAAQ,IAGvDwb,iBAAA,WACEK,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAWa,QAAQ,IAGvDwb,oBAAA,SAAQM,GCzEV,IAAyBC,EAAc5c,ED0EnC5e,KAAKo7B,gBAAgB9e,WC1EAkf,ED2EnBC,KAAKC,UAAUH,OAAMr1B,EAAW,GC3EC0Y,ED4EjC5e,KAAK4e,YC3ET4c,EAAOA,EACJla,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,SAELA,QACV,wGACA,SAACf,GACC,IAAIob,EAAM/c,EAAWgd,OAYrB,MAXI,KAAKx0B,KAAKmZ,GAEVob,EADE,KAAKv0B,KAAKmZ,GACN3B,EAAW5d,IAEX4d,EAAWyB,OAEV,aAAajZ,KAAKmZ,GAC3Bob,EAAM/c,EAAWid,QACR,OAAOz0B,KAAKmZ,KACrBob,EAAM/c,EAAWkd,MAEZ,gBAAgBH,OAAQpb,gBD2DnC0a,oBAAA,WACE,OAAOj7B,KAAK0e,QAGduc,oBAAA,WACEj7B,KAAK+f,gBAED/f,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,KACd1e,KAAKk7B,cAAgB,KACrBl7B,KAAKo7B,gBAAkB,KAEvBp7B,KAAKye,WAAa,SA/EOyB,IAmF7B+a,GAAexa,iNE7Ff,ICsBKsb,iBDRH,WAAY51B,OACV4wB,WACAC,kBACAgF,oBAMAh8B,KAAKi3B,QAAUF,EAEf/2B,KAAK2jB,iBACL3jB,KAAK4jB,UAEL5jB,KAAK0lB,OAELsR,EAAcxS,oBAAoBxkB,KAAK2f,MAEvCqc,EAAgBC,cAAclD,GAASQ,UAAWv5B,KAAKk8B,qBA+F3D,OA5FUC,gCAAR,SAA4B/Z,GACtBA,EAAEga,SAAWha,EAAEia,UACjBr8B,KAAK2lB,QAITrmB,sBAAI68B,wBAAJ,WACE,OAAOn8B,KAAK8jB,KAAKC,2CAGXoY,oBAAR,WACEn8B,KAAK8jB,KAAO,IAAI5D,IACd1B,WACE6c,mBAAoBr7B,KAAK0lB,SAKvByW,2BAAR,WACEn8B,KAAKs8B,WAAat8B,KAAKs8B,WAAW54B,KAAK1D,MACvCA,KAAK0lB,KAAO1lB,KAAK0lB,KAAKhiB,KAAK1D,MAC3BA,KAAKk8B,oBAAsBl8B,KAAKk8B,oBAAoBx4B,KAAK1D,OAG3Dm8B,yBAAA,WACQ,IAAAh2B,8BACJ0mB,QACA9W,SACAwmB,qBACAC,mBACAC,wBACAC,yBACAxK,mBACA9H,gBACAC,aACA+H,2BACAuK,aACAC,eAGF,OACE/P,MACA9W,OACAwmB,iBAAkBpmB,iCAA4BomB,GAC9CC,iBACAC,sBACAC,uBACAxK,iBACA9H,cACAC,WACA+H,yBACAuK,WACAC,eAIJT,uBAAA,WACEn8B,KAAK8jB,KAAK+Y,QAAQ78B,KAAK88B,iBAGzBX,8BAAA,WACEn8B,KAAK+8B,sBACL/8B,KAAKg9B,UAAYl2B,OAAOm2B,YAAYj9B,KAAKs8B,WAjGzB,MAoGlBH,gCAAA,WACEr1B,OAAOo2B,cAAcl9B,KAAKg9B,YAG5Bb,iBAAA,WACMn8B,KAAK0jB,WACP1jB,KAAKs8B,aACLt8B,KAAKm9B,oBACLn9B,KAAK8jB,KAAK6B,OACV3lB,KAAK0jB,UAAW,IAIpByY,iBAAA,WACOn8B,KAAK0jB,WACR1jB,KAAK+8B,sBACL/8B,KAAK8jB,KAAK4B,OACV1lB,KAAK0jB,UAAW,IAIpByY,oBAAA,WACEn8B,KAAK+8B,sBAEL/8B,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,MA1HPqY,aAAa,aACbA,OAAOjc,GACPic,gBAAgB,SAAU,gBAAiB,yBCiB/CJ,GAAAA,qBAAAA,0CAEHA,eACAA,6nCCFA,WAAY7yB,GAAZ,QACExH,mBACQ8c,cAAWzW,mBAAgBq1B,4BAEnCz7B,EAAK8c,WAAaD,EAElB7c,EAAK07B,8BACFtB,mBAAcuB,SAAU37B,EAAKid,WAAW2e,YACzCp3B,EAAC41B,mBAAcyB,MAAO77B,EAAKid,WAAW6e,SACtCt3B,EAAC41B,mBAAc2B,MAAO/7B,EAAKid,WAAW+e,YAGxCh8B,EAAKgiB,iBAED5b,GACFq1B,EAAiBnnB,aAAa,WAAY,QAG5CtU,EAAKq5B,SAASoC,GACdz7B,EAAKqd,cACLrd,EAAKi8B,YAAY7B,mBAAcuB,WAuNnC,OAzPyBr7B,OAqCf47B,2BAAR,WACE79B,KAAK89B,kBAAoB99B,KAAK89B,kBAAkBp6B,KAAK1D,OAG/C69B,qBAAR,SAAiBT,SACfp9B,KAAK0e,OAASC,sBAEV5O,OAAQ/P,KAAK4e,8IAIjB5e,KAAK+9B,eAAiBX,EACtBp9B,KAAK0e,OAAOP,YAAYif,GAExBp9B,KAAKg+B,SAAW7C,GACdn7B,KAAK0e,OACL,qBAEF1e,KAAKi+B,KAAOj+B,KAAKg+B,SAASE,WAAW,OAG/BL,wBAAR,WACE79B,KAAK0e,OAAOlQ,iBAAiB,QAASxO,KAAKye,WAAW0f,qBACtDn+B,KAAK0e,OAAOlQ,iBACV,WACAxO,KAAKye,WAAW2f,yBAIZP,0BAAR,WACE79B,KAAK0e,OAAO5P,oBACV,QACA9O,KAAKye,WAAW0f,qBAElBn+B,KAAK0e,OAAO5P,oBACV,WACA9O,KAAKye,WAAW2f,yBAIpBP,mCAAA,SAAuBQ,GACrBr+B,KAAKs+B,kBAAoBD,EACzB,IAAME,EAAev+B,KAAKs+B,kBAAoB,EAC9ChD,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAW4f,gBAAiBD,GAC9DjD,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAW6f,eAAgBF,IAG/DV,wBAAA,WACE79B,KAAK0e,OAAOggB,SAGdb,iBAAA,WACEvC,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAWa,QAAQ,IAGvDoe,iBAAA,WACEvC,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAWa,QAAQ,IAGvDoe,oBAAA,WACE,OAAO79B,KAAK0e,QAGdmf,gCAAA,SAAoBle,GAClB3f,KAAK0e,OAAOP,YAAYwB,IAG1Bke,uBAAA,WACEvC,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAW+f,cAAc,IAG7Dd,uBAAA,WACEvC,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAW+f,cAAc,IAG7Dd,wBAAA,SAAYe,GAAZ,WACM5+B,KAAKq9B,sBAAsBuB,KAC7B5+B,KAAK6+B,kBAELv/B,OAAO+F,KAAKrF,KAAKq9B,uBAAuB/3B,QAAQ,SAAAqc,GAC9C2Z,GAAgB35B,EAAK+c,OAAQ/c,EAAK07B,sBAAsB1b,IAAO,KAGjE2Z,GAAgBt7B,KAAK0e,OAAQ1e,KAAKq9B,sBAAsBuB,IAAW,GAE/DA,IAAa7C,mBAAcyB,KAC7Bx9B,KAAK8+B,2BAEL9+B,KAAK++B,0BAGP/+B,KAAKg/B,aAAeJ,IAIxBf,8BAAA,SAAkB9sB,EAAeC,GAC/BhR,KAAKi/B,mBAAmBluB,GACxB/Q,KAAKk/B,oBAAoBluB,IAG3B6sB,+BAAA,SAAmB9sB,GACjB/Q,KAAKg+B,SAASjtB,MAAQA,GAGxB8sB,gCAAA,SAAoB7sB,GAClBhR,KAAKg+B,SAAShtB,OAASA,GAGjB6sB,qCAAR,WACO79B,KAAKm/B,0BACRn/B,KAAK89B,qBAIDD,oCAAR,WACM79B,KAAKm/B,2BACPC,qBAAqBp/B,KAAKm/B,0BAC1Bn/B,KAAKm/B,yBAA2B,OAIpCtB,6BAAA,WACQ,IAAA13B,sBAAEwrB,eAAYC,gBACpB5xB,KAAKs+B,kBAAoB1M,EAAcD,EAAaC,EAAc,EAClE,IAAM2M,EAAev+B,KAAKs+B,kBAAoB,EAC9ChD,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAW4f,gBAAiBD,GAC9DjD,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAW6f,eAAgBF,IAG/DV,4BAAA,WACM79B,KAAKg/B,eAAiBjD,mBAAcyB,MACtCx9B,KAAKq/B,oBAIDxB,4BAAR,SAAwB9sB,EAAeC,GACrC,OAAIhR,KAAKs+B,kBAAoB,IAClB,EAAG,EAAGvtB,EAAO,IAAK,EAAGC,EAAS,EAAGD,EAAO,MAG1C,EAAG,EAAG,EAAGC,IAAUD,EAAQ,EAAG,EAAG,EAAGC,KAGvC6sB,4BAAR,SAAwB9sB,EAAeC,GACrC,OAAIhR,KAAKs+B,kBAAoB,IAClB,EAAG,EAAGvtB,EAAOC,EAAS,IAAK,EAAGA,EAAS,EAAGD,EAAOC,EAAS,MAG5D,EAAG,EAAGD,EAAQ,EAAGC,IAAUD,EAAQ,EAAG,EAAGA,EAAQ,EAAGC,KAGvD6sB,gCAAR,SAA4B/nB,EAAkBwpB,GACrC,IAAAC,OAASC,OAASC,OAAaC,OAC/BC,OAAOC,OAAOC,OAAWC,OAEhC9/B,KAAKi+B,KAAK8B,UACR//B,KAAK+9B,eAELwB,EACAC,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,IAGIjC,4BAAR,WACQ,IAAA13B,sBAAEwrB,eAAYC,gBACdoO,EAAsBhgC,KAAKg+B,SAASjtB,MACpCkvB,EAAuBjgC,KAAKg+B,SAAShtB,OACrCkvB,EAA0BlgC,KAAKmgC,gBACnCxO,EACAC,GAEIwO,EAA0BpgC,KAAKqgC,gBACnCL,EACAC,GAGFjgC,KAAKsgC,oBAAoBJ,EAAY,GAAIE,EAAY,IACrDpgC,KAAKsgC,oBAAoBJ,EAAY,GAAIE,EAAY,KAG/CvC,8BAAR,WACE79B,KAAKugC,kBAELvgC,KAAKm/B,yBAA2B/yB,sBAC9BpM,KAAK89B,oBAIDD,6BAAR,WACE79B,KAAKi+B,KAAKuC,UAAU,EAAG,EAAGxgC,KAAKg+B,SAASjtB,MAAO/Q,KAAKg+B,SAAShtB,SAG/D6sB,oBAAA,WACE79B,KAAK++B,0BACL/+B,KAAK+f,gBACD/f,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,KACd1e,KAAK+9B,eAAiB,KACtB/9B,KAAKg+B,SAAW,KAChBh+B,KAAKi+B,KAAO,KAEZj+B,KAAKye,WAAa,SAvPGyB,IA2PzB2d,GAAWpd,qMC1PX,IAEM8C,IACJzb,wBAAwB,EACxBC,gBAAgB,iBA8BhB,WAAY5B,OACV+C,WACAsa,iBACAuT,WACA0J,sBACAC,yBACA1J,kBASAh3B,KAAKyjB,cAAgBD,EACrBxjB,KAAKi3B,QAAUF,EACf/2B,KAAK2gC,mBAAqBF,EAC1BzgC,KAAK4gC,sBAAwBF,EAE7B1gC,KAAK6gC,iBAAkB,EACvB7gC,KAAK0jB,UAAW,EAEhB1jB,KAAK8gC,mCAAqC,KAE1C,IAAMC,OACDxd,GACAra,EAAOrB,QAGZ7H,KAAKghC,2BAA6BD,EAAaj5B,uBAE/C9H,KAAK2jB,iBACL3jB,KAAK4jB,QAAQmd,EAAah5B,gBAC1B/H,KAAKgf,cAELgY,EAAcxS,oBAAoBxkB,KAAK2f,MAuL3C,OApLErgB,sBAAI2hC,wBAAJ,WACE,OAAOjhC,KAAK8jB,KAAKC,2CAGXkd,2BAAR,WACEjhC,KAAKkhC,kBAAoBlhC,KAAKkhC,kBAAkBx9B,KAAK1D,MACrDA,KAAKmhC,qBAAuBnhC,KAAKmhC,qBAAqBz9B,KAAK1D,MAC3DA,KAAKohC,qBAAuBphC,KAAKohC,qBAAqB19B,KAAK1D,OAGrDihC,oBAAR,SAAgBI,GACd,IAAMn4B,GACJnB,eAAgBs5B,EAChB7iB,WACE2f,oBAAqBn+B,KAAKkhC,kBAC1B9C,uBAAwBp+B,KAAKmhC,sBAE/B/D,iBAAkBp9B,KAAKi3B,QAAQlT,WAGjC/jB,KAAK8jB,KAAO,IAAI5D,GAAKhX,IAGf+3B,wBAAR,WACEjhC,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAEnCvN,GAAUO,0BAA2BpX,KAAKshC,uBAC1CzqB,GAAUE,uBAAwB/W,KAAK8jB,KAAKyd,YAAavhC,KAAK8jB,OAC9DjN,GAAUsC,OAAQnZ,KAAKwhC,wBACvB5qB,GAAYqZ,QAASjwB,KAAK8jB,KAAK+a,gBAAiB7+B,KAAK8jB,OACrDlN,GAAYuS,gBAAiBnpB,KAAK8jB,KAAK2d,iBAAkBzhC,KAAK8jB,OAEjE9jB,OAIIihC,kCAAR,SAA8B96B,OAC5B4K,UACAC,WAKAhR,KAAK8jB,KAAK4d,kBAAkB3wB,EAAOC,IAGrCiwB,uBAAA,WACEjhC,KAAK8jB,KAAK6d,cAGZV,uBAAA,WACEjhC,KAAK8jB,KAAK8d,cAGJX,iCAAR,SAA6BzK,GAC3Bx2B,KAAK6gC,gBAAkBrK,GAGjByK,8BAAR,WACMjhC,KAAKghC,6BAIThhC,KAAK6hC,+BAEA7hC,KAAK2gC,mBAAmB9K,UAG3B71B,KAAK8hC,4BAFL9hC,KAAKohC,yBAMDH,iCAAR,WACMjhC,KAAKghC,4BAILhhC,KAAK2gC,mBAAmB9K,YACtB71B,KAAK+hC,gCACP/hC,KAAKgiC,8BACLhiC,KAAKiiC,uCAGPjiC,KAAKkiC,sBAIDjB,yCAAR,WACE,IAAMpY,EAAQ7oB,KAAKi3B,QAAQ6B,kBAEvBjQ,IAAUjS,GAAYyS,gBAAkBR,IAAUjS,GAAY2S,QAChEvpB,KAAK4gC,sBAAsBuB,YAE3BniC,KAAK4gC,sBAAsBwB,YAIvBnB,gDAAR,WACEjhC,KAAK4gC,sBAAsByB,aAGrBpB,sCAAR,WACEjhC,KAAKgiC,8BAELhiC,KAAK8gC,mCAAqCh6B,OAAOuF,WAC/CrM,KAAKohC,qBAlLqB,MAuLtBH,wCAAR,WACEn6B,OAAOw7B,aAAatiC,KAAK8gC,oCACzB9gC,KAAK8gC,mCAAqC,MAG5CxhC,sBAAY2hC,iDAAZ,WACE,OAAOrsB,QAAQ5U,KAAK8gC,qEAGdG,iCAAR,WACEjhC,KAAKgiC,8BAEL,IAAMnZ,EAAQ7oB,KAAKi3B,QAAQ6B,kBAEvBjQ,IAAUjS,GAAYyS,gBAAkBR,IAAUjS,GAAY2S,SAChEvpB,KAAKyjB,cAAcgB,KAAK5N,GAAU+B,mCAClC5Y,KAAKi3B,QAAQ/G,UAEblwB,KAAKyjB,cAAcgB,KAAK5N,GAAU8B,kCAClC3Y,KAAKi3B,QAAQ3G,SAIT2Q,8BAAR,WACMjhC,KAAK6gC,gBACP7gC,KAAKuiC,kBAELviC,KAAKwiC,oBAITvB,iBAAA,WACOjhC,KAAK0jB,WACR1jB,KAAK8jB,KAAK4B,OACV1lB,KAAK0jB,UAAW,IAIpBud,iBAAA,WACMjhC,KAAK0jB,WACP1jB,KAAK8jB,KAAK6B,OACV3lB,KAAK0jB,UAAW,IAKpBud,6BAAA,SAAiBrC,GACf5+B,KAAK8jB,KAAK8Z,YAAYgB,IAGhBqC,6BAAR,WACEjhC,KAAK2gC,mBAAmB9I,mBAGlBoJ,4BAAR,WACEjhC,KAAK2gC,mBAAmB/I,kBAG1BqJ,oBAAA,WACEjhC,KAAK+f,gBAEL/f,KAAKgiC,8BACLhiC,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAK4gC,sBAAwB,KAC7B5gC,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,KACfj3B,KAAK2gC,mBAAqB,MAnPrBM,aAAa,SACbA,OAAO/gB,GACP+gB,gBACL,SACA,eACA,SACA,oBACA,uBACA,iBAqNFpb,GADCxd,wiDCnOmB,iBAcpB,aAAA,MACE3G,0BAEAC,EAAK+c,OAASC,mBAEV5O,OAAQpO,EAAKid,6CAIjBjd,EAAK8gC,qQAAYC,EACf3yB,OAAQpO,EAAKid,aAEfjd,EAAKghC,2QAAaC,EAChB7yB,OAAQpO,EAAKid,aAEfjd,EAAKkhC,mgBAAeC,EAClBhO,OACEiO,kBAEFhzB,OAAQpO,EAAKid,aAEfjd,EAAKqhC,ogBAAcC,EACjBnO,OACEiO,kBAEFhzB,OAAQpO,EAAKid,aAEfjd,EAAKuhC,kaAAsBC,EACzBpzB,OAAQpO,EAAKid,aAEfjd,EAAKyhC,yXAAsBC,EACzBtzB,OAAQpO,EAAKid,aAEfjd,EAAK2hC,scAAYC,EACfxzB,OAAQpO,EAAKid,eAuDnB,OArGuC3c,OAkDrCuhC,6BAAA,WACExjC,KAAK0e,OAAOpC,UAAYtc,KAAKyiC,WAG/Be,8BAAA,WACExjC,KAAK0e,OAAOpC,UAAYtc,KAAK2iC,YAG/Ba,gCAAA,WACExjC,KAAK0e,OAAOpC,UAAYtc,KAAK6iC,cAG/BW,+BAAA,WACExjC,KAAK0e,OAAOpC,UAAYtc,KAAKgjC,aAG/BQ,uCAAA,WACExjC,KAAK0e,OAAOpC,UAAYtc,KAAKkjC,qBAG/BM,uCAAA,WACExjC,KAAK0e,OAAOpC,UAAYtc,KAAKojC,qBAG/BI,mCAAA,WACExjC,KAAK0e,OAAOpC,UAAYtc,KAAKsjC,WAG/BE,2BAAA,WACExjC,KAAK0e,OAAOpC,UAAY,IAG1BknB,iBAAA,WACExjC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5C+jB,iBAAA,WACExjC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/C+jB,oBAAA,WACE,OAAOxjC,KAAK0e,QAGd8kB,oBAAA,WACMxjC,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,SAnGqBwB,IAuGvCsjB,GAAyB/iB,gLCnHzB,kBAYE,WAAYta,OACVqd,iBACAuT,WACA7tB,WACA8tB,kBAOAh3B,KAAKyjB,cAAgBD,EACrBxjB,KAAKi3B,QAAUF,EAEf/2B,KAAK4jB,UACL5jB,KAAKgf,cAELgY,EAAcxS,oBAAoBxkB,KAAK2f,OAEC,IAApCzW,EAAOtB,0BACT5H,KAAK0lB,OAmGX,OA/FEpmB,sBAAImkC,wBAAJ,WACE,OAAOzjC,KAAK8jB,KAAKC,2CAGX0f,oBAAR,WACEzjC,KAAK8jB,KAAO,IAAI5D,IAGVujB,wBAAR,WACEzjC,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAGlCvN,GAAUoB,wCACVjY,KAAK6hC,+BAENhrB,GAAUqB,oCAAqClY,KAAK0jC,aACpD7sB,GAAUsB,mCAAoCnY,KAAK2jC,cAElD9sB,GAAUuB,wCACVpY,KAAK4jC,qBAGL/sB,GAAUwB,wCACVrY,KAAK6jC,qBAENhtB,GAAUyB,mCAAoCtY,KAAK8jC,WAElDjtB,GAAU0B,qCACVvY,KAAK4jC,qBAGT5jC,OAIJyjC,sBAAA,WACEzjC,KAAK8jB,KAAKigB,qBAGZN,qBAAA,WACEzjC,KAAK8jB,KAAKkgB,oBAGZP,uBAAA,WACEzjC,KAAK8jB,KAAKmgB,sBAGZR,wBAAA,WACEzjC,KAAK8jB,KAAKogB,uBAGZT,qBAAA,WACEzjC,KAAK8jB,KAAKqgB,0BAGZV,+BAAA,WACEzjC,KAAK8jB,KAAKsgB,8BAGZX,+BAAA,WACEzjC,KAAK8jB,KAAKugB,8BAGZZ,sBAAA,WACEzjC,KAAK8jB,KAAKwgB,iBACVtkC,KAAKyjB,cAAcgB,KAAK5N,GAAU2B,uCAGpCirB,iBAAA,WACEzjC,KAAK8jB,KAAK4B,QAGZ+d,iBAAA,WACEzjC,KAAK8jB,KAAK6B,QAGJ8d,yCAAR,WACE,IAAM5a,EAAQ7oB,KAAKi3B,QAAQ6B,kBAEvBjQ,IAAUjS,GAAYyS,gBAAkBR,IAAUjS,GAAY2S,QAChEvpB,KAAK8jB,KAAKigB,oBAEV/jC,KAAK8jB,KAAKkgB,oBAIdP,oBAAA,WACEzjC,KAAK+f,gBAEL/f,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,MAhIVwM,aAAa,uBACbA,OAAOvjB,GACPujB,gBAAgB,SAAU,eAAgB,SAAU,47CCW3D,WAAYv6B,GAAZ,MACExH,YAAMwH,EAAO+T,aAELuB,cAAW+O,eAEnB5rB,EAAK8c,WAAaD,EAElB7c,EAAKq5B,WACLr5B,EAAKqd,cAELrd,EAAK4iC,UAAUhX,KA0DnB,OA5E0BtrB,OAqBhBuiC,qBAAR,iBACExkC,KAAK0e,OAASC,sBAEV5O,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,srBAItBzkC,KAAK0kC,UAAYvJ,GAAiBn7B,KAAK0e,OAAQ,mBAC/C1e,KAAK2kC,aAAexJ,GAAiBn7B,KAAK0e,OAAQ,wBAG5C8lB,wBAAR,WACExkC,KAAK2kC,aAAan2B,iBAAiB,QAASxO,KAAKye,WAAWmmB,cAGtDJ,0BAAR,WACExkC,KAAK2kC,aAAa71B,oBAAoB,QAAS9O,KAAKye,WAAWmmB,cAGjEJ,oBAAA,WACE,OAAOxkC,KAAK0e,QAGd8lB,wBAAA,WACExkC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWimB,SAG/CL,wBAAA,WACExkC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWimB,SAG5CL,iBAAA,WACExkC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5C+kB,iBAAA,WACExkC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/C+kB,sBAAA,SAAUjX,GACRvtB,KAAK0kC,UAAUzmB,MAAM6mB,gBAAkBvX,EAAM,QAAQA,OAAU,QAGjEiX,oBAAA,WACExkC,KAAK+f,gBAED/f,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,KACd1e,KAAK0kC,UAAY,KACjB1kC,KAAK2kC,aAAe,SA1EEzkB,IA8E1BskB,GAAYO,UC5FVC,oBACEC,KAAM,SAACjT,GAAc,OAAAA,EAAKQ,QAE5B0S,sBACEC,OAAQ,SAACnT,GAAc,OAAAA,EAAKQ,UDyFhCgS,GAAY/jB,gIEpFZ,kBAoBE,WAAYta,OACV+C,WACAsa,iBACAuT,WACAC,kBACA/Z,UAPFjd,eAAoB,EAelBA,KAAKyjB,cAAgBD,EACrBxjB,KAAKi3B,QAAUF,EACf/2B,KAAKolC,OAASnoB,EAEdjd,KAAKgf,cACLhf,KAAK4jB,QAAQ1a,EAAOm8B,SAEpBrO,EAAcxS,oBAAoBxkB,KAAK2f,OAEhB,IAAnBzW,EAAOm8B,SACTrlC,KAAK0lB,OA6FX,OAzFEpmB,sBAAIgmC,wBAAJ,WACE,OAAOtlC,KAAK8jB,KAAKC,2CAGXuhB,oBAAR,SAAgBC,GACd,IAAMC,EACqB,iBAAlBD,EAA6BA,EAAcC,OAAS,KACvDC,GACJjnB,WACEomB,YAAa5kC,KAAK0lC,WAAWhiC,KAAK1D,OAEpCutB,IAAKiY,EACLvoB,MAAOjd,KAAKolC,QAGdplC,KAAK8jB,KAAO,IAAIwhB,EAAQplB,KAAKulB,IAGvBH,wBAAR,WACEtlC,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAEnChL,GAAaE,cAAetZ,KAAK2lC,uBACjCvsB,GAAagB,MAAOpa,KAAK4lC,kBAE5B5lC,OAIIslC,iCAAR,SAA6Bn/B,OAAE0jB,cACzBA,IAAcjT,GAAYyS,eAC5BrpB,KAAK6lC,eAELhc,IAAcjT,GAAY+S,OAC1BE,IAAcjT,GAAYqZ,SAE1BjwB,KAAK4lC,mBAIDN,uBAAR,WACEtlC,KAAKi3B,QAAQ3G,OAEbtwB,KAAKyjB,cAAcgB,KAAK5N,GAAUE,yBAG5BuuB,4BAAR,WACMtlC,KAAKi3B,QAAQxG,eACfzwB,KAAK8lC,gBAIDR,yBAAR,WACEtlC,KAAK8jB,KAAKiiB,eAGJT,yBAAR,WACEtlC,KAAK8jB,KAAKkiB,eAGZV,iBAAA,WACEtlC,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QAGZ4f,iBAAA,WACEtlC,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAWZ2f,sBAAA,SAAU/X,GACRvtB,KAAK8jB,KAAKygB,UAAUhX,IAGtB+X,oBAAA,WACEtlC,KAAK+f,gBACL/f,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,MArIVqO,aAAa,UACbA,OAAOplB,GACPolB,gBACL,SACA,eACA,SACA,gBACA,SAoHFzf,GADCxd,mqFCvHD,aAAA,QACE3G,0BAEAC,EAAK+c,OAASC,sBAEV5O,OAAQpO,EAAKid,iFAgCrB,OAzCyB3c,OAcvBgkC,oBAAA,WACE,OAAOjmC,KAAK0e,QAGdunB,wBAAA,WACEjmC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWimB,SAG5CoB,wBAAA,WACEjmC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWimB,SAG/CoB,iBAAA,WACEjmC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5CwmB,iBAAA,WACEjmC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/CwmB,oBAAA,WACMjmC,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,SAvCOwB,IA2CzB+lB,GAAWxlB,wJC7CJ,kBAgBL,WAAYta,OACV+C,WACAsa,iBACAuT,WACAC,kBAOAh3B,KAAKyjB,cAAgBD,EACrBxjB,KAAK0jB,UAAW,EAChB1jB,KAAKi3B,QAAUF,EAEf/2B,KAAK2jB,iBAEL3jB,KAAK4jB,UACL5jB,KAAKgf,cACLhf,KAAK6lC,eAEL7O,EAAcxS,oBAAoBxkB,KAAK2f,OAEjB,IAAlBzW,EAAOjB,QACTjI,KAAK0lB,OAgHX,OA5GEpmB,sBAAI4mC,wBAAJ,WACE,OAAOlmC,KAAK8jB,KAAKC,2CAGXmiB,2BAAR,WACElmC,KAAK8lC,aAAe9lC,KAAK8lC,aAAapiC,KAAK1D,MAC3CA,KAAK6lC,aAAe7lC,KAAK6lC,aAAaniC,KAAK1D,OAGrCkmC,wBAAR,WACElmC,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAEnChL,GAAaE,cAAetZ,KAAKmmC,wBACjC/sB,GAAaa,eAAgBja,KAAK0lB,OAErC1lB,OAIIkmC,kCAAR,SAA8B//B,GAC5B,oBACE,KAAKyQ,GAAYmD,iBAGjB,KAAKnD,GAAY4S,QACfxpB,KAAKomC,mBACL,MACF,KAAKxvB,GAAYqS,aACXjpB,KAAKi3B,QAAQoP,oBACfrmC,KAAK8lC,eAEP,MACF,KAAKlvB,GAAYwS,cAIjB,KAAKxS,GAAY2S,QAIjB,KAAK3S,GAAY8S,OACf1pB,KAAKsmC,kBACLtmC,KAAK6lC,iBASHK,oBAAR,WACElmC,KAAK8jB,KAAO,IAAIoiB,EAAOhmB,MAGjBgmB,yBAAR,WACMlmC,KAAK0jB,WACP1jB,KAAKyjB,cAAcgB,KAAK5N,GAAUgB,uBAClC7X,KAAK8jB,KAAKkiB,cACVhmC,KAAK0jB,UAAW,IAIZwiB,yBAAR,WACOlmC,KAAK0jB,WACR1jB,KAAKyjB,cAAcgB,KAAK5N,GAAUiB,uBAClC9X,KAAK8jB,KAAKiiB,cACV/lC,KAAK0jB,UAAW,IAIpBwiB,iBAAA,WACElmC,KAAK8jB,KAAK4B,QAGZwgB,iBAAA,WACElmC,KAAK8jB,KAAK6B,QAGZugB,6BAAA,WACMlmC,KAAKumC,wBACPvmC,KAAKsmC,kBAEPtmC,KAAKwmC,oBAAsB1/B,OAAOuF,WAChCrM,KAAK8lC,aAhIyB,MAqIlCI,4BAAA,WACEp/B,OAAOw7B,aAAatiC,KAAKwmC,qBACzBxmC,KAAKwmC,oBAAsB,MAG7BlnC,sBAAI4mC,0CAAJ,WACE,OAAOtxB,QAAQ5U,KAAKwmC,sDAGtBN,oBAAA,WACElmC,KAAK+f,gBACL/f,KAAKsmC,kBAELtmC,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,MAnJViP,aAAa,SACbA,OAAOhmB,GACPgmB,gBAAgB,SAAU,eAAgB,SAAU,8VCG3D,WAAYh9B,GAAZ,MACExH,0BAEAC,EAAKq5B,SAAS9xB,EAAOu9B,YAgCzB,OAvC8BxkC,OAUpBykC,qBAAR,SAAiBD,GACfzmC,KAAK0e,OAASC,mBAEV5O,OAAQ/P,KAAK4e,2CAIjB,IAAM+nB,EAA2B96B,SAASwQ,cAAc,OACxDsqB,EAAyBpnB,UAAUC,IACjCxf,KAAK4e,WAAWgoB,yBAElBD,EAAyBxoB,YAAYsoB,EAASI,kBAE9C7mC,KAAK0e,OAAOP,YAAYsoB,EAASK,UACjC9mC,KAAK0e,OAAOP,YAAYwoB,GACxB3mC,KAAK0e,OAAOP,YAAYsoB,EAASM,cAGnCL,oBAAA,WACE,OAAO1mC,KAAK0e,QAGdgoB,oBAAA,WACM1mC,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,SArCYwB,IAyC9BwmB,GAAgBjmB,4ECrChB,IAEM8C,IACJyjB,kBAAkB,iBAkClB,WAAYhjC,GAbJhE,kBAAuB,KAEvBA,+BAAoC,EACpCA,sBAA2B,EAC3BA,yBAA8B,EAC9BA,wBAA6B,EAC7BA,kBAAuB,EAiB3B,IAAAkJ,WACAsa,iBACAwT,kBACAiQ,mBACAH,aACAC,gBACAl/B,WAGF7H,KAAKyjB,cAAgBD,EACrBxjB,KAAKknC,UAAYJ,EACjB9mC,KAAKmnC,aAAeJ,EACpB/mC,KAAKonC,QAAUv/B,EAEf7H,KAAK0jB,UAAW,EAChB,IAAM2jB,OACD9jB,GAC4B,iBAApBra,EAAOhB,SAAwBgB,EAAOhB,SAAW,MAG9DlI,KAAKsnC,kBAAoBD,EAAgBL,iBAEzChnC,KAAK4jB,SACHijB,iBAAkBI,EAAeM,qBACjCT,SAAUA,EAASnnB,KACnBonB,YAAaA,EAAYpnB,OAE3B3f,KAAKwnC,qBACLxnC,KAAKgf,cAELgY,EAAcxS,oBAAoBxkB,KAAK8jB,KAAKC,YAEpB,IAApB7a,EAAOhB,UACTlI,KAAK0lB,OA2LX,OAvLEpmB,sBAAImoC,wBAAJ,WACE,OAAOznC,KAAK8jB,KAAKC,2CAGX0jB,oBAAR,SAAgBhB,GACdzmC,KAAK8jB,KAAO,IAAI2jB,EAAYvnB,MAAOumB,cAG7BgB,+BAAR,WACEznC,KAAK0nC,uBAAyB1nC,KAAK0nC,uBAAuBhkC,KAAK1D,MAC/DA,KAAK4lC,gBAAkB5lC,KAAK4lC,gBAAgBliC,KAAK1D,MACjDA,KAAK2nC,gBAAkB3nC,KAAK2nC,gBAAgBjkC,KAAK1D,OAG3CynC,wBAAR,WACEznC,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAEnCvN,GAAUS,+BAAgCtX,KAAK0nC,yBAC/C7wB,GAAUU,gCAAiCvX,KAAK2nC,kBAChD9wB,GAAUe,6BAA8B5X,KAAK0nC,yBAC7C7wB,GAAUiB,sBAAuB9X,KAAK0nC,yBACtCtuB,GAAaE,cAAetZ,KAAK2lC,uBACjC9uB,GAAUgC,mBAAoB7Y,KAAK4nC,sBACnC/wB,GAAUiC,iBAAkB9Y,KAAK6nC,oBAEpC7nC,OAIIynC,iCAAR,SAA6BthC,GAC3B,oBACE,KAAKyQ,GAAYyS,eACfrpB,KAAK8nC,oBAAqB,EAC1B9nC,KAAK0nC,yBACL,MAEF,KAAK9wB,GAAY+S,MAKjB,KAAK/S,GAAY8S,OAKjB,KAAK9S,GAAYqZ,QACfjwB,KAAK8nC,oBAAqB,EAC1B9nC,KAAK4lC,oBAQXtmC,sBAAYmoC,mCAAZ,WACE,OAAOznC,KAAKmnC,aAAaY,2CAGnBN,mCAAR,WACEznC,KAAKgoC,wBAELhoC,KAAK4lC,kBAEL5lC,KAAKioC,aAAenhC,OAAOuF,WACzBrM,KAAK2nC,gBAtJgB,MA2JjBF,kCAAR,WACMznC,KAAKioC,cACPnhC,OAAOw7B,aAAatiC,KAAKioC,eAIrBR,4BAAR,WACMznC,KAAKkoC,0BACPloC,KAAK8lC,gBAID2B,gCAAR,WACEznC,KAAKmoC,aAAc,GAGbV,8BAAR,WACEznC,KAAKmoC,aAAc,EACnBnoC,KAAK2nC,mBAGCF,yBAAR,WACMznC,KAAK0jB,UAAY1jB,KAAKooC,kBAI1BpoC,KAAKonC,QAAQzF,aAEb3hC,KAAKyjB,cAAcgB,KAAM5N,GAAkBmC,2BAC3ChZ,KAAKmnC,aAAanB,cAClBhmC,KAAKknC,UAAUlB,cACfhmC,KAAKooC,iBAAkB,IAGjBX,4BAAR,WAEKznC,KAAKqoC,iBACLroC,KAAKmoC,aACLnoC,KAAK8nC,oBACL9nC,KAAKsnC,mBAENtnC,KAAK6lC,gBAID4B,yBAAR,YACMznC,KAAK0jB,UAAa1jB,KAAKooC,kBAIvBpoC,KAAKkoC,0BACPloC,KAAKonC,QAAQxF,aAGf5hC,KAAKyjB,cAAcgB,KAAM5N,GAAkBkC,2BAC3C/Y,KAAKmnC,aAAapB,cAClB/lC,KAAKknC,UAAUnB,cACf/lC,KAAKooC,iBAAkB,IAGzBX,kCAAA,WACEznC,KAAKkoC,0BAA2B,EAChCloC,KAAK6lC,gBAGP4B,iCAAA,WACEznC,KAAKkoC,0BAA2B,EAC5BloC,KAAK8nC,oBACP9nC,KAAK8lC,gBAIT2B,iBAAA,WACEznC,KAAK0jB,UAAW,EAChB1jB,KAAKknC,UAAUxhB,OACf1lB,KAAKmnC,aAAazhB,QAGpB+hB,iBAAA,WACEznC,KAAK0jB,UAAW,EAChB1jB,KAAKknC,UAAUvhB,OACf3lB,KAAKmnC,aAAaxhB,QAWpB8hB,gCAAA,SAAoBhiB,GAClBzlB,KAAKsnC,kBAAoB7hB,EAErBzlB,KAAKsnC,kBACPtnC,KAAK4lC,kBAEL5lC,KAAK0nC,0BAITD,oBAAA,WACEznC,KAAKgoC,wBACLhoC,KAAK+f,gBACL/f,KAAK8jB,KAAKvZ,UAEVvK,KAAK8jB,KAAO,KACZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAKknC,UAAY,KACjBlnC,KAAKmnC,aAAe,MAlQfM,aAAa,cACbA,OAAOf,GACPe,gBACL,SACA,SACA,gBACA,iBACA,eACA,WACA,eAuOF5hB,GADCxd,EAAU,+pECnPX,WAAYa,GAAZ,MACExH,mBACQ+kC,oBAER9kC,EAAKq5B,SAASyL,GACd9kC,EAAKqd,gBA4DT,OArE2B/c,OAYjBqmC,qBAAR,SAAiB7B,SACfzmC,KAAK0e,OAASC,4CAEV5O,OAAQ/P,KAAK4e,uVAIjB,IAAM2pB,EAAkBpN,GAAiBn7B,KAAK0e,OAAQ,mBAChD8pB,EAA0BrN,GAC9Bn7B,KAAK0e,OACL,4BAGF6pB,EAAgBpqB,YAAYsoB,EAASz+B,OACrCwgC,EAAwBrqB,YAAYsoB,EAASgC,gBAGvCH,qCAAR,SAAiClmB,GAC/BA,EAAEsmB,mBAGIJ,wBAAR,WACEtoC,KAAK0e,OAAOlQ,iBAAiB,QAASxO,KAAK2oC,2BAGrCL,0BAAR,WACEtoC,KAAK0e,OAAO5P,oBAAoB,QAAS9O,KAAK2oC,2BAGhDL,iBAAA,WACEtoC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/C6oB,iBAAA,WACEtoC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5C6oB,oBAAA,WACE,OAAOtoC,KAAK0e,QAGd4pB,wBAAA,WACEtoC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWgqB,YAG5CN,wBAAA,WACEtoC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWgqB,YAG/CN,oBAAA,WACEtoC,KAAK+f,gBACD/f,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,SAnESwB,IAuE3BooB,GAAa7nB,wOC5Eb,kBAQE,WAAYzc,GACVhE,KAAK0jB,UAAW,EAEhB1jB,KAAK4jB,QAAQ5jB,KAAK6oC,kBAAkB7kC,IAgDxC,OA7CU8kC,oBAAR,SAAgBC,GACd,IAAM7/B,GACJu9B,SAAUsC,GAGZ/oC,KAAK8jB,KAAO,IAAIglB,EAAS5oB,KAAKhX,IAGxB4/B,8BAAR,SACE9kC,GAEQ,IAAAgE,UAAOygC,kBAEf,OACEzgC,MAAOA,EAAM2X,KACb8oB,cAAeA,EAAc9oB,OAIjCrgB,sBAAIwpC,wBAAJ,WACE,OAAO9oC,KAAK8jB,KAAKC,2CAGnB+kB,iBAAA,WACE9oC,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QAGZojB,iBAAA,WACE9oC,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAGZmjB,wBAAA,WACE9oC,KAAK8jB,KAAKkiB,eAGZ8C,wBAAA,WACE9oC,KAAK8jB,KAAKiiB,eAGZ+C,oBAAA,WACE9oC,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,MAxDPglB,aAAa,WACbA,OAAO5oB,GACP4oB,gBAAgB,QAAS,8jCCIhC,WAAY5/B,GAAZ,WACUsV,cAAWvB,iBAEnBtb,EAAAD,YAAMub,UAEDwB,WAAaD,EAElB7c,EAAKq5B,WACLr5B,EAAKqd,gBAsDT,OArEwB/c,OAkBd+mC,qBAAR,iBACEhpC,KAAK0e,OAASC,4BACI5O,OAAQ/P,KAAK4e,WAAY6lB,YAAazkC,KAAKykC,iGAE7DzkC,KAAKipC,QAAU9N,GAAiBn7B,KAAK0e,OAAQ,gBAGvCsqB,wBAAR,WACEhpC,KAAKipC,QAAQz6B,iBAAiB,QAASxO,KAAKye,WAAWyqB,UAGjDF,0BAAR,WACEhpC,KAAKipC,QAAQn6B,oBAAoB,QAAS9O,KAAKye,WAAWyqB,UAG5DF,6BAAA,SAAiBvjB,GACf6V,GAAgBt7B,KAAKipC,QAASjpC,KAAK4e,WAAWuqB,KAAM1jB,IAGtDujB,qBAAA,SAAShhC,GAGHA,GACFhI,KAAK2lB,OACL3lB,KAAKipC,QAAQ3sB,UAAYtU,GAEzBhI,KAAK0lB,QAITsjB,iBAAA,WACEhpC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/CupB,iBAAA,WACEhpC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5CupB,oBAAA,WACE,OAAOhpC,KAAK0e,QAGdsqB,oBAAA,WACEhpC,KAAK+f,gBACD/f,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,KACd1e,KAAKipC,QAAU,SAnEK/oB,IAuExB8oB,GAAUjE,UChFRqE,WACE5W,MAAO,SAACR,GAAc,OAAAA,EAAKQ,UDgF/BwW,GAAUvoB,4FE5EV,kBAWE,WAAYta,OACV+C,WACA+T,UAKAjd,KAAKolC,OAASnoB,EAEdjd,KAAK2jB,iBACL3jB,KAAK4jB,UACuB,iBAAjB1a,EAAOlB,OAChBhI,KAAKqpC,sBAAsBngC,EAAOlB,MAAMwD,UAAY,MACpDxL,KAAKspC,SAASpgC,EAAOlB,MAAMitB,QACD,IAAjB/rB,EAAOlB,OAChBhI,KAAK0lB,OA+EX,OA3EEpmB,sBAAIiqC,wBAAJ,WACE,OAAOvpC,KAAK8jB,KAAKC,2CAGXwlB,2BAAR,WACEvpC,KAAKwpC,iBAAmBxpC,KAAKwpC,iBAAiB9lC,KAAK1D,OAG7CupC,oBAAR,WACE,IAAMrgC,GACJ+T,MAAOjd,KAAKolC,OACZ5mB,WACE0qB,QAASlpC,KAAKwpC,mBAIlBxpC,KAAK8jB,KAAO,IAAIylB,EAAarpB,KAAKhX,GAElClJ,KAAK8jB,KAAKwlB,YAeZC,qBAAA,SAASvhC,GACPhI,KAAK8jB,KAAKwlB,SAASthC,IAgBrBuhC,kCAAA,SAAsB/9B,GACpBxL,KAAKo1B,UAAY5pB,EACjBxL,KAAK8jB,KAAK2lB,iBAAiB70B,QAAQ5U,KAAKo1B,aAGlCmU,6BAAR,WACMvpC,KAAKo1B,WACPp1B,KAAKo1B,aAITmU,iBAAA,WACEvpC,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QAGZ6jB,iBAAA,WACEvpC,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAGZ4jB,oBAAA,WACEvpC,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,MAtGPylB,aAAa,QACbA,OAAOrpB,GACPqpB,gBAAgB,SAAU,SA4DjC1jB,GADCxd,kCAkBDwd,GADCxd,63CCzDD,WAAYa,GAAZ,MACExH,0BAEAC,EAAK8c,WAAavV,EAAOsV,UACzB7c,EAAKizB,SAAW1rB,EAAOwgC,QACvB/nC,EAAKgoC,gBAAkBzgC,EAAO+9B,eAE9BtlC,EAAKq5B,WACLr5B,EAAKqd,gBAiGT,OAnHgC/c,OAqBtB2nC,qBAAR,iBACE5pC,KAAK0e,OAASC,sBAEV5O,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,YAClB3P,kNAIJ90B,KAAK6pC,oBAAsB1O,GACzBn7B,KAAK0e,OACL,uBAGF1e,KAAK8pC,kBAAoB9pC,KAAK2pC,gBAAgBI,gBAAgB/pC,KAAK0e,QACjEuW,KAAMj1B,KAAK40B,SAASjsB,IAAIgsB,GAAYxZ,qBAItCnb,KAAKgqC,QAAO,GACZhqC,KAAKiqC,cAAa,GAClBjqC,KAAKkqC,aAAY,IAGXN,wBAAR,WACE5pC,KAAK0e,OAAOlQ,iBAAiB,QAASxO,KAAKye,WAAWyqB,UAGhDU,0BAAR,WACE5pC,KAAK0e,OAAO5P,oBAAoB,QAAS9O,KAAKye,WAAWyqB,UAG3DU,yBAAA,SAAaO,GACX7O,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAWimB,OAAQsF,GAGjDA,EACFnqC,KAAK8pC,kBAAkBM,UAEvBpqC,KAAK8pC,kBAAkBO,UAI3BT,wBAAA,SAAYU,GACVhP,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAW8R,MAAO4Z,GAEpDtqC,KAAK6pC,oBAAoBU,UAAYvqC,KAAK40B,SAASjsB,IACjDgsB,GAAY1Z,qBACVqvB,YAEJtqC,KAAK6pC,oBAAoB5zB,aACvB,aACCq0B,EAA2D,GAAjDtqC,KAAK40B,SAASjsB,IAAIgsB,GAAYzZ,kBAGvCovB,EACFtqC,KAAK8pC,kBAAkBM,UAEvBpqC,KAAK8pC,kBAAkBO,UAI3BT,iBAAA,WACE5pC,KAAKgqC,QAAO,IAGdJ,iBAAA,WACE5pC,KAAKgqC,QAAO,IAGdJ,mBAAA,SAAOY,GACLlP,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAWa,QAAS+qB,IAGxDZ,oBAAA,WACE,OAAO5pC,KAAK0e,QAGdkrB,oBAAA,WACE5pC,KAAK+f,gBACL/f,KAAKye,WAAa,KAElBze,KAAK8pC,kBAAkBv/B,UACvBvK,KAAK8pC,kBAAoB,KAErB9pC,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,KACd1e,KAAK6pC,oBAAsB,KAC3B7pC,KAAKye,WAAa,KAClBze,KAAK40B,SAAW,SAjHY1U,IAqHhC0pB,GAAkBnpB,kJCjIlB,kBAiBE,WAAYta,OACV4wB,WACAvT,iBACAkmB,YACAzC,mBAZMjnC,gBAAqB,EACrBA,gBAAqB,EACrBA,eAAoB,EAiB1BA,KAAKi3B,QAAUF,EACf/2B,KAAKyjB,cAAgBD,EACrBxjB,KAAK40B,SAAW8U,EAChB1pC,KAAK2pC,gBAAkB1C,EAEvBjnC,KAAK2jB,iBACL3jB,KAAK4jB,UACL5jB,KAAKgf,cAwHT,OArHE1f,sBAAImrC,wBAAJ,WACE,OAAOzqC,KAAK8jB,KAAKC,2CAGnBzkB,sBAAImrC,4BAAJ,WACE,OAAOzqC,KAAK0qC,2CAGdprC,sBAAImrC,4BAAJ,WACE,OAAOzqC,KAAK2qC,2CAGdF,iBAAA,WACEzqC,KAAK4qC,SAAQ,IAGfH,iBAAA,WACEzqC,KAAK4qC,SAAQ,IAGPH,oBAAR,WACEzqC,KAAK8jB,KAAO,IAAI2mB,EAAcvqB,MAC5B1B,WACE0qB,QAASlpC,KAAK6qC,eAEhBnB,QAAS1pC,KAAK40B,SACdqS,eAAgBjnC,KAAK2pC,mBAIjBc,2BAAR,WACEzqC,KAAK6qC,cAAgB7qC,KAAK6qC,cAAcnnC,KAAK1D,OAGvCyqC,wBAAR,WAAA,WACEzqC,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAEnChL,GAAaG,mBAAoBvZ,KAAKs4B,sBAErCzhB,GAAUoC,2CACV,WACEtX,EAAKmiB,KAAKmmB,cAAa,MAIzBpzB,GAAUqC,2CACV,WAEEvX,EAAKmiB,KAAKmmB,aAAatoC,EAAKgpC,cAIlC3qC,OAIIyqC,gCAAR,SAA4BtkC,GAC1B,oBACE,KAAK+V,GAAUic,KACbn4B,KAAK4qC,SAAQ,GACb5qC,KAAK8qC,eAAc,GACnB9qC,KAAK+qC,cAAa,GAClB,MAEF,KAAK7uB,GAAUwc,QACb14B,KAAK4qC,SAAQ,GACb,MAEF,KAAK1uB,GAAU2c,KACb74B,KAAK8qC,eAAc,GACnB,MAEF,KAAK5uB,GAAU0c,SACb54B,KAAK8qC,eAAc,GACnB,MAEF,KAAK5uB,GAAUyN,MACb3pB,KAAK8qC,eAAc,GACnB9qC,KAAK+qC,cAAa,KAQhBN,0BAAR,WACOzqC,KAAKgrC,UACRhrC,KAAKi3B,QAAQ0B,gBAIT8R,oBAAR,SAAgBD,GACdxqC,KAAK0qC,WAAaF,EAClBxqC,KAAK8jB,KAAKkmB,OAAOQ,IAGXC,0BAAR,SAAsBN,GACpBnqC,KAAK2qC,UAAYR,EACjBnqC,KAAK8jB,KAAKmmB,aAAaE,IAGjBM,yBAAR,SAAqBH,GACnBtqC,KAAKgrC,SAAWV,EAChBtqC,KAAK8jB,KAAKomB,YAAYI,IAGxBG,oBAAA,WACEzqC,KAAK+f,gBACL/f,KAAK8jB,KAAKvZ,UAEVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKi3B,QAAU,KACfj3B,KAAKyjB,cAAgB,KACrBzjB,KAAK40B,SAAW,MAxJX6V,aAAa,gBACbA,OAAOb,GACPa,gBAAgB,SAAU,eAAgB,UAAW,gvJCa5D,WAAYvhC,GAAZ,MACExH,mBACQ8c,cAAWioB,oBAEnB9kC,EAAK8c,WAAaD,EAElB7c,EAAKq5B,SAASyL,GACd9kC,EAAKqd,gBAqIT,OAjJ8B/c,OAepBgpC,qBAAR,SAAiBxE,SACfzmC,KAAK0e,OAASC,+CAEV5O,OAAQ/P,KAAK4e,80BAIjB,IAAMssB,EAAiB/P,GAAiBn7B,KAAK0e,OAAQ,kBAC/CysB,EAAmBhQ,GAAiBn7B,KAAK0e,OAAQ,oBACjD0sB,EAAiBjQ,GAAiBn7B,KAAK0e,OAAQ,kBAC/C2sB,EAAuBlQ,GAC3Bn7B,KAAK0e,OACL,yBAEI4sB,EAAiBnQ,GAAiBn7B,KAAK0e,OAAQ,kBAC/C6sB,EAAwBpQ,GAC5Bn7B,KAAK0e,OACL,0BAGFwsB,EAAe/sB,YAAYsoB,EAASnW,MACpC6a,EAAiBhtB,YAAYsoB,EAASvc,QACtCkhB,EAAejtB,YAAYsoB,EAAS/U,MACpC2Z,EAAqBltB,YAAYsoB,EAAS5mB,YAC1CyrB,EAAentB,YAAYsoB,EAAS+E,MACpCD,EAAsBptB,YAAYsoB,EAASgF,WAGrCR,qCAAR,SAAiC7oB,GAC/BA,EAAEsmB,mBAGIuC,wBAAR,WACEjrC,KAAK0e,OAAOlQ,iBAAiB,QAASxO,KAAK2oC,0BAC3C3oC,KAAK0e,OAAOlQ,iBAAiB,YAAaxO,KAAKye,WAAWitB,kBAC1D1rC,KAAK0e,OAAOlQ,iBAAiB,aAAcxO,KAAKye,WAAWktB,kBAGrDV,0BAAR,WACEjrC,KAAK0e,OAAO5P,oBAAoB,QAAS9O,KAAK2oC,0BAC9C3oC,KAAK0e,OAAO5P,oBACV,YACA9O,KAAKye,WAAWitB,kBAElB1rC,KAAK0e,OAAO5P,oBACV,aACA9O,KAAKye,WAAWktB,kBAIpBV,wCAAA,SAA4BW,GAC1BtQ,GAAgBt7B,KAAK0e,OAAQ1e,KAAK4e,WAAWitB,eAAgBD,GAC7D5rC,KAAK8rC,YAGPb,4BAAA,WACEjrC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWmtB,oBAG/Cd,4BAAA,WACEjrC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWmtB,oBAG5Cd,4BAAA,WACEjrC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWotB,oBAG/Cf,4BAAA,WACEjrC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWotB,oBAG5Cf,8BAAA,WACEjrC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWqtB,sBAG/ChB,8BAAA,WACEjrC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWqtB,sBAG5ChB,kCAAA,WACEjrC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWstB,0BAG/CjB,kCAAA,WACEjrC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWstB,0BAG5CjB,qBAAA,WACEjrC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWutB,aAG/ClB,qBAAA,WACEjrC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWutB,aAG5ClB,gCAAA,WACEjrC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWwtB,wBAG/CnB,gCAAA,WACEjrC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWwtB,wBAG5CnB,iBAAA,WACEjrC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/CwrB,iBAAA,WACEjrC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5CwrB,oBAAA,WACE,OAAOjrC,KAAK0e,QAGdusB,wBAAA,WACEjrC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWgqB,YAG5CqC,wBAAA,WACEjrC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWgqB,YAG/CqC,oBAAA,WACEjrC,KAAK+f,gBACD/f,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAE1C1e,KAAK0e,OAAS,SA/IYwB,IAmJ9B+qB,GAAgBxqB,ulBCrIhB,kBAuBE,WAAYzc,GAPJhE,sBAA2B,EAKnCA,eAAoB,EAGV,IAAAkJ,WAAQsa,iBAChBxjB,KAAKyjB,cAAgBD,EAErBxjB,KAAKwnC,qBACLxnC,KAAK4jB,QAAQ5jB,KAAK6oC,kBAAkB7kC,IACpChE,KAAKqsC,UAAUnjC,EAAOsiC,MACtBxrC,KAAKgf,cAwOT,OArOUstB,8BAAR,SACEtoC,GAGE,IAAAuoC,gBACAC,oBACAC,gBACAC,kBACAC,sBACAnB,SAGF,OACElb,KAAMic,EAAY5sB,KAClB8rB,SAAUe,EAAgB7sB,KAC1B+R,KAAM+a,EAAY9sB,KAClBuK,OAAQwiB,EAAc/sB,KACtBE,WAAY8sB,EAAkBhtB,KAC9B6rB,KAAMA,EAAK7rB,OAIfrgB,sBAAIgtC,wBAAJ,WACE,OAAOtsC,KAAK8jB,KAAKC,2CAGXuoB,oBAAR,SAAgBvD,GACd,IAAM7/B,GACJu9B,SAAUsC,EACVvqB,WACEktB,iBAAkB1rC,KAAK4sC,eACvBjB,gBAAiB3rC,KAAK6sC,oBAI1B7sC,KAAK8jB,KAAO,IAAIwoB,EAAYpsB,KAAKhX,IAG3BojC,wBAAR,WACEtsC,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aACpCvN,GAAUO,0BAA2BpX,KAAK6sC,oBAC5C7sC,OAIIssC,sBAAR,SAAkBQ,GACZA,EACwB,iBAAfA,GACT9sC,KAAK+sC,sBAAsBD,EAAWE,YAGxChtC,KAAKitC,YAIDX,+BAAR,WACEtsC,KAAK4sC,eAAiB5sC,KAAK4sC,eAAelpC,KAAK1D,MAC/CA,KAAK6sC,kBAAoB7sC,KAAK6sC,kBAAkBnpC,KAAK1D,OAG/CssC,2BAAR,WACEtsC,KAAKqoC,iBAAkB,GAGjBiE,8BAAR,WACEtsC,KAAKqoC,iBAAkB,GAGzB/oC,sBAAIgtC,6BAAJ,WACE,OAAOtsC,KAAKqoC,iDAGdiE,wBAAA,WACEtsC,KAAK8jB,KAAKkiB,eAGZsG,wBAAA,WACEtsC,KAAK8jB,KAAKiiB,eAGZuG,iBAAA,WACEtsC,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QAGZ4mB,iBAAA,WACEtsC,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAWZ2mB,kCAAA,SAAsB7mB,GACpBzlB,KAAK8jB,KAAKopB,4BAA4BznB,IASxC6mB,qBAAA,WACEtsC,KAAK8jB,KAAKmpB,YASZX,qBAAA,WACEtsC,KAAK8jB,KAAKgoB,YASZQ,4BAAA,WACEtsC,KAAK8jB,KAAKqpB,mBASZb,8BAAA,WACEtsC,KAAK8jB,KAAKspB,qBASZd,4BAAA,WACEtsC,KAAK8jB,KAAKupB,mBASZf,kCAAA,WACEtsC,KAAK8jB,KAAKwpB,yBASZhB,gCAAA,WACEtsC,KAAK8jB,KAAKypB,uBASZjB,4BAAA,WACEtsC,KAAK8jB,KAAK0pB,mBASZlB,8BAAA,WACEtsC,KAAK8jB,KAAK2pB,qBASZnB,4BAAA,WACEtsC,KAAK8jB,KAAK4pB,mBASZpB,kCAAA,WACEtsC,KAAK8jB,KAAK6pB,yBASZrB,gCAAA,WACEtsC,KAAK8jB,KAAK8pB,uBAGZtB,oBAAA,WACEtsC,KAAK+f,gBACL/f,KAAK8jB,KAAKvZ,UAEVvK,KAAK8jB,KAAO,KACZ9jB,KAAKyjB,cAAgB,MAnQhB6oB,aAAa,cACbA,OAAOpsB,GACPosB,gBACL,SACA,cACA,kBACA,cACA,gBACA,oBACA,OACA,gBAwHFzmB,GADCxd,+CAWDwd,GADCxd,kCAWDwd,GADCxd,kCAWDwd,GADCxd,yCAWDwd,GADCxd,2CAWDwd,GADCxd,yCAWDwd,GADCxd,+CAWDwd,GADCxd,6CAWDwd,GADCxd,yCAWDwd,GADCxd,2CAWDwd,GADCxd,yCAWDwd,GADCxd,+CAWDwd,GADCxd,kDCzRH,YAAoBwlC,GAClB,IAAMC,GAAW5c,MAAM2c,IAAYE,SAASF,GACtCG,EAAaF,GAAWD,EAAU,EAClCI,EAAO,IAAI3hC,KAAK,MAEtB2hC,EAAKC,WAAWJ,EAAU9hC,KAAKuF,IAAIvF,KAAKmiC,MAAMN,IAAY,GAG1D,IAAMnc,EAAOuc,EACVG,cACAC,OAAO,GAAI,GACX/sB,QAAQ,OAAQ,IAEnB,OAAO0sB,EAAa,IAAItc,EAASA,i7BCb9B4c,kBCaH,aAAA,MACE5sC,0BAEAC,EAAK+oC,WAAY,EACjB/oC,EAAKq5B,aAkDT,OA5DsB/4B,OAaZssC,qBAAR,iBACEvuC,KAAK0e,OAASC,sBAEV5O,OAAQ/P,KAAK4e,8HAGjB5e,KAAKwuC,eAAiBrT,GAAiBn7B,KAAK0e,OAAQ,iBAGtDpf,sBAAIivC,wBAAJ,WACE,OAAOvuC,KAAK0e,wCAGdpf,sBAAIivC,4BAAJ,WACE,OAAOvuC,KAAK0qC,2CAGd6D,iBAAA,WACOvuC,KAAK0qC,YAGV1qC,KAAK0qC,WAAY,EACjB1qC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAW6vB,kBAG5CF,iBAAA,WACMvuC,KAAK0qC,YAGT1qC,KAAK0qC,WAAY,EACjB1qC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAW6vB,kBAG/CF,oBAAA,SAAQtZ,GACNj1B,KAAKwuC,eAAejE,UAAYtV,GAGlCsZ,qBAAA,SAAStwB,GAAT,WACE3e,OAAO+F,KAAK4Y,GAAO3Y,QAAQ,SAAAopC,GACxB/sC,EAAK+c,OAAOT,MAAcywB,GAAYzwB,EAAMywB,MAIjDH,oBAAA,WACEvuC,KAAK0e,OAAS,KACd1e,KAAKwuC,eAAiB,SA1DJlxB,ICAtB,YACEqxB,EACAC,GAEA,OAAOD,EAA0BC,EAAwB,EAG3D,YACEC,EACAtH,EACAuH,gBAAAA,MAEA,IAAMC,EAAuBF,EAAqBG,wBAC5CC,EAAuB1H,EAAqByH,wBAalD,OAASE,UAVPH,EAAqBl+B,IAAMo+B,EAAqBp+B,IAC5Cy9B,GAAyBa,OACzBb,GAAyBc,IAQOr9B,EALf+8B,EADrBC,EAAqBr+B,KAAOu+B,EAAqBv+B,KAGjDq+B,EAAqBh+B,QDuCzBw9B,GAAQ9tB,+HDrER,SAAK6tB,GACHA,YACAA,kBAFF,CAAKA,KAAAA,QGEL,IAAMe,IAAe,aAAc,SAC7BC,IAAe,aAAc,sBAWjC,WACEC,EACAtI,EACA5jC,GAEArD,KAAKwvC,YAAcD,EACnBvvC,KAAKyvC,SAAWpsC,EAChBrD,KAAK2pC,gBAAkB1C,EAEvBjnC,KAAK0vC,mBAEL1vC,KAAKgf,cAqET,OAlEU2wB,wBAAR,WAAA,WACEN,GAAY/pC,QAAQ,SAAA8O,GAClB,IAAMhR,EAAK,WACTzB,EAAKgkB,QAEPhkB,EAAK+tC,gBAAgBlrC,MAAO4P,QAAOhR,OACnCzB,EAAK6tC,YAAYhhC,iBAAiB4F,EAAOhR,KAG3CksC,GAAYhqC,QAAQ,SAAA8O,GAClB,IAAMhR,EAAK,WACTzB,EAAK+jB,QAEP/jB,EAAK+tC,gBAAgBlrC,MAAO4P,QAAOhR,OACnCzB,EAAK6tC,YAAYhhC,iBAAiB4F,EAAOhR,MAI7C9D,sBAAIqwC,4BAAJ,WACE,OAAO3vC,KAAK2pC,gBAAgBjmB,0CAG9BpkB,sBAAIqwC,8BAAJ,WACE,OAAO3vC,KAAK4vC,6CAGdD,iBAAA,WACM3vC,KAAK4vC,aAIT5vC,KAAK2pC,gBAAgBhkB,MACnBsP,KAAMj1B,KAAKyvC,SAASxa,KACpB/kB,SAAU2/B,GACR7vC,KAAKwvC,YACLxvC,KAAK2pC,gBAAgBpC,yBAK3BoI,iBAAA,WACE3vC,KAAK2pC,gBAAgBjkB,QAGvBiqB,oBAAA,SAAQ1a,GACNj1B,KAAKyvC,SAASxa,KAAOA,EACrBj1B,KAAK2pC,gBAAgBmG,QAAQ7a,IAG/B0a,oBAAA,WACE3vC,KAAK4vC,aAAc,GAGrBD,mBAAA,WACE3vC,KAAK4vC,aAAc,GAGrBD,oBAAA,WAAA,WACE3vC,KAAK0vC,gBAAgBpqC,QAAQ,SAACa,OAAEiO,UAAOhR,OACrCzB,EAAK6tC,YAAY1gC,oBAAoBsF,EAAOhR,KAE9CpD,KAAK0vC,gBAAkB,KACvB1vC,KAAKwvC,YAAc,KACnBxvC,KAAK2pC,gBAAkB,KACvB3pC,KAAKyvC,SAAW,wKCvElB,WAAYM,GAAZ,MACEruC,0BAEAC,EAAKquC,SAAWD,EAChBpuC,EAAKq5B,aA0DT,OAlE+B/4B,OAW7B3C,sBAAI2wC,wBAAJ,WACE,OAAOjwC,KAAK0e,wCAGNuxB,qBAAR,WACEjwC,KAAK0e,OAASC,mBAEV5O,OAAQ/P,KAAK4e,gDAGjB5e,KAAK0e,OAAOP,YAAYne,KAAKgwC,SAASrwB,OAGxCswB,qCAAA,SACE//B,GAMA,MAJwB,mBAAbA,IACTA,EAAWA,EAASlQ,KAAK0e,SAGvBxO,EAASg/B,YAAcZ,GAAyBc,KAEhD1+B,KAAS1Q,KAAKkwC,iBAAiBhgC,EAAS6B,QACxClB,IAAK,EACLC,OAAQ,YAKVJ,KAAS1Q,KAAKkwC,iBAAiBhgC,EAAS6B,QACxClB,IAAK,UACLC,OAAQ,IAIZm/B,oBAAA,WACEjwC,KAAKgwC,SAAW,KAChBhwC,KAAK0e,OAAS,MAGRuxB,6BAAR,SAAyBE,GACvB,IAAMC,EAAcpwC,KAAKgwC,SAASrwB,KAAKqvB,wBACjCC,EAAuBjvC,KAAK0e,OAAOswB,wBAErCqB,EAAeF,EAAiBC,EAAYr/B,MAAQ,EASxD,OANAs/B,EAAerkC,KAAKwI,IAAI67B,EAAc,GACtCA,EAAerkC,KAAK+kB,IAClBsf,EACApB,EAAqBl+B,MAAQq/B,EAAYr/B,WA7DhBuM,IAoE/B2yB,GAAiBxvB,+CC7EjB,kBASE,WAAYta,OAAEqd,iBACZxjB,KAAKyjB,cAAgBD,EACrBxjB,KAAKgwC,SAAW,IAAIzB,GACpBvuC,KAAKswC,kBAAoB,IAAIL,GAAiBjwC,KAAKgwC,UACnDhwC,KAAKgf,cAmET,OAhEE1f,sBAAIixC,4BAAJ,WACE,OAAOvwC,KAAKgwC,SAAStsB,0CAGvBpkB,sBAAIixC,wCAAJ,WACE,OAAOvwC,KAAKswC,kBAAkB3wB,sCAGxB4wB,wBAAR,WACEvwC,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aACpCvN,GAAUO,0BAA2BpX,KAAK0lB,OAC5C1lB,OAOJuwC,oBAAA,SAAQtb,GACNj1B,KAAKgwC,SAASF,QAAQ7a,IAMxBsb,iBAAA,SAAKltC,GAEHrD,KAAKgwC,SAASF,QAAQzsC,EAAQ4xB,MAC9Bj1B,KAAKgwC,SAASQ,SACZxwC,KAAKswC,kBAAkBG,yBAAyBptC,EAAQ6M,WAE1DlQ,KAAKgwC,SAASrqB,QAMhB4qB,iBAAA,WACEvwC,KAAKgwC,SAAStqB,QAShB6qB,4BAAA,SACEhB,EACAlsC,GAEA,OAAO,IAAIssC,GAAiBJ,EAAWvvC,KAAMqD,IAG/CktC,oBAAA,WACEvwC,KAAK+f,gBAEL/f,KAAKgwC,SAASzlC,UACdvK,KAAKswC,kBAAkB/lC,UACvBvK,KAAKgwC,SAAW,KAChBhwC,KAAKswC,kBAAoB,KAEzBtwC,KAAKyjB,cAAgB,MA7EhB8sB,aAAa,iBACbA,gBAAgB,6BCPvBG,gBACEC,gBAAiB,SAAC3e,GAAc,OAAAA,EAAKuC,gBAEvCqc,gBACED,gBAAiB,SAAC3e,GAChB,OAAA6e,GAAoB7e,EAAKuC,cAAe,MAE5Cuc,oBACEH,gBAAiB,SAAC3e,GAChB,OAAA6e,GAAoB7e,EAAKuC,cAAe,OAE5Cwc,iBACEJ,gBAAiB,SAAC3e,GAAc,OAAAA,EAAKuC,gBAEvCyc,iBACEC,YAAa,SAACjf,GAAc,OAAAA,EAAKuC,ghKCK/B2c,GAA6B,SACjC98B,EACA0M,GAEA,IAAMqwB,EAAerwB,EAAQkuB,wBACvBoC,EAAYh9B,EAAMi9B,QAExB,OAAID,EAAYD,EAAazgC,KACpB,EAGL0gC,EAAYD,EAAazgC,KAAOygC,EAAapgC,MACxC,KAGDqD,EAAMi9B,QAAUF,EAAazgC,MAAQygC,EAAapgC,MAAQ,oBAqBlE,WAAY7H,GAAZ,WACUsV,cAAWkrB,YAASzC,mBAAgBhqB,iBAE5Ctb,EAAAD,YAAMub,UAEDwB,WAAaD,EAClB7c,EAAKizB,SAAW8U,EAChB/nC,EAAKgoC,gBAAkB1C,EAEvBtlC,EAAKq5B,WACLr5B,EAAKgiB,iBACLhiB,EAAKqd,cAELrd,EAAK2vC,wBAAwB,GAC7B3vC,EAAK4vC,0BAA0B,GAC/B5vC,EAAK6vC,iBAsRT,OAvT2BvvC,OAoCjBwvC,qBAAR,iBACEzxC,KAAK0e,OAASC,mDAEV5O,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,q7BAItBzkC,KAAK0xC,SAAWvW,GAAiBn7B,KAAK0e,OAAQ,mBAC9C1e,KAAK2xC,WAAaxW,GAAiBn7B,KAAK0e,OAAQ,qBAChD1e,KAAK4xC,SAAWzW,GAAiBn7B,KAAK0e,OAAQ,oBAC9C1e,KAAK6xC,iBAAmB1W,GACtBn7B,KAAK0e,OACL,4BAEF1e,KAAK8xC,aAAe3W,GAAiBn7B,KAAK0e,OAAQ,wBAClD1e,KAAK+xC,aAAe5W,GAAiBn7B,KAAK0e,OAAQ,wBAClD1e,KAAKgyC,4BAA8BhyC,KAAK2pC,gBAAgBI,gBACtD/pC,KAAK+xC,cAEH9c,KAAMj1B,KAAK40B,SAASjsB,IAAIgsB,GAAYxZ,qBAGxCnb,KAAKiyC,SAAW9W,GAAiBn7B,KAAK0e,OAAQ,oBAGxC+yB,2BAAR,WACEzxC,KAAKkyC,iBAAmBlyC,KAAKkyC,iBAAiBxuC,KAAK1D,MACnDA,KAAKmyC,sBAAwBnyC,KAAKmyC,sBAAsBzuC,KAAK1D,MAC7DA,KAAKoyC,mBAAqBpyC,KAAKoyC,mBAAmB1uC,KAAK1D,MACvDA,KAAKqyC,oBAAsBryC,KAAKqyC,oBAAoB3uC,KAAK1D,MACzDA,KAAKsyC,mBAAqBtyC,KAAKsyC,mBAAmB5uC,KAAK1D,MACvDA,KAAK6qC,cAAgB7qC,KAAK6qC,cAAcnnC,KAAK1D,OAGvCyxC,wBAAR,WACEzxC,KAAK8xC,aAAatjC,iBAAiB,YAAaxO,KAAKmyC,uBACrDnyC,KAAK8xC,aAAatjC,iBAAiB,YAAaxO,KAAKqyC,qBACrDryC,KAAK8xC,aAAatjC,iBAAiB,WAAYxO,KAAKsyC,oBAEpDtyC,KAAKiyC,SAASzjC,iBAAiB,YAAaxO,KAAKmyC,uBACjDnyC,KAAKiyC,SAASzjC,iBAAiB,YAAaxO,KAAKqyC,qBACjDryC,KAAKiyC,SAASzjC,iBAAiB,WAAYxO,KAAKsyC,oBAEhDxrC,OAAO0H,iBAAiB,YAAaxO,KAAKkyC,kBAC1CprC,OAAO0H,iBAAiB,UAAWxO,KAAKoyC,oBAExCpyC,KAAK+xC,aAAavjC,iBAAiB,QAASxO,KAAK6qC,eACjD7qC,KAAK+xC,aAAavjC,iBAChB,aACAxO,KAAKye,WAAW8zB,0BAElBvyC,KAAK+xC,aAAavjC,iBAChB,aACAxO,KAAKye,WAAW+zB,2BAIZf,0BAAR,WACEzxC,KAAK8xC,aAAahjC,oBAChB,YACA9O,KAAKmyC,uBAEPnyC,KAAK8xC,aAAahjC,oBAChB,YACA9O,KAAKqyC,qBAEPryC,KAAK8xC,aAAahjC,oBAAoB,WAAY9O,KAAKsyC,oBAEvDtyC,KAAKiyC,SAASnjC,oBAAoB,YAAa9O,KAAKmyC,uBACpDnyC,KAAKiyC,SAASnjC,oBAAoB,YAAa9O,KAAKqyC,qBACpDryC,KAAKiyC,SAASnjC,oBAAoB,WAAY9O,KAAKsyC,oBAEnDxrC,OAAOgI,oBAAoB,YAAa9O,KAAKkyC,kBAC7CprC,OAAOgI,oBAAoB,UAAW9O,KAAKoyC,oBAE3CpyC,KAAK+xC,aAAajjC,oBAAoB,QAAS9O,KAAK6qC,eACpD7qC,KAAK+xC,aAAajjC,oBAChB,aACA9O,KAAKye,WAAW8zB,0BAElBvyC,KAAK+xC,aAAajjC,oBAChB,aACA9O,KAAKye,WAAW+zB,2BAIZf,kCAAR,SAA8Br9B,GAC5B,KAAIA,EAAMq+B,OAAS,GAAnB,CAIA,IAAMC,EAAUxB,GAA2B98B,EAAOpU,KAAKiyC,UACvDjyC,KAAKsxC,wBAAwBoB,GAC7B1yC,KAAKye,WAAWk0B,uBAAuBD,GAEvC1yC,KAAK4yC,eAGCnB,+BAAR,SAA2Br9B,GACrBA,EAAMq+B,OAAS,GAInBzyC,KAAK6yC,aAGCpB,gCAAR,SAA4Br9B,GAC1B,IAAMs+B,EAAUxB,GAA2B98B,EAAOpU,KAAKiyC,UAEvDjyC,KAAK8yC,wBAAwBJ,GAC7B1yC,KAAKye,WAAWs0B,qBAAqBL,IAG/BjB,+BAAR,WACEzxC,KAAK8yC,wBAAwB,GAC7B9yC,KAAKye,WAAWu0B,sBAGVvB,6BAAR,SAAyBr9B,GACvB,GAAIpU,KAAKmoC,YAAa,CACpB,IAAMuK,EAAUxB,GAA2B98B,EAAOpU,KAAKiyC,UACvDjyC,KAAKsxC,wBAAwBoB,GAC7B1yC,KAAKye,WAAWk0B,uBAAuBD,KAInCjB,uBAAR,WACEzxC,KAAKmoC,aAAc,EACnBnoC,KAAKye,WAAWw0B,cAChBjzC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWs0B,aAGpCzB,sBAAR,WACMzxC,KAAKmoC,cACPnoC,KAAKmoC,aAAc,EACnBnoC,KAAKye,WAAW00B,YAChBnzC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWs0B,cAIzCzB,oCAAR,SAAgCiB,GAC9B1yC,KAAK4xC,SAAS37B,aAAa,QAAS,SAASy8B,SAGvCjB,oCAAR,SAAgCiB,GAC9B1yC,KAAK0e,OAAOzI,aACV,iBACAjW,KAAK40B,SAASjsB,IAAIgsB,GAAYhZ,wBAA0B+2B,aAE1D1yC,KAAK0e,OAAOzI,aAAa,gBAAiBm9B,OAAOV,IACjD1yC,KAAK0e,OAAOzI,mCAA0Bm9B,OAAOV,IAC7C1yC,KAAK0xC,SAASz7B,aAAa,QAAS,SAASy8B,QAC7C1yC,KAAK8xC,aAAa77B,aAAa,QAAS,QAAQy8B,SAG1CjB,sCAAR,SAAkCiB,GAChC1yC,KAAK2xC,WAAW17B,aAAa,QAAS,SAASy8B,SAGzCjB,0BAAR,WACEzxC,KAAKye,WAAW40B,uBAGlB5B,6BAAA,WACEzxC,KAAK+xC,aAAaxyB,UAAUG,OAAO1f,KAAK4e,WAAWa,SAGrDgyB,6BAAA,WACEzxC,KAAK+xC,aAAaxyB,UAAUC,IAAIxf,KAAK4e,WAAWa,SAGlDgyB,8BAAA,SAAkB6B,GAChBhY,GAAgBt7B,KAAK+xC,aAAc/xC,KAAK4e,WAAW20B,SAAUD,GAEzDA,GACFtzC,KAAKgyC,4BAA4B5H,UACjCpqC,KAAK0xC,SAASz7B,aAAa,QAAS,eACpCjW,KAAK8xC,aAAa77B,aAAa,QAAS,eAExCjW,KAAKgyC,4BAA4B3H,UAIrCoH,oCAAA,SAAwBtrC,GAAxB,WACEurB,SACAghB,YAKA1yC,KAAK2pC,gBAAgBhkB,MACnBsP,KAAMue,GAAW9hB,GACjBxhB,SAAU,SAAAq3B,GACR,OCrQR,SACEkM,EACAC,EACAnM,GAEA,OAAOsI,GACL6D,EACAnM,EACA,SAACoM,EAAqBC,GACpB,OAjBN,SACEH,EACAE,EACAC,GAEA,OAAOD,EAAsBF,EAAkBG,EAAoB,IAY/DC,CACEJ,EACAE,EACAC,KDyPAE,CACEpB,EACA/wC,EAAKswC,SACL1K,OAKRkK,oCAAA,WACEzxC,KAAK2pC,gBAAgBjkB,QAGvB+rB,wBAAA,WACEzxC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWm1B,QAE1C/zC,KAAKg0C,oBAGPvC,yBAAA,WACEzxC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWm1B,QAE7C/zC,KAAKi0C,oBAGPxC,sBAAA,SAAUiB,GACR1yC,KAAKsxC,wBAAwBoB,IAG/BjB,wBAAA,SAAYiB,GACV1yC,KAAKuxC,0BAA0BmB,IAGjCjB,6BAAA,SAAiBiB,SACf1yC,KAAK6xC,iBAAiB1zB,YACpBQ,sBAEI+zB,UACA3iC,OAAQ/P,KAAK4e,6EAMrB6yB,gCAAA,WACEzxC,KAAK6xC,iBAAiBv1B,UAAY,IAGpCm1B,iBAAA,WACEzxC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5CgyB,iBAAA,WACEzxC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/CgyB,oBAAA,WACE,OAAOzxC,KAAK0e,QAGd+yB,oBAAA,WACEzxC,KAAK+f,gBACL/f,KAAKye,WAAa,KAElBze,KAAKgyC,4BAA4BznC,UACjCvK,KAAKgyC,4BAA8B,KAE/BhyC,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,KACd1e,KAAK2xC,WAAa,KAClB3xC,KAAKiyC,SAAW,KAChBjyC,KAAK0xC,SAAW,KAChB1xC,KAAK4xC,SAAW,KAChB5xC,KAAK8xC,aAAe,KACpB9xC,KAAK+xC,aAAe,KACpB/xC,KAAK6xC,iBAAmB,KAExB7xC,KAAK40B,SAAW,SArTO1U,gBEzCIwR,EAAcwiB,GAC3C,OAAKA,EAIErkC,YAAY6hB,EAAOwiB,EAAe,KAAKC,QAAQ,IAH7C,cAuCTtiB,EACAzH,GAEA,IAAI5pB,EAAI,EAER,IAAKqxB,IAAaA,EAASlxB,OACzB,OAAO,KAGT,KACEH,EAAIqxB,EAASlxB,OAAS,KACpBkxB,EAASuiB,MAAM5zC,IAAM4pB,GAAeA,GAAeyH,EAASwiB,IAAI7zC,KAElEA,GAAK,EAGP,OACE4zC,MAAOviB,EAASuiB,MAAM5zC,GACtB6zC,IAAKxiB,EAASwiB,IAAI7zC,IFuStBixC,GAAa1M,SAASuP,IACtB7C,GAAahxB,oXG1Ub,kBAiCE,WAAYta,OACV4wB,WACAwd,oBACA/wB,iBACAkmB,YACAzC,mBACAhqB,UASAjd,KAAKi3B,QAAUF,EACf/2B,KAAKw0C,iBAAmBD,EACxBv0C,KAAKyjB,cAAgBD,EACrBxjB,KAAK40B,SAAW8U,EAChB1pC,KAAK2pC,gBAAkB1C,EACvBjnC,KAAKy0C,oBAAqB,EAC1Bz0C,KAAK00C,iBAAmB,EACxB10C,KAAKolC,OAASnoB,EAEdjd,KAAK20C,wBAEL30C,KAAK2jB,iBACL3jB,KAAK4jB,UACL5jB,KAAKgf,cAELhf,KAAK8jB,KAAK8wB,UAAU,GACpB50C,KAAK8jB,KAAK+wB,YAAY,GAEtB70C,KAAKg6B,mBAuYT,OApYE16B,sBAAIw1C,wBAAJ,WACE,OAAO90C,KAAK8jB,KAAKC,2CAGX+wB,wBAAR,WACE90C,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAEnChL,GAAaE,cAAetZ,KAAKs4B,sBACjClf,GAAaG,mBAAoBvZ,KAAK+0C,0BACtC37B,GAAaK,aAAczZ,KAAKg1C,yBAChC57B,GAAaO,iBAAkB3Z,KAAKi1C,uBAEvCj1C,OAII80C,oBAAR,WACE,IAAM5rC,GACJsV,WACE60B,oBAAqBrzC,KAAK6qC,cAC1B0H,yBAA0BvyC,KAAKk1C,0BAC/B1C,yBAA0BxyC,KAAKm1C,0BAC/BxC,uBAAwB3yC,KAAKo1C,sBAC7BrC,qBAAsB/yC,KAAKq1C,sBAC3BrC,mBAAoBhzC,KAAKs1C,oBACzBrC,YAAajzC,KAAKu1C,yBAClBpC,UAAWnzC,KAAKw1C,wBAElBv4B,MAAOjd,KAAKolC,OACZsE,QAAS1pC,KAAK40B,SACdqS,eAAgBjnC,KAAK2pC,iBAGvB3pC,KAAK8jB,KAAO,IAAIgxB,EAAgB50B,KAAKhX,IAG/B4rC,6BAAR,WAAA,aACE90C,KAAKy1C,aAAe,IAAItb,GAAoBn6B,KAAK8jB,KAAKC,kBACnDgV,GAASM,UAAW,SAAAjX,GACnBA,EAAEsmB,kBACFtmB,EAAEkY,iBACF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KAAK5N,GAAUsB,oCAClCxW,EAAKs1B,QAAQwD,UtCvHiB,IsCyHhCt0B,EAAC4yB,GAASO,YAAa,SAAAlX,GACrBA,EAAEsmB,kBACFtmB,EAAEkY,iBACF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KAAK5N,GAAUqB,qCAClCvW,EAAKs1B,QAAQuD,WtC9HiB,IsCgIhCr0B,EAAC4yB,GAASK,aAAc,SAAAhX,GACtBA,EAAEsmB,kBACFtmB,EAAEkY,iBACF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KAAK5N,GAAUsB,oCAClCxW,EAAKs1B,QAAQwD,UtCrIiB,IsCuIhCt0B,EAAC4yB,GAASI,YAAa,SAAA/W,GACrBA,EAAEsmB,kBACFtmB,EAAEkY,iBACF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KAAK5N,GAAUqB,qCAClCvW,EAAKs1B,QAAQuD,WtC5IiB,SsCiJ5Bsa,gCAAR,WACE90C,KAAKy1C,aAAalrC,WAGZuqC,2BAAR,WACE90C,KAAK6qC,cAAgB7qC,KAAK6qC,cAAcnnC,KAAK1D,MAC7CA,KAAKk1C,0BAA4Bl1C,KAAKk1C,0BAA0BxxC,KAAK1D,MACrEA,KAAKm1C,0BAA4Bn1C,KAAKm1C,0BAA0BzxC,KAAK1D,MACrEA,KAAK01C,yBAA2B11C,KAAK01C,yBAAyBhyC,KAAK1D,MACnEA,KAAKo1C,sBAAwBp1C,KAAKo1C,sBAAsB1xC,KAAK1D,MAC7DA,KAAKq1C,sBAAwBr1C,KAAKq1C,sBAAsB3xC,KAAK1D,MAC7DA,KAAKs1C,oBAAsBt1C,KAAKs1C,oBAAoB5xC,KAAK1D,MACzDA,KAAKu1C,yBAA2Bv1C,KAAKu1C,yBAAyB7xC,KAAK1D,MACnEA,KAAKw1C,uBAAyBx1C,KAAKw1C,uBAAuB9xC,KAAK1D,MAC/DA,KAAKs4B,oBAAsBt4B,KAAKs4B,oBAAoB50B,KAAK1D,MACzDA,KAAK21C,oCAAsC31C,KAAK21C,oCAAoCjyC,KAClF1D,OAII80C,kCAAR,SAA8BjzC,GACxB7B,KAAK00C,mBAAqB7yC,IAI9B7B,KAAK00C,iBAAmB7yC,EACxB7B,KAAK41C,0BAA0B/zC,EAAQ,OAGjCizC,kCAAR,WACM90C,KAAK61C,wBACP71C,KAAK81C,uBAGP91C,KAAK01C,2BAEL11C,KAAK61C,uBAAyB/uC,OAAOm2B,YACnCj9B,KAAK01C,yBA/KmB,IAAO,KAoL3BZ,kCAAR,SAA8BpC,GAC5B,IAAMwB,EAAel0C,KAAKi3B,QAAQpG,kBAC5BklB,EAAW7B,EAAexB,EAAU,IACpChhB,EAAO1xB,KAAKi3B,QAAQzH,iBACtBumB,EAAW7B,EACX6B,EAEJ/1C,KAAK8jB,KAAKkyB,yBAA0BtkB,OAAMghB,aAGpCoC,gCAAR,WACE90C,KAAK8jB,KAAKmyB,2BAGJnB,iCAAR,WACEhuC,OAAOo2B,cAAcl9B,KAAK61C,wBAC1B71C,KAAK61C,uBAAyB,MAGxBf,qCAAR,WACO90C,KAAKy0C,qBACRz0C,KAAKy0C,oBAAqB,EAC1Bz0C,KAAKk2C,0CAGPl2C,KAAKyjB,cAAcgB,KAAK5N,GAAUgC,qBAG5Bi8B,mCAAR,WACM90C,KAAKy0C,qBACPz0C,KAAKy0C,oBAAqB,EAC1Bz0C,KAAK21C,uCAGP31C,KAAKyjB,cAAcgB,KAAK5N,GAAUiC,mBAG5Bg8B,qCAAR,WACE90C,KAAKm2C,yBACLn2C,KAAKg1C,0BAGCF,gCAAR,SAA4B3uC,GAC1B,oBACE,KAAKyQ,GAAYqZ,QACfjwB,KAAKo2C,QACL,MACF,KAAKx/B,GAAYuS,gBACfnpB,KAAKq2C,sBAEDr2C,KAAKi3B,QAAQvH,gBACf1vB,KAAK2lB,OAEL3lB,KAAK0lB,OAGP,MACF,KAAK9O,GAAY2S,QACXvpB,KAAKw0C,iBAAiB3rB,QAAU3M,GAAU2c,KAC5C74B,KAAK8jB,KAAK8wB,UAAU,KAEpB50C,KAAKs2C,wBAEP,MACF,KAAK1/B,GAAYmD,iBACf/Z,KAAKm2C,yBACLn2C,KAAKg1C,yBACL,MACF,QACEh1C,KAAK81C,yBAKHhB,oCAAR,SAAgC3uC,GAC9B,oBACE,KAAK+V,GAAUic,KACbn4B,KAAK8jB,KAAKyyB,mBAAkB,GAC5Bv2C,KAAK8jB,KAAK0tB,eACV,MAEF,KAAKt1B,GAAUwc,QACb14B,KAAK8jB,KAAK0yB,cACV,MAEF,KAAKt6B,GAAU2c,KACb74B,KAAK8jB,KAAKyyB,mBAAkB,GAC5B,MAEF,KAAKr6B,GAAU0c,SACb54B,KAAK8jB,KAAKyyB,mBAAkB,GAC5B,MAEF,KAAKr6B,GAAUyN,MACb3pB,KAAK8jB,KAAKyyB,mBAAkB,GAC5Bv2C,KAAK8jB,KAAKmwB,mBAGNj0C,KAAKi3B,QAAQ6B,oBAAsBliB,GAAY2S,QACjDvpB,KAAKs2C,yBAELt2C,KAAKm2C,yBACLn2C,KAAKg1C,4BASLF,sCAAR,SAAkCpC,GAChC,IAAMroB,EAAWrqB,KAAKi3B,QAAQpG,kBAE1B7wB,KAAKi3B,QAAQzH,kBAAgC,IAAZkjB,EACnC1yC,KAAKi3B,QAAQ0B,eAEb34B,KAAKi3B,QAAQ9G,eAAe9F,EAAWqoB,GAGzC1yC,KAAKyjB,cAAcgB,KAAK5N,GAAUI,0BAA2By7B,IAGvDoC,mDAAR,WACE,IAAM2B,EAAez2C,KAAKi3B,QAAQ6B,kBAGhC2d,IAAiB7/B,GAAY2S,SAC7BktB,IAAiB7/B,GAAYyS,iBAE7BrpB,KAAK02C,iCAAkC,EACvC12C,KAAKi3B,QAAQ/G,SAEflwB,KAAKyjB,cAAcgB,KAAK5N,GAAUa,gCAG5Bo9B,gDAAR,WACM90C,KAAK02C,kCACP12C,KAAKi3B,QAAQ3G,OAEbtwB,KAAK02C,iCAAkC,GAGzC12C,KAAKyjB,cAAcgB,KAAK5N,GAAUc,8BAG5Bm9B,mCAAR,WACE,IAAM1qB,EAAcpqB,KAAKi3B,QAAQnG,iBAC3Be,EAAW7xB,KAAKi3B,QAAQ0f,cACxBtsB,EAAWrqB,KAAKi3B,QAAQpG,kBAE9B7wB,KAAK42C,wBD3VP/kB,EACAzH,EACAC,GAEA,oBAHAD,kBACAC,KAEKwH,GAAaA,EAASlxB,QAAW0pB,EAM/BwsB,GAFMC,GAA4BjlB,EAAUzH,GAExBiqB,IAAKhqB,GALvB,ECuVL0sB,CAA0BllB,EAAUzH,EAAaC,KAI7CyqB,mCAAR,WACE,GAAI90C,KAAKw0C,iBAAiB3rB,QAAU3M,GAAU2c,KAA9C,CAKA,IAAMzO,EAAcpqB,KAAKi3B,QAAQnG,iBAC3BzG,EAAWrqB,KAAKi3B,QAAQpG,kBAE9B7wB,KAAKg3C,sBD5V+B5sB,EAAiBC,GACvD,oBADsCD,kBAAiBC,KAChDwsB,GAAezsB,EAAaC,GC2Vf4sB,CAAwB7sB,EAAaC,MAGjDyqB,iCAAR,WACE90C,KAAKm2C,yBACLn2C,KAAKg1C,0BAGCF,gCAAR,WAAA,WACE90C,KAAK20C,qBAAqBrvC,QAAQ,SAAAosB,GAChC/vB,EAAKu1C,kBAAkBxlB,KAEzB1xB,KAAK20C,yBAGCG,8BAAR,SAA0BpjB,GACxB,IAAMwiB,EAAel0C,KAAKi3B,QAAQpG,kBAE9Ba,EAAOwiB,GAKXl0C,KAAK8jB,KAAKqzB,iBAAiBN,GAAenlB,EAAMwiB,KAG1CY,0BAAR,WACE90C,KAAKi3B,QAAQ0B,gBAGPmc,sCAAR,WACE90C,KAAKyjB,cAAcgB,KACjB5N,GAAUoC,6CAIN67B,sCAAR,WACE90C,KAAKyjB,cAAcgB,KACjB5N,GAAUqC,6CAQd47B,6BAAA,SAAiBpjB,GACf1xB,KAAKo3C,mBAAmB1lB,KAO1BojB,8BAAA,SAAkBuC,GADlB,aAEOr3C,KAAKi3B,QAAQtH,iBAMlB0nB,EAAM/xC,QAAQ,SAAAosB,GACZ/vB,EAAKu1C,kBAAkBxlB,MALvBvrB,EAAAnG,KAAK20C,sBAAqBnwC,aAAQ6yC,IAatCvC,gCAAA,WACE90C,KAAK8jB,KAAKwzB,uBAGZxC,yBAAA,SAAapC,GACX1yC,KAAK00C,iBAAmBhC,EACxB1yC,KAAK8jB,KAAK8wB,UAAU50C,KAAK00C,mBAG3BI,2BAAA,SAAepC,GACb1yC,KAAK8jB,KAAK+wB,YAAYnC,IAGxBoC,iBAAA,WACE90C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QAGZovB,iBAAA,WACE90C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAGZmvB,kBAAA,WACE90C,KAAKg3C,aAAa,GAClBh3C,KAAK42C,eAAe,GACpB52C,KAAKs3C,uBAGPxC,oBAAA,WACE90C,KAAK46B,sBACL56B,KAAK81C,uBACL91C,KAAK+f,gBACL/f,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,KACfj3B,KAAKw0C,iBAAmB,KACxBx0C,KAAK20C,qBAAuB,KAC5B30C,KAAK40B,SAAW,MApcXkgB,aAAa,kBACbA,OAAO50B,GACP40B,gBACL,SACA,kBACA,eACA,UACA,iBACA,SA4XFjvB,GADCxd,0CASDwd,GADCxd,2CAiBDwd,GADCxd,y4CC3ZD,WAAYa,GAAZ,aACUsV,cAAWkrB,YAASzsB,iBAE5Btb,EAAAD,YAAMub,UAEDwB,WAAaD,EAClB7c,EAAKizB,SAAW8U,EAEhB/nC,EAAK+c,OAASC,sBAEV5O,OAAQpO,EAAKid,WACbkW,OACEyiB,MAAO51C,EAAKizB,SAASjsB,IAAIgsB,GAAYnZ,2QAK3C7Z,EAAK61C,kBAAoBrc,GAAiBx5B,EAAK+c,OAAQ,oBAEvD/c,EAAKqnB,UAAWyuB,WAAW,IAC3B91C,EAAKqd,gBAoET,OAhGuB/c,OA+Bby1C,wBAAR,WACE13C,KAAK23C,eAAiB33C,KAAK23C,eAAej0C,KAAK1D,MAE/CA,KAAKw3C,kBAAkBhpC,iBAAiB,QAASxO,KAAK23C,iBAGhDD,0BAAR,WACE13C,KAAKw3C,kBAAkB1oC,oBAAoB,QAAS9O,KAAK23C,iBAGnDD,2BAAR,WACE13C,KAAKw3C,kBAAkB9Y,QACvB1+B,KAAKye,WAAWm5B,iBAGlBF,qBAAA,SAASvxC,SAAEsxC,cACLA,GACFz3C,KAAKw3C,kBAAkBj4B,UAAUG,OAAO1f,KAAK4e,WAAW0K,QACxDtpB,KAAKw3C,kBAAkBl7B,6BACrBvM,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,2VAEpBzkC,KAAKw3C,kBAAkBvhC,aACrB,aACAjW,KAAK40B,SAASjsB,IAAIgsB,GAAYlZ,wBAGhCzb,KAAKw3C,kBAAkBj4B,UAAUC,IAAIxf,KAAK4e,WAAW0K,QACrDtpB,KAAKw3C,kBAAkBl7B,sXAAYomB,EACjC3yB,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,cAEpBzkC,KAAKw3C,kBAAkBvhC,aACrB,aACAjW,KAAK40B,SAASjsB,IAAIgsB,GAAYnZ,sBAIlCxb,KAAK0e,OAAOzI,aAvEQ,kBAuEsBm9B,OAAOqE,KAGnDC,iBAAA,WACE13C,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/Ci4B,iBAAA,WACE13C,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5Ci4B,oBAAA,WACE,OAAO13C,KAAK0e,QAGdg5B,oBAAA,WACE13C,KAAK+f,gBACL/f,KAAKye,WAAa,KAEdze,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAKw3C,kBAAoB,KACzBx3C,KAAK0e,OAAS,KACd1e,KAAK40B,SAAW,SA9FG1U,IAkGvBw3B,GAAS3S,UCrHP8S,aACE5S,KAAM,SAACjT,GAAc,OAAAA,EAAKQ,UDqH9BklB,GAASj3B,4IE1GT,kBAiBE,WAAYta,OACV4wB,WACAvT,iBACAkmB,YACAzsB,UAOAjd,KAAKi3B,QAAUF,EACf/2B,KAAKyjB,cAAgBD,EACrBxjB,KAAK40B,SAAW8U,EAChB1pC,KAAKolC,OAASnoB,EAEdjd,KAAK83C,WAAa,KAElB93C,KAAK2jB,iBACL3jB,KAAK4jB,UACL5jB,KAAKgf,cAELhf,KAAK+3C,kBAAiB,GAEtB/3C,KAAKg6B,mBAwGT,OArGE16B,sBAAI04C,wBAAJ,WACE,OAAOh4C,KAAK8jB,KAAKC,2CAGXi0B,6BAAR,WAAA,aACEh4C,KAAKy1C,aAAe,IAAItb,GAAoBn6B,KAAK2f,aAC9CoZ,GAASC,WAAY,SAAA5W,GACpBA,EAAEsmB,kBACF/mC,EAAK8hB,cAAcgB,KACjB5N,GAAUoB,0CAGd9R,EAAC4yB,GAASE,OAAQ,SAAA7W,GAChBA,EAAEsmB,kBACF/mC,EAAK8hB,cAAcgB,KACjB5N,GAAUoB,+CAMV+/B,gCAAR,WACEh4C,KAAKy1C,aAAalrC,WAGZytC,2BAAR,WACEh4C,KAAKi4C,gBAAkBj4C,KAAKi4C,gBAAgBv0C,KAAK1D,OAG3Cg4C,wBAAR,WACEh4C,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aACpChL,GAAaE,cAAetZ,KAAK2lC,uBACnC3lC,OAIIg4C,4BAAR,WACMh4C,KAAK83C,WACP93C,KAAKk4C,cAELl4C,KAAK0lC,cAIDsS,uBAAR,WACEh4C,KAAKi3B,QAAQ3G,OAEbtwB,KAAKyjB,cAAcgB,KAAK5N,GAAUC,iBAG5BkhC,wBAAR,WACEh4C,KAAKi3B,QAAQ/G,QAEblwB,KAAKyjB,cAAcgB,KAAK5N,GAAUG,kBAG5BghC,iCAAR,SAA6B7xC,OAAE0jB,cACzBA,IAAcjT,GAAYqZ,QAC5BjwB,KAAKo2C,QACIvsB,IAAcjT,GAAY2S,QACnCvpB,KAAK+3C,kBAAiB,GAEtBluB,IAAcjT,GAAY8S,QAC1BG,IAAcjT,GAAY+S,OAC1BE,IAAcjT,GAAYmD,kBAE1B/Z,KAAK+3C,kBAAiB,IAIlBC,oBAAR,WACE,IAAM9uC,GACJsV,WACEo5B,cAAe53C,KAAKi4C,iBAEtBh7B,MAAOjd,KAAKolC,OACZsE,QAAS1pC,KAAK40B,UAGhB50B,KAAK8jB,KAAO,IAAIk0B,EAAY93B,KAAKhX,IAGnC8uC,6BAAA,SAAiBP,GACfz3C,KAAK83C,WAAaL,EAClBz3C,KAAK8jB,KAAKkF,UAAWyuB,UAAWz3C,KAAK83C,cAGvCE,kBAAA,WACEh4C,KAAK+3C,kBAAiB,IAGxBC,oBAAA,WACEh4C,KAAK46B,sBACL56B,KAAK+f,gBACL/f,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,KACfj3B,KAAK40B,SAAW,MA9IXojB,aAAa,cACbA,OAAO93B,GACP83B,gBAAgB,SAAU,eAAgB,UAAW,sjCCK5D,WAAY9uC,GAAZ,WACU+T,iBACRtb,EAAAD,YAAMub,UAED+d,aA8ET,OA1FuB/4B,OAebk2C,qBAAR,iBACEn4C,KAAK0e,OAASC,+CACG5O,OAAQ/P,KAAK4e,WAAY6lB,YAAazkC,KAAKykC,uPAG5DzkC,KAAKo4C,cAAgBjd,GACnBn7B,KAAK0e,OACL,0BAEF1e,KAAKq4C,eAAiBld,GACpBn7B,KAAK0e,OACL,4BAIJy5B,4BAAA,SAAgB9tB,GACVA,IAAarqB,KAAKs4C,YACpBt4C,KAAKs4C,UAAYjuB,EACjBrqB,KAAKu4C,wBAITJ,2BAAA,SAAe1iC,GACTA,IAAYzV,KAAKw4C,WACnBx4C,KAAKw4C,SAAW/iC,EAChBzV,KAAKy4C,uBAITN,mCAAA,SAAuBO,GACrB14C,KAAK04C,YAAcA,EACnB14C,KAAKy4C,sBAGCN,gCAAR,WACEn4C,KAAKq4C,eAAe/7B,UAAYk3B,GAAWxzC,KAAKs4C,YAG1CH,+BAAR,WACMn4C,KAAK04C,YACP14C,KAAKo4C,cAAc97B,UAAYk3B,GAAWxzC,KAAKw4C,SAAWx4C,KAAKs4C,WAE/Dt4C,KAAKo4C,cAAc97B,UAAYk3B,GAAWxzC,KAAKw4C,WAInDL,yBAAA,WACEn4C,KAAKq4C,eAAe94B,UAAUG,OAAO1f,KAAK4e,WAAWa,SAGvD04B,yBAAA,WACEn4C,KAAKq4C,eAAe94B,UAAUC,IAAIxf,KAAK4e,WAAWa,SAGpD04B,iBAAA,WACEn4C,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/C04B,iBAAA,WACEn4C,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5C04B,oBAAA,WACE,OAAOn4C,KAAK0e,QAGdy5B,oBAAA,WACMn4C,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAKo4C,cAAgB,KACrBp4C,KAAKq4C,eAAiB,KACtBr4C,KAAK0e,OAAS,SAxFKwB,IA4FvBi4B,GAASpT,UCxGP4T,UACEnmB,MAAO,SAACR,GAAc,OAAAA,EAAKQ,UDwG/B2lB,GAAS13B,4JElGT,kBAiBE,WAAYta,OACVqd,iBACAuT,WACA9Z,UAMAjd,KAAKyjB,cAAgBD,EACrBxjB,KAAKi3B,QAAUF,EACf/2B,KAAKolC,OAASnoB,EAEdjd,KAAK2jB,iBACL3jB,KAAK4jB,UACL5jB,KAAKgf,cAELhf,KAAKmwB,eAAe,GACpBnwB,KAAK44C,gBAAgB,GA4HzB,OAzHEt5C,sBAAIu5C,wBAAJ,WACE,OAAO74C,KAAK8jB,KAAKC,2CAGX80B,2BAAR,WACE74C,KAAKy4C,mBAAqBz4C,KAAKy4C,mBAAmB/0C,KAAK1D,MACvDA,KAAKu4C,oBAAsBv4C,KAAKu4C,oBAAoB70C,KAAK1D,OAGnD64C,wBAAR,WACE74C,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aAEnChL,GAAaE,cAAetZ,KAAK84C,yBACjC1/B,GAAaO,iBAAkB3Z,KAAKu4C,sBACpCn/B,GAAaG,mBAAoBvZ,KAAK+0C,0BAEzC/0C,OAII64C,oBAAR,WACE,IAAM3vC,GACJ+T,MAAOjd,KAAKolC,QAEdplC,KAAK8jB,KAAO,IAAI+0B,EAAY34B,KAAKhX,IAG3B2vC,kCAAR,WACM74C,KAAK61C,wBACP71C,KAAK81C,uBAEP91C,KAAK61C,uBAAyB/uC,OAAOm2B,YACnCj9B,KAAKy4C,mBAtEmB,IAAO,KA2E3BI,iCAAR,WACE/xC,OAAOo2B,cAAcl9B,KAAK61C,wBAC1B71C,KAAK61C,uBAAyB,MAGxBgD,oCAAR,SAAgC1yC,GAC9B,oBACE,KAAK+V,GAAUic,KACbn4B,KAAK2lB,OACL,MAEF,KAAKzJ,GAAUwc,QACb14B,KAAK0lB,OACL,MAEF,KAAKxJ,GAAUyN,MACb3pB,KAAK2lB,SAQHkzB,mCAAR,SAA+B1yC,GAC7B,oBACE,KAAKyQ,GAAYqZ,QACfjwB,KAAKo2C,QACL,MACF,KAAKx/B,GAAY2S,QACfvpB,KAAKs2C,wBACL,MACF,KAAK1/B,GAAYmD,iBACf/Z,KAAKy4C,qBACL,MACF,QACEz4C,KAAK81C,yBAKH+C,gCAAR,WACE74C,KAAK44C,gBAAgB54C,KAAKi3B,QAAQpG,oBAG5BgoB,+BAAR,WACE74C,KAAKmwB,eAAenwB,KAAKi3B,QAAQnG,mBAGnC+nB,4BAAA,SAAgBnnB,GACd1xB,KAAK8jB,KAAK80B,gBAAgBlnB,IAG5BmnB,2BAAA,SAAennB,GACb1xB,KAAK8jB,KAAKqM,eAAeuB,IAG3BmnB,iBAAA,WACE74C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QAGZmzB,iBAAA,WACE74C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAGZkzB,kBAAA,WACE74C,KAAK44C,gBAAgB,GACrB54C,KAAKmwB,eAAe,GACpBnwB,KAAK8jB,KAAKi1B,eACV/4C,KAAK8jB,KAAKk1B,wBAAuB,GACjCh5C,KAAK2lB,QAGPkzB,oBAAA,WACE74C,KAAK81C,uBACL91C,KAAK+f,gBACL/f,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,MA1JV4hB,aAAa,cACbA,OAAO34B,GACP24B,gBAAgB,SAAU,eAAgB,woBCVjDI,eACEhU,KAAM,SAACjT,GAAc,OAAAA,EAAKQ,QAE5B0mB,iBACE/T,OAAQ,SAACnT,GAAc,OAAAA,EAAKQ,QAE9B2mB,gBACExI,gBAAiB,SAAC3e,GAAc,OAAAA,EAAKQ,OACrC4mB,WACEzI,gBAAiB,SAAC3e,GAAc,OAAAA,EAAKQ,SAGzC6mB,0BACE1I,gBAAiB,SAAC3e,GAAc,OAAA6e,GAAoB7e,EAAKQ,MAAO,w4FCY9D0e,GAA6B,SACjC98B,EACA0M,GAEA,IAAMqwB,EAAerwB,EAAQkuB,wBACvBoC,EAAYh9B,EAAMi9B,QAExB,OAAID,EAAYD,EAAazgC,KACpB,EAGL0gC,EAAYD,EAAazgC,KAAOygC,EAAapgC,MACxC,KAGDqD,EAAMi9B,QAAUF,EAAazgC,MAAQygC,EAAapgC,MAAQ,oBAkBlE,WAAY7H,GAAZ,WACUsV,cAAWkrB,YAASzC,mBAAgBhqB,iBAE5Ctb,EAAAD,YAAMub,UAEDwB,WAAaD,EAElB7c,EAAKizB,SAAW8U,EAChB/nC,EAAKgoC,gBAAkB1C,EAEvBtlC,EAAKgiB,iBACLhiB,EAAKq5B,WACLr5B,EAAKqd,gBAgNT,OA3OyB/c,OA8Bfq3C,qBAAR,iBACEt5C,KAAK0e,OAASC,sBAEV5O,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,YAClB3P,OACEykB,UAAWv5C,KAAK40B,SAASjsB,IAAIgsB,GAAY7Y,oBACzC09B,YAAax5C,KAAK40B,SAASjsB,IAAIgsB,GAAY3Y,qxBAKjDhc,KAAKy5C,aAAete,GAAiBn7B,KAAK0e,OAAQ,eAClD1e,KAAK05C,aAAeve,GAAiBn7B,KAAK0e,OAAQ,sBAClD1e,KAAKiyC,SAAW9W,GAAiBn7B,KAAK0e,OAAQ,iBAC9C1e,KAAK25C,SAAWxe,GAAiBn7B,KAAK0e,OAAQ,gBAE9C1e,KAAK45C,4BAA8B55C,KAAK2pC,gBAAgBI,gBACtD/pC,KAAKy5C,cAEHxkB,KAAMj1B,KAAK40B,SAASjsB,IAAIgsB,GAAY5Y,yBAKlCu9B,2BAAR,WACEt5C,KAAK23C,eAAiB33C,KAAK23C,eAAej0C,KAAK1D,MAE/CA,KAAKmyC,sBAAwBnyC,KAAKmyC,sBAAsBzuC,KAAK1D,MAC7DA,KAAKoyC,mBAAqBpyC,KAAKoyC,mBAAmB1uC,KAAK1D,MACvDA,KAAK65C,kBAAoB75C,KAAK65C,kBAAkBn2C,KAAK1D,MACrDA,KAAK85C,kBAAoB95C,KAAK85C,kBAAkBp2C,KAAK1D,MACrDA,KAAK+5C,iBAAmB/5C,KAAK+5C,iBAAiBr2C,KAAK1D,OAG7Cs5C,wBAAR,WACEt5C,KAAKiyC,SAASzjC,iBAAiB,QAASxO,KAAK65C,mBAC7C75C,KAAKiyC,SAASzjC,iBAAiB,YAAaxO,KAAKmyC,uBACjDrrC,OAAO0H,iBAAiB,YAAaxO,KAAK+5C,kBAC1CjzC,OAAO0H,iBAAiB,UAAWxO,KAAKoyC,oBAExCpyC,KAAKy5C,aAAajrC,iBAAiB,QAASxO,KAAK23C,iBAG3C2B,0BAAR,WACEt5C,KAAKiyC,SAASnjC,oBAAoB,QAAS9O,KAAK65C,mBAChD75C,KAAKiyC,SAASnjC,oBAAoB,YAAa9O,KAAKmyC,uBACpDrrC,OAAOgI,oBAAoB,YAAa9O,KAAK+5C,kBAC7CjzC,OAAOgI,oBAAoB,UAAW9O,KAAKoyC,oBAE3CpyC,KAAKy5C,aAAa3qC,oBAAoB,QAAS9O,KAAK23C,iBAG9C2B,kCAAR,SAA8BllC,GACxBA,EAAMq+B,OAAS,IAGnBzyC,KAAK85C,kBAAkB1lC,GACvBpU,KAAK4yC,eAGC0G,+BAAR,SAA2BllC,GACrBA,EAAMq+B,OAAS,GAInBzyC,KAAK6yC,aAGCyG,8BAAR,SAA0BllC,GACxBpU,KAAK05C,aAAahb,QAClB,IAAMgU,EAAUxB,GAA2B98B,EAAOpU,KAAKiyC,UACvDjyC,KAAKye,WAAWu7B,6BAA6BtH,IAGvC4G,6BAAR,SAAyBllC,GACvB,IAAMs+B,EAAUxB,GAA2B98B,EAAOpU,KAAKiyC,UACnDjyC,KAAKmoC,aACPnoC,KAAKye,WAAWu7B,6BAA6BtH,IAIzC4G,8BAAR,SAA0Bl3B,GACxBA,EAAEkY,iBACF,IAAMz4B,EAAQugB,EAAE63B,SAAsB,EAAZ73B,EAAE83B,OAEvBr4C,GAIL7B,KAAKye,WAAW07B,6BAA6Bt4C,IAGvCy3C,uBAAR,WACEt5C,KAAKmoC,aAAc,EACnBnoC,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWs0B,YAC1ClzC,KAAKye,WAAWw0B,eAGVqG,sBAAR,WACMt5C,KAAKmoC,cACPnoC,KAAKmoC,aAAc,EACnBnoC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWs0B,YAC7ClzC,KAAKye,WAAW00B,cAIZmG,oCAAR,SAAgC5G,GAC9B1yC,KAAK05C,aAAazjC,aAAa,QAASm9B,OAAOV,IAC/C1yC,KAAK05C,aAAazjC,aAChB,iBACAjW,KAAK40B,SAASjsB,IAAIgsB,GAAY1Y,sBAAwBy2B,aAExD1yC,KAAK05C,aAAazjC,aAAa,gBAAiBm9B,OAAOV,IACvD1yC,KAAK05C,aAAazjC,aAtKF,sBAsK4Bm9B,OAAOV,IAEnD1yC,KAAK25C,SAAS1jC,aAAa,QAAS,SAASy8B,QAE7C1yC,KAAK0e,OAAOzI,aA1KI,sBA0KsBm9B,OAAOV,IAE7C,MAAM0H,GACJrqC,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,aAIlBzkC,KAAKy5C,aAAan9B,UADhBo2B,GA/KsB,qBAgL4B0H,siBAC3C1H,EAAU,+hBACW2H,CAAqBD,GAErBE,GAAoBF,IAI9Cd,2BAAR,WACEt5C,KAAKy5C,aAAa/a,QAClB1+B,KAAKye,WAAW87B,qBAGlBjB,sBAAA,SAAUpvB,GACRlqB,KAAKw6C,wBAAwBtwB,IAG/BovB,oBAAA,SAAQloB,GACNpxB,KAAKy6C,sBAAsBrpB,IAGrBkoB,kCAAR,SAA8BloB,GACxBA,IACFpxB,KAAKy5C,aAAan9B,UAAYg+B,IAC5BvqC,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,eAItBzkC,KAAK0e,OAAOzI,6BAA4Bm9B,OAAOhiB,IAC/CpxB,KAAKy5C,aAAaxjC,aAChB,aACAmb,EACIpxB,KAAK40B,SAASjsB,IAAIgsB,GAAY/Y,sBAC9B5b,KAAK40B,SAASjsB,IAAIgsB,GAAY7Y,qBAEpC9b,KAAK45C,4BAA4B9J,QAC/B1e,EACIpxB,KAAK40B,SAASjsB,IAAIgsB,GAAY9Y,wBAC9B7b,KAAK40B,SAASjsB,IAAIgsB,GAAY5Y,wBAItCu9B,iBAAA,WACEt5C,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/C65B,iBAAA,WACEt5C,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5C65B,oBAAA,WACE,OAAOt5C,KAAK0e,QAGd46B,0BAAA,WACE,OAAOt5C,KAAKy5C,cAGdH,yBAAA,WACE,OAAOt5C,KAAK05C,cAGdJ,oBAAA,WACEt5C,KAAK+f,gBACL/f,KAAKye,WAAa,KAElBze,KAAK45C,4BAA4BrvC,UACjCvK,KAAK45C,4BAA8B,KAE/B55C,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAKy5C,aAAe,KACpBz5C,KAAK0e,OAAS,KAEd1e,KAAK40B,SAAW,SAzOK1U,IA6OzBo5B,GAAWvU,SAAS2V,IACpBpB,GAAW74B,sPC/QX,kBA4BE,WAAYta,OACV4wB,WACAvT,iBACAkmB,YACAzC,mBACAhqB,UAQAjd,KAAKi3B,QAAUF,EACf/2B,KAAKyjB,cAAgBD,EACrBxjB,KAAK40B,SAAW8U,EAChB1pC,KAAK2pC,gBAAkB1C,EACvBjnC,KAAKolC,OAASnoB,EAEdjd,KAAK26C,SAAW36C,KAAKi3B,QAAQ2jB,UAC7B56C,KAAK66C,QAAU76C,KAAKi3B,QAAQ9F,YAE5BnxB,KAAK2jB,iBAEL3jB,KAAK4jB,UAEL5jB,KAAKgf,cAELhf,KAAK8jB,KAAKqL,UAAUnvB,KAAK66C,SACzB76C,KAAK8jB,KAAKoL,QAAQlvB,KAAK26C,UAEvB36C,KAAKg6B,mBAoLT,OAjLE16B,sBAAIw7C,wBAAJ,WACE,OAAO96C,KAAK8jB,KAAKC,2CAGX+2B,oBAAR,WACE,IAAM5xC,GACJsV,WACEy0B,YAAajzC,KAAK+6C,oBAClB5H,UAAWnzC,KAAKg7C,kBAChBhB,6BAA8Bh6C,KAAKi7C,yBACnCd,6BAA8Bn6C,KAAKk7C,yBACnCX,kBAAmBv6C,KAAKm7C,mBAE1Bl+B,MAAOjd,KAAKolC,OACZsE,QAAS1pC,KAAK40B,SACdqS,eAAgBjnC,KAAK2pC,iBAGvB3pC,KAAK8jB,KAAO,IAAIg3B,EAAc56B,KAAKhX,IAG7B4xC,6BAAR,WAAA,eACE96C,KAAKo7C,mBAAqB,IAAIjhB,GAC5Bn6B,KAAK8jB,KAAKu3B,wBAEPtiB,GAASC,WAAY,SAAA5W,GACpBA,EAAEsmB,kBAEF/mC,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KACjB9iB,EAAKg5C,SACD9jC,GAAU0B,qCACV1B,GAAUyB,qCAGlBnS,EAAC4yB,GAASE,OAAQ,SAAA7W,GAChBA,EAAEsmB,kBAEF/mC,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KACjB9iB,EAAKg5C,SACD9jC,GAAU0B,qCACV1B,GAAUyB,yCAMtBtY,KAAKs7C,kBAAoB,IAAInhB,GAAoBn6B,KAAK8jB,KAAKy3B,uBACxDxiB,GAASK,aAAc,SAAAhX,GACtBA,EAAEsmB,kBACFtmB,EAAEkY,iBAEF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KACjB5N,GAAUuB,yCAEZzW,EAAKs1B,QAAQ/H,SAAQ,GACrBvtB,EAAKs1B,QAAQyD,e/ClHkB,K+CoHjCjZ,EAACsX,GAASI,YAAa,SAAA/W,GACrBA,EAAEsmB,kBACFtmB,EAAEkY,iBAEF34B,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK8hB,cAAcgB,KACjB5N,GAAUwB,yCAEZ1W,EAAKs1B,QAAQ/H,SAAQ,GACrBvtB,EAAKs1B,QAAQ0D,e/C7HkB,U+CkI7BmgB,gCAAR,WACE96C,KAAKo7C,mBAAmB7wC,UACxBvK,KAAKs7C,kBAAkB/wC,WAGjBuwC,wBAAR,WACE96C,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aACpChL,GAAaQ,sBAAuB5Z,KAAKw7C,sBAC3Cx7C,OAII86C,2BAAR,WACE96C,KAAKi7C,yBAA2Bj7C,KAAKi7C,yBAAyBv3C,KAAK1D,MACnEA,KAAKm7C,kBAAoBn7C,KAAKm7C,kBAAkBz3C,KAAK1D,MACrDA,KAAKk7C,yBAA2Bl7C,KAAKk7C,yBAAyBx3C,KAAK1D,MACnEA,KAAK+6C,oBAAsB/6C,KAAK+6C,oBAAoBr3C,KAAK1D,MACzDA,KAAKg7C,kBAAoBh7C,KAAKg7C,kBAAkBt3C,KAAK1D,OAG/C86C,gCAAR,WACE96C,KAAKyjB,cAAcgB,KAAK5N,GAAUgC,qBAG5BiiC,8BAAR,WACE96C,KAAKyjB,cAAcgB,KAAK5N,GAAUiC,mBAG5BgiC,+BAAR,SAA2BW,GACzBz7C,KAAKi3B,QAAQ9H,UAAUssB,GACvBz7C,KAAKyjB,cAAcgB,KAAK5N,GAAUK,wBAAyBukC,IAGrDX,8BAAR,WACE96C,KAAKi3B,QAAQ/H,SAASlvB,KAAK26C,UAC3B36C,KAAKyjB,cAAcgB,KAAK5N,GAAUM,uBAAwBnX,KAAK26C,WAGzDG,qCAAR,SAAiCY,GAC/B,IAAMC,EAAiB37C,KAAK66C,QAAUa,EAAQ,GACxCE,EAAkB5vC,KAAK+kB,IAAI,IAAK/kB,KAAKwI,IAAI,EAAGmnC,IAElD37C,KAAK67C,oBAAoBD,IAGnBd,qCAAR,SAAiCW,GAC/Bz7C,KAAK67C,oBAAoBJ,IAGnBX,gCAAR,SAA4BW,GAC1Bz7C,KAAK87C,mBAAmBL,GACpBz7C,KAAK26C,UACP36C,KAAKm7C,qBAIDL,gCAAR,WACE96C,KAAK+7C,eAAe/7C,KAAKi3B,QAAQ9F,aACjCnxB,KAAKg8C,cAAch8C,KAAKi3B,QAAQ2jB,YAGlCE,2BAAA,SAAeW,GACTA,IAAUz7C,KAAK66C,UAInB76C,KAAK66C,QAAUY,EAEfz7C,KAAK8jB,KAAKqL,UAAUnvB,KAAK66C,SACzB76C,KAAK8jB,KAAKoL,QAAQta,SAAS5U,KAAK66C,YAGlCC,0BAAA,SAAc1pB,GACRA,IAAYpxB,KAAK26C,WAIrB36C,KAAK26C,SAAWvpB,EAEhBpxB,KAAK8jB,KAAKqL,UAAUnvB,KAAK26C,SAAW,EAAI36C,KAAK66C,SAC7C76C,KAAK8jB,KAAKoL,QAAQlvB,KAAK26C,UAAY/lC,SAAS5U,KAAK66C,YAGnDC,iBAAA,WACE96C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QAGZo1B,iBAAA,WACE96C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAGZm1B,oBAAA,WACE96C,KAAK46B,sBACL56B,KAAK+f,gBACL/f,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAKi3B,QAAU,KACfj3B,KAAK40B,SAAW,MA5OXkmB,aAAa,gBACbA,OAAO56B,GACP46B,gBACL,SACA,eACA,UACA,iBACA,2+CCYF,WAAY5xC,GAAZ,aACUsV,cAAWkrB,YAASzC,mBAAgBhqB,iBAE5Ctb,EAAAD,YAAMub,UAEDwB,WAAaD,EAClB7c,EAAKizB,SAAW8U,EAEhB/nC,EAAK+c,OAASC,sBAEV5O,OAAQpO,EAAKid,WACbkW,OACEyiB,MAAO51C,EAAKizB,SAASjsB,IAAIgsB,GAAYvZ,oSAK3CzZ,EAAKs6C,0BAA4B9gB,GAC/Bx5B,EAAK+c,OACL,sBAGF/c,EAAKmoC,kBAAoB7C,EAAe8C,gBACtCpoC,EAAKs6C,2BAEHhnB,KAAMtzB,EAAKizB,SAASjsB,IAAIgsB,GAAYtZ,6BAIxC1Z,EAAKqnB,UAAWwN,gBAAgB,IAChC70B,EAAKqd,gBA0FT,OAjI6B/c,OA0CnBi6C,wBAAR,WACEl8C,KAAK23C,eAAiB33C,KAAK23C,eAAej0C,KAAK1D,MAE/CA,KAAKi8C,0BAA0BztC,iBAC7B,QACAxO,KAAK23C,iBAIDuE,0BAAR,WACEl8C,KAAKi8C,0BAA0BntC,oBAC7B,QACA9O,KAAK23C,iBAIDuE,2BAAR,WACEl8C,KAAKi8C,0BAA0Bvd,QAC/B1+B,KAAKye,WAAWm5B,iBAGlBsE,qBAAA,SAAS/1C,SAAEqwB,mBACLA,GACFx2B,KAAKi8C,0BAA0B18B,UAAUC,IACvCxf,KAAK4e,WAAWu9B,cAElBn8C,KAAKi8C,0BAA0B3/B,6BAC7BvM,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,qaAEpBzkC,KAAKi8C,0BAA0BhmC,aAC7B,aACAjW,KAAK40B,SAASjsB,IAAIgsB,GAAYrZ,yBAGhCtb,KAAK8pC,kBAAkBgG,QACrB9vC,KAAK40B,SAASjsB,IAAIgsB,GAAYpZ,6BAGhCvb,KAAKi8C,0BAA0B18B,UAAUG,OACvC1f,KAAK4e,WAAWu9B,cAElBn8C,KAAKi8C,0BAA0B3/B,ucAAY8/B,EACzCrsC,OAAQ/P,KAAK4e,WACb6lB,YAAazkC,KAAKykC,cAEpBzkC,KAAKi8C,0BAA0BhmC,aAC7B,aACAjW,KAAK40B,SAASjsB,IAAIgsB,GAAYvZ,0BAGhCpb,KAAK8pC,kBAAkBgG,QACrB9vC,KAAK40B,SAASjsB,IAAIgsB,GAAYtZ,6BAIlCrb,KAAK0e,OAAOzI,aApGe,yBAoGsBm9B,OAAO5c,KAG1D0lB,iBAAA,WACEl8C,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWa,SAG5Cy8B,iBAAA,WACEl8C,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/Cy8B,oBAAA,WACE,OAAOl8C,KAAK0e,QAGdw9B,oBAAA,WACEl8C,KAAK+f,gBACL/f,KAAKye,WAAa,KAElBze,KAAK8pC,kBAAkBv/B,UACvBvK,KAAK8pC,kBAAoB,KAErB9pC,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAKi8C,0BAA4B,KACjCj8C,KAAK0e,OAAS,KAEd1e,KAAK40B,SAAW,SA/HS1U,IAmI7Bg8B,GAAenX,UC1JbsX,mBACEpX,KAAM,SAACjT,GAAc,OAAAA,EAAKQ,UD0J9B0pB,GAAez7B,0JEhJf,kBAyBE,WAAYta,OACVqd,iBACAid,sBACAiJ,YACAzC,mBACAhqB,UAQAjd,KAAKyjB,cAAgBD,EACrBxjB,KAAK2gC,mBAAqBF,EAC1BzgC,KAAK40B,SAAW8U,EAChB1pC,KAAKolC,OAASnoB,EACdjd,KAAK2pC,gBAAkB1C,EAEvBjnC,KAAK6gC,gBAAkB,KAEvB7gC,KAAK2jB,iBAEL3jB,KAAK4jB,UAEL5jB,KAAKgf,cAELhf,KAAK+3C,kBAAiB,GAEjB/3C,KAAK2gC,mBAAmB9K,WAC3B71B,KAAK0lB,OAGP1lB,KAAKg6B,mBAyFT,OAtFE16B,sBAAIg9C,wBAAJ,WACE,OAAOt8C,KAAK8jB,KAAKC,2CAGXu4B,2BAAR,WACEt8C,KAAKkiC,kBAAoBliC,KAAKkiC,kBAAkBx+B,KAAK1D,OAG/Cs8C,wBAAR,WACEt8C,KAAK+f,cAAgB/f,KAAKyjB,cAAcW,aACpCvN,GAAUO,0BAA2BpX,KAAK+3C,mBAC5C/3C,OAIIs8C,oBAAR,WACE,IAAMpzC,GACJsV,WACEo5B,cAAe53C,KAAKkiC,mBAEtBwH,QAAS1pC,KAAK40B,SACdqS,eAAgBjnC,KAAK2pC,gBACrB1sB,MAAOjd,KAAKolC,QAGdplC,KAAK8jB,KAAO,IAAIw4B,EAAkBp8B,KAAKhX,IAGjCozC,6BAAR,WAAA,aACEt8C,KAAKy1C,aAAe,IAAItb,GAAoBn6B,KAAK2f,aAC9CoZ,GAASC,WAAY,SAAC5W,GACrBA,EAAEsmB,kBACF/mC,EAAK8hB,cAAcgB,KAAK5N,GAAUe,+BAEpCzR,EAAC4yB,GAASE,OAAQ,SAAC7W,GACjBA,EAAEsmB,kBACF/mC,EAAK8hB,cAAcgB,KAAK5N,GAAUe,oCAKhC0kC,gCAAR,WACEt8C,KAAKy1C,aAAalrC,WAGZ+xC,8BAAR,WACMt8C,KAAK6gC,gBACP7gC,KAAKuiC,kBAELviC,KAAKwiC,oBAID8Z,6BAAR,WACEt8C,KAAK2gC,mBAAmB9I,mBAGlBykB,4BAAR,WACEt8C,KAAK2gC,mBAAmB/I,kBAG1B0kB,6BAAA,SAAiB9lB,GACfx2B,KAAK6gC,gBAAkBrK,EACvBx2B,KAAK8jB,KAAKkF,UAAWwN,eAAgBx2B,KAAK6gC,mBAG5Cyb,iBAAA,WACEt8C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QAGZ42B,iBAAA,WACEt8C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAGZ22B,oBAAA,WACEt8C,KAAK46B,sBACL56B,KAAK+f,gBACL/f,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAK2gC,mBAAqB,KAC1B3gC,KAAK40B,SAAW,MAhJX0nB,aAAa,oBACbA,OAAOp8B,GACPo8B,gBACL,eACA,oBACA,UACA,iBACA,+lECCF,WAAYpzC,GAAZ,QACExH,mBACQ8c,cAAWkrB,YAASzC,0BAE5BtlC,EAAK8c,WAAaD,EAClB7c,EAAKizB,SAAW8U,EAEhB/nC,EAAK+c,OAASC,sBAEV5O,OAAQpO,EAAKid,WACbkW,OACEyiB,MAAO51C,EAAKizB,SAASjsB,IAAIgsB,GAAY5Z,uqBAK3CpZ,EAAK46C,OAASphB,GAAiBx5B,EAAK+c,OAAQ,gBAC5C/c,EAAK66C,cAAgBrhB,GAAiBx5B,EAAK+c,OAAQ,oBAEnD/c,EAAKmoC,kBAAoB7C,EAAe8C,gBAAgBpoC,EAAK+c,QAC3DuW,KAAMtzB,EAAKizB,SAASjsB,IAAIgsB,GAAY3Z,gBAGtCrZ,EAAK86C,QAAQvzC,EAAOsiC,MAEpB7pC,EAAKgiB,iBACLhiB,EAAKqd,gBAwET,OA5GuB/c,OAuCrBy6C,oBAAA,SAAQ7vB,GACFA,GACF7sB,KAAKu8C,OAAOh9B,UAAUG,OAAO1f,KAAK4e,WAAWa,QAC7Czf,KAAKw8C,cAAcj9B,UAAUC,IAAIxf,KAAK4e,WAAWa,QACjDzf,KAAKu8C,OAAOtmC,aAAa,MAAO4W,KAEhC7sB,KAAKu8C,OAAOh9B,UAAUC,IAAIxf,KAAK4e,WAAWa,QAC1Czf,KAAKw8C,cAAcj9B,UAAUG,OAAO1f,KAAK4e,WAAWa,QACpDzf,KAAKu8C,OAAO5lC,gBAAgB,SAIhC+lC,6BAAA,SAAiBj3B,GACXA,GACFzlB,KAAK0e,OAAOa,UAAUC,IAAIxf,KAAK4e,WAAWuqB,MAC1CnpC,KAAK8pC,kBAAkBO,WAEvBrqC,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWuqB,MAC7CnpC,KAAK8pC,kBAAkBM,YAInBsS,2BAAR,WACE18C,KAAK28C,aAAe38C,KAAK28C,aAAaj5C,KAAK1D,OAGrC08C,wBAAR,WACE18C,KAAK0e,OAAOlQ,iBAAiB,QAASxO,KAAK28C,eAGrCD,0BAAR,WACE18C,KAAK0e,OAAO5P,oBAAoB,QAAS9O,KAAK28C,eAGxCD,yBAAR,WACE18C,KAAK0e,OAAOggB,QACZ1+B,KAAKye,WAAWm+B,eAGlBF,iBAAA,WACE18C,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/Ci9B,iBAAA,WACE18C,KAAK0e,OAAOa,UAAUG,OAAO1f,KAAK4e,WAAWa,SAG/Ci9B,oBAAA,WACE,OAAO18C,KAAK0e,QAGdg+B,oBAAA,WACE18C,KAAK+f,gBACL/f,KAAKye,WAAa,KAElBze,KAAK8pC,kBAAkBv/B,UACvBvK,KAAK8pC,kBAAoB,KAErB9pC,KAAK0e,OAAOsB,YACdhgB,KAAK0e,OAAOsB,WAAWC,YAAYjgB,KAAK0e,QAG1C1e,KAAK0e,OAAS,KACd1e,KAAKu8C,OAAS,KACdv8C,KAAKw8C,cAAgB,KAErBx8C,KAAK8pC,kBAAoB,KACzB9pC,KAAK40B,SAAW,SA1GG1U,IA8GvBw8B,GAASj8B,iKC5GT,kBAeE,WAAYta,OACVqd,iBACAta,WACAwgC,YACAzC,mBAOAjnC,KAAKyjB,cAAgBD,EACrBxjB,KAAK40B,SAAW8U,EAChB1pC,KAAK2pC,gBAAkB1C,EAEvBjnC,KAAK2jB,iBAEL3jB,KAAK4jB,UACL5jB,KAAKg6B,mBAEL,IAAM8S,OACuB,iBAAhB5jC,EAAOsiC,KAAoBtiC,EAAOsiC,SAG/CxrC,KAAKy8C,QAAQ3P,EAAWvf,KACxBvtB,KAAK68C,qBAAqB/P,EAAWthC,UAgGzC,OA7FElM,sBAAIw9C,wBAAJ,WACE,OAAO98C,KAAK8jB,KAAKC,2CAGX+4B,2BAAR,WACE98C,KAAKwpC,iBAAmBxpC,KAAKwpC,iBAAiB9lC,KAAK1D,OAG7C88C,oBAAR,WACE,IAAM5zC,GACJsV,WACEo+B,YAAa58C,KAAKwpC,kBAEpBE,QAAS1pC,KAAK40B,SACdqS,eAAgBjnC,KAAK2pC,iBAGvB3pC,KAAK8jB,KAAO,IAAIg5B,EAAK58B,KAAKhX,IAGpB4zC,6BAAR,WAAA,aACE98C,KAAKy1C,aAAe,IAAItb,GAAoBn6B,KAAK2f,aAC9CoZ,GAASC,WAAY,SAAA5W,GACpBA,EAAEsmB,kBACF/mC,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK6nC,oBAEPrjC,EAAC4yB,GAASE,OAAQ,SAAA7W,GAChBA,EAAEsmB,kBACF/mC,EAAK8hB,cAAcgB,KAAK5N,GAAUe,8BAClCjW,EAAK6nC,yBAKHsT,gCAAR,WACE98C,KAAKy1C,aAAalrC,WAGZuyC,6BAAR,WACM98C,KAAKo1B,WACPp1B,KAAKo1B,aAYT0nB,oBAAA,SAAQvvB,GACNvtB,KAAK8jB,KAAK24B,QAAQlvB,IAgBpBuvB,iCAAA,SAAqBtxC,GACnBxL,KAAKo1B,UAAY5pB,EACjBxL,KAAK8jB,KAAK2lB,iBAAiB70B,QAAQ5U,KAAKo1B,aAG1C0nB,iBAAA,WACE98C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK4B,QAGZo3B,iBAAA,WACE98C,KAAK0jB,UAAW,EAChB1jB,KAAK8jB,KAAK6B,QAGZm3B,oBAAA,WACE98C,KAAK46B,sBACL56B,KAAK8jB,KAAKvZ,UACVvK,KAAK8jB,KAAO,KAEZ9jB,KAAKyjB,cAAgB,KACrBzjB,KAAK40B,SAAW,MArIXkoB,aAAa,OACbA,OAAO58B,GACP48B,gBAAgB,SAAU,eAAgB,UAAW,kBA6F5Dj3B,GADCxd,iCAkBDwd,GADCxd,mDC1FK1E,aAEK8F,IACXoa,iBACA4C,gBACA+H,UACAiG,gBACAM,WAEA0C,qBAEAY,mBACA0kB,oBACA5gB,cAEA8E,UACAwC,wBAEA6B,WACAY,UAEAuB,eAEAqB,YACA2B,iBACAuS,SAEA1Q,eACAwI,mBACAkD,eACAa,eACAiC,iBACAwB,qBACAQ,QAEAvM,mBAGI0M,GAAmC39C,OAAO+F,KAAKoE,IAAStF,OAC5D,SAAC84C,EAAkCj8C,GACjC,IAAM8I,EAASL,GAAQzI,GACvB,IAAK8I,EAAOJ,WACV,MAAM,IAAI3H,MAAM,4BAA4Bf,GAI9C,OADAi8C,EAAUnzC,EAAOJ,YAAc/F,GAAQmG,GAAQjH,SACxCo6C,OC9EErxC,GAA8B,oBAAX9E,OAMnBo2C,IACXC,KAAK,EACLvxB,KAAK,EACLE,MAAM,EACNN,KAAK,EACLE,MAAM,EACNM,KAAK,EACLI,KAAK,EACLF,KAAK,IAIP,WACE,GAAKtgB,GAAL,CAGAsxC,GAAyBC,IACvB,sBAAuBr2C,QAAU,gBAAiBA,OACpD,IAAMuhB,EAAQxc,SAASwQ,cAAc,SACJ,mBAAtBgM,EAAM+0B,eAIf/0B,EAAM+0B,YAAY,0BAClB/0B,EAAM+0B,YAAY,oCAElBF,GAAyBtxB,KAAM,GAE7BvD,EAAM+0B,YAAY,0BACpBF,GAAyBpxB,MAAO,GAE9BzD,EAAM+0B,YAAY,eACpBF,GAAyB1xB,KAAM,GAE7BnD,EAAM+0B,YAAY,gBACpBF,GAAyBxxB,MAAO,GAE9BrD,EAAM+0B,YAAY,eACpBF,GAAyBlxB,KAAM,GAE7B3D,EAAM+0B,YAAY,qBACpBF,GAAyB9wB,KAAM,GAE7B/D,EAAM+0B,YAAY,sBACpBF,GAAyBhxB,KAAM,KAInCmxB,GC/CA,IAAMC,IACJC,QAAS,EACTC,QAAS,EACTC,OAAQ,EACRC,kBAAmB,eASnBC,EACAphB,GAuJA,kBA3IE,WAAY/Y,GACVxjB,KAAKsqB,aAAe,KACpBtqB,KAAKwjB,aAAeA,EACpBxjB,KAAK49C,aAAe,EAEpB59C,KAAK2jB,iBAoIT,OAlJSk6B,cAAP,WACE,OAAOX,GAAyBS,IAgBlCr+C,sBAAIu+C,8BAAJ,WACE,OAAO79C,KAAKsqB,aAAatqB,KAAK49C,cAAc/wB,qCAG9CvtB,sBAAIu+C,oCAAJ,6CAKAv+C,sBAAIu+C,oCAAJ,WACE,OAAQ9P,SAAS/tC,KAAKkuB,aAAa7D,2CAGrC/qB,sBAAIu+C,yCAAJ,WAEE,OAAO,mCAGTv+C,sBAAIu+C,kCAAJ,WAEE,OAAO,mCAGTv+C,sBAAIu+C,mCAAJ,WACE,OAAO,mCAWTv+C,sBAAIu+C,+CAAJ,WACE,OAAOthB,mCAGTj9B,sBAAIu+C,mCAAJ,WACE,OAAOF,mCAGTr+C,sBAAIu+C,6BAAJ,WACE,GAAI79C,KAAKkuB,aAAc,CACf,IAAA/nB,oBAAE0rB,aAAUzH,gBAEZqS,WlBjEwB5K,GACpC,IAAI3mB,EAAO,EAEX,IAAK2mB,IAAaA,EAASlxB,OACzB,OAAOuK,EAGT,IAAK,IAAI1K,EAAI,EAAGA,EAAIqxB,EAASlxB,OAAQH,GAAK,EACxC0K,GAAQ2mB,EAASwiB,IAAI7zC,GAAKqxB,EAASuiB,MAAM5zC,GAG3C,OAAO0K,EkBsD2B4yC,CAAsBjsB,GAC5C6K,EAAuBoa,GAC3BjlB,EACAzH,GAGF,YACKpqB,KAAKsqB,aAAa,IACrBiS,iBAAkBv8B,KAAKqrB,4BACvBoR,sBACAC,yBAIJ,0CAGMmhB,2BAAR,WACE79C,KAAK+9C,gBAAkB/9C,KAAK+9C,gBAAgBr6C,KAAK1D,OAGnD69C,oBAAA,SAAQ9yB,GACN,OAAOA,IAAc4yB,GAGvBE,4BAAA,SAAgBvzB,GACdtqB,KAAKsqB,aAAeA,GAGduzB,sBAAR,SAAkBG,EAAeC,GAC/Bj+C,KAAKwjB,aAAaiB,KAAKrL,GAAaC,OAClC+T,UAAW4wB,EACXL,aACAO,eAAgB,SAChBC,cAAeF,KAIXJ,4BAAR,WACE,IAAMG,EAAQh+C,KAAKkuB,aAAa8vB,MAChC,GAAKA,EAKL,OAAQA,EAAMI,MACZ,KAAKd,GAAmBC,QAGtB,MACF,KAAKD,GAAmBE,QACtBx9C,KAAKq+C,UAAUhxB,GAAO1S,aAAcqjC,GACpC,MACF,KAAKV,GAAmBG,OACtBz9C,KAAKq+C,UAAUhxB,GAAOxS,MAAOmjC,GAC7B,MACF,KAAKV,GAAmBI,kBAMtB19C,KAAKq+C,UAAUhxB,GAAO1S,aAAcqjC,GAEpC,MACF,QACEh+C,KAAKq+C,UAAUhxB,GAAOvS,QAASkjC,QAzBjCh+C,KAAKq+C,UAAUhxB,GAAOvS,QAAS,OA8BnC+iC,mBAAA,SAAO3vB,GACLluB,KAAKkuB,aAAeA,EACpBluB,KAAKkuB,aAAa1f,iBAAiB,QAASxO,KAAK+9C,iBACjD/9C,KAAKkuB,aAAaX,IAAMvtB,KAAKsqB,aAAatqB,KAAK49C,cAAc/wB,KAG/DgxB,mBAAA,WACE79C,KAAKkuB,aAAapf,oBAAoB,QAAS9O,KAAK+9C,iBACpD/9C,KAAKkuB,aAAavX,gBAAgB,OAClC3W,KAAKkuB,aAAe,WCpK1B,IAAMowB,IACJC,GACEroC,qBAAiB4V,KACjB3V,iCAA4BqoC,iBAE9BD,GACEroC,qBAAiB0V,IACjBzV,iCAA4BqoC,iBAE9BD,GACEroC,qBAAiBsV,IACjBrV,iCAA4BsoC,oBAE9BF,GACEroC,qBAAiBwV,KACjBvV,iCAA4BsoC,oBAE9BF,GACEroC,qBAAiB8V,IACjB7V,iCAA4BsoC,oBAE9BF,GACEroC,qBAAiBkW,IACjBjW,iCAA4BsoC,oBAE9BF,GACEroC,qBAAiBgW,IACjB/V,iCAA4BsoC,qBC1B5BC,MACAryB,GAA8BiyB,WAErBr6C,GAAY06C,EAAoBr4C,kBAC7CrC,GAAUwB,SAASm5C,IACnB,IAAM91C,GAAsBxJ,OAAO+F,KAAKu5C,gBAET5pB,EAAYlrB,GACzC40C,GAAkB1pB,GAAMlrB,cAGcghB,GACtCuB,GAAiB7nB,KAAKsmB,iBAItB4zB,oBAIAryB,GAAuBiyB,uBAIvB32C,EACAqB,gBADArB,MAGA,IAAMkB,EAAQ5E,GAAU46C,cAElB91C,EAAwBzJ,OAAO+F,KAAKq5C,IAY1C,OAVI31C,EAAsBpI,QACxBoI,EAAsBzD,QAAQ,SAAAoE,GAC5B,OAAAb,EAAMi2C,cAAcp1C,EAAYg1C,GAAkBh1C,IAChDhH,SAAUi8C,EAAoBn9C,SAASsB,WAK7C+F,EAAMI,cAAc,4BAA6BojB,IAE1C,IAAI0yB,EACTp3C,EACAkB,EACAC,GACAC,EACAC,wJCjBF6N,aACAuC,gBACAub,eACAqqB,wCACAC,gEACAC,iBACAC,eACAC,oCACA7Q,WACA8Q,qBACAC"}