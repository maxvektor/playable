{"version":3,"file":"playable.bundle.min.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/core/dependency-container/errors/ExtendableError.ts","../../src/core/dependency-container/constants/Lifetime.ts","../../src/core/dependency-container/errors/NotAFunctionError.ts","../../src/core/dependency-container/registrations.ts","../../src/core/dependency-container/errors/ResolutionError.ts","../../src/core/dependency-container/utils/nameValueToObject.ts","../../src/core/dependency-container/createContainer.ts","../../src/core/dependency-container/index.ts","../../src/utils/device-detection.ts","../../src/core/config.ts","../../src/core/player-api-decorator.ts","../../src/core/player-facade.ts","../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","../../src/modules/root-container/utils/interaction-type.ts","../../src/modules/root-container/utils/focus-source.ts","../../src/constants/media-stream.ts","../../src/constants/events/ui.ts","../../src/constants/engine-state.ts","../../src/constants/events/video.ts","../../src/constants/errors.ts","../../src/constants/text-labels.ts","../../src/constants/live-state.ts","../../src/modules/ui/core/htmlToElement.ts","../../node_modules/classnames/index.js","../../src/modules/ui/core/stylable.ts","../../src/modules/ui/core/extendStyles.ts","../../src/modules/ui/core/view.ts","../../node_modules/style-inject/dist/style-inject.es.js","../../src/modules/root-container/root-container.view.ts","../../src/modules/ui/core/element-queries/utils.ts","../../src/modules/ui/core/element-queries/isElementMatchesSelector.ts","../../src/modules/ui/core/element-queries/getQueriesForElement.ts","../../src/modules/ui/core/element-queries/element-queries.ts","../../src/modules/root-container/root-container.ts","../../src/modules/root-container/utils/focus-within.ts","../../node_modules/eventemitter3/index.js","../../src/modules/event-emitter/event-emitter.ts","../../src/modules/playback-engine/state-engine.ts","../../src/modules/playback-engine/native-events-broadcaster.ts","../../src/modules/playback-engine/utils/adapters-resolver.ts","../../src/modules/playback-engine/utils/detect-stream-type.ts","../../src/modules/playback-engine/adapters-strategy.ts","../../src/modules/playback-engine/playback-engine.ts","../../src/modules/ui/core/theme/utils/hexToRgb.ts","../../src/modules/ui/core/theme/utils/transperentizeColor.ts","../../src/modules/ui/core/theme/utils/camelToKebab.ts","../../src/modules/ui/core/theme/utils/getUniqueId.ts","../../src/modules/ui/core/theme/utils/generateClassNames.ts","../../src/modules/ui/core/theme/style-sheet.ts","../../src/modules/ui/core/theme/theme-service.ts","../../src/modules/text-map/default-texts.ts","../../src/modules/text-map/text-map.ts","../../src/modules/full-screen-manager/desktop.ts","../../src/modules/full-screen-manager/ios.ts","../../src/modules/full-screen-manager/full-screen-manager.ts","../../src/modules/playback-engine/live-state-engine.ts","../../src/utils/logger.ts","../../src/utils/keyboard-interceptor.ts","../../src/modules/keyboard-control/keyboard-control.ts","../../src/modules/ui/core/getElementByHook.ts","../../src/modules/ui/core/toggleElementClass.ts","../../src/modules/ui/debug-panel/debug-panel.view.ts","../../src/modules/ui/debug-panel/syntaxHighlight.ts","../../src/modules/ui/debug-panel/debug-panel.ts","../../src/modules/ui/screen/types.ts","../../src/modules/ui/screen/screen.view.ts","../../src/modules/ui/screen/screen.ts","../../src/modules/ui/interaction-indicator/interaction-indicator.view.ts","../../src/modules/ui/interaction-indicator/interaction-indicator.ts","../../src/modules/ui/overlay/overlay.view.ts","../../src/modules/ui/overlay/overlay.theme.ts","../../src/modules/ui/overlay/overlay.ts","../../src/modules/ui/loader/loader.view.ts","../../src/modules/ui/loader/loader.ts","../../src/modules/ui/main-ui-block/main-ui-block.view.ts","../../src/modules/ui/main-ui-block/main-ui-block.ts","../../src/modules/ui/top-block/top-block.view.ts","../../src/modules/ui/top-block/top-block.ts","../../src/modules/ui/title/title.view.ts","../../src/modules/ui/title/title.theme.ts","../../src/modules/ui/title/title.ts","../../src/modules/ui/live-indicator/live-indicator.view.ts","../../src/modules/ui/live-indicator/live-indicator.ts","../../src/modules/ui/bottom-block/bottom-block.view.ts","../../src/modules/ui/bottom-block/bottom-block.ts","../../src/modules/ui/core/tooltip/types.ts","../../src/modules/ui/core/tooltip/tooltip.ts","../../src/modules/ui/core/tooltip/utils/getTooltipPositionByReferenceNode.ts","../../src/modules/ui/core/tooltip/tooltip-reference.ts","../../src/modules/ui/core/tooltip/tooltip-container.ts","../../src/modules/ui/core/tooltip/tooltip-service.ts","../../src/modules/ui/controls/progress/progress.theme.ts","../../src/modules/ui/controls/progress/types.ts","../../src/modules/ui/controls/progress/progress.view.ts","../../src/modules/ui/controls/progress/utils/getProgressTimeTooltipPosition.ts","../../src/utils/video-data.ts","../../src/modules/ui/core/utils/formatTime.ts","../../src/modules/ui/controls/progress/progress.ts","../../src/modules/ui/controls/play/play.view.ts","../../src/modules/ui/controls/play/play.theme.ts","../../src/modules/ui/controls/play/play.ts","../../src/modules/ui/controls/time/time.view.ts","../../src/modules/ui/controls/time/time.theme.ts","../../src/modules/ui/controls/time/time.ts","../../src/modules/ui/controls/volume/volume.theme.ts","../../src/modules/ui/controls/volume/volume.view.ts","../../src/modules/ui/controls/volume/volume.ts","../../src/modules/ui/controls/full-screen/full-screen.view.ts","../../src/modules/ui/controls/full-screen/full-screen.theme.ts","../../src/modules/ui/controls/full-screen/full-screen.ts","../../src/modules/ui/controls/logo/logo.view.ts","../../src/modules/ui/controls/logo/logo.ts","../../src/modules/ui/controls/download/download.view.ts","../../src/modules/ui/controls/download/download.theme.ts","../../src/modules/ui/controls/download/download.ts","../../src/modules/ui/preview-service/adapter.ts","../../src/modules/ui/preview-service/preview-service.ts","../../src/modules/ui/preview-thumbnail/preview-thumbnail.ts","../../src/modules/ui/preview-full-size/preview-full-size.ts","../../src/core/default-modules.ts","../../src/utils/environment-detection.ts","../../src/modules/playback-engine/adapters/native.ts","../../src/modules/playback-engine/adapters/default-set.ts","../../src/core/player-factory.ts","../../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export default class ExtendableError extends Error {\n  constructor(message: string) {\n    super(message);\n\n    Object.defineProperty(this, 'message', {\n      enumerable: false,\n      value: message,\n    });\n\n    Object.defineProperty(this, 'name', {\n      enumerable: false,\n      value: this.constructor.name,\n    });\n\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n","enum Lifetime {\n  SINGLETON = 'singleton',\n  TRANSIENT = 'transient',\n  SCOPED = 'scoped',\n}\n\nexport default Lifetime;\n","import ExtendableError from './ExtendableError';\n\nexport default class NotAFunctionError extends ExtendableError {\n  constructor(functionName: string, expectedType: string, givenType: string) {\n    super(\n      `The function ${functionName} expected a ${expectedType}, ${givenType} given.`,\n    );\n  }\n}\n","import { __assign } from 'tslib';\n\nimport NotAFunctionError from './errors/NotAFunctionError';\n\nimport Lifetime from './constants/Lifetime';\nimport { IOptions } from './types';\n\nimport { Container } from './createContainer';\n\nexport const PROPERTY_FOR_DEPENDENCIES = 'dependencies';\n\nexport const makeFluidInterface = (obj: IOptions) => {\n  const setLifetime = (value: Lifetime) => {\n    obj.lifetime = value;\n    return obj;\n  };\n\n  return {\n    setLifetime,\n    transient: () => setLifetime(Lifetime.TRANSIENT),\n    scoped: () => setLifetime(Lifetime.SCOPED),\n    singleton: () => setLifetime(Lifetime.SINGLETON),\n  };\n};\n\nexport const asValue = (value: any): any => {\n  const resolve = () => value;\n\n  return {\n    resolve,\n    lifetime: Lifetime.TRANSIENT,\n  };\n};\n\nexport const asFunction: any = (fn: Function, options?: IOptions): any => {\n  if (typeof fn !== 'function') {\n    throw new NotAFunctionError('asFunction', 'function', typeof fn);\n  }\n\n  const defaults = {\n    lifetime: Lifetime.TRANSIENT,\n  };\n\n  options = __assign({}, defaults, options);\n\n  const resolve = generateResolve(fn);\n  const result = {\n    resolve,\n    lifetime: options.lifetime,\n  };\n  result.resolve = resolve.bind(result);\n  __assign(result, makeFluidInterface(result));\n\n  return result;\n};\n\nexport const asClass: any = (\n  Type: FunctionConstructor,\n  options?: IOptions,\n): any => {\n  if (typeof Type !== 'function') {\n    throw new NotAFunctionError('asClass', 'class', typeof Type);\n  }\n\n  const defaults = {\n    lifetime: Lifetime.TRANSIENT,\n  };\n\n  options = __assign({}, defaults, options);\n\n  // A function to handle object construction for us, as to make the generateResolve more reusable\n  const newClass = (...args: any[]) => new Type(...args);\n\n  const resolve = generateResolve(newClass, Type);\n  const result = {\n    resolve,\n    lifetime: options.lifetime,\n  };\n  result.resolve = resolve.bind(result);\n  __assign(result, makeFluidInterface(result));\n\n  return result;\n};\n\nfunction generateResolve(fn: Function, dependencyParseTarget?: any): any {\n  // If the function used for dependency parsing is falsy, use the supplied function\n  if (!dependencyParseTarget) {\n    dependencyParseTarget = fn;\n  }\n  // Try to resolve the dependencies\n  const dependencies = dependencyParseTarget[PROPERTY_FOR_DEPENDENCIES] || [];\n\n  // Use a regular function instead of an arrow function to facilitate binding to the registration.\n  return function resolve(container: Container) {\n    if (dependencies.length > 0) {\n      const wrapper: {} = dependencies.reduce(\n        (wrapper: any, dependency: string) => {\n          wrapper[dependency] = container.resolve(dependency);\n          return wrapper;\n        },\n        {},\n      );\n\n      return fn(wrapper, container);\n    }\n    return fn(container);\n  };\n}\n\nexport default {\n  asValue,\n  asFunction,\n  asClass,\n};\n","import ExtendableError from './ExtendableError';\n\nconst createErrorMessage = (\n  name: string,\n  resolutionStack: string[],\n  message?: string,\n) => {\n  resolutionStack = resolutionStack.slice();\n  resolutionStack.push(name);\n  const resolutionPathString = resolutionStack.join(' -> ');\n  let msg = `Could not resolve '${name}'.`;\n  if (message) {\n    msg += ` ${message} \\n\\n Resolution path: ${resolutionPathString}`;\n  }\n\n  return msg;\n};\n\nexport default class ResolutionError extends ExtendableError {\n  constructor(name: string, resolutionStack: string[], message?: string) {\n    super(createErrorMessage(name, resolutionStack, message));\n  }\n}\n","import { __assign } from 'tslib';\n\nexport default function(name: Object | string, value: any): Object {\n  if (typeof name !== 'object') {\n    return __assign({ [name]: value });\n  }\n\n  return name;\n}\n","import { __assign } from 'tslib';\n\nimport { asClass, asFunction, asValue } from './registrations';\nimport ResolutionError from './errors/ResolutionError';\nimport nameValueToObject from './utils/nameValueToObject';\nimport Lifetime from './constants/Lifetime';\nimport { IOptions } from './types';\n\nconst FAMILY_TREE = '__familyTree__';\n\nexport class Container {\n  private _registrations: any = {};\n  private _resolutionStack: string[] = [];\n  private _parentContainer: Container;\n\n  options: IOptions;\n  cache: any;\n  [FAMILY_TREE]: Array<Container>;\n\n  constructor(options?: IOptions, _parentContainer?: Container) {\n    this.options = __assign({}, options);\n    this._parentContainer = _parentContainer || null;\n    this[FAMILY_TREE] = this._parentContainer\n      ? [this].concat(this._parentContainer[FAMILY_TREE] as any)\n      : [this];\n    this.cache = {};\n  }\n\n  get registrations(): any {\n    return __assign(\n      {},\n      this._parentContainer && this._parentContainer.registrations,\n      this._registrations,\n    );\n  }\n\n  private _registerAs(\n    fn: Function,\n    verbatimValue: boolean,\n    name: Object | string,\n    value?: any,\n    options?: IOptions,\n  ) {\n    const registrations: any = nameValueToObject(name, value);\n\n    Object.keys(registrations).forEach(key => {\n      let valueToRegister = registrations[key];\n\n      // If we have options, copy them over.\n      options = __assign({}, options);\n\n      /* ignore coverage */\n      if (!verbatimValue && Array.isArray(valueToRegister)) {\n        // The ('name', [value, options]) style\n        options = __assign({}, options, valueToRegister[1]);\n        valueToRegister = valueToRegister[0];\n      }\n\n      this.register(key, fn(valueToRegister, options));\n    });\n\n    // Chaining\n    return this;\n  }\n\n  createScope() {\n    return new Container(this.options, this);\n  }\n\n  register(name: Object | string, registration?: any): Container {\n    const obj: any = nameValueToObject(name, registration);\n    Object.keys(obj).forEach(key => {\n      this._registrations[key] = obj[key];\n    });\n\n    return this;\n  }\n\n  registerClass(\n    name: Object | string,\n    value?: any,\n    options?: IOptions,\n  ): Container {\n    return this._registerAs(asClass, false, name, value, options);\n  }\n\n  registerFunction(\n    name: Object | string,\n    value?: any,\n    options?: IOptions,\n  ): Container {\n    return this._registerAs(asFunction, false, name, value, options);\n  }\n\n  registerValue(\n    name: Object | string,\n    value?: any,\n    options?: IOptions,\n  ): Container {\n    return this._registerAs(asValue, true, name, value, options);\n  }\n\n  resolve(name: string) {\n    // We need a reference to the root container,\n    // so we can retrieve and store singletons.\n    const root: Container = this[FAMILY_TREE][this[FAMILY_TREE].length - 1];\n\n    try {\n      // Grab the registration by name.\n      const registration = this.registrations[name];\n\n      if (this._resolutionStack.indexOf(name) > -1) {\n        throw new ResolutionError(\n          name,\n          this._resolutionStack,\n          'Cyclic dependencies detected.',\n        );\n      }\n\n      if (!registration) {\n        throw new ResolutionError(name, this._resolutionStack);\n      }\n\n      // Pushes the currently-resolving module name onto the stack\n      this._resolutionStack.push(name);\n\n      // Do the thing\n      let cached;\n      let resolved;\n\n      switch (registration.lifetime) {\n        case Lifetime.TRANSIENT:\n          // Transient lifetime means resolve every time.\n          resolved = registration.resolve(this);\n          break;\n        case Lifetime.SINGLETON:\n          // Singleton lifetime means cache at all times, regardless of scope.\n          cached = root.cache[name];\n          if (cached === undefined) {\n            resolved = registration.resolve(this);\n            root.cache[name] = resolved;\n          } else {\n            resolved = cached;\n          }\n          break;\n        case Lifetime.SCOPED:\n          // Scoped lifetime means that the container\n          // that resolves the registration also caches it.\n          // When a registration is not found, we travel up\n          // the family tree until we find one that is cached.\n\n          // Note: The first element in the family tree is this container.\n          for (const _containerFromFamiltyTree of this[FAMILY_TREE]) {\n            cached = _containerFromFamiltyTree.cache[name];\n            if (cached !== undefined) {\n              // We found one!\n              resolved = cached;\n              break;\n            }\n          }\n\n          // If we still have not found one, we need to resolve and cache it.\n          if (cached === undefined) {\n            resolved = registration.resolve(this);\n            this.cache[name] = resolved;\n          }\n          break;\n        default:\n          throw new ResolutionError(\n            name,\n            this._resolutionStack,\n            `Unknown lifetime \"${registration.lifetime}\"`,\n          );\n      }\n      // Pop it from the stack again, ready for the next resolution\n      this._resolutionStack.pop();\n      return resolved;\n    } catch (err) {\n      // When we get an error we need to reset the stack.\n      this._resolutionStack = [];\n      throw err;\n    }\n  }\n}\n\nexport default function createContainer(\n  options?: IOptions,\n  __parentContainer?: Container,\n): Container {\n  return new Container(options, __parentContainer);\n}\n","import createContainer from './createContainer';\nimport Lifetime from './constants/Lifetime';\nimport registrations from './registrations';\n\nexport default {\n  createContainer,\n  Lifetime,\n  ...registrations,\n};\n","declare const window: {\n  navigator: any;\n  MSStream: any;\n};\n\nconst IPHONE_PATTERN = /iphone/i;\nconst IPOD_PATTERN = /ipod/i;\nconst IPAD_PATTERN = /ipad/i;\nconst ANDROID_PATTERN = /(android)/i;\nconst SAFARI_PATTERN = /^((?!chrome|android).)*safari/i;\nconst DESKTOP_SAFARI_PATTERN = /^((?!chrome|android|iphone|ipod|ipad).)*safari/i;\n\n// There is some iPhone/iPad/iPod in Windows Phone...\n// https://msdn.microsoft.com/en-us/library/hh869301(v=vs.85).aspx\nconst isIE = () => !!window.MSStream;\n\nconst getUserAgent = () => window.navigator && window.navigator.userAgent;\n\nconst isIPhone = () => !isIE() && IPHONE_PATTERN.test(getUserAgent());\n\nconst isIPod = () => !isIE() && IPOD_PATTERN.test(getUserAgent());\n\nconst isIPad = () => !isIE() && IPAD_PATTERN.test(getUserAgent());\n\nconst isIOS = () => isIPhone() || isIPod() || isIPad();\n\nconst isAndroid = () => ANDROID_PATTERN.test(getUserAgent());\n\nconst isDesktopSafari = () => DESKTOP_SAFARI_PATTERN.test(getUserAgent());\n\nconst isSafari = () => SAFARI_PATTERN.test(getUserAgent());\n\nexport {\n  isIPhone,\n  isIPod,\n  isIPad,\n  isIOS,\n  isAndroid,\n  isDesktopSafari,\n  isSafari,\n};\n","import { isIOS, isAndroid } from '../utils/device-detection';\n\nimport { ITitleConfig } from '../modules/ui/title/types';\nimport { IFullScreenConfig } from '../modules/full-screen-manager/types';\nimport { ILogoConfig } from '../modules/ui/controls/logo/types';\nimport { IOverlayConfig } from '../modules/ui/overlay/types';\nimport { ITextMapConfig } from '../modules/text-map/types';\nimport { IScreenConfig } from '../modules/ui/screen/types';\nimport { IMainUIBlockConfig } from '../modules/ui/main-ui-block/types';\nimport {\n  PreloadTypes,\n  MediaSource,\n  CrossOriginValue,\n} from '../modules/playback-engine/types';\nimport { IPlayerSize } from '../modules/root-container/types';\n\nexport interface IPlayerConfig {\n  src?: MediaSource;\n\n  size?: IPlayerSize;\n\n  videoElement?: HTMLVideoElement;\n\n  preload?: PreloadTypes;\n  autoPlay?: boolean;\n  loop?: boolean;\n  muted?: boolean;\n  volume?: number;\n  playInline?: boolean;\n  crossOrigin?: CrossOriginValue;\n\n  title?: boolean | ITitleConfig;\n  loader?: boolean;\n  screen?: IScreenConfig;\n  controls?: boolean | IMainUIBlockConfig;\n  overlay?: boolean | IOverlayConfig;\n  fullScreen?: boolean | IFullScreenConfig;\n  logo?: boolean | ILogoConfig;\n\n  texts?: ITextMapConfig;\n\n  showInteractionIndicator?: boolean;\n  fillAllSpace?: boolean;\n  disableControlWithKeyboard?: boolean;\n  [key: string]: any;\n}\n\nconst convertUIConfigForIOS = (params: IPlayerConfig): IPlayerConfig => ({\n  ...params,\n  showInteractionIndicator: false,\n  screen: {\n    ...params.screen,\n    disableClickProcessing: true,\n    nativeControls: true,\n  },\n  title: false,\n  loader: false,\n  controls: false,\n});\n\nconst convertUIConfigForAndroid = (params: IPlayerConfig): IPlayerConfig => ({\n  ...params,\n  screen: {\n    ...params.screen,\n    disableClickProcessing: true,\n  },\n});\n\nconst convertToDeviceRelatedConfig = (params: IPlayerConfig): IPlayerConfig => {\n  if (isIOS()) {\n    return convertUIConfigForIOS(params);\n  }\n\n  if (isAndroid()) {\n    return convertUIConfigForAndroid(params);\n  }\n\n  return params;\n};\n\nexport default convertToDeviceRelatedConfig;\n","export const PLAYER_API_PROPERTY = '___playerAPI';\n\nconst checkDescriptorsOnEquality = (\n  desc1: PropertyDescriptor,\n  desc2: PropertyDescriptor,\n) =>\n  desc1.value === desc2.value &&\n  desc1.get === desc2.get &&\n  desc1.set === desc2.set;\n\nconst playerAPI = (name?: string) => (\n  target: any,\n  property: string,\n  descriptor: PropertyDescriptor,\n) => {\n  const methodName = name || property;\n\n  if (!target[PLAYER_API_PROPERTY]) {\n    target[PLAYER_API_PROPERTY] = {};\n  }\n\n  if (target[PLAYER_API_PROPERTY][methodName]) {\n    if (\n      !checkDescriptorsOnEquality(\n        target[PLAYER_API_PROPERTY][methodName],\n        descriptor,\n      )\n    ) {\n      throw new Error(\n        `Method \"${methodName}\" for public API in ${\n          target.constructor.name\n        } is already defined`,\n      );\n    }\n  }\n\n  target[PLAYER_API_PROPERTY][methodName] = descriptor;\n};\n\nexport default playerAPI;\n","import { Container } from './dependency-container/createContainer';\nimport convertToDeviceRelatedConfig, { IPlayerConfig } from './config';\nimport { PLAYER_API_PROPERTY } from '../core/player-api-decorator';\nimport { IThemeConfig } from '../modules/ui/core/theme';\n\nexport default class Player {\n  //@ts-ignore\n  private _config: IPlayerConfig;\n  private _defaultModules: { [id: string]: any };\n  private _additionalModules: { [id: string]: any };\n  private _destroyed: boolean;\n\n  constructor(\n    params: IPlayerConfig,\n    scope: Container,\n    defaultModulesNames: string[] = [],\n    additionalModuleNames: string[] = [],\n    themeConfig?: IThemeConfig,\n  ) {\n    scope.registerValue({\n      config: convertToDeviceRelatedConfig(params),\n    });\n\n    scope.registerValue({\n      themeConfig,\n    });\n\n    this._config = scope.resolve('config');\n\n    this._resolveAdditionalModules(scope, additionalModuleNames);\n    this._resolveDefaultModules(scope, defaultModulesNames);\n  }\n\n  /*\n    Separation for default and additional modules is needed\n    for future implementation of public methods of resolved modules and\n    could be abolished in future\n  */\n\n  private _resolveDefaultModules(scope: Container, modulesNames: string[]) {\n    this._defaultModules = modulesNames.reduce(\n      (modules: { [id: string]: any }, moduleName: string) => {\n        if (this._additionalModules[moduleName]) {\n          return modules;\n        }\n\n        const resolvedModule = scope.resolve(moduleName);\n\n        this._addPlayerAPIFromModule(resolvedModule);\n\n        modules[moduleName] = resolvedModule;\n        return modules;\n      },\n      {},\n    );\n  }\n\n  private _resolveAdditionalModules(scope: Container, modulesNames: string[]) {\n    this._additionalModules = modulesNames.reduce(\n      (modules: { [id: string]: any }, moduleName: string) => {\n        const resolvedModule = scope.resolve(moduleName);\n\n        this._addPlayerAPIFromModule(resolvedModule);\n\n        modules[moduleName] = resolvedModule;\n        return modules;\n      },\n      {},\n    );\n  }\n\n  private _getWrappedCallToModuleFunction(module: any, fn: Function) {\n    return (...args: any[]) => {\n      if (this._destroyed) {\n        throw new Error('Player instance is destroyed');\n      }\n\n      return fn.apply(module, args);\n    };\n  }\n\n  private _getPlayerAPIMethodDescriptor(\n    module: any,\n    descriptor: PropertyDescriptor,\n  ): PropertyDescriptor {\n    const playerMethodDescriptor: PropertyDescriptor = {\n      enumerable: true,\n      configurable: true,\n    };\n\n    const { get, set, value } = descriptor;\n\n    if (get) {\n      playerMethodDescriptor.get = this._getWrappedCallToModuleFunction(\n        module,\n        get,\n      );\n    }\n\n    if (set) {\n      playerMethodDescriptor.set = this._getWrappedCallToModuleFunction(\n        module,\n        set,\n      );\n    }\n\n    if (value) {\n      playerMethodDescriptor.value = this._getWrappedCallToModuleFunction(\n        module,\n        value,\n      );\n      playerMethodDescriptor.writable = true;\n    }\n\n    return playerMethodDescriptor;\n  }\n\n  private _addPlayerAPIFromModule(module: any) {\n    if (module[PLAYER_API_PROPERTY]) {\n      Object.keys(module[PLAYER_API_PROPERTY]).forEach(apiKey => {\n        if ((this as any)[apiKey]) {\n          throw new Error(\n            `API method ${apiKey} is already defined in Player facade`,\n          );\n        }\n\n        Object.defineProperty(\n          this,\n          apiKey,\n          this._getPlayerAPIMethodDescriptor(\n            module,\n            module[PLAYER_API_PROPERTY][apiKey],\n          ),\n        );\n      });\n    }\n  }\n\n  private _clearPlayerAPIForModule(module: any) {\n    if (module[PLAYER_API_PROPERTY]) {\n      Object.keys(module[PLAYER_API_PROPERTY]).forEach(apiKey => {\n        delete (this as any)[apiKey];\n      });\n    }\n  }\n\n  destroy() {\n    Object.keys(this._defaultModules).forEach(moduleName => {\n      const module = this._defaultModules[moduleName];\n      this._clearPlayerAPIForModule(module);\n      module.destroy();\n    });\n\n    Object.keys(this._additionalModules).forEach(moduleName => {\n      const module = this._additionalModules[moduleName];\n      this._clearPlayerAPIForModule(module);\n      if (module.destroy) {\n        module.destroy();\n      }\n    });\n\n    this._defaultModules = null;\n    this._additionalModules = null;\n    this._config = null;\n\n    this._destroyed = true;\n  }\n}\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\n/* eslint-disable require-jsdoc, valid-jsdoc */\nvar MapShim = (function () {\n    if (typeof Map !== 'undefined') {\n        return Map;\n    }\n\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\n    function getIndex(arr, key) {\n        var result = -1;\n\n        arr.some(function (entry, index) {\n            if (entry[0] === key) {\n                result = index;\n\n                return true;\n            }\n\n            return false;\n        });\n\n        return result;\n    }\n\n    return (function () {\n        function anonymous() {\n            this.__entries__ = [];\n        }\n\n        var prototypeAccessors = { size: { configurable: true } };\n\n        /**\r\n         * @returns {boolean}\r\n         */\n        prototypeAccessors.size.get = function () {\n            return this.__entries__.length;\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\n        anonymous.prototype.get = function (key) {\n            var index = getIndex(this.__entries__, key);\n            var entry = this.__entries__[index];\n\n            return entry && entry[1];\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.set = function (key, value) {\n            var index = getIndex(this.__entries__, key);\n\n            if (~index) {\n                this.__entries__[index][1] = value;\n            } else {\n                this.__entries__.push([key, value]);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.delete = function (key) {\n            var entries = this.__entries__;\n            var index = getIndex(entries, key);\n\n            if (~index) {\n                entries.splice(index, 1);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.has = function (key) {\n            return !!~getIndex(this.__entries__, key);\n        };\n\n        /**\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.clear = function () {\n            this.__entries__.splice(0);\n        };\n\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.forEach = function (callback, ctx) {\n            var this$1 = this;\n            if ( ctx === void 0 ) ctx = null;\n\n            for (var i = 0, list = this$1.__entries__; i < list.length; i += 1) {\n                var entry = list[i];\n\n                callback.call(ctx, entry[1], entry[0]);\n            }\n        };\n\n        Object.defineProperties( anonymous.prototype, prototypeAccessors );\n\n        return anonymous;\n    }());\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\nvar global$1 = (function () {\n    if (typeof global !== 'undefined' && global.Math === Math) {\n        return global;\n    }\n\n    if (typeof self !== 'undefined' && self.Math === Math) {\n        return self;\n    }\n\n    if (typeof window !== 'undefined' && window.Math === Math) {\n        return window;\n    }\n\n    // eslint-disable-next-line no-new-func\n    return Function('return this')();\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\nvar requestAnimationFrame$1 = (function () {\n    if (typeof requestAnimationFrame === 'function') {\n        // It's required to use a bounded function because IE sometimes throws\n        // an \"Invalid calling object\" error if rAF is invoked without the global\n        // object on the left hand side.\n        return requestAnimationFrame.bind(global$1);\n    }\n\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\n})();\n\n// Defines minimum timeout before adding a trailing call.\nvar trailingTimeout = 2;\n\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\nvar throttle = function (callback, delay) {\n    var leadingCall = false,\n        trailingCall = false,\n        lastCallTime = 0;\n\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\n    function resolvePending() {\n        if (leadingCall) {\n            leadingCall = false;\n\n            callback();\n        }\n\n        if (trailingCall) {\n            proxy();\n        }\n    }\n\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\n    function timeoutCallback() {\n        requestAnimationFrame$1(resolvePending);\n    }\n\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\n    function proxy() {\n        var timeStamp = Date.now();\n\n        if (leadingCall) {\n            // Reject immediately following calls.\n            if (timeStamp - lastCallTime < trailingTimeout) {\n                return;\n            }\n\n            // Schedule new call to be in invoked when the pending one is resolved.\n            // This is important for \"transitions\" which never actually start\n            // immediately so there is a chance that we might miss one if change\n            // happens amids the pending invocation.\n            trailingCall = true;\n        } else {\n            leadingCall = true;\n            trailingCall = false;\n\n            setTimeout(timeoutCallback, delay);\n        }\n\n        lastCallTime = timeStamp;\n    }\n\n    return proxy;\n};\n\n// Minimum delay before invoking the update of observers.\nvar REFRESH_DELAY = 20;\n\n// A list of substrings of CSS properties used to find transition events that\n// might affect dimensions of observed elements.\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\n\n// Check if MutationObserver is available.\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\n\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\nvar ResizeObserverController = function() {\n    this.connected_ = false;\n    this.mutationEventsAdded_ = false;\n    this.mutationsObserver_ = null;\n    this.observers_ = [];\n\n    this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\n    this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\n};\n\n/**\r\n * Adds observer to observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be added.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Holds reference to the controller's instance.\r\n *\r\n * @private {ResizeObserverController}\r\n */\n\n\n/**\r\n * Keeps reference to the instance of MutationObserver.\r\n *\r\n * @private {MutationObserver}\r\n */\n\n/**\r\n * Indicates whether DOM listeners have been added.\r\n *\r\n * @private {boolean}\r\n */\nResizeObserverController.prototype.addObserver = function (observer) {\n    if (!~this.observers_.indexOf(observer)) {\n        this.observers_.push(observer);\n    }\n\n    // Add listeners if they haven't been added yet.\n    if (!this.connected_) {\n        this.connect_();\n    }\n};\n\n/**\r\n * Removes observer from observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.removeObserver = function (observer) {\n    var observers = this.observers_;\n    var index = observers.indexOf(observer);\n\n    // Remove observer if it's present in registry.\n    if (~index) {\n        observers.splice(index, 1);\n    }\n\n    // Remove listeners if controller has no connected observers.\n    if (!observers.length && this.connected_) {\n        this.disconnect_();\n    }\n};\n\n/**\r\n * Invokes the update of observers. It will continue running updates insofar\r\n * it detects changes.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.refresh = function () {\n    var changesDetected = this.updateObservers_();\n\n    // Continue running updates if changes have been detected as there might\n    // be future ones caused by CSS transitions.\n    if (changesDetected) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Updates every observer from observers list and notifies them of queued\r\n * entries.\r\n *\r\n * @private\r\n * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n *  dimensions of it's elements.\r\n */\nResizeObserverController.prototype.updateObservers_ = function () {\n    // Collect observers that have active observations.\n    var activeObservers = this.observers_.filter(function (observer) {\n        return observer.gatherActive(), observer.hasActive();\n    });\n\n    // Deliver notifications in a separate cycle in order to avoid any\n    // collisions between observers, e.g. when multiple instances of\n    // ResizeObserver are tracking the same element and the callback of one\n    // of them changes content dimensions of the observed target. Sometimes\n    // this may result in notifications being blocked for the rest of observers.\n    activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\n\n    return activeObservers.length > 0;\n};\n\n/**\r\n * Initializes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.connect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already added.\n    if (!isBrowser || this.connected_) {\n        return;\n    }\n\n    // Subscription to the \"Transitionend\" event is used as a workaround for\n    // delayed transitions. This way it's possible to capture at least the\n    // final state of an element.\n    document.addEventListener('transitionend', this.onTransitionEnd_);\n\n    window.addEventListener('resize', this.refresh);\n\n    if (mutationObserverSupported) {\n        this.mutationsObserver_ = new MutationObserver(this.refresh);\n\n        this.mutationsObserver_.observe(document, {\n            attributes: true,\n            childList: true,\n            characterData: true,\n            subtree: true\n        });\n    } else {\n        document.addEventListener('DOMSubtreeModified', this.refresh);\n\n        this.mutationEventsAdded_ = true;\n    }\n\n    this.connected_ = true;\n};\n\n/**\r\n * Removes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.disconnect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already removed.\n    if (!isBrowser || !this.connected_) {\n        return;\n    }\n\n    document.removeEventListener('transitionend', this.onTransitionEnd_);\n    window.removeEventListener('resize', this.refresh);\n\n    if (this.mutationsObserver_) {\n        this.mutationsObserver_.disconnect();\n    }\n\n    if (this.mutationEventsAdded_) {\n        document.removeEventListener('DOMSubtreeModified', this.refresh);\n    }\n\n    this.mutationsObserver_ = null;\n    this.mutationEventsAdded_ = false;\n    this.connected_ = false;\n};\n\n/**\r\n * \"Transitionend\" event handler.\r\n *\r\n * @private\r\n * @param {TransitionEvent} event\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.onTransitionEnd_ = function (ref) {\n        var propertyName = ref.propertyName; if ( propertyName === void 0 ) propertyName = '';\n\n    // Detect whether transition may affect dimensions of an element.\n    var isReflowProperty = transitionKeys.some(function (key) {\n        return !!~propertyName.indexOf(key);\n    });\n\n    if (isReflowProperty) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Returns instance of the ResizeObserverController.\r\n *\r\n * @returns {ResizeObserverController}\r\n */\nResizeObserverController.getInstance = function () {\n    if (!this.instance_) {\n        this.instance_ = new ResizeObserverController();\n    }\n\n    return this.instance_;\n};\n\nResizeObserverController.instance_ = null;\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\nvar defineConfigurable = (function (target, props) {\n    for (var i = 0, list = Object.keys(props); i < list.length; i += 1) {\n        var key = list[i];\n\n        Object.defineProperty(target, key, {\n            value: props[key],\n            enumerable: false,\n            writable: false,\n            configurable: true\n        });\n    }\n\n    return target;\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\nvar getWindowOf = (function (target) {\n    // Assume that the element is an instance of Node, which means that it\n    // has the \"ownerDocument\" property from which we can retrieve a\n    // corresponding global object.\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\n\n    // Return the local global object if it's not possible extract one from\n    // provided element.\n    return ownerGlobal || global$1;\n});\n\n// Placeholder of an empty content rectangle.\nvar emptyRect = createRectInit(0, 0, 0, 0);\n\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\nfunction toFloat(value) {\n    return parseFloat(value) || 0;\n}\n\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\nfunction getBordersSize(styles) {\n    var positions = [], len = arguments.length - 1;\n    while ( len-- > 0 ) positions[ len ] = arguments[ len + 1 ];\n\n    return positions.reduce(function (size, position) {\n        var value = styles['border-' + position + '-width'];\n\n        return size + toFloat(value);\n    }, 0);\n}\n\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\nfunction getPaddings(styles) {\n    var positions = ['top', 'right', 'bottom', 'left'];\n    var paddings = {};\n\n    for (var i = 0, list = positions; i < list.length; i += 1) {\n        var position = list[i];\n\n        var value = styles['padding-' + position];\n\n        paddings[position] = toFloat(value);\n    }\n\n    return paddings;\n}\n\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getSVGContentRect(target) {\n    var bbox = target.getBBox();\n\n    return createRectInit(0, 0, bbox.width, bbox.height);\n}\n\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\nfunction getHTMLElementContentRect(target) {\n    // Client width & height properties can't be\n    // used exclusively as they provide rounded values.\n    var clientWidth = target.clientWidth;\n    var clientHeight = target.clientHeight;\n\n    // By this condition we can catch all non-replaced inline, hidden and\n    // detached elements. Though elements with width & height properties less\n    // than 0.5 will be discarded as well.\n    //\n    // Without it we would need to implement separate methods for each of\n    // those cases and it's not possible to perform a precise and performance\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\n    // gives wrong results for elements with width & height less than 0.5.\n    if (!clientWidth && !clientHeight) {\n        return emptyRect;\n    }\n\n    var styles = getWindowOf(target).getComputedStyle(target);\n    var paddings = getPaddings(styles);\n    var horizPad = paddings.left + paddings.right;\n    var vertPad = paddings.top + paddings.bottom;\n\n    // Computed styles of width & height are being used because they are the\n    // only dimensions available to JS that contain non-rounded values. It could\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\n    var width = toFloat(styles.width),\n        height = toFloat(styles.height);\n\n    // Width & height include paddings and borders when the 'border-box' box\n    // model is applied (except for IE).\n    if (styles.boxSizing === 'border-box') {\n        // Following conditions are required to handle Internet Explorer which\n        // doesn't include paddings and borders to computed CSS dimensions.\n        //\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\n        // properties then it's either IE, and thus we don't need to subtract\n        // anything, or an element merely doesn't have paddings/borders styles.\n        if (Math.round(width + horizPad) !== clientWidth) {\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\n        }\n\n        if (Math.round(height + vertPad) !== clientHeight) {\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\n        }\n    }\n\n    // Following steps can't be applied to the document's root element as its\n    // client[Width/Height] properties represent viewport area of the window.\n    // Besides, it's as well not necessary as the <html> itself neither has\n    // rendered scroll bars nor it can be clipped.\n    if (!isDocumentElement(target)) {\n        // In some browsers (only in Firefox, actually) CSS width & height\n        // include scroll bars size which can be removed at this step as scroll\n        // bars are the only difference between rounded dimensions + paddings\n        // and \"client\" properties, though that is not always true in Chrome.\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\n\n        // Chrome has a rather weird rounding of \"client\" properties.\n        // E.g. for an element with content width of 314.2px it sometimes gives\n        // the client width of 315px and for the width of 314.7px it may give\n        // 314px. And it doesn't happen all the time. So just ignore this delta\n        // as a non-relevant.\n        if (Math.abs(vertScrollbar) !== 1) {\n            width -= vertScrollbar;\n        }\n\n        if (Math.abs(horizScrollbar) !== 1) {\n            height -= horizScrollbar;\n        }\n    }\n\n    return createRectInit(paddings.left, paddings.top, width, height);\n}\n\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nvar isSVGGraphicsElement = (function () {\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\n    // interface.\n    if (typeof SVGGraphicsElement !== 'undefined') {\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\n    }\n\n    // If it's so, then check that element is at least an instance of the\n    // SVGElement and that it has the \"getBBox\" method.\n    // eslint-disable-next-line no-extra-parens\n    return function (target) { return target instanceof getWindowOf(target).SVGElement && typeof target.getBBox === 'function'; };\n})();\n\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nfunction isDocumentElement(target) {\n    return target === getWindowOf(target).document.documentElement;\n}\n\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getContentRect(target) {\n    if (!isBrowser) {\n        return emptyRect;\n    }\n\n    if (isSVGGraphicsElement(target)) {\n        return getSVGContentRect(target);\n    }\n\n    return getHTMLElementContentRect(target);\n}\n\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\nfunction createReadOnlyRect(ref) {\n    var x = ref.x;\n    var y = ref.y;\n    var width = ref.width;\n    var height = ref.height;\n\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\n    var rect = Object.create(Constr.prototype);\n\n    // Rectangle's properties are not writable and non-enumerable.\n    defineConfigurable(rect, {\n        x: x, y: y, width: width, height: height,\n        top: y,\n        right: x + width,\n        bottom: height + y,\n        left: x\n    });\n\n    return rect;\n}\n\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\nfunction createRectInit(x, y, width, height) {\n    return { x: x, y: y, width: width, height: height };\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\nvar ResizeObservation = function(target) {\n    this.broadcastWidth = 0;\n    this.broadcastHeight = 0;\n    this.contentRect_ = createRectInit(0, 0, 0, 0);\n\n    this.target = target;\n};\n\n/**\r\n * Updates content rectangle and tells whether it's width or height properties\r\n * have changed since the last broadcast.\r\n *\r\n * @returns {boolean}\r\n */\n\n\n/**\r\n * Reference to the last observed content rectangle.\r\n *\r\n * @private {DOMRectInit}\r\n */\n\n\n/**\r\n * Broadcasted width of content rectangle.\r\n *\r\n * @type {number}\r\n */\nResizeObservation.prototype.isActive = function () {\n    var rect = getContentRect(this.target);\n\n    this.contentRect_ = rect;\n\n    return rect.width !== this.broadcastWidth || rect.height !== this.broadcastHeight;\n};\n\n/**\r\n * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n * from the corresponding properties of the last observed content rectangle.\r\n *\r\n * @returns {DOMRectInit} Last observed content rectangle.\r\n */\nResizeObservation.prototype.broadcastRect = function () {\n    var rect = this.contentRect_;\n\n    this.broadcastWidth = rect.width;\n    this.broadcastHeight = rect.height;\n\n    return rect;\n};\n\nvar ResizeObserverEntry = function(target, rectInit) {\n    var contentRect = createReadOnlyRect(rectInit);\n\n    // According to the specification following properties are not writable\n    // and are also not enumerable in the native implementation.\n    //\n    // Property accessors are not being used as they'd require to define a\n    // private WeakMap storage which may cause memory leaks in browsers that\n    // don't support this type of collections.\n    defineConfigurable(this, { target: target, contentRect: contentRect });\n};\n\nvar ResizeObserverSPI = function(callback, controller, callbackCtx) {\n    this.activeObservations_ = [];\n    this.observations_ = new MapShim();\n\n    if (typeof callback !== 'function') {\n        throw new TypeError('The callback provided as parameter 1 is not a function.');\n    }\n\n    this.callback_ = callback;\n    this.controller_ = controller;\n    this.callbackCtx_ = callbackCtx;\n};\n\n/**\r\n * Starts observing provided element.\r\n *\r\n * @param {Element} target - Element to be observed.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Registry of the ResizeObservation instances.\r\n *\r\n * @private {Map<Element, ResizeObservation>}\r\n */\n\n\n/**\r\n * Public ResizeObserver instance which will be passed to the callback\r\n * function and used as a value of it's \"this\" binding.\r\n *\r\n * @private {ResizeObserver}\r\n */\n\n/**\r\n * Collection of resize observations that have detected changes in dimensions\r\n * of elements.\r\n *\r\n * @private {Array<ResizeObservation>}\r\n */\nResizeObserverSPI.prototype.observe = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is already being observed.\n    if (observations.has(target)) {\n        return;\n    }\n\n    observations.set(target, new ResizeObservation(target));\n\n    this.controller_.addObserver(this);\n\n    // Force the update of observations.\n    this.controller_.refresh();\n};\n\n/**\r\n * Stops observing provided element.\r\n *\r\n * @param {Element} target - Element to stop observing.\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.unobserve = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is not being observed.\n    if (!observations.has(target)) {\n        return;\n    }\n\n    observations.delete(target);\n\n    if (!observations.size) {\n        this.controller_.removeObserver(this);\n    }\n};\n\n/**\r\n * Stops observing all elements.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.disconnect = function () {\n    this.clearActive();\n    this.observations_.clear();\n    this.controller_.removeObserver(this);\n};\n\n/**\r\n * Collects observation instances the associated element of which has changed\r\n * it's content rectangle.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.gatherActive = function () {\n        var this$1 = this;\n\n    this.clearActive();\n\n    this.observations_.forEach(function (observation) {\n        if (observation.isActive()) {\n            this$1.activeObservations_.push(observation);\n        }\n    });\n};\n\n/**\r\n * Invokes initial callback function with a list of ResizeObserverEntry\r\n * instances collected from active resize observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.broadcastActive = function () {\n    // Do nothing if observer doesn't have active observations.\n    if (!this.hasActive()) {\n        return;\n    }\n\n    var ctx = this.callbackCtx_;\n\n    // Create ResizeObserverEntry instance for every active observation.\n    var entries = this.activeObservations_.map(function (observation) {\n        return new ResizeObserverEntry(observation.target, observation.broadcastRect());\n    });\n\n    this.callback_.call(ctx, entries, ctx);\n    this.clearActive();\n};\n\n/**\r\n * Clears the collection of active observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.clearActive = function () {\n    this.activeObservations_.splice(0);\n};\n\n/**\r\n * Tells whether observer has active observations.\r\n *\r\n * @returns {boolean}\r\n */\nResizeObserverSPI.prototype.hasActive = function () {\n    return this.activeObservations_.length > 0;\n};\n\n// Registry of internal observers. If WeakMap is not available use current shim\n// for the Map collection as it has all required methods and because WeakMap\n// can't be fully polyfilled anyway.\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\n\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\nvar ResizeObserver = function(callback) {\n    if (!(this instanceof ResizeObserver)) {\n        throw new TypeError('Cannot call a class as a function.');\n    }\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    var controller = ResizeObserverController.getInstance();\n    var observer = new ResizeObserverSPI(callback, controller, this);\n\n    observers.set(this, observer);\n};\n\n// Expose public methods of ResizeObserver.\n['observe', 'unobserve', 'disconnect'].forEach(function (method) {\n    ResizeObserver.prototype[method] = function () {\n        return (ref = observers.get(this))[method].apply(ref, arguments);\n        var ref;\n    };\n});\n\nvar index = (function () {\n    // Export existing implementation if available.\n    if (typeof global$1.ResizeObserver !== 'undefined') {\n        return global$1.ResizeObserver;\n    }\n\n    return ResizeObserver;\n})();\n\nexport default index;\n","// Code from ally.js\n\n/*\n  Observe keyboard-, pointer-, mouse- and touch-events so that a query for\n  the current interaction type can be made at any time. For pointer interaction\n  this observer is limited to pointer button down/up - move is not observed!\n\n  USAGE:\n    var listener = engage();\n    listener.get() === {pointer: Boolean, key: Boolean}\n*/\n\n// counters to track primary input\nlet _activePointers = 0;\nlet _activeKeys = 0;\n\nconst pointerStartEvents = [\n  'touchstart',\n  'pointerdown',\n  'MSPointerDown',\n  'mousedown',\n];\nconst pointerEndEvents = [\n  'touchend',\n  'touchcancel',\n  'pointerup',\n  'MSPointerUp',\n  'pointercancel',\n  'MSPointerCancel',\n  'mouseup',\n];\n\nfunction handleWindowBlurEvent() {\n  // reset internal counters when window loses focus\n  _activePointers = 0;\n  _activeKeys = 0;\n}\n\nfunction handlePointerStartEvent(event: PointerEvent) {\n  if (event.isPrimary === false) {\n    // ignore non-primary pointer events\n    // https://w3c.github.io/pointerevents/#widl-PointerEvent-isPrimary\n    return;\n  }\n\n  // mousedown without following mouseup\n  // (likely not possible in Chrome)\n  _activePointers += 1;\n}\n\nfunction handlePointerEndEvent(event: any) {\n  if (event.isPrimary === false) {\n    // ignore non-primary pointer events\n    // https://w3c.github.io/pointerevents/#widl-PointerEvent-isPrimary\n    return;\n  } else if (event.touches) {\n    _activePointers = event.touches.length;\n    return;\n  }\n\n  // delay reset to when the current handlers are executed\n  (window.setImmediate || window.setTimeout)(() => {\n    // mouseup without prior mousedown\n    // (drag something out of the window)\n    _activePointers = Math.max(_activePointers - 1, 0);\n  });\n}\n\nfunction handleKeyStartEvent(event: KeyboardEvent) {\n  // ignore modifier keys\n  switch (event.keyCode || event.which) {\n    case 16: // space\n    case 17: // control\n    case 18: // alt\n    case 91: // command left\n    case 93: // command right\n      return;\n    default:\n      break;\n  }\n\n  // keydown without a following keyup\n  // (may happen on CMD+TAB)\n  _activeKeys += 1;\n}\n\nfunction handleKeyEndEvent(event: KeyboardEvent) {\n  // ignore modifier keys\n  switch (event.keyCode || event.which) {\n    case 16: // space\n    case 17: // control\n    case 18: // alt\n    case 91: // command left\n    case 93: // command right\n      return;\n    default:\n      break;\n  }\n\n  // delay reset to when the current handlers are executed\n  (window.setImmediate || window.setTimeout)(() => {\n    // keyup without prior keydown\n    // (may happen on CMD+R)\n    _activeKeys = Math.max(_activeKeys - 1, 0);\n  });\n}\n\nfunction getInteractionType() {\n  return {\n    pointer: Boolean(_activePointers),\n    key: Boolean(_activeKeys),\n  };\n}\n\nfunction disengage() {\n  _activePointers = _activeKeys = 0;\n  window.removeEventListener('blur', handleWindowBlurEvent, false);\n  document.documentElement.removeEventListener(\n    'keydown',\n    handleKeyStartEvent,\n    true,\n  );\n  document.documentElement.removeEventListener(\n    'keyup',\n    handleKeyEndEvent,\n    true,\n  );\n  pointerStartEvents.forEach(event => {\n    document.documentElement.removeEventListener(\n      event,\n      handlePointerStartEvent,\n      true,\n    );\n  });\n  pointerEndEvents.forEach(event => {\n    document.documentElement.removeEventListener(\n      event,\n      handlePointerEndEvent,\n      true,\n    );\n  });\n}\n\nfunction engage() {\n  // window blur must be in bubble phase so it won't capture regular blurs\n  window.addEventListener('blur', handleWindowBlurEvent, false);\n  // handlers to identify the method of focus change\n  document.documentElement.addEventListener(\n    'keydown',\n    handleKeyStartEvent,\n    true,\n  );\n  document.documentElement.addEventListener('keyup', handleKeyEndEvent, true);\n  pointerStartEvents.forEach(event => {\n    document.documentElement.addEventListener(\n      event,\n      handlePointerStartEvent,\n      true,\n    );\n  });\n  pointerEndEvents.forEach(event => {\n    document.documentElement.addEventListener(\n      event,\n      handlePointerEndEvent,\n      true,\n    );\n  });\n\n  return {\n    get: getInteractionType,\n  };\n}\n\nexport default { engage, disengage };\n","// Code from ally.js\n/*\n  add data-focus-source attribute to html element containing \"key\", \"pointer\" or \"script\"\n  depending on the input method used to change focus.\n\n  USAGE:\n    style/focus-source()\n\n    body :focus {\n      outline: 1px solid grey;\n    }\n\n    html[data-focus-source=\"key\"] body :focus {\n      outline: 5px solid red;\n    }\n\n    html[data-focus-source=\"key\"] body :focus {\n      outline: 1px solid blue;\n    }\n\n  NOTE: I don't have a GamePad to test, if you do and you want to\n  implement an observer for https://w3c.github.io/gamepad/ - send a PR!\n\n  Alternate implementation: https://github.com/alice/modality\n*/\n\nimport engageInteractionTypeObserver from './interaction-type';\n\n// preferring focusin/out because they are synchronous in IE10+11\nconst supportsFocusIn =\n  typeof document !== 'undefined' && 'onfocusin' in document;\nconst focusEventName = supportsFocusIn ? 'focusin' : 'focus';\nconst blurEventName = supportsFocusIn ? 'focusout' : 'blur';\n\n// interface to read interaction-type-listener state\nlet interactionTypeHandler: any;\n// keep track of last focus source\nlet current: any = null;\n// overwrite focus source for use with the every upcoming focus event\nlet lock: any = null;\n// keep track of ever having used a particular input method to change focus\nconst used: any = {\n  pointer: false,\n  key: false,\n  script: false,\n  initial: false,\n};\n\nfunction handleFocusEvent(event: any) {\n  let source = '';\n  if (event.type === focusEventName) {\n    const interactionType = interactionTypeHandler.get();\n    source =\n      lock ||\n      (interactionType.pointer && 'pointer') ||\n      (interactionType.key && 'key') ||\n      'script';\n  } else if (event.type === 'initial') {\n    source = 'initial';\n  }\n\n  document.documentElement.setAttribute('data-focus-source', source);\n\n  if (event.type !== blurEventName) {\n    used[source] = true;\n    current = source;\n  }\n}\n\nfunction getCurrentFocusSource() {\n  return current;\n}\n\nfunction getUsedFocusSource(source: any) {\n  return used[source];\n}\n\nfunction lockFocusSource(source: any) {\n  lock = source;\n}\n\nfunction unlockFocusSource() {\n  lock = false;\n}\n\nfunction disengage() {\n  // clear dom state\n  handleFocusEvent({ type: blurEventName });\n  current = lock = null;\n  Object.keys(used).forEach(function(key) {\n    used[key] = false;\n  });\n  // kill interaction type identification listener\n  engageInteractionTypeObserver.disengage();\n  document.documentElement.removeEventListener(\n    focusEventName,\n    handleFocusEvent,\n    true,\n  );\n  document.documentElement.removeEventListener(\n    blurEventName,\n    handleFocusEvent,\n    true,\n  );\n  document.documentElement.removeAttribute('data-focus-source');\n}\n\nfunction engage() {\n  document.documentElement.addEventListener(\n    focusEventName,\n    handleFocusEvent,\n    true,\n  );\n  document.documentElement.addEventListener(\n    blurEventName,\n    handleFocusEvent,\n    true,\n  );\n  // enable the interaction type identification observer\n  interactionTypeHandler = engageInteractionTypeObserver.engage();\n  // set up initial dom state\n  handleFocusEvent({ type: 'initial' });\n\n  return {\n    used: getUsedFocusSource,\n    current: getCurrentFocusSource,\n    lock: lockFocusSource,\n    unlock: unlockFocusSource,\n  };\n}\n\nexport default { engage, disengage };\n","enum MediaStreamTypes {\n  MP4 = 'MP4',\n  WEBM = 'WEBM',\n  HLS = 'HLS',\n  DASH = 'DASH',\n  OGG = 'OGG',\n  MOV = 'MOV',\n  MKV = 'MKV',\n}\n\nenum MediaStreamDeliveryPriority {\n  NATIVE_PROGRESSIVE,\n  ADAPTIVE_VIA_MSE,\n  NATIVE_ADAPTIVE,\n  FORCED,\n}\n\nexport { MediaStreamTypes, MediaStreamDeliveryPriority };\n","const UI_EVENTS = {\n  PLAY_TRIGGERED: 'ui-events/play-triggered',\n  PLAY_OVERLAY_TRIGGERED: 'ui-events/play-overlay-triggered',\n  PAUSE_TRIGGERED: 'ui-events/pause-triggered',\n  PROGRESS_CHANGE_TRIGGERED: 'ui-events/progress-change-triggered',\n  VOLUME_CHANGE_TRIGGERED: 'ui-events/volume-change-triggered',\n  MUTE_STATUS_TRIGGERED: 'ui-events/mute-status-triggered',\n  FULLSCREEN_STATUS_CHANGED: 'ui-events/fullscreen-status-changed',\n\n  // TODO: follow ENTITY_EVENT_TRIGGERED or ENTITY_EVENT format\n  MOUSE_ENTER_ON_PLAYER_TRIGGERED: 'ui-events/mouse-enter-on-player-triggered',\n  MOUSE_MOVE_ON_PLAYER_TRIGGERED: 'ui-events/mouse-move-on-player-triggered',\n  MOUSE_LEAVE_ON_PLAYER_TRIGGERED: 'ui-events/mouse-leave-on-player-triggered',\n  CONTROL_BLOCK_HIDE_TRIGGERED: 'ui-events/control-block-hide-triggered',\n  CONTROL_BLOCK_SHOW_TRIGGERED: 'ui-events/control-block-show-triggered',\n  PROGRESS_DRAG_STARTED: 'ui-events/progress-manipulation-started',\n  PROGRESS_DRAG_ENDED: 'ui-events/progress-manipulation-ended',\n  KEYBOARD_KEYDOWN_INTERCEPTED: 'ui-events/keyboard-keydown-intercepted',\n  LOADER_SHOW_TRIGGERED: 'ui-events/loader-show-triggered',\n  LOADER_HIDE_TRIGGERED: 'ui-events/loader-hide-triggered',\n  LOADING_COVER_SHOW_TRIGGERED: 'ui-events/loading-cover-show-triggered',\n  LOADING_COVER_HIDE_TRIGGERED: 'ui-events/loading-cover-hide-triggered',\n  TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/toggle-playback-with-keyboard-triggered',\n  GO_BACKWARD_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/go-backward-with-keyboard-triggered',\n  GO_FORWARD_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/go-forward-with-keyboard-triggered',\n  INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/increase-volume-with-keyboard-triggered',\n  DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/decrease-volume-with-keyboard-triggered',\n  MUTE_SOUND_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/mute-sound-with-keyboard-triggered',\n  UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED:\n    'ui-events/unmute-sound-with-keyboard-triggered',\n  HIDE_INTERACTION_INDICATOR_TRIGGERED:\n    'ui-events/hide-interaction-indicator-triggered',\n  // TODO: get rid of WIDTH/HEIGHT change events in favour of RESIZE\n  PLAYER_WIDTH_CHANGE_TRIGGERED: 'ui-events/player-width-change-triggered',\n  PLAYER_HEIGHT_CHANGE_TRIGGERED: 'ui-events/player-height-change-triggered',\n\n  PLAY_WITH_SCREEN_CLICK_TRIGGERED:\n    'ui-events/play-with-screen-click-triggered',\n  PAUSE_WITH_SCREEN_CLICK_TRIGGERED:\n    'ui-events/pause-with-screen-click-triggered',\n\n  // TODO: review CONTROL_DRAG_START vs CONTROL_DRAG_START_TRIGGERED format\n  CONTROL_DRAG_START: 'ui-events/control-drag-start',\n  CONTROL_DRAG_END: 'ui-events/control-drag-end',\n  MAIN_BLOCK_HIDE_TRIGGERED: 'ui-events/main-block-hide-triggered',\n  MAIN_BLOCK_SHOW_TRIGGERED: 'ui-events/main-block-show-triggered',\n  PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED:\n    'ui-events/progress-sync-button-mouse-enter-triggered',\n  PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED:\n    'ui-events/progress-sync-button-mouse-leave-triggered',\n  RESIZE: 'ui-events/resize',\n  USER_PREVIEWING_FRAME: 'ui-events/user-previewing-frame',\n};\n\nexport default UI_EVENTS;\n","enum EngineState {\n  SRC_SET = 'engine-state/src-set',\n  LOAD_STARTED = 'engine-state/load-started',\n  METADATA_LOADED = 'engine-state/metadata-loaded',\n  READY_TO_PLAY = 'engine-state/ready-to-play',\n  SEEK_IN_PROGRESS = 'engine-state/seek-in-progress',\n  PLAY_REQUESTED = 'engine-state/play-requested',\n  WAITING = 'engine-state/waiting',\n  PLAYING = 'engine-state/playing',\n  PAUSED = 'engine-state/paused',\n  ENDED = 'engine-state/ended',\n}\n\nexport default EngineState;\n","const VIDEO_EVENTS = {\n  ERROR: 'video-events/error',\n  STATE_CHANGED: 'video-events/state-changed',\n  LIVE_STATE_CHANGED: 'video-events/live-state-changed',\n  DYNAMIC_CONTENT_ENDED: 'video-events/dynamic-content-ended',\n  CHUNK_LOADED: 'video-events/chunk-loaded',\n  CURRENT_TIME_UPDATED: 'video-events/current-time-updated',\n  DURATION_UPDATED: 'video-events/duration-updated',\n  VOLUME_STATUS_CHANGED: 'video-events/volume-status-changed',\n  VOLUME_CHANGED: 'video-events/volume-changed',\n  MUTE_CHANGED: 'video-events/mute-changed',\n  SEEK_IN_PROGRESS: 'video-events/seek-in-progress',\n  UPLOAD_STALLED: 'video-events/upload-stalled',\n  UPLOAD_SUSPEND: 'video-events/upload-suspend',\n  PLAY_REQUEST_TRIGGERED: 'video-events/play-request-triggered',\n  PLAY_ABORTED: 'video-events/play-aborted',\n  RESET: 'video-events/reset-playback',\n};\n\nexport default VIDEO_EVENTS;\n","const Errors = {\n  SRC_PARSE: 'error-src-parse',\n  MANIFEST_LOAD: 'error-manifest-load',\n  MANIFEST_PARSE: 'error-manifest-parse',\n  MANIFEST_INCOMPATIBLE: 'error-manifest-incompatible',\n  LEVEL_LOAD: 'error-level-load',\n  CONTENT_LOAD: 'error-content-load',\n  CONTENT_PARSE: 'error-content-parse',\n  MEDIA: 'error-media',\n  UNKNOWN: 'error-unknown',\n};\n\nexport default Errors;\n","export default {\n  LOGO_LABEL: 'logo-label',\n  LOGO_TOOLTIP: 'logo-tooltip',\n  LIVE_INDICATOR_TEXT: 'live-indicator-text',\n  LIVE_SYNC_LABEL: 'live-sync-button-label',\n  LIVE_SYNC_TOOLTIP: 'live-sync-button-tooltip',\n  ENTER_FULL_SCREEN_LABEL: 'enter-full-screen-label',\n  ENTER_FULL_SCREEN_TOOLTIP: 'enter-full-screen-tooltip',\n  EXIT_FULL_SCREEN_LABEL: 'exit-full-screen-label',\n  EXIT_FULL_SCREEN_TOOLTIP: 'exit-full-screen-tooltip',\n  PLAY_CONTROL_LABEL: 'play-control-label',\n  PAUSE_CONTROL_LABEL: 'pause-control-label',\n  PROGRESS_CONTROL_LABEL: 'progress-control-label',\n  PROGRESS_CONTROL_VALUE: 'progress-control-value',\n  UNMUTE_CONTROL_LABEL: 'unmute-control-label',\n  UNMUTE_CONTROL_TOOLTIP: 'unmute-control-label',\n  MUTE_CONTROL_LABEL: 'mute-control-label',\n  MUTE_CONTROL_TOOLTIP: 'mute-control-tooltip',\n  VOLUME_CONTROL_LABEL: 'volume-control-label',\n  VOLUME_CONTROL_VALUE: 'volume-control-value',\n  DOWNLOAD_BUTTON_LABEL: 'download-button-label',\n  DOWNLOAD_BUTTON_TOOLTIP: 'download-button-tooltip',\n};\n","enum LiveState {\n  NONE = 'live-state/none',\n  INITIAL = 'live-state/initial',\n  NOT_SYNC = 'live-state/not-sync',\n  SYNC = 'live-state/sync',\n  ENDED = 'live-state/ended',\n}\n\nexport default LiveState;\n","function htmlToElement(html: string) {\n  if (!html) {\n    throw new Error('HTML provided to htmlToElement is empty');\n  }\n\n  const div: HTMLDivElement = document.createElement('div');\n  div.innerHTML = html.trim();\n\n  if (div.childElementCount > 1) {\n    throw new Error(\"HTML provided to htmlToElement doesn't have root element\");\n  }\n\n  return div.firstChild as HTMLElement;\n}\n\nexport default htmlToElement;\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import extendStyles from './extendStyles';\nimport { IThemeService, ICSSRules } from './theme';\nimport { IStyles, IStylable } from './types';\n\nclass Stylable<TStyles = IStyles> implements IStylable<TStyles> {\n  private static _moduleTheme: ICSSRules;\n  private static _styles: IStyles = {};\n\n  private _themeStyles: IStyles = {};\n\n  constructor(theme?: IThemeService) {\n    const moduleTheme = (<typeof Stylable>this.constructor)._moduleTheme;\n    if (theme && moduleTheme) {\n      theme.registerModuleTheme(this, moduleTheme);\n      this._themeStyles = theme.get(this);\n    }\n  }\n\n  static setTheme(theme: ICSSRules) {\n    this._moduleTheme = theme;\n  }\n\n  static extendStyleNames(styles: IStyles) {\n    this._styles = extendStyles(this._styles, styles);\n  }\n\n  static resetStyles() {\n    this._styles = {};\n  }\n\n  get themeStyles(): IStyles {\n    return this._themeStyles;\n  }\n\n  get styleNames(): TStyles {\n    // NOTE: TS does not work with instance static fields + generic type\n    return (this.constructor as any)._styles || {};\n  }\n}\n\nexport default Stylable;\n","//@ts-ignore\nimport classnames from 'classnames';\nimport { IStyles } from './types';\n\nfunction extendStyles(sourceStyles: IStyles, partialStyles: IStyles) {\n  const styles = {\n    ...sourceStyles,\n  };\n\n  Object.keys(partialStyles).forEach(styleName => {\n    styles[styleName] = styles[styleName]\n      ? classnames(styles[styleName], partialStyles[styleName])\n      : partialStyles[styleName];\n  });\n\n  return styles;\n}\n\nexport default extendStyles;\n","import Stylable from './stylable';\nimport { IView, IStyles } from './types';\n\nclass View<TStyles = IStyles> extends Stylable<TStyles>\n  implements IView<TStyles> {}\n\nexport default View;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import htmlToElement from '../ui/core/htmlToElement';\n\nimport { containerTemplate } from './templates';\n\nimport View from '../ui/core/view';\nimport { IView } from '../ui/core/types';\n\nimport {\n  IRootContainerViewStyles,\n  IRootContainerViewConfig,\n  IRootContainerViewCallbacks,\n} from './types';\n\nimport styles from './root-container.scss';\n\nclass RootContainerView extends View<IRootContainerViewStyles>\n  implements IView<IRootContainerViewStyles> {\n  private _$rootElement: HTMLElement;\n  private _callbacks: IRootContainerViewCallbacks;\n\n  constructor(config: IRootContainerViewConfig) {\n    super();\n    const { width, height, fillAllSpace, callbacks } = config;\n    this._callbacks = callbacks;\n    this._$rootElement = htmlToElement(\n      containerTemplate({ styles: this.styleNames }),\n    );\n\n    this.setFillAllSpaceFlag(fillAllSpace);\n\n    this.setWidth(width);\n    this.setHeight(height);\n\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._$rootElement.addEventListener(\n      'mouseenter',\n      this._callbacks.onMouseEnter,\n    );\n    this._$rootElement.addEventListener(\n      'mousemove',\n      this._callbacks.onMouseMove,\n    );\n    this._$rootElement.addEventListener(\n      'mouseleave',\n      this._callbacks.onMouseLeave,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$rootElement.removeEventListener(\n      'mouseenter',\n      this._callbacks.onMouseEnter,\n    );\n    this._$rootElement.removeEventListener(\n      'mousemove',\n      this._callbacks.onMouseMove,\n    );\n    this._$rootElement.removeEventListener(\n      'mouseleave',\n      this._callbacks.onMouseLeave,\n    );\n  }\n\n  setWidth(width: number) {\n    if (!width) {\n      return;\n    }\n\n    this._$rootElement.style.width = `${width}px`;\n  }\n\n  setHeight(height: number) {\n    if (!height) {\n      return;\n    }\n\n    this._$rootElement.style.height = `${height}px`;\n  }\n\n  getWidth(): number {\n    return this._$rootElement.offsetWidth;\n  }\n\n  getHeight(): number {\n    return this._$rootElement.offsetHeight;\n  }\n\n  show() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  appendComponentElement(element: HTMLElement) {\n    this._$rootElement.appendChild(element);\n  }\n\n  getNode(): HTMLElement {\n    return this._$rootElement;\n  }\n\n  setFullScreenStatus(isFullScreen: boolean) {\n    if (isFullScreen) {\n      this._$rootElement.setAttribute('data-in-full-screen', 'true');\n      this._$rootElement.classList.add(this.styleNames.fullScreen);\n    } else {\n      this._$rootElement.setAttribute('data-in-full-screen', 'false');\n      this._$rootElement.classList.remove(this.styleNames.fullScreen);\n    }\n  }\n\n  setFillAllSpaceFlag(isFillAllSpace = false) {\n    if (isFillAllSpace) {\n      this._$rootElement.classList.add(this.styleNames.fillAllSpace);\n    } else {\n      this._$rootElement.classList.remove(this.styleNames.fillAllSpace);\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n  }\n}\n\nRootContainerView.extendStyleNames(styles);\n\nexport default RootContainerView;\n","function reduce(\n  arrayLike: { length: number },\n  callback: Function,\n  initialValue: any,\n) {\n  return Array.prototype.reduce.call(arrayLike, callback, initialValue);\n}\n\nfunction forEachMatch(string: string, pattern: RegExp, callback: Function) {\n  let match = pattern.exec(string);\n\n  while (match !== null) {\n    callback(match);\n    match = pattern.exec(string);\n  }\n}\n\nexport { reduce, forEachMatch };\n","const ALIASES = [\n  'matches',\n  'webkitMatchesSelector',\n  'mozMatchesSelector',\n  'msMatchesSelector',\n];\n\nlet matchesSelectorFn: Function;\n\nif (typeof HTMLElement !== 'undefined') {\n  for (let i = 0; i < ALIASES.length; i++) {\n    matchesSelectorFn = (Element as any).prototype[ALIASES[i]] as Function;\n\n    if (matchesSelectorFn) {\n      break;\n    }\n  }\n}\n\nconst isElementMatchesSelector = matchesSelectorFn\n  ? (element: HTMLElement, selector: string) =>\n      matchesSelectorFn.call(element, selector)\n  : (element: HTMLElement, selector: string) =>\n      Array.prototype.indexOf.call(\n        document.querySelectorAll(selector),\n        element,\n      ) !== -1;\n\nexport default isElementMatchesSelector;\n","import { forEachMatch, reduce } from './utils';\nimport isElementMatchesSelector from './isElementMatchesSelector';\n\n// NOTE: \"inspired\" by https://github.com/marcj/css-element-queries/blob/1.0.2/src/ElementQueries.js#L340-L393\n\nconst CSS_SELECTOR_PATTERN = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:[a-z-]+-)?(?:min|max)-width[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/gim;\nconst QUERY_ATTR_PATTERN = /\\[[\\s\\t]*?(?:([a-z-]+)-)?(min|max)-width[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/gim;\n\nfunction getQueriesFromCssSelector(cssSelector: string) {\n  const results: any[] = [];\n\n  if (\n    cssSelector.indexOf('min-width') === -1 &&\n    cssSelector.indexOf('max-width') === -1\n  ) {\n    return [];\n  }\n\n  cssSelector = cssSelector.replace(/'/g, '\"');\n\n  forEachMatch(cssSelector, CSS_SELECTOR_PATTERN, (match: RegExpMatchArray) => {\n    const [selectorPart1, attribute, selectorPart2] = match.slice(1);\n    const selector = selectorPart1 + selectorPart2;\n\n    forEachMatch(attribute, QUERY_ATTR_PATTERN, (match: RegExpMatchArray) => {\n      const [prefix = '', mode, width] = match.slice(1);\n\n      results.push({\n        selector,\n        prefix,\n        mode,\n        width: parseInt(width, 10),\n      });\n    });\n  });\n\n  return results;\n}\n\nfunction getQueriesFromRules(rules: CSSRuleList) {\n  return reduce(\n    rules,\n    (results: any[], rule: any) => {\n      // https://developer.mozilla.org/en-US/docs/Web/API/CSSRule\n      // CSSRule.STYLE_RULE\n      if (rule.type === 1) {\n        const selector = rule.selectorText || rule.cssText;\n\n        return results.concat(getQueriesFromCssSelector(selector));\n      }\n\n      // NOTE: add other `CSSRule` types if required.\n      // Example - https://github.com/marcj/css-element-queries/blob/1.0.2/src/ElementQueries.js#L384-L390\n\n      return results;\n    },\n    [],\n  );\n}\n\nfunction getQueries() {\n  return reduce(\n    document.styleSheets,\n    (results: any[], styleSheet: CSSStyleSheet) => {\n      // NOTE: browser may not able to read rules for cross-domain stylesheets\n      try {\n        const rules = styleSheet.cssRules || styleSheet.rules;\n\n        if (rules) {\n          return results.concat(getQueriesFromRules(rules));\n        }\n\n        if (styleSheet.cssText) {\n          return results.concat(getQueriesFromCssSelector(styleSheet.cssText));\n        }\n      } catch (e) {}\n\n      return results;\n    },\n    [],\n  );\n}\n\nfunction getQueriesForElement(element: HTMLElement, prefix = '') {\n  const matchedSelectors = new Map();\n  const queries: any[] = [];\n\n  getQueries().forEach((query: any) => {\n    if (!matchedSelectors.has(query.selector)) {\n      matchedSelectors.set(\n        query.selector,\n        isElementMatchesSelector(element, query.selector),\n      );\n    }\n\n    if (!matchedSelectors.get(query.selector)) {\n      return;\n    }\n\n    if (\n      query.prefix === prefix &&\n      !queries.some(\n        _query => _query.mode === query.mode && _query.width === query.width,\n      )\n    ) {\n      queries.push({\n        mode: query.mode,\n        width: query.width,\n      });\n    }\n  });\n\n  return queries.sort((a, b) => a.width - b.width);\n}\n\nexport default getQueriesForElement;\n","import getQueriesForElement from './getQueriesForElement';\n\nconst DEFAULT_QUERY_PREFIX = 'data';\n\nclass ElementQueries {\n  private _element: Element;\n  private _queryPrefix: string;\n  private _queries: { mode: string; width: number }[];\n\n  constructor(element: HTMLElement, { prefix = DEFAULT_QUERY_PREFIX } = {}) {\n    this._element = element;\n    this._queryPrefix = prefix;\n    this._queries = getQueriesForElement(element, prefix);\n  }\n\n  private _getQueryAttributeValue(mode: string, elementWidth: number) {\n    return this._queries\n      .filter(\n        query =>\n          query.mode === mode &&\n          ((mode === 'max' && query.width >= elementWidth) ||\n            (mode === 'min' && query.width <= elementWidth)),\n      )\n      .map(query => `${query.width}px`)\n      .join(' ');\n  }\n\n  private _setQueryAttribute(mode: string, elementWidth: number) {\n    const attributeName = this._queryPrefix\n      ? `${this._queryPrefix}-${mode}-width`\n      : `${mode}-width`;\n    const attributeValue = this._getQueryAttributeValue(mode, elementWidth);\n\n    if (attributeValue) {\n      this._element.setAttribute(attributeName, attributeValue);\n    } else {\n      this._element.removeAttribute(attributeName);\n    }\n  }\n\n  setWidth(width: number) {\n    this._setQueryAttribute('min', width);\n    this._setQueryAttribute('max', width);\n  }\n\n  destroy() {\n    this._element = null;\n  }\n}\n\nexport default ElementQueries;\n","import ResizeObserver from 'resize-observer-polyfill';\n\nimport focusSource from './utils/focus-source';\nimport focusWithin from './utils/focus-within';\n\nimport playerAPI from '../../core/player-api-decorator';\n\nimport { UI_EVENTS } from '../../constants';\n\nimport View from './root-container.view';\nimport ElementQueries from '../ui/core/element-queries';\n\nimport { IEventEmitter } from '../event-emitter/types';\nimport { IRootContainer } from './types';\nimport { IPlayerConfig } from '../../core/config';\n\nconst DEFAULT_CONFIG = {\n  fillAllSpace: false,\n};\n\nclass RootContainer implements IRootContainer {\n  static moduleName = 'rootContainer';\n  static dependencies = ['eventEmitter', 'config'];\n\n  private _eventEmitter: IEventEmitter;\n\n  private _elementQueries: ElementQueries;\n  private _resizeObserver: ResizeObserver;\n  private _disengageFocusWithin: Function;\n  private _disengageFocusSource: Function;\n\n  private _unbindEvents: Function;\n\n  // TODO: check if props should be `private`\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    config,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this.isHidden = false;\n\n    this._bindCallbacks();\n    this._initUI(config);\n\n    this._bindEvents();\n  }\n\n  /**\n   * Getter for DOM element with player UI\n   * (use it only for debug, if you need attach player to your document use `attachToElement` method)\n   */\n  @playerAPI()\n  get node(): HTMLElement {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._onResized = this._onResized.bind(this);\n    this._broadcastMouseEnter = this._broadcastMouseEnter.bind(this);\n    this._broadcastMouseMove = this._broadcastMouseMove.bind(this);\n    this._broadcastMouseLeave = this._broadcastMouseLeave.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [\n          UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n          this.view.setFullScreenStatus,\n          this.view,\n        ],\n      ],\n      this,\n    );\n  }\n\n  private _initUI(config: IPlayerConfig) {\n    const sizeConfig = {\n      ...config.size,\n    };\n    this.view = new View({\n      callbacks: {\n        onMouseEnter: this._broadcastMouseEnter,\n        onMouseLeave: this._broadcastMouseLeave,\n        onMouseMove: this._broadcastMouseMove,\n      },\n      width: sizeConfig.width || null,\n      height: sizeConfig.height || null,\n      fillAllSpace: config.fillAllSpace || DEFAULT_CONFIG.fillAllSpace,\n    });\n\n    this._elementQueries = new ElementQueries(this.node, {\n      prefix: '',\n    });\n  }\n\n  appendComponentNode(node: HTMLElement) {\n    this.view.appendComponentElement(node);\n  }\n\n  private _broadcastMouseEnter() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_ENTER_ON_PLAYER_TRIGGERED);\n  }\n\n  private _broadcastMouseMove() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED);\n  }\n\n  private _broadcastMouseLeave() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED);\n  }\n\n  private _enableFocusInterceptors() {\n    if (!this._disengageFocusWithin) {\n      this._disengageFocusWithin = focusWithin();\n    }\n\n    if (!this._disengageFocusSource) {\n      focusSource.engage();\n      this._disengageFocusSource = focusSource.disengage;\n    }\n  }\n\n  private _disableFocusInterceptors() {\n    if (this._disengageFocusSource) {\n      this._disengageFocusSource();\n      this._disengageFocusSource = null;\n    }\n\n    if (this._disengageFocusWithin) {\n      this._disengageFocusWithin();\n      this._disengageFocusWithin = null;\n    }\n  }\n\n  private _onResized() {\n    const width = this.view.getWidth();\n    const height = this.view.getHeight();\n\n    this._elementQueries.setWidth(width);\n\n    this._eventEmitter.emit(UI_EVENTS.RESIZE, { width, height });\n  }\n\n  /**\n   * Method for attaching player node to your container\n   * It's important to call this methods after `DOMContentLoaded` event!\n   *\n   * @example\n   * document.addEventListener('DOMContentLoaded', function() {\n   *   const config = { src: 'http://my-url/video.mp4' }\n   *   const player = Playable.create(config);\n   *\n   *   player.attachToElement(document.getElementById('content'));\n   * });\n   */\n  @playerAPI()\n  attachToElement(element: Element) {\n    this._enableFocusInterceptors();\n\n    element.appendChild(this.node);\n\n    if (!this._resizeObserver) {\n      // NOTE: required for valid work of player \"media queries\"\n      this._resizeObserver = new ResizeObserver(this._onResized);\n\n      this._resizeObserver.observe(this.node);\n    }\n  }\n\n  /**\n   * Method for setting width of player\n   * @param width - Desired width of player in pixels\n   * @example\n   * player.setWidth(400);\n   */\n  @playerAPI()\n  setWidth(width: number) {\n    this.view.setWidth(width);\n    this._eventEmitter.emit(UI_EVENTS.PLAYER_WIDTH_CHANGE_TRIGGERED, width);\n  }\n\n  /**\n   * Return current width of player in pixels\n   * @example\n   * player.getWidth(); // 400\n   */\n  @playerAPI()\n  getWidth(): number {\n    return this.view.getWidth();\n  }\n\n  /**\n   * Method for setting width of player\n   * @param height - Desired height of player in pixels\n   * @example\n   * player.setHeight(225);\n   */\n  @playerAPI()\n  setHeight(height: number) {\n    this.view.setHeight(height);\n    this._eventEmitter.emit(UI_EVENTS.PLAYER_HEIGHT_CHANGE_TRIGGERED, height);\n  }\n\n  /**\n   * Return current height of player in pixels\n   * @example\n   * player.getHeight(); // 225\n   */\n  @playerAPI()\n  getHeight(): number {\n    return this.view.getHeight();\n  }\n\n  /**\n   * Method for allowing player fill all available space\n   * @param flag - `true` for allowing\n   * @example\n   * player.setFillAllSpace(true);\n   */\n  @playerAPI()\n  setFillAllSpace(flag: boolean) {\n    this.view.setFillAllSpaceFlag(flag);\n  }\n\n  /**\n   * Hide whole ui\n   * @example\n   * player.hide();\n   */\n  @playerAPI()\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  /**\n   * Show whole ui\n   * @example\n   * player.show();\n   */\n  @playerAPI()\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._disableFocusInterceptors();\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this.node);\n      this._resizeObserver = null;\n    }\n\n    this._elementQueries.destroy();\n    this._elementQueries = null;\n\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n  }\n}\n\nexport default RootContainer;\n","// inspired by https://gist.github.com/aFarkas/a7e0d85450f323d5e164\nconst focusWithin = () => {\n  const slice = [].slice;\n  const removeClass = (elem: any) => {\n    elem.classList.remove('focus-within');\n  };\n  const update = (() => {\n    let running: boolean;\n    let last: Element;\n    const action = () => {\n      let element: any = document.activeElement;\n\n      running = false;\n      if (last !== element) {\n        last = element;\n        slice\n          .call(document.getElementsByClassName('focus-within'))\n          .forEach(removeClass);\n        while (element && element.classList) {\n          element.classList.add('focus-within');\n          element = element.parentNode;\n        }\n      }\n    };\n\n    return () => {\n      if (!running) {\n        requestAnimationFrame(action);\n        running = true;\n      }\n    };\n  })();\n\n  document.addEventListener('focus', update, true);\n  document.addEventListener('blur', update, true);\n  update();\n\n  return () => {\n    document.removeEventListener('focus', update, true);\n    document.removeEventListener('blur', update, true);\n  };\n};\n\nexport default focusWithin;\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { EventEmitter, ListenerFn } from 'eventemitter3';\n\nimport playerAPI from '../../core/player-api-decorator';\n\nimport { IEventEmitter, IEventMap } from './types';\n\nexport default class EventEmitterModule extends EventEmitter\n  implements IEventEmitter {\n  static moduleName = 'eventEmitter';\n  /**\n   * Method for adding listeners of events inside player.\n   * You can check all events inside `Playable.UI_EVENTS` and `Playable.VIDEO_EVENTS`\n   *\n   * @param event - The Event name, such as `Playable.UI_EVENTS.PLAY_TRIGGERED`\n   * @param fn - A function callback to execute when the event is triggered.\n   * @param context - Value to use as `this` (i.e the reference Object) when executing callback.\n   *\n   * @example\n   * const Playable = require('playable');\n   * const player = Playable.create();\n   *\n   * player.on(Playable.UI_EVENTS.PLAY_TRIGGERED, () => {\n   *   // Will be executed after you will click on play button\n   * });\n   *\n   * // To supply a context value for `this` when the callback is invoked,\n   * // pass the optional context argument\n   * player.on(Playable.VIDEO_EVENTS.UPLOAD_STALLED, this.handleStalledUpload, this);\n   */\n  @playerAPI()\n  on(event: string, fn: ListenerFn, context?: any) {\n    return super.on(event, fn, context);\n  }\n\n  /**\n   * Method for removing listeners of events inside player.\n   *\n   * @param event - The Event name, such as `Playable.UI_EVENTS.PLAY_TRIGGERED`\n   * @param fn - Only remove the listeners that match this function.\n   * @param context - Only remove the listeners that have this context.\n   * @param once - Only remove one-time listeners.\n   *\n   * @example\n   * const Playable = require('playable');\n   * const player = Playable.create();\n   *\n   * const callback = function() {\n   *   // Code to handle some kind of event\n   * };\n   *\n   * // ... Now callback will be called when some one will pause the video ...\n   * player.on(Playable.UI_EVENTS.PAUSE_TRIGGERED, callback);\n   *\n   * // ... callback will no longer be called.\n   * player.off(Playable.UI_EVENTS.PAUSE_TRIGGERED, callback);\n   *\n   * // ... remove all handlers for event UI_EVENTS.PAUSE_TRIGGERED.\n   * player.off(Playable.UI_EVENTS.PAUSE_TRIGGERED);\n   */\n  @playerAPI()\n  off(event: string, fn?: ListenerFn, context?: any, once?: boolean) {\n    return super.off(event, fn, context, once);\n  }\n\n  /**\n   * Method for binding array of listeners with events inside player.\n   *\n   * @example\n   *\n   * this._unbindEvents = this._eventEmitter.bindEvents([\n   *     [VIDEO_EVENTS.STATE_CHANGED, this._processStateChange],\n   *     [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processLiveStateChange],\n   *     [VIDEO_EVENTS.CHUNK_LOADED, this._updateBufferIndicator],\n   *     [VIDEO_EVENTS.DURATION_UPDATED, this._updateAllIndicators],\n   *   ],\n   *   this,\n   * );\n   *\n   * //...\n   *\n   * this._unbindEvents()\n   *\n   * @param eventsMap\n   * @param defaultFnContext\n   * @returns unbindEvents\n   */\n  bindEvents(eventsMap: IEventMap[], defaultFnContext?: Object): Function {\n    const events: Function[] = [];\n\n    eventsMap.forEach(([eventName, fn, fnContext = defaultFnContext]) => {\n      this.on(eventName, fn, fnContext);\n      events.push(() => {\n        this.off(eventName, fn, fnContext);\n      });\n    });\n\n    return function unbindEvents() {\n      events.forEach(unbindEvent => {\n        unbindEvent();\n      });\n    };\n  }\n\n  destroy() {\n    this.removeAllListeners();\n  }\n}\n","import { IEventEmitter } from '../event-emitter/types';\n\nimport { isSafari } from '../../utils/device-detection';\n\nimport { VIDEO_EVENTS, EngineState } from '../../constants';\n\nexport const NATIVE_VIDEO_EVENTS_TO_STATE = [\n  'loadstart',\n  'loadedmetadata',\n  'canplay',\n  'play',\n  'playing',\n  'pause',\n  'ended',\n  'waiting',\n  'seeking',\n  'seeked',\n];\n\nexport default class StateEngine {\n  private _eventEmitter: IEventEmitter;\n  private _video: HTMLVideoElement;\n  private _currentState: EngineState;\n  private _statesTimestamps: { [state: string]: number };\n  private _initialTimeStamp: number;\n  private _isMetadataLoaded: boolean;\n\n  constructor(eventEmitter: IEventEmitter, video: HTMLVideoElement) {\n    this._eventEmitter = eventEmitter;\n    this._video = video;\n\n    this._currentState = null;\n\n    this._isMetadataLoaded = false;\n    this._statesTimestamps = {};\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  private _bindCallbacks() {\n    this._processEventFromVideo = this._processEventFromVideo.bind(this);\n  }\n\n  private _bindEvents() {\n    NATIVE_VIDEO_EVENTS_TO_STATE.forEach(event =>\n      this._video.addEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  private _unbindEvents() {\n    NATIVE_VIDEO_EVENTS_TO_STATE.forEach(event =>\n      this._video.removeEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  clearTimestamps() {\n    this._statesTimestamps = {};\n  }\n\n  private _setInitialTimeStamp() {\n    this._initialTimeStamp = Date.now();\n  }\n\n  private _setStateTimestamp(state: EngineState) {\n    if (!this._statesTimestamps[state]) {\n      this._statesTimestamps[state] = Date.now() - this._initialTimeStamp;\n      this._setInitialTimeStamp();\n    }\n  }\n\n  get stateTimestamps() {\n    return this._statesTimestamps;\n  }\n\n  private _processEventFromVideo(event: any = {}) {\n    const videoEl = this._video;\n\n    switch (event.type) {\n      case 'loadstart': {\n        this._setInitialTimeStamp();\n        this.setState(EngineState.LOAD_STARTED);\n        break;\n      }\n      case 'loadedmetadata': {\n        this._setStateTimestamp(EngineState.METADATA_LOADED);\n        this.setState(EngineState.METADATA_LOADED);\n        this._isMetadataLoaded = true;\n        break;\n      }\n      case 'canplay': {\n        this._setStateTimestamp(EngineState.READY_TO_PLAY);\n        this.setState(EngineState.READY_TO_PLAY);\n        break;\n      }\n      case 'play': {\n        this.setState(EngineState.PLAY_REQUESTED);\n        break;\n      }\n      case 'playing': {\n        // Safari triggers event 'playing' even when play request aborted by browser. So we need to check if video is actualy playing\n        if (isSafari()) {\n          if (!videoEl.paused) {\n            this.setState(EngineState.PLAYING);\n          }\n        } else {\n          this.setState(EngineState.PLAYING);\n        }\n        break;\n      }\n      case 'waiting': {\n        this.setState(EngineState.WAITING);\n        break;\n      }\n      case 'pause': {\n        // Safari triggers event 'pause' even when playing was aborted buy autoplay policies, emit pause event even if there wasn't any real playback\n        if (isSafari()) {\n          if (videoEl.played.length) {\n            this.setState(EngineState.PAUSED);\n          }\n        } else {\n          this.setState(EngineState.PAUSED);\n        }\n        break;\n      }\n      case 'ended': {\n        this.setState(EngineState.ENDED);\n        break;\n      }\n      case 'seeking': {\n        this.setState(EngineState.SEEK_IN_PROGRESS);\n        break;\n      }\n      case 'seeked': {\n        this.setState(\n          videoEl.paused ? EngineState.PAUSED : EngineState.PLAYING,\n        );\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  setState(state: EngineState) {\n    if (state === this._currentState) {\n      return;\n    }\n\n    //This case is happens only with dash.js sometimes when manifest got some problems\n    if (this._currentState === EngineState.METADATA_LOADED) {\n      if (\n        state === EngineState.SEEK_IN_PROGRESS ||\n        state === EngineState.PAUSED\n      ) {\n        return;\n      }\n    }\n\n    this._eventEmitter.emit(VIDEO_EVENTS.STATE_CHANGED, {\n      prevState: this._currentState,\n      nextState: state,\n    });\n    this._eventEmitter.emit(state);\n    this._currentState = state;\n  }\n\n  get isMetadataLoaded() {\n    return this._isMetadataLoaded;\n  }\n\n  get state() {\n    return this._currentState;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._eventEmitter = null;\n    this._video = null;\n  }\n}\n","import { IEventEmitter } from '../event-emitter/types';\n\nimport { VIDEO_EVENTS } from '../../constants';\n\nexport const NATIVE_VIDEO_TO_BROADCAST = [\n  'progress',\n  'error',\n  'stalled',\n  'suspend',\n  'durationchange',\n  'timeupdate',\n  'volumechange',\n  'seeking',\n];\n\nexport default class NativeEventsBroadcaster {\n  private _eventEmitter: IEventEmitter;\n  private _video: HTMLVideoElement;\n  private _currentVolume: number;\n  private _currentMute: boolean;\n\n  constructor(eventEmitter: IEventEmitter, video: HTMLVideoElement) {\n    this._eventEmitter = eventEmitter;\n    this._video = video;\n\n    this._currentMute = this._video.muted;\n    this._currentVolume = this._video.volume;\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  private _bindCallbacks() {\n    this._processEventFromVideo = this._processEventFromVideo.bind(this);\n  }\n\n  private _bindEvents() {\n    NATIVE_VIDEO_TO_BROADCAST.forEach(event =>\n      this._video.addEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  private _unbindEvents() {\n    NATIVE_VIDEO_TO_BROADCAST.forEach(event =>\n      this._video.removeEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  private _processEventFromVideo(event: any = {}) {\n    const videoEl = this._video;\n\n    switch (event.type) {\n      case 'progress': {\n        this._eventEmitter.emit(VIDEO_EVENTS.CHUNK_LOADED);\n        break;\n      }\n      case 'stalled': {\n        this._eventEmitter.emit(VIDEO_EVENTS.UPLOAD_STALLED);\n        break;\n      }\n      case 'suspend': {\n        this._eventEmitter.emit(VIDEO_EVENTS.UPLOAD_SUSPEND);\n        break;\n      }\n      case 'seeking': {\n        this._eventEmitter.emit(\n          VIDEO_EVENTS.SEEK_IN_PROGRESS,\n          videoEl.currentTime,\n        );\n        break;\n      }\n      case 'durationchange': {\n        this._eventEmitter.emit(\n          VIDEO_EVENTS.DURATION_UPDATED,\n          videoEl.duration,\n        );\n        break;\n      }\n      case 'timeupdate': {\n        this._eventEmitter.emit(\n          VIDEO_EVENTS.CURRENT_TIME_UPDATED,\n          videoEl.currentTime,\n        );\n        break;\n      }\n      case 'volumechange': {\n        if (this._currentVolume !== videoEl.volume) {\n          this._currentVolume = videoEl.volume * 100;\n          this._eventEmitter.emit(\n            VIDEO_EVENTS.VOLUME_CHANGED,\n            this._currentVolume,\n          );\n        }\n\n        if (this._currentMute !== videoEl.muted) {\n          this._currentMute = videoEl.muted;\n          this._eventEmitter.emit(VIDEO_EVENTS.MUTE_CHANGED, this._currentMute);\n        }\n\n        this._eventEmitter.emit(VIDEO_EVENTS.VOLUME_STATUS_CHANGED, {\n          volume: videoEl.volume,\n          muted: videoEl.muted,\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._video = null;\n    this._eventEmitter = null;\n  }\n}\n","import { IPlaybackAdapter } from '../adapters/types';\nimport { MediaStreamTypes } from '../../../constants';\nimport { IMediaSource } from '../types';\n\nexport function resolveAdapters(\n  mediaStreams: IMediaSource[],\n  availableAdapters: IPlaybackAdapter[],\n): IPlaybackAdapter[] {\n  const playableAdapters: IPlaybackAdapter[] = [];\n\n  const groupedStreams = groupStreamsByMediaType(mediaStreams);\n  const groupedStreamKeys = Object.keys(groupedStreams) as MediaStreamTypes[];\n\n  availableAdapters.forEach(adapter => {\n    for (let i = 0; i < groupedStreamKeys.length; i += 1) {\n      const mediaType = groupedStreamKeys[i];\n      const mediaStreams = groupedStreams[mediaType];\n\n      if (adapter.canPlay(mediaType)) {\n        adapter.setMediaStreams(mediaStreams);\n        playableAdapters.push(adapter);\n        break;\n      }\n    }\n  });\n\n  playableAdapters.sort(\n    (firstAdapter, secondAdapter) =>\n      secondAdapter.mediaStreamDeliveryPriority -\n      firstAdapter.mediaStreamDeliveryPriority,\n  );\n\n  return playableAdapters;\n}\n\nfunction groupStreamsByMediaType(mediaStreams: IMediaSource[]) {\n  const typeMap: { [type: string]: IMediaSource[] } = {};\n  mediaStreams.forEach((mediaStream: IMediaSource) => {\n    if (!mediaStream.type) {\n      return;\n    }\n\n    if (!Array.isArray(typeMap[mediaStream.type])) {\n      typeMap[mediaStream.type] = [];\n    }\n    typeMap[mediaStream.type].push(mediaStream);\n  });\n\n  return typeMap;\n}\n","import { MediaStreamTypes } from '../../../constants';\n\nconst extensionsMap = Object.create(null);\nextensionsMap.mp4 = MediaStreamTypes.MP4;\nextensionsMap.webm = MediaStreamTypes.WEBM;\nextensionsMap.m3u8 = MediaStreamTypes.HLS;\nextensionsMap.mpd = MediaStreamTypes.DASH;\nextensionsMap.ogg = MediaStreamTypes.OGG;\nextensionsMap.mkv = MediaStreamTypes.MKV;\nextensionsMap.mov = MediaStreamTypes.MOV;\n\nexport function getStreamType(url: string) {\n  const anchorElement = document.createElement('a');\n  anchorElement.href = url;\n  const streamType = extensionsMap[getExtFromPath(anchorElement.pathname)];\n\n  return streamType || false;\n}\n\nexport function getExtFromPath(path: string) {\n  return path\n    .split('.')\n    .pop()\n    .toLowerCase();\n}\n","import { IEventEmitter } from '../event-emitter/types';\n\nimport { VIDEO_EVENTS, ERRORS } from '../../constants';\n\nimport { resolveAdapters } from './utils/adapters-resolver';\nimport { getStreamType } from './utils/detect-stream-type';\n\nimport { IPlaybackAdapter } from './adapters/types';\nimport { MediaSource, IMediaSource } from './types';\n\nexport default class AdaptersStrategy {\n  private _video: HTMLVideoElement;\n  private _eventEmitter: IEventEmitter;\n  private _playableAdapters: IPlaybackAdapter[];\n  private _availableAdapters: IPlaybackAdapter[];\n  private _attachedAdapter: IPlaybackAdapter;\n\n  constructor(\n    eventEmitter: IEventEmitter,\n    video: HTMLVideoElement,\n    playbackAdapters: any[] = [],\n  ) {\n    this._video = video;\n    this._eventEmitter = eventEmitter;\n    this._playableAdapters = [];\n    this._availableAdapters = [];\n    this._attachedAdapter = null;\n\n    playbackAdapters.forEach(\n      adapter =>\n        adapter.isSupported() &&\n        this._availableAdapters.push(new adapter(eventEmitter)),\n    );\n  }\n\n  private _autoDetectSourceTypes(\n    mediaSources: Array<IMediaSource | string>,\n  ): IMediaSource[] {\n    return mediaSources.map((mediaSource: IMediaSource | string) => {\n      if (typeof mediaSource === 'string') {\n        const type = getStreamType(mediaSource);\n        if (!type) {\n          this._eventEmitter.emit(VIDEO_EVENTS.ERROR, {\n            errorType: ERRORS.SRC_PARSE,\n            streamSrc: mediaSource,\n          });\n        }\n        return { url: mediaSource, type };\n      }\n\n      return mediaSource;\n    });\n  }\n\n  private _resolvePlayableAdapters(src: MediaSource) {\n    if (!src) {\n      this._playableAdapters = [];\n      return;\n    }\n\n    const mediaSources = [].concat(src);\n    const mediaStreams = this._autoDetectSourceTypes(mediaSources);\n    this._playableAdapters = resolveAdapters(\n      mediaStreams,\n      this._availableAdapters,\n    );\n  }\n\n  private _connectAdapterToVideo() {\n    if (this._playableAdapters.length > 0) {\n      // Use the first PlayableStream for now\n      // Later, we can use the others as fallback\n      this._attachedAdapter = this._playableAdapters[0];\n      this._attachedAdapter.attach(this._video);\n    }\n  }\n\n  private _detachCurrentAdapter() {\n    if (this._attachedAdapter) {\n      this._attachedAdapter.detach();\n      this._attachedAdapter = null;\n    }\n  }\n\n  get attachedAdapter() {\n    return this._attachedAdapter;\n  }\n\n  connectAdapter(src: MediaSource) {\n    this._detachCurrentAdapter();\n    this._resolvePlayableAdapters(src);\n    this._connectAdapterToVideo();\n  }\n\n  destroy() {\n    this._detachCurrentAdapter();\n\n    this._attachedAdapter = null;\n    this._availableAdapters = null;\n    this._playableAdapters = null;\n\n    this._video = null;\n  }\n}\n","import playerAPI from '../../core/player-api-decorator';\n\nimport StateEngine from './state-engine';\nimport NativeEventsBroadcaster from './native-events-broadcaster';\nimport AdapterStrategy from './adapters-strategy';\n\nimport {\n  isIPhone,\n  isIPod,\n  isIPad,\n  isAndroid,\n} from '../../utils/device-detection';\n\nimport { VIDEO_EVENTS, EngineState } from '../../constants';\nimport { IPlaybackAdapter } from './adapters/types';\n\nimport { IPlayerConfig } from '../../core/config';\nimport {\n  IPlaybackEngine,\n  IPlaybackEngineDependencies,\n  IDebugInfo,\n  MediaSource,\n  CrossOriginValue,\n} from './types';\nimport { IEventEmitter } from '../event-emitter/types';\n\n//TODO: Find source of problem with native HLS on Safari, when playing state triggered but actual playing is delayed\nexport default class Engine implements IPlaybackEngine {\n  static moduleName = 'engine';\n  static dependencies = ['eventEmitter', 'config', 'availablePlaybackAdapters'];\n\n  private _eventEmitter: IEventEmitter;\n  private _currentSrc: MediaSource;\n  private _stateEngine: StateEngine;\n  private _video: HTMLVideoElement;\n  private _nativeEventsBroadcaster: NativeEventsBroadcaster;\n  private _adapterStrategy: AdapterStrategy;\n  private _playPromise: Promise<any>;\n  private _pauseRequested: boolean;\n\n  constructor({\n    eventEmitter,\n    config,\n    availablePlaybackAdapters = [],\n  }: IPlaybackEngineDependencies) {\n    this._eventEmitter = eventEmitter;\n\n    this._currentSrc = null;\n\n    this._createVideoTag(config.videoElement);\n\n    this._stateEngine = new StateEngine(eventEmitter, this._video);\n    this._nativeEventsBroadcaster = new NativeEventsBroadcaster(\n      eventEmitter,\n      this._video,\n    );\n    this._adapterStrategy = new AdapterStrategy(\n      this._eventEmitter,\n      this._video,\n      availablePlaybackAdapters,\n    );\n\n    this._applyConfig(config);\n  }\n\n  private _createVideoTag(videoElement?: HTMLVideoElement) {\n    if (videoElement && videoElement.tagName === 'VIDEO') {\n      this._video = videoElement;\n    } else {\n      this._video = document.createElement('video');\n    }\n  }\n  private _applyConfig(config: IPlayerConfig = {}) {\n    const {\n      preload,\n      autoPlay,\n      loop,\n      muted,\n      volume,\n      playInline,\n      crossOrigin,\n      src,\n    } = config;\n\n    this.setPreload(preload);\n    this.setAutoPlay(autoPlay);\n    this.setLoop(loop);\n    this.setMute(muted);\n    this.setVolume(volume);\n    this.setPlayInline(playInline);\n    this.setCrossOrigin(crossOrigin);\n\n    this.setSrc(src);\n  }\n\n  getNode() {\n    return this._video;\n  }\n\n  private _getViewDimensions() {\n    return {\n      width: this._video.offsetWidth,\n      height: this._video.offsetHeight,\n    };\n  }\n\n  get isDynamicContent() {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isDynamicContent;\n  }\n\n  get isDynamicContentEnded() {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isDynamicContentEnded;\n  }\n\n  get isSeekAvailable() {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isSeekAvailable;\n  }\n\n  get isMetadataLoaded() {\n    return this._stateEngine.isMetadataLoaded;\n  }\n\n  get isPreloadAvailable() {\n    if (isIPad() || isIPhone() || isIPod() || isAndroid()) {\n      return false;\n    }\n\n    return this.getPreload() !== 'none';\n  }\n\n  get isAutoPlayAvailable() {\n    if (isIPad() || isIPhone() || isIPod() || isAndroid()) {\n      return false;\n    }\n\n    return this.getAutoPlay();\n  }\n\n  get isSyncWithLive(): boolean {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isSyncWithLive;\n  }\n\n  get attachedAdapter(): IPlaybackAdapter {\n    return this._adapterStrategy.attachedAdapter;\n  }\n\n  /**\n   * Method for setting source of video to player.\n   * @param src Array with multiple sources\n   * @example\n   * player.setSrc([\n   *   'https://my-url/video.mp4',\n   *   'https://my-url/video.webm',\n   *   'https://my-url/video.m3u8'\n   * ]);\n   * @note\n   * Read more about [video source](/video-source)\n   */\n  @playerAPI()\n  setSrc(src: MediaSource) {\n    if (src === this._currentSrc) {\n      return;\n    }\n\n    this._stateEngine.clearTimestamps();\n    this._currentSrc = src;\n    this._adapterStrategy.connectAdapter(this._currentSrc);\n\n    this._stateEngine.setState(EngineState.SRC_SET);\n  }\n\n  /**\n   * Return current source of video\n   * @example\n   * player.getSrc(); // ['https://my-url/video.mp4']\n   */\n  @playerAPI()\n  getSrc(): MediaSource {\n    return this._currentSrc;\n  }\n\n  @playerAPI()\n  reset() {\n    this.pause();\n    this.setCurrentTime(0);\n    this._eventEmitter.emit(VIDEO_EVENTS.RESET);\n  }\n\n  /**\n   * Method for starting playback of video\n   * @example\n   * player.play();\n   */\n  @playerAPI()\n  play() {\n    //Workaround for triggering functionality that requires user event pipe\n    this._eventEmitter.emit(VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED);\n\n    this._pauseRequested = false;\n\n    if (!this._playPromise) {\n      this._playPromise = this._video.play();\n      if (this._playPromise !== undefined) {\n        this._playPromise\n          .then(() => {\n            this._playPromise = null;\n\n            if (this._pauseRequested) {\n              this.pause();\n            }\n          })\n          .catch(event => {\n            this._eventEmitter.emit(VIDEO_EVENTS.PLAY_ABORTED, event);\n            this._playPromise = null;\n          });\n      }\n    }\n  }\n\n  /**\n   * Method for pausing playback of video\n   * @example\n   * player.pause();\n   */\n  @playerAPI()\n  pause() {\n    if (this._playPromise) {\n      this._pauseRequested = true;\n    } else {\n      this._video.pause();\n      this._pauseRequested = false;\n    }\n  }\n\n  /**\n   * Method for toggling(play\\pause) playback of video\n   * @example\n   * player.togglePlayback();\n   */\n  @playerAPI()\n  togglePlayback() {\n    if (this.isVideoPaused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  /**\n   * Method for reseting playback of video\n   * @example\n   * player.play();\n   * console.log(player.isVideoPaused); // false\n   * ...\n   * player.resetPlayback();\n   * console.log(player.isVideoPaused); // true;\n   * console.log(player.getCurrentTime()); //0;\n   */\n  @playerAPI()\n  resetPlayback() {\n    this.pause();\n    this.setCurrentTime(0);\n    this._eventEmitter.emit(VIDEO_EVENTS.RESET);\n  }\n\n  /**\n   * High level status of video playback. Returns true if playback is paused.\n   * For more advance state use `getCurrentPlaybackState`\n   * @example\n   * player.play();\n   * console.log(player.isVideoPaused);\n   */\n  @playerAPI()\n  get isVideoPaused(): boolean {\n    return this._video.paused;\n  }\n\n  /**\n   * High level status of video playback. Returns true if playback is ended. Also note, that `isPaused` will return `true` if playback is ended also.\n   * For more advance state use `getCurrentPlaybackState`\n   * @example\n   * player.play();\n   * console.log(player.isVideoEnded);\n   */\n  @playerAPI()\n  get isVideoEnded(): boolean {\n    return this._video.ended;\n  }\n\n  /**\n   * Method for synchronize current playback with live point. Available only if you playing live source.\n   * @example\n   * player.syncWithLive();\n   */\n  @playerAPI()\n  syncWithLive() {\n    if (\n      this.attachedAdapter &&\n      this.attachedAdapter.isDynamicContent &&\n      !this.attachedAdapter.isDynamicContentEnded &&\n      !this.isSyncWithLive\n    ) {\n      this.setCurrentTime(this.attachedAdapter.syncWithLiveTime);\n\n      this.play();\n    }\n  }\n\n  /**\n   * Method for going forward in playback by your value\n   * @param sec - Value in seconds\n   * @example\n   * player.goForward(5);\n   */\n  @playerAPI()\n  goForward(sec: number) {\n    const duration = this.getDurationTime();\n\n    if (duration) {\n      const current = this.getCurrentTime();\n      this.setCurrentTime(Math.min(current + sec, duration));\n    }\n  }\n\n  /**\n   * Method for going backward in playback by your value\n   * @param sec - Value in seconds\n   * @example\n   * player.goBackward(5);\n   */\n  @playerAPI()\n  goBackward(sec: number) {\n    const duration = this.getDurationTime();\n\n    if (duration) {\n      const current = this.getCurrentTime();\n      this.setCurrentTime(Math.max(current - sec, 0));\n    }\n  }\n\n  /**\n   * Set volume\n   * @param volume - Volume value `0..100`\n   * @example\n   * player.setVolume(50);\n   */\n  @playerAPI()\n  setVolume(volume: number) {\n    const parsedVolume = Number(volume);\n    this._video.volume = isNaN(parsedVolume)\n      ? 1\n      : Math.max(0, Math.min(Number(volume) / 100, 1));\n  }\n\n  /**\n   * Get volume\n   * @example\n   * player.getVolume(); // 50\n   */\n  @playerAPI()\n  getVolume(): number {\n    return this._video.volume * 100;\n  }\n\n  /**\n   * Method for increasing current volume by value\n   * @param value - Value from 0 to 100\n   * @example\n   * player.increaseVolume(30);\n   */\n  @playerAPI()\n  increaseVolume(value: number) {\n    this.setVolume(this.getVolume() + value);\n  }\n\n  /**\n   * Method for decreasing current volume by value\n   * @param value - Value from 0 to 100\n   * @example\n   * player.decreaseVolume(30);\n   */\n  @playerAPI()\n  decreaseVolume(value: number) {\n    this.setVolume(this.getVolume() - value);\n  }\n\n  /**\n   * Mute or unmute the video\n   * @param isMuted - `true` to mute the video.\n   * @example\n   * player.setMute(true);\n   */\n  @playerAPI()\n  setMute(isMuted: boolean) {\n    this._video.muted = Boolean(isMuted);\n  }\n\n  /**\n   * Get mute flag\n   * @example\n   * player.getMute(); // true\n   */\n  @playerAPI()\n  getMute(): boolean {\n    return this._video.muted;\n  }\n\n  /**\n   * Set autoPlay flag\n   * @example\n   * player.setAutoPlay();\n   */\n  @playerAPI()\n  setAutoPlay(isAutoPlay: boolean) {\n    this._video.autoplay = Boolean(isAutoPlay);\n  }\n\n  /**\n   * Get autoPlay flag\n   * @example\n   * player.getAutoPlay(); // true\n   */\n  @playerAPI()\n  getAutoPlay(): boolean {\n    return this._video.autoplay;\n  }\n\n  /**\n   * Set loop flag\n   * @param isLoop - If `true` video will be played again after it will finish\n   * @example\n   * player.setLoop(true);\n   */\n  @playerAPI()\n  setLoop(isLoop: boolean) {\n    this._video.loop = Boolean(isLoop);\n  }\n\n  /**\n   * Get loop flag\n   * @example\n   * player.getLoop(); // true\n   */\n  @playerAPI()\n  getLoop(): boolean {\n    return this._video.loop;\n  }\n\n  /**\n   * Method for setting playback rate\n   */\n  @playerAPI()\n  setPlaybackRate(rate: number) {\n    this._video.playbackRate = rate;\n  }\n\n  /**\n   * Return current playback rate\n   */\n  @playerAPI()\n  getPlaybackRate(): number {\n    return this._video.playbackRate;\n  }\n\n  /**\n   * Set preload type\n   * @example\n   * player.setPreload('none');\n   */\n  @playerAPI()\n  setPreload(preload: 'auto' | 'metadata' | 'none') {\n    this._video.preload = preload || 'auto';\n  }\n\n  /**\n   * Return preload type\n   * @example\n   * player.getPreload(); // none\n   */\n  @playerAPI()\n  getPreload(): string {\n    return this._video.preload;\n  }\n\n  /**\n   * Return current time of video playback\n   * @example\n   * player.getCurrentTime(); //  60.139683\n   */\n  @playerAPI()\n  getCurrentTime(): number {\n    return this._video.currentTime;\n  }\n\n  /**\n   * Method for seeking to time in video\n   * @param time - Time in seconds\n   * @example\n   * player.goTo(34);\n   */\n  @playerAPI('goTo')\n  setCurrentTime(time: number) {\n    this._video.currentTime = time;\n  }\n\n  /**\n   * Return duration of video\n   * @example\n   * player.getDurationTime(); // 180.149745\n   */\n  @playerAPI()\n  getDurationTime(): number {\n    return this._video.duration || 0;\n  }\n\n  /**\n   * Return real width of video from metadata\n   * @example\n   * player.getVideoWidth(); // 400\n   */\n  @playerAPI('getVideoRealWidth')\n  getVideoWidth(): number {\n    return this._video.videoWidth;\n  }\n\n  /**\n   * Return real height of video from metadata\n   * @example\n   * player.getVideoHeight(); // 225\n   */\n  @playerAPI('getVideoRealHeight')\n  getVideoHeight(): number {\n    return this._video.videoHeight;\n  }\n\n  getBuffered() {\n    return this._video.buffered;\n  }\n\n  /**\n   * Set playInline flag\n   * @param isPlayInline - If `false` - video will be played in full screen, `true` - inline\n   * @example\n   * player.setPlayInline(true);\n   */\n  @playerAPI()\n  setPlayInline(isPlayInline: boolean) {\n    if (isPlayInline) {\n      this._video.setAttribute('playsInline', 'true');\n    } else {\n      this._video.removeAttribute('playsInline');\n    }\n  }\n\n  /**\n   * Get playInline flag\n   * @example\n   * player.getPlayInline(); // true\n   */\n  @playerAPI()\n  getPlayInline(): boolean {\n    return this._video.getAttribute('playsInline') === 'true';\n  }\n\n  /**\n   * Set crossorigin attribute for video\n   * @example\n   * player.setCrossOrigin('anonymous');\n   */\n  @playerAPI()\n  setCrossOrigin(crossOrigin?: 'anonymous' | 'use-credentials') {\n    if (crossOrigin) {\n      this._video.setAttribute('crossorigin', crossOrigin);\n    } else {\n      this._video.removeAttribute('crossorigin');\n    }\n  }\n\n  /**\n   * Get crossorigin attribute value for video\n   * @example\n   * player.getCrossOrigin(); // 'anonymous'\n   */\n  @playerAPI()\n  getCrossOrigin(): CrossOriginValue {\n    return this._video.getAttribute('crossorigin') as CrossOriginValue;\n  }\n\n  /**\n   * Return current state of playback\n   */\n  @playerAPI('getCurrentPlaybackState')\n  getCurrentState() {\n    return this._stateEngine.state;\n  }\n\n  /**\n   * Return object with internal debug info\n   *\n   * @example\n   * player.getDebugInfo();\n   *\n   * @note\n   * The above command returns JSON structured like this:\n   *\n   * @example\n   * {\n   *   \"type\": \"HLS\",\n   *   \"viewDimensions\": {\n   *     \"width\": 700,\n   *     \"height\": 394\n   *   }\n   *   \"url\": \"https://example.com/video.m3u8\",\n   *   \"currentTime\": 22.092514,\n   *   \"duration\": 60.139683,\n   *   \"loadingStateTimestamps\": {\n   *     \"metadata-loaded\": 76,\n   *     \"ready-to-play\": 67\n   *   },\n   *   \"bitrates\": [\n   *     // Available bitrates\n   *     \"100000\",\n   *     \"200000\",\n   *     ...\n   *   ],\n   *   // One of available bitrates, that used right now\n   *   \"currentBitrate\": \"100000\",\n   *   // Raw estimation of bandwidth, that could be used without playback stall\n   *   \"bwEstimate\": \"120000\"\n   *   \"overallBufferLength\": 60.139683,\n   *   \"nearestBufferSegInfo\": {\n   *     \"start\": 0,\n   *     \"end\": 60.139683\n   *   }\n   * }\n   */\n  @playerAPI()\n  getDebugInfo(): IDebugInfo {\n    const { duration, currentTime } = this._video;\n    let data;\n\n    if (this._adapterStrategy.attachedAdapter) {\n      data = this._adapterStrategy.attachedAdapter.debugInfo;\n    }\n\n    return {\n      ...data,\n      viewDimensions: this._getViewDimensions(),\n      currentTime,\n      duration,\n      loadingStateTimestamps: this._stateEngine.stateTimestamps,\n    };\n  }\n\n  destroy() {\n    this._stateEngine.destroy();\n    this._nativeEventsBroadcaster.destroy();\n    this._adapterStrategy.destroy();\n    this._video.parentNode && this._video.parentNode.removeChild(this._video);\n\n    this._stateEngine = null;\n    this._nativeEventsBroadcaster = null;\n    this._adapterStrategy = null;\n    this._eventEmitter = null;\n    this._video = null;\n  }\n}\n","const SHORTHAND_HEX_COLOR_PATTERN = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\nconst HEX_COLOR_PATTERN = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n\ntype IRGB = {\n  r: number;\n  g: number;\n  b: number;\n};\n\nfunction hexToRgb(hex: string): IRGB {\n  hex = hex.replace(\n    SHORTHAND_HEX_COLOR_PATTERN,\n    (_, r, g, b) => r + r + g + g + b + b,\n  );\n\n  const result = hex.match(HEX_COLOR_PATTERN);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n}\n\nexport default hexToRgb;\n","import hexToRgb from './hexToRgb';\n\nfunction transperentizeColor(color: string, alpha: number = 1) {\n  const { r, g, b } = hexToRgb(color);\n  return `rgba(${r},${g},${b},${alpha})`;\n}\n\nexport default transperentizeColor;\n","function camelToKebab(string: string): string {\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\nexport default camelToKebab;\n","import camelToKebab from './camelToKebab';\n\nconst generatedIds: Map<string, number> = new Map();\n\nfunction getUniquePostfix(className: string): string {\n  if (generatedIds.has(className)) {\n    const newID: number = generatedIds.get(className) + 1;\n    generatedIds.set(className, newID);\n\n    return `${newID}`;\n  }\n\n  generatedIds.set(className, 0);\n  return '';\n}\n\nfunction getUniqueId(classImportName: string): string {\n  const kebabName: string = camelToKebab(classImportName);\n\n  return `${kebabName}${getUniquePostfix(kebabName)}`;\n}\n\nexport default getUniqueId;\n","import getUniqueId from './getUniqueId';\n\nimport { IStyles } from '../../types';\nimport { ICSSRules } from '../types';\n\nfunction getUniqueClassName(classImportName: string) {\n  return `wix-playable--${getUniqueId(classImportName)}`;\n}\n\nfunction generateClassNames(rules: ICSSRules): IStyles {\n  return Object.keys(rules).reduce(\n    (acc, classImportName) => ({\n      ...acc,\n      [classImportName]: getUniqueClassName(classImportName),\n    }),\n    {},\n  );\n}\n\nexport default generateClassNames;\n","import camelToKebab from './utils/camelToKebab';\nimport generateClassNames from './utils/generateClassNames';\n\nimport { IStyles } from '../types';\nimport { ICSSRuleFunction, ICSSRules, ICSSRule } from './types';\n\nexport class StyleSheet {\n  private _rulesByModule: Map<object, ICSSRules> = new Map();\n  private _classNamesByModule: Map<object, IStyles> = new Map();\n  private _data: any = {};\n  private _styleNode: Element;\n\n  attach() {\n    this._styleNode = this._styleNode || document.createElement('style');\n\n    const discoveredStyles: string[] = [];\n    this._rulesByModule.forEach((_, module) => {\n      discoveredStyles.push(this._getModuleCSS(module));\n    });\n\n    this._styleNode.innerHTML = discoveredStyles.join(' ');\n\n    document.getElementsByTagName('head')[0].appendChild(this._styleNode);\n  }\n\n  update(data: any) {\n    this._data = {\n      ...this._data,\n      ...data,\n    };\n\n    if (this._styleNode) {\n      this.attach();\n    }\n  }\n\n  registerModuleTheme(module: object, rules: ICSSRules) {\n    //todo maybe we would like to update overrides for module? Or at least show warning instead of Error\n    if (this._rulesByModule.get(module)) {\n      throw new Error('can`t register multiple themes for one module');\n    }\n\n    this._rulesByModule.set(module, rules);\n    this._classNamesByModule.set(module, generateClassNames(rules));\n  }\n\n  getModuleClassNames(module: any): IStyles {\n    return this._classNamesByModule.get(module);\n  }\n\n  private _getModuleCSS(module: any): string {\n    const moduleRules = this._rulesByModule.get(module);\n    const moduleClassNames = this._classNamesByModule.get(module);\n\n    if (!moduleRules || !moduleClassNames) {\n      return '';\n    }\n\n    return Object.keys(moduleRules)\n      .map(classImportName =>\n        this._getRuleCSS(\n          moduleRules[classImportName],\n          moduleClassNames[classImportName],\n        ),\n      )\n      .join(' ');\n  }\n\n  private _getRuleCSS(rule: ICSSRule, ruleClassName: string): string {\n    if (!rule || !ruleClassName) {\n      return '';\n    }\n\n    const complexRuleNames = Object.keys(rule)\n      .filter(ruleName => typeof rule[ruleName] === 'object')\n      .map(\n        ruleName => (ruleName.indexOf('&') !== -1 ? ruleName : `& ${ruleName}`),\n      );\n\n    const complexRules = complexRuleNames\n      .map(ruleName => {\n        const selector = ruleName.replace(/&/g, `.${ruleClassName}`);\n        //don't want to allow deep nesting now, maybe later\n        return `${selector} {${this._getRuleStyles(rule[ruleName])}}`;\n      })\n      .join(' ');\n\n    return `.${ruleClassName} {${this._getRuleStyles(rule)}} ${complexRules}`;\n  }\n\n  private _getRuleStyles(rule: any) {\n    const simpleRuleNames: Array<string> = Object.keys(rule).filter(\n      ruleName => typeof rule[ruleName] !== 'object',\n    );\n\n    return simpleRuleNames\n      .map(\n        ruleName =>\n          `${camelToKebab(ruleName)}: ${\n            typeof rule[ruleName] === 'function'\n              ? (rule[ruleName] as ICSSRuleFunction)(this._data)\n              : rule[ruleName]\n          }`,\n      )\n      .join('; ');\n  }\n}\n","import { StyleSheet } from './style-sheet';\n\nimport playerAPI from '../../../../core/player-api-decorator';\n\nimport { IStyles } from '../types';\nimport { ICSSRules, IThemeConfig } from './types';\n\nconst DEFAULT_THEME_CONFIG = {\n  color: '#FFF',\n  liveColor: '#ea492e',\n  progressColor: '#FFF',\n};\n\ninterface IThemeService {\n  updateTheme(config: IThemeConfig): void;\n  registerModuleTheme(module: object, rules: ICSSRules): void;\n  get(module: object): IStyles;\n  destroy(): void;\n}\n\nclass ThemeService implements IThemeService {\n  static moduleName = 'theme';\n  static dependencies = ['themeConfig'];\n\n  private _styleSheet: StyleSheet;\n\n  constructor({ themeConfig }: { themeConfig: IThemeConfig }) {\n    this._styleSheet = new StyleSheet();\n\n    this._styleSheet.update({\n      ...DEFAULT_THEME_CONFIG,\n      ...themeConfig,\n    });\n\n    // setTimeout here is for calling `attach` after all modules resolved.\n    window.setTimeout(() => {\n      this._styleSheet && this._styleSheet.attach();\n    }, 0);\n  }\n\n  /**\n   * Method for setting theme for player instance\n   *\n   * @example\n   * player.updateTheme({\n   *   progressColor: \"#AEAD22\"\n   * })\n   * @note\n   *\n   * You can check info about theming [here](/themes)\n   *\n   * @param themeConfig - Theme config\n   *\n   */\n  @playerAPI()\n  updateTheme(themeConfig: IThemeConfig) {\n    this._styleSheet.update(themeConfig);\n  }\n\n  registerModuleTheme(module: object, rules: ICSSRules) {\n    this._styleSheet.registerModuleTheme(module, rules);\n  }\n\n  get(module: any) {\n    return this._styleSheet.getModuleClassNames(module);\n  }\n\n  destroy() {\n    this._styleSheet = null;\n  }\n}\n\nexport { DEFAULT_THEME_CONFIG, IThemeService };\n\nexport default ThemeService;\n","import { TEXT_LABELS } from '../../constants';\nimport { ITextMapConfig } from './types';\n\nconst map: ITextMapConfig = {\n  [TEXT_LABELS.LOGO_LABEL]: 'Watch On Site',\n  [TEXT_LABELS.LOGO_TOOLTIP]: 'Watch On Site',\n  [TEXT_LABELS.LIVE_INDICATOR_TEXT]: ({ isEnded }) =>\n    !isEnded ? 'Live' : 'Live Ended',\n  [TEXT_LABELS.LIVE_SYNC_LABEL]: 'Sync to Live',\n  [TEXT_LABELS.LIVE_SYNC_TOOLTIP]: 'Sync to Live',\n  [TEXT_LABELS.PAUSE_CONTROL_LABEL]: 'Pause',\n  [TEXT_LABELS.PLAY_CONTROL_LABEL]: 'Play',\n  [TEXT_LABELS.PROGRESS_CONTROL_LABEL]: 'Progress control',\n  [TEXT_LABELS.PROGRESS_CONTROL_VALUE]: ({ percent }) =>\n    `Already played ${percent}%`,\n  [TEXT_LABELS.MUTE_CONTROL_LABEL]: 'Mute',\n  [TEXT_LABELS.MUTE_CONTROL_TOOLTIP]: 'Mute',\n  [TEXT_LABELS.UNMUTE_CONTROL_LABEL]: 'Unmute',\n  [TEXT_LABELS.UNMUTE_CONTROL_TOOLTIP]: 'Unmute',\n  [TEXT_LABELS.VOLUME_CONTROL_LABEL]: 'Volume control',\n  [TEXT_LABELS.VOLUME_CONTROL_VALUE]: ({ volume }) => `Volume is ${volume}%`,\n  [TEXT_LABELS.ENTER_FULL_SCREEN_LABEL]: 'Enter full screen mode',\n  [TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP]: 'Enter full screen mode',\n  [TEXT_LABELS.EXIT_FULL_SCREEN_LABEL]: 'Exit full screen mode',\n  [TEXT_LABELS.EXIT_FULL_SCREEN_TOOLTIP]: 'Exit full screen mode',\n  [TEXT_LABELS.DOWNLOAD_BUTTON_LABEL]: 'Download',\n  [TEXT_LABELS.DOWNLOAD_BUTTON_TOOLTIP]: 'Download',\n};\n\nexport default map;\n","import DEFAULT_TEXTS from './default-texts';\n\nimport { ITextMap, ITextMapConfig } from './types';\nimport { IPlayerConfig } from '../../core/config';\n\nexport default class TextMap implements ITextMap {\n  static moduleName = 'textMap';\n  static dependencies = ['config'];\n\n  private _textMap: ITextMapConfig;\n\n  constructor({ config }: { config: IPlayerConfig }) {\n    this._textMap = {\n      ...DEFAULT_TEXTS,\n      ...config.texts,\n    };\n  }\n\n  get(id: string, args: any): string {\n    if (!this._textMap) {\n      return;\n    }\n\n    const text = this._textMap[id];\n\n    if (typeof text === 'function') {\n      return text(args);\n    }\n\n    return text;\n  }\n\n  destroy() {\n    this._textMap = null;\n  }\n}\n","import { IFullScreenHelper } from './types';\n\nconst fnMap = [\n  [\n    'requestFullscreen',\n    'exitFullscreen',\n    'fullscreenElement',\n    'fullscreenEnabled',\n    'fullscreenchange',\n    'fullscreenerror',\n  ],\n  // new WebKit\n  [\n    'webkitRequestFullscreen',\n    'webkitExitFullscreen',\n    'webkitFullscreenElement',\n    'webkitFullscreenEnabled',\n    'webkitfullscreenchange',\n    'webkitfullscreenerror',\n  ],\n  // old WebKit (Safari 5.1)\n  [\n    'webkitRequestFullScreen',\n    'webkitCancelFullScreen',\n    'webkitCurrentFullScreenElement',\n    'webkitCancelFullScreen',\n    'webkitfullscreenchange',\n    'webkitfullscreenerror',\n  ],\n  [\n    'mozRequestFullScreen',\n    'mozCancelFullScreen',\n    'mozFullScreenElement',\n    'mozFullScreenEnabled',\n    'mozfullscreenchange',\n    'mozfullscreenerror',\n  ],\n  [\n    'msRequestFullscreen',\n    'msExitFullscreen',\n    'msFullscreenElement',\n    'msFullscreenEnabled',\n    'MSFullscreenChange',\n    'MSFullscreenError',\n  ],\n];\n\n/* ignore coverage */\nfunction getFullScreenFn(): IFullScreenFnMap | boolean {\n  const ret: IFullScreenFnMap = {};\n\n  for (let i = 0; i < fnMap.length; i += 1) {\n    if (fnMap[i][1] in document) {\n      for (let j = 0; j < fnMap[i].length; j += 1) {\n        ret[fnMap[0][j]] = fnMap[i][j];\n      }\n      return ret;\n    }\n  }\n\n  return false;\n}\n\ninterface IFullScreenFnMap {\n  [fn: string]: string;\n}\n\nexport default class DesktopFullScreen implements IFullScreenHelper {\n  private _elem: HTMLElement;\n  private _callback: EventListener;\n  private _fullscreenFn: IFullScreenFnMap | boolean;\n\n  constructor(elem: HTMLElement, callback: EventListener) {\n    this._elem = elem;\n    this._callback = callback;\n    this._fullscreenFn = getFullScreenFn();\n\n    this._bindEvents();\n  }\n\n  get isAPIExist() {\n    return Boolean(this._fullscreenFn);\n  }\n\n  get isInFullScreen() {\n    if (typeof this._fullscreenFn === 'boolean') {\n      return false;\n    }\n\n    return Boolean((document as any)[this._fullscreenFn.fullscreenElement]);\n  }\n\n  get isEnabled() {\n    if (typeof this._fullscreenFn === 'boolean') {\n      return false;\n    }\n\n    return (\n      this.isAPIExist && (document as any)[this._fullscreenFn.fullscreenEnabled]\n    );\n  }\n\n  private _bindEvents() {\n    if (typeof this._fullscreenFn === 'boolean') {\n      return false;\n    }\n\n    document.addEventListener(\n      this._fullscreenFn.fullscreenchange,\n      this._callback,\n    );\n  }\n\n  private _unbindEvents() {\n    if (typeof this._fullscreenFn === 'boolean') {\n      return false;\n    }\n\n    document.removeEventListener(\n      this._fullscreenFn.fullscreenchange,\n      this._callback,\n    );\n  }\n\n  request() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    const request = (this._fullscreenFn as IFullScreenFnMap).requestFullscreen;\n\n    // Work around Safari 5.1 bug: reports support for\n    // keyboard in fullscreen even though it doesn't.\n    // Browser sniffing, since the alternative with\n    // setTimeout is even worse.\n\n    if (/5\\.1[.\\d]* Safari/.test(navigator.userAgent)) {\n      (this._elem as any)[request]();\n    } else {\n      (this._elem as any)[request]((Element as any).ALLOW_KEYBOARD_INPUT);\n    }\n  }\n\n  exit() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    (document as any)[\n      (this._fullscreenFn as IFullScreenFnMap).exitFullscreen\n    ]();\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._elem = null;\n    this._callback = null;\n  }\n}\n","import { IFullScreenHelper } from './types';\n\nconst HAVE_METADATA = 1;\n\nlet isFullScreenRequested = false;\n\nexport default class IOSFullScreen implements IFullScreenHelper {\n  private _elem: HTMLVideoElement;\n  private _callback: EventListener;\n\n  constructor(elem: HTMLVideoElement, callback: EventListener) {\n    this._elem = elem;\n    this._callback = callback;\n\n    this._bindEvents();\n\n    this._enterWhenHasMetaData = this._enterWhenHasMetaData.bind(this);\n  }\n\n  get isAPIExist() {\n    return Boolean(this._elem && this._elem.webkitSupportsFullscreen);\n  }\n\n  get isInFullScreen() {\n    return Boolean(this._elem && this._elem.webkitDisplayingFullscreen);\n  }\n\n  get isEnabled() {\n    return this.isAPIExist;\n  }\n\n  private _bindEvents() {\n    this._elem.addEventListener('webkitbeginfullscreen', this._callback);\n    this._elem.addEventListener('webkitendfullscreen', this._callback);\n  }\n\n  private _unbindEvents() {\n    this._elem.removeEventListener('webkitbeginfullscreen', this._callback);\n    this._elem.removeEventListener('webkitendfullscreen', this._callback);\n\n    this._elem.removeEventListener(\n      'loadedmetadata',\n      this._enterWhenHasMetaData,\n    );\n  }\n\n  private _enterWhenHasMetaData() {\n    this._elem.removeEventListener(\n      'loadedmetadata',\n      this._enterWhenHasMetaData,\n    );\n\n    isFullScreenRequested = false;\n\n    this.request();\n  }\n\n  request() {\n    if (!this.isEnabled || this.isInFullScreen || isFullScreenRequested) {\n      return false;\n    }\n\n    try {\n      this._elem.webkitEnterFullscreen();\n    } catch (e) {\n      if (this._elem.readyState < HAVE_METADATA) {\n        this._elem.addEventListener(\n          'loadedmetadata',\n          this._enterWhenHasMetaData,\n        );\n        isFullScreenRequested = true;\n      }\n    }\n  }\n\n  exit() {\n    if (!this.isEnabled || !this.isInFullScreen) {\n      return false;\n    }\n\n    this._elem.webkitExitFullscreen();\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._elem = null;\n    this._callback = null;\n  }\n}\n","import { isIOS } from '../../utils/device-detection';\nimport playerAPI from '../../core/player-api-decorator';\nimport DesktopFullScreen from './desktop';\nimport IOSFullScreen from './ios';\n\nimport { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../constants';\nimport {\n  IFullScreenManager,\n  IFullScreenHelper,\n  IFullScreenConfig,\n} from './types';\nimport { IEventEmitter } from '../event-emitter/types';\nimport { IPlaybackEngine } from '../playback-engine/types';\nimport { IPlayerConfig } from '../../core/config';\nimport { IRootContainer } from '../root-container/types';\n\nconst DEFAULT_CONFIG: IFullScreenConfig = {\n  exitFullScreenOnEnd: true,\n  enterFullScreenOnPlay: false,\n  exitFullScreenOnPause: false,\n  pauseVideoOnFullScreenExit: false,\n};\n\nexport default class FullScreenManager implements IFullScreenManager {\n  static moduleName = 'fullScreenManager';\n  static dependencies = ['eventEmitter', 'engine', 'rootContainer', 'config'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _helper: IFullScreenHelper;\n\n  private _exitFullScreenOnEnd: boolean = false;\n  private _enterFullScreenOnPlay: boolean = false;\n  private _exitFullScreenOnPause: boolean = false;\n  private _pauseVideoOnFullScreenExit: boolean = false;\n\n  private _isEnabled: boolean;\n\n  private _unbindEvents: Function;\n\n  constructor({\n    eventEmitter,\n    engine,\n    rootContainer,\n    config,\n  }: {\n    engine: IPlaybackEngine;\n    eventEmitter: IEventEmitter;\n    rootContainer: IRootContainer;\n    config: IPlayerConfig;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n\n    if (config.fullScreen === false) {\n      this._isEnabled = false;\n    } else {\n      this._isEnabled = true;\n      const _config: IFullScreenConfig = {\n        ...DEFAULT_CONFIG,\n        ...(typeof config.fullScreen === 'object' ? config.fullScreen : {}),\n      };\n\n      this._exitFullScreenOnEnd = _config.exitFullScreenOnEnd;\n      this._enterFullScreenOnPlay = _config.enterFullScreenOnPlay;\n      this._exitFullScreenOnPause = _config.exitFullScreenOnPause;\n      this._pauseVideoOnFullScreenExit = _config.pauseVideoOnFullScreenExit;\n    }\n    this._onChange = this._onChange.bind(this);\n\n    if (isIOS()) {\n      this._helper = new IOSFullScreen(this._engine.getNode(), this._onChange);\n    } else {\n      this._helper = new DesktopFullScreen(rootContainer.node, this._onChange);\n    }\n\n    this._bindEvents();\n  }\n\n  private _onChange() {\n    if (!this._helper.isInFullScreen && this._pauseVideoOnFullScreenExit) {\n      this._engine.pause();\n    }\n    this._eventEmitter.emit(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this._helper.isInFullScreen,\n    );\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._processNextStateFromEngine],\n        [VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED, this._enterOnPlayRequested],\n      ],\n      this,\n    );\n  }\n\n  private _exitOnEnd() {\n    if (this._exitFullScreenOnEnd && this.isInFullScreen) {\n      this.exitFullScreen();\n    }\n  }\n\n  private _enterOnPlayRequested() {\n    if (this._enterFullScreenOnPlay && !this.isInFullScreen) {\n      this.enterFullScreen();\n    }\n  }\n\n  private _exitOnPauseRequested() {\n    if (this._exitFullScreenOnPause && this.isInFullScreen) {\n      this.exitFullScreen();\n    }\n  }\n\n  private _processNextStateFromEngine({\n    nextState,\n  }: {\n    nextState: EngineState;\n  }) {\n    switch (nextState) {\n      case EngineState.ENDED: {\n        this._exitOnEnd();\n        break;\n      }\n      case EngineState.PAUSED: {\n        this._exitOnPauseRequested();\n        break;\n      }\n\n      /* ignore coverage */\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Player would try to enter fullscreen mode.\n   * Behavior of fullscreen mode on different platforms may differ.\n   * @example\n   * player.enterFullScreen();\n   */\n  @playerAPI()\n  enterFullScreen() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    this._helper.request();\n  }\n\n  /**\n   * Player would try to exit fullscreen mode.\n   * @example\n   * player.exitFullScreen();\n   */\n  @playerAPI()\n  exitFullScreen() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    this._helper.exit();\n  }\n\n  /**\n   * Return true if player is in full screen\n   * @example\n   * console.log(player.isInFullScreen); // false\n   */\n  @playerAPI()\n  get isInFullScreen(): boolean {\n    if (!this.isEnabled) {\n      return false;\n    }\n\n    return this._helper.isInFullScreen;\n  }\n\n  get isEnabled() {\n    return this._helper.isEnabled && this._isEnabled;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._helper.destroy();\n    this._helper = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import {\n  EngineState,\n  VIDEO_EVENTS,\n  LiveState,\n  UI_EVENTS,\n} from '../../constants';\n\nimport { IEventEmitter, IEventMap } from '../event-emitter/types';\nimport { ILiveStateEngineDependencies, IPlaybackEngine } from './types';\n\nconst SEEK_BY_UI_EVENTS = [\n  UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,\n  UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n  UI_EVENTS.PROGRESS_CHANGE_TRIGGERED,\n];\n\nclass LiveStateEngine {\n  static moduleName = 'liveStateEngine';\n  static dependencies = ['eventEmitter', 'engine'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _state: LiveState;\n\n  private _isSeekedByUIWhilePlaying: boolean;\n\n  private _unbindEvents: Function;\n\n  constructor({ eventEmitter, engine }: ILiveStateEngineDependencies) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._state = LiveState.NONE;\n\n    this._isSeekedByUIWhilePlaying = null;\n\n    this._bindEvents();\n  }\n\n  get state(): LiveState {\n    return this._state;\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._processStateChange],\n        ...SEEK_BY_UI_EVENTS.map(\n          eventName => [eventName, this._processSeekByUI] as IEventMap,\n        ),\n        [VIDEO_EVENTS.DYNAMIC_CONTENT_ENDED, this._onDynamicContentEnded],\n      ],\n      this,\n    );\n  }\n\n  private _processStateChange({\n    prevState,\n    nextState,\n  }: {\n    prevState: EngineState;\n    nextState: EngineState;\n  }) {\n    if (nextState === EngineState.SRC_SET) {\n      this._setState(LiveState.NONE);\n      return;\n    }\n\n    if (!this._engine.isDynamicContent || this._engine.isDynamicContentEnded) {\n      return;\n    }\n\n    switch (nextState) {\n      case EngineState.METADATA_LOADED:\n        this._setState(LiveState.INITIAL);\n        break;\n\n      case EngineState.PLAY_REQUESTED:\n        if (this._state === LiveState.INITIAL) {\n          this._engine.syncWithLive();\n        }\n        break;\n\n      case EngineState.PLAYING:\n        // NOTE: skip PLAYING event after events like `WAITING` and other not important events.\n        if (\n          this._state === LiveState.INITIAL ||\n          this._state === LiveState.NOT_SYNC ||\n          this._isSeekedByUIWhilePlaying\n        ) {\n          this._setState(\n            this._engine.isSyncWithLive ? LiveState.SYNC : LiveState.NOT_SYNC,\n          );\n          this._isSeekedByUIWhilePlaying = false;\n        }\n        break;\n\n      case EngineState.PAUSED:\n        // NOTE: process `PAUSED` event only `PLAYING`, to be sure its not related with `WAITING` events\n        if (prevState === EngineState.PLAYING) {\n          this._setState(LiveState.NOT_SYNC);\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _processSeekByUI() {\n    if (\n      this._engine.isDynamicContent &&\n      this._engine.getCurrentState() === EngineState.PLAYING\n    ) {\n      // NOTE: flag should be handled on `PLAYING` state in `_processStateChange`\n      this._isSeekedByUIWhilePlaying = true;\n    }\n  }\n\n  private _onDynamicContentEnded() {\n    this._setState(LiveState.ENDED);\n  }\n\n  private _setState(state: LiveState) {\n    if (this._state !== state) {\n      const prevState = this._state;\n      const nextState = state;\n\n      this._state = state;\n      this._eventEmitter.emit(VIDEO_EVENTS.LIVE_STATE_CHANGED, {\n        prevState,\n        nextState,\n      });\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._eventEmitter = null;\n    this._engine = null;\n    this._state = null;\n  }\n}\n\nexport default LiveStateEngine;\n","export default {\n  info(message: any, ...optionalParams: any[]) {\n    window.console.info(message, ...optionalParams);\n  },\n  warn(message: any, ...optionalParams: any[]) {\n    window.console.warn(message, ...optionalParams);\n  },\n  error(name: string, ...optionalParams: any[]) {\n    window.console.error(name, ...optionalParams);\n  },\n};\n","import { EventEmitter, ListenerFn } from 'eventemitter3';\n\nimport logger from './logger';\n\nexport const KEYCODES = {\n  SPACE_BAR: 32,\n  ENTER: 13,\n  TAB: 9,\n  LEFT_ARROW: 37,\n  RIGHT_ARROW: 39,\n  UP_ARROW: 38,\n  DOWN_ARROW: 40,\n  DEBUG_KEY: 68,\n};\n\ninterface ICallbacks {\n  [keyCode: string]: ListenerFn;\n}\n\nexport default class KeyboardInterceptorCore {\n  //TODO: Find how to set proper types here\n  private _eventEmitter: any;\n  private _node: HTMLElement;\n\n  constructor(node: HTMLElement, callbacks?: ICallbacks) {\n    this._eventEmitter = new EventEmitter();\n    this._node = node;\n\n    callbacks && this._attachCallbacks(callbacks);\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  private _attachCallbacks(callbacks: ICallbacks) {\n    Object.keys(callbacks).forEach((keyCode: string) => {\n      const keyCodeCallbacks = callbacks[keyCode];\n      if (Array.isArray(keyCodeCallbacks)) {\n        keyCodeCallbacks.forEach(callback =>\n          this._eventEmitter.on(keyCode, callback),\n        );\n      } else {\n        this._eventEmitter.on(keyCode, keyCodeCallbacks);\n      }\n    });\n  }\n\n  private _unattachCallbacks() {\n    this._eventEmitter.removeAllListeners();\n  }\n\n  private _bindCallbacks() {\n    this._processKeyboardInput = this._processKeyboardInput.bind(this);\n  }\n\n  private _bindEvents() {\n    this._node.addEventListener('keydown', this._processKeyboardInput, false);\n  }\n\n  private _unbindEvents() {\n    this._node.removeEventListener(\n      'keydown',\n      this._processKeyboardInput,\n      false,\n    );\n  }\n\n  addCallbacks(callbacks: ICallbacks) {\n    this._attachCallbacks(callbacks);\n  }\n\n  private _processKeyboardInput(e: KeyboardEvent) {\n    this._eventEmitter.emit(e.keyCode, e);\n  }\n\n  private get _isDestroyed(): boolean {\n    return !this._node && !this._eventEmitter;\n  }\n\n  destroy() {\n    if (this._isDestroyed) {\n      logger.warn(\n        'KeyboardInterceptor.destroy called after already been destroyed',\n      );\n      return;\n    } else {\n      this._unbindEvents();\n      this._node = null;\n      this._unattachCallbacks();\n      this._eventEmitter = null;\n    }\n  }\n}\n","import { UI_EVENTS } from '../../constants';\nimport {\n  isIPhone,\n  isIPod,\n  isIPad,\n  isAndroid,\n} from '../../utils/device-detection';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../utils/keyboard-interceptor';\n\nimport { IEventEmitter } from '../event-emitter/types';\nimport { IPlaybackEngine } from '../playback-engine/types';\nimport { IPlayerConfig } from '../../core/config';\nimport { IKeyboardControl } from './types';\nimport { IRootContainer } from '../root-container/types';\nimport { ListenerFn } from 'eventemitter3';\n\nexport const AMOUNT_TO_SKIP_SECONDS = 5;\nexport const AMOUNT_TO_CHANGE_VOLUME = 10;\n\nexport default class KeyboardControl implements IKeyboardControl {\n  static moduleName = 'keyboardControl';\n  static dependencies = ['engine', 'eventEmitter', 'rootContainer', 'config'];\n\n  private _isEnabled: boolean;\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _rootNode: HTMLElement;\n  private _keyboardInterceptor: KeyboardInterceptor;\n\n  constructor({\n    config,\n    eventEmitter,\n    rootContainer,\n    engine,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    rootContainer: IRootContainer;\n    engine: IPlaybackEngine;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._rootNode = rootContainer.node;\n\n    if (isIPhone() || isIPod() || isIPad() || isAndroid()) {\n      this._isEnabled = false;\n    } else {\n      this._isEnabled = config.disableControlWithKeyboard !== false;\n    }\n\n    this._initInterceptor();\n  }\n\n  private _initInterceptor() {\n    if (this._isEnabled) {\n      this._keyboardInterceptor = new KeyboardInterceptor(this._rootNode);\n      this._attachDefaultControls();\n    }\n  }\n\n  private _attachDefaultControls() {\n    this._keyboardInterceptor.addCallbacks({\n      [KEYCODES.TAB]: () => {\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n      },\n      [KEYCODES.SPACE_BAR]: e => {\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.togglePlayback();\n      },\n      [KEYCODES.LEFT_ARROW]: e => {\n        if (this._engine.isSeekAvailable) {\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n          );\n          this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n        }\n      },\n      [KEYCODES.RIGHT_ARROW]: e => {\n        if (this._engine.isSeekAvailable) {\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n          this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n        }\n      },\n      [KEYCODES.UP_ARROW]: e => {\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.increaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n      [KEYCODES.DOWN_ARROW]: e => {\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.decreaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    if (this._keyboardInterceptor) {\n      this._keyboardInterceptor.destroy();\n    }\n  }\n\n  addKeyControl(key: number, callback: ListenerFn) {\n    if (this._isEnabled) {\n      this._keyboardInterceptor.addCallbacks({\n        [key]: callback,\n      });\n    }\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n\n    this._rootNode = null;\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","function getElementByHook(element: HTMLElement, hook: string): HTMLElement {\n  return element.querySelector(`[data-hook=\"${hook}\"]`);\n}\n\nexport default getElementByHook;\n","function toggleElementClass(\n  element: HTMLElement,\n  className: string,\n  shouldAdd: boolean,\n) {\n  if (shouldAdd) {\n    element.classList.add(className);\n  } else {\n    element.classList.remove(className);\n  }\n}\n\nexport default toggleElementClass;\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { debugPanelTemplate } from './templates';\n\nimport syntaxHighlight from './syntaxHighlight';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleElementClass from '../core/toggleElementClass';\n\nimport {\n  IDebugPanelViewStyles,\n  IDebugPanelViewCallbacks,\n  IDebugPanelViewConfig,\n} from './types';\n\nimport styles from './debug-panel.scss';\n\nclass DebugPanelView extends View<IDebugPanelViewStyles>\n  implements IView<IDebugPanelViewStyles> {\n  private _callbacks: IDebugPanelViewCallbacks;\n\n  private _$rootElement: HTMLElement;\n  private _$infoContainer: HTMLElement;\n  private _$closeButton: HTMLElement;\n\n  constructor(config: IDebugPanelViewConfig) {\n    super();\n    const { callbacks } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$rootElement = htmlToElement(\n      debugPanelTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._$closeButton = getElementByHook(\n      this._$rootElement,\n      'debug-panel-close-button',\n    );\n    this._$infoContainer = getElementByHook(\n      this._$rootElement,\n      'debug-panel-info-container',\n    );\n  }\n\n  private _bindEvents() {\n    this._$closeButton.addEventListener(\n      'click',\n      this._callbacks.onCloseButtonClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$closeButton.removeEventListener(\n      'click',\n      this._callbacks.onCloseButtonClick,\n    );\n  }\n\n  show() {\n    toggleElementClass(this._$rootElement, this.styleNames.hidden, false);\n  }\n\n  hide() {\n    toggleElementClass(this._$rootElement, this.styleNames.hidden, true);\n  }\n\n  setInfo(info: any) {\n    this._$infoContainer.innerHTML = syntaxHighlight(\n      JSON.stringify(info, undefined, 4),\n      this.styleNames,\n    );\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n    this._$closeButton = null;\n    this._$infoContainer = null;\n\n    this._callbacks = null;\n  }\n}\n\nDebugPanelView.extendStyleNames(styles);\n\nexport default DebugPanelView;\n","import { IDebugPanelHighlightStyles } from './types';\n\nfunction syntaxHighlight(json: string, styleNames: IDebugPanelHighlightStyles) {\n  json = json\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n\n  return json.replace(\n    /(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g,\n    (match: string) => {\n      let cls = styleNames.number;\n      if (/^\"/.test(match)) {\n        if (/:$/.test(match)) {\n          cls = styleNames.key;\n        } else {\n          cls = styleNames.string;\n        }\n      } else if (/true|false/.test(match)) {\n        cls = styleNames.boolean;\n      } else if (/null/.test(match)) {\n        cls = styleNames.null;\n      }\n      return `<span class=\"${cls}\">${match}</span>`;\n    },\n  );\n}\n\nexport default syntaxHighlight;\n","import { MediaStreamDeliveryPriority } from '../../../constants';\nimport View from './debug-panel.view';\n\nimport { KEYCODES } from '../../../utils/keyboard-interceptor';\n\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IRootContainer } from '../../root-container/types';\nimport { IKeyboardControl } from '../../keyboard-control/types';\n\nconst UPDATE_TIME = 1000;\n\nexport default class DebugPanel {\n  static moduleName = 'debugPanel';\n  static View = View;\n  static dependencies = ['engine', 'rootContainer', 'keyboardControl'];\n\n  private _engine: IPlaybackEngine;\n\n  private _interval: number;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    rootContainer,\n    keyboardControl,\n  }: {\n    engine: IPlaybackEngine;\n    rootContainer: IRootContainer;\n    keyboardControl: IKeyboardControl;\n  }) {\n    this._engine = engine;\n\n    this._bindCallbacks();\n    this._initUI();\n\n    this.hide();\n\n    rootContainer.appendComponentNode(this.node);\n\n    keyboardControl.addKeyControl(KEYCODES.DEBUG_KEY, this._keyControlCallback);\n  }\n\n  private _keyControlCallback(e: KeyboardEvent) {\n    if (e.ctrlKey && e.shiftKey) {\n      this.show();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    this.view = new View({\n      callbacks: {\n        onCloseButtonClick: this.hide,\n      },\n    });\n  }\n\n  private _bindCallbacks() {\n    this.updateInfo = this.updateInfo.bind(this);\n    this.hide = this.hide.bind(this);\n    this._keyControlCallback = this._keyControlCallback.bind(this);\n  }\n\n  getDebugInfo() {\n    const {\n      url,\n      type,\n      deliveryPriority,\n      currentBitrate,\n      overallBufferLength,\n      nearestBufferSegInfo,\n      viewDimensions,\n      currentTime,\n      duration,\n      loadingStateTimestamps,\n      bitrates,\n      bwEstimate,\n    } = this._engine.getDebugInfo();\n\n    return {\n      url,\n      type,\n      deliveryPriority: MediaStreamDeliveryPriority[deliveryPriority],\n      currentBitrate,\n      overallBufferLength,\n      nearestBufferSegInfo,\n      viewDimensions,\n      currentTime,\n      duration,\n      loadingStateTimestamps,\n      bitrates,\n      bwEstimate,\n    };\n  }\n\n  updateInfo() {\n    this.view.setInfo(this.getDebugInfo());\n  }\n\n  setUpdateInterval() {\n    this.clearUpdateInterval();\n    this._interval = window.setInterval(this.updateInfo, UPDATE_TIME);\n  }\n\n  clearUpdateInterval() {\n    window.clearInterval(this._interval);\n  }\n\n  show() {\n    if (this.isHidden) {\n      this.updateInfo();\n      this.setUpdateInterval();\n      this.view.show();\n      this.isHidden = false;\n    }\n  }\n\n  hide() {\n    if (!this.isHidden) {\n      this.clearUpdateInterval();\n      this.view.hide();\n      this.isHidden = true;\n    }\n  }\n\n  destroy() {\n    this.clearUpdateInterval();\n\n    this.view.destroy();\n    this.view = null;\n  }\n}\n","type IScreenViewStyles = {\n  screen: string;\n  screenTopBackground: string;\n  screenBottomBackground: string;\n  hidden: string;\n  visible: string;\n  hiddenCursor: string;\n  horizontalVideo: string;\n  verticalVideo: string;\n  fillMode: string;\n  blurMode: string;\n  regularMode: string;\n};\n\ntype IScreenViewCallbacks = {\n  onWrapperMouseClick: EventListenerOrEventListenerObject;\n  onWrapperMouseDblClick: EventListenerOrEventListenerObject;\n};\n\ntype IScreenViewConfig = {\n  callbacks: IScreenViewCallbacks;\n  playbackViewNode: HTMLElement;\n  nativeControls: boolean;\n};\n\ninterface IScreenConfig {\n  disableClickProcessing?: boolean;\n  nativeControls?: boolean;\n}\n\nenum VideoViewMode {\n  REGULAR = 'REGULAR',\n  BLUR = 'BLUR',\n  FILL = 'FILL',\n}\n\ninterface IScreen {\n  node: HTMLElement;\n  showCursor(): void;\n  hideCursor(): void;\n\n  show(): void;\n  hide(): void;\n\n  setVideoViewMode(viewMode: VideoViewMode): void;\n\n  destroy(): void;\n}\n\nexport {\n  IScreen,\n  VideoViewMode,\n  IScreenConfig,\n  IScreenViewStyles,\n  IScreenViewCallbacks,\n  IScreenViewConfig,\n};\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { screenTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleElementClass from '../core/toggleElementClass';\n\nimport {\n  VideoViewMode,\n  IScreenViewStyles,\n  IScreenViewCallbacks,\n  IScreenViewConfig,\n} from './types';\n\nimport styles from './screen.scss';\n\nclass ScreenView extends View<IScreenViewStyles>\n  implements IView<IScreenViewStyles> {\n  private _callbacks: IScreenViewCallbacks;\n\n  private _$rootElement: HTMLElement;\n  private _$canvas: HTMLCanvasElement;\n  private _$playbackNode: HTMLVideoElement;\n\n  private _widthHeightRatio: number;\n  private _requestAnimationFrameID: number;\n  private _currentMode: string;\n  private _styleNamesByViewMode: {\n    [viewMode: string]: string;\n  };\n\n  constructor(config: IScreenViewConfig) {\n    super();\n    const { callbacks, nativeControls, playbackViewNode } = config;\n\n    this._callbacks = callbacks;\n\n    this._styleNamesByViewMode = {\n      [VideoViewMode.REGULAR]: this.styleNames.regularMode,\n      [VideoViewMode.BLUR]: this.styleNames.blurMode,\n      [VideoViewMode.FILL]: this.styleNames.fillMode,\n    };\n\n    this._bindCallbacks();\n\n    if (nativeControls) {\n      playbackViewNode.setAttribute('controls', 'true');\n    }\n\n    this._initDOM(playbackViewNode);\n    this._bindEvents();\n    this.setViewMode(VideoViewMode.REGULAR);\n  }\n\n  private _bindCallbacks() {\n    this._updateBackground = this._updateBackground.bind(this);\n  }\n\n  private _initDOM(playbackViewNode: HTMLElement) {\n    this._$rootElement = htmlToElement(\n      screenTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._$playbackNode = playbackViewNode as HTMLVideoElement;\n    this._$rootElement.appendChild(playbackViewNode);\n\n    this._$canvas = getElementByHook(\n      this._$rootElement,\n      'background-canvas',\n    ) as HTMLCanvasElement;\n  }\n\n  private _bindEvents() {\n    this._$rootElement.addEventListener(\n      'click',\n      this._callbacks.onWrapperMouseClick,\n    );\n    this._$rootElement.addEventListener(\n      'dblclick',\n      this._callbacks.onWrapperMouseDblClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$rootElement.removeEventListener(\n      'click',\n      this._callbacks.onWrapperMouseClick,\n    );\n    this._$rootElement.removeEventListener(\n      'dblclick',\n      this._callbacks.onWrapperMouseDblClick,\n    );\n  }\n\n  updateVideoAspectRatio(widthHeightRatio: number) {\n    this._widthHeightRatio = widthHeightRatio;\n    const isHorizontal = this._widthHeightRatio > 1;\n    toggleElementClass(\n      this._$rootElement,\n      this.styleNames.horizontalVideo,\n      isHorizontal,\n    );\n    toggleElementClass(\n      this._$rootElement,\n      this.styleNames.verticalVideo,\n      !isHorizontal,\n    );\n  }\n\n  focusOnNode() {\n    this._$rootElement.focus();\n  }\n\n  show() {\n    toggleElementClass(this._$rootElement, this.styleNames.hidden, false);\n  }\n\n  hide() {\n    toggleElementClass(this._$rootElement, this.styleNames.hidden, true);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  hideCursor() {\n    toggleElementClass(this._$rootElement, this.styleNames.hiddenCursor, true);\n  }\n\n  showCursor() {\n    toggleElementClass(this._$rootElement, this.styleNames.hiddenCursor, false);\n  }\n\n  setViewMode(viewMode: VideoViewMode) {\n    if (this._styleNamesByViewMode[viewMode]) {\n      this.resetBackground();\n\n      Object.keys(this._styleNamesByViewMode).forEach(mode => {\n        toggleElementClass(\n          this._$rootElement,\n          this._styleNamesByViewMode[mode],\n          false,\n        );\n      });\n\n      toggleElementClass(\n        this._$rootElement,\n        this._styleNamesByViewMode[viewMode],\n        true,\n      );\n\n      if (viewMode === VideoViewMode.BLUR) {\n        this._startUpdatingBackground();\n      } else {\n        this._stopUpdatingBackground();\n      }\n\n      this._currentMode = viewMode;\n    }\n  }\n\n  setBackgroundSize(width: number, height: number) {\n    this.setBackgroundWidth(width);\n    this.setBackgroundHeight(height);\n  }\n\n  setBackgroundWidth(width: number) {\n    this._$canvas.width = width;\n  }\n\n  setBackgroundHeight(height: number) {\n    this._$canvas.height = height;\n  }\n\n  private _startUpdatingBackground() {\n    if (!this._requestAnimationFrameID) {\n      this._updateBackground();\n    }\n  }\n\n  private _stopUpdatingBackground() {\n    if (this._requestAnimationFrameID) {\n      cancelAnimationFrame(this._requestAnimationFrameID);\n      this._requestAnimationFrameID = null;\n    }\n  }\n\n  resetAspectRatio() {\n    const { videoWidth, videoHeight } = this._$playbackNode;\n    this._widthHeightRatio = videoHeight ? videoWidth / videoHeight : 0;\n    const isHorizontal = this._widthHeightRatio > 1;\n    toggleElementClass(\n      this._$rootElement,\n      this.styleNames.horizontalVideo,\n      isHorizontal,\n    );\n    toggleElementClass(\n      this._$rootElement,\n      this.styleNames.verticalVideo,\n      !isHorizontal,\n    );\n  }\n\n  resetBackground() {\n    if (this._currentMode === VideoViewMode.BLUR) {\n      this._clearBackground();\n    }\n  }\n\n  private _getSourceAreas(width: number, height: number): number[][] {\n    if (this._widthHeightRatio > 1) {\n      return [[0, 0, width, 1], [0, height - 1, width, 1]];\n    }\n\n    return [[0, 0, 1, height], [width - 1, 0, 1, height]];\n  }\n\n  private _getCanvasAreas(width: number, height: number): number[][] {\n    if (this._widthHeightRatio > 1) {\n      return [[0, 0, width, height / 2], [0, height / 2, width, height / 2]];\n    }\n\n    return [[0, 0, width / 2, height], [width / 2, 0, width / 2, height]];\n  }\n\n  private _drawAreaFromSource(source: number[], area: number[]) {\n    const [sourceX, sourceY, sourceWidth, sourceHeight] = source;\n    const [areaX, areaY, areaWidth, areaHeight] = area;\n    const ctx = this._$canvas.getContext('2d');\n\n    ctx.drawImage(\n      this._$playbackNode,\n\n      sourceX,\n      sourceY,\n      sourceWidth,\n      sourceHeight,\n\n      areaX,\n      areaY,\n      areaWidth,\n      areaHeight,\n    );\n  }\n  private _drawBackground() {\n    const { videoWidth, videoHeight } = this._$playbackNode;\n    const canvasWidth: number = this._$canvas.width;\n    const canvasHeight: number = this._$canvas.height;\n    const sourceAreas: number[][] = this._getSourceAreas(\n      videoWidth,\n      videoHeight,\n    );\n    const canvasAreas: number[][] = this._getCanvasAreas(\n      canvasWidth,\n      canvasHeight,\n    );\n\n    this._drawAreaFromSource(sourceAreas[0], canvasAreas[0]);\n    this._drawAreaFromSource(sourceAreas[1], canvasAreas[1]);\n  }\n\n  private _updateBackground() {\n    this._drawBackground();\n\n    this._requestAnimationFrameID = requestAnimationFrame(\n      this._updateBackground,\n    );\n  }\n\n  private _clearBackground() {\n    const ctx = this._$canvas.getContext('2d');\n\n    ctx.clearRect(0, 0, this._$canvas.width, this._$canvas.height);\n  }\n\n  destroy() {\n    this._stopUpdatingBackground();\n    this._unbindEvents();\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n    this._$playbackNode = null;\n    this._$canvas = null;\n\n    this._callbacks = null;\n  }\n}\n\nScreenView.extendStyleNames(styles);\n\nexport default ScreenView;\n","import { UI_EVENTS, EngineState } from '../../../constants';\n\nimport View from './screen.view';\n\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IFullScreenManager } from '../../full-screen-manager/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IInteractionIndicator } from '../interaction-indicator/types';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\nimport {\n  IScreen,\n  VideoViewMode,\n  IScreenConfig,\n  IScreenViewConfig,\n} from './types';\n\nconst PLAYBACK_CHANGE_TIMEOUT = 300;\n\nconst DEFAULT_CONFIG: IScreenConfig = {\n  disableClickProcessing: false,\n  nativeControls: false,\n};\n\nexport default class Screen implements IScreen {\n  static moduleName = 'screen';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'config',\n    'fullScreenManager',\n    'interactionIndicator',\n    'rootContainer',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _fullScreenManager: IFullScreenManager;\n  private _interactionIndicator: IInteractionIndicator;\n\n  private _delayedToggleVideoPlaybackTimeout: number;\n\n  private _isClickProcessingDisabled: boolean;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    fullScreenManager,\n    interactionIndicator,\n    rootContainer,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    fullScreenManager: IFullScreenManager;\n    interactionIndicator: IInteractionIndicator;\n    rootContainer: IRootContainer;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._fullScreenManager = fullScreenManager;\n    this._interactionIndicator = interactionIndicator;\n\n    this.isHidden = false;\n\n    this._delayedToggleVideoPlaybackTimeout = null;\n\n    const screenConfig = {\n      ...DEFAULT_CONFIG,\n      ...config.screen,\n    };\n\n    this._isClickProcessingDisabled = screenConfig.disableClickProcessing;\n\n    this._bindCallbacks();\n    this._initUI(screenConfig.nativeControls);\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.node);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._processNodeClick = this._processNodeClick.bind(this);\n    this._processNodeDblClick = this._processNodeDblClick.bind(this);\n    this._toggleVideoPlayback = this._toggleVideoPlayback.bind(this);\n  }\n\n  private _initUI(isNativeControls: boolean) {\n    const config: IScreenViewConfig = {\n      nativeControls: isNativeControls,\n      callbacks: {\n        onWrapperMouseClick: this._processNodeClick,\n        onWrapperMouseDblClick: this._processNodeDblClick,\n      },\n      playbackViewNode: this._engine.getNode(),\n    };\n\n    this.view = new View(config);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [UI_EVENTS.PLAY_OVERLAY_TRIGGERED, this.view.focusOnNode, this.view],\n        [UI_EVENTS.RESIZE, this._updateBackgroundSize],\n        [EngineState.SRC_SET, this.view.resetBackground, this.view],\n        [EngineState.METADATA_LOADED, this.view.resetAspectRatio, this.view],\n      ],\n      this,\n    );\n  }\n\n  private _updateBackgroundSize({\n    width,\n    height,\n  }: {\n    width: number;\n    height: number;\n  }) {\n    this.view.setBackgroundSize(width, height);\n  }\n\n  showCursor() {\n    this.view.showCursor();\n  }\n\n  hideCursor() {\n    this.view.hideCursor();\n  }\n\n  private _processNodeClick() {\n    if (this._isClickProcessingDisabled) {\n      return;\n    }\n\n    this._showPlaybackChangeIndicator();\n\n    if (!this._fullScreenManager.isEnabled) {\n      this._toggleVideoPlayback();\n    } else {\n      this._setDelayedPlaybackToggle();\n    }\n  }\n\n  private _processNodeDblClick() {\n    if (this._isClickProcessingDisabled) {\n      return;\n    }\n\n    if (this._fullScreenManager.isEnabled) {\n      if (this._isDelayedPlaybackToggleExist) {\n        this._clearDelayedPlaybackToggle();\n        this._hideDelayedPlaybackChangeIndicator();\n      }\n\n      this._toggleFullScreen();\n    }\n  }\n\n  private _showPlaybackChangeIndicator() {\n    const state = this._engine.getCurrentState();\n\n    if (state === EngineState.PLAY_REQUESTED || state === EngineState.PLAYING) {\n      this._interactionIndicator.showPause();\n    } else {\n      this._interactionIndicator.showPlay();\n    }\n  }\n\n  private _hideDelayedPlaybackChangeIndicator() {\n    this._interactionIndicator.hideIcons();\n  }\n\n  private _setDelayedPlaybackToggle() {\n    this._clearDelayedPlaybackToggle();\n\n    this._delayedToggleVideoPlaybackTimeout = window.setTimeout(\n      this._toggleVideoPlayback,\n      PLAYBACK_CHANGE_TIMEOUT,\n    );\n  }\n\n  private _clearDelayedPlaybackToggle() {\n    window.clearTimeout(this._delayedToggleVideoPlaybackTimeout);\n    this._delayedToggleVideoPlaybackTimeout = null;\n  }\n\n  private get _isDelayedPlaybackToggleExist() {\n    return Boolean(this._delayedToggleVideoPlaybackTimeout);\n  }\n\n  private _toggleVideoPlayback() {\n    this._clearDelayedPlaybackToggle();\n\n    const state = this._engine.getCurrentState();\n\n    if (state === EngineState.PLAY_REQUESTED || state === EngineState.PLAYING) {\n      this._eventEmitter.emit(UI_EVENTS.PAUSE_WITH_SCREEN_CLICK_TRIGGERED);\n      this._engine.pause();\n    } else {\n      this._eventEmitter.emit(UI_EVENTS.PLAY_WITH_SCREEN_CLICK_TRIGGERED);\n      this._engine.play();\n    }\n  }\n\n  private _toggleFullScreen() {\n    if (this._fullScreenManager.isInFullScreen) {\n      this._fullScreenManager.exitFullScreen();\n    } else {\n      this._fullScreenManager.enterFullScreen();\n    }\n  }\n\n  hide() {\n    if (!this.isHidden) {\n      this.view.hide();\n      this.isHidden = true;\n    }\n  }\n\n  show() {\n    if (this.isHidden) {\n      this.view.show();\n      this.isHidden = false;\n    }\n  }\n\n  /**\n   * Method for setting video view mode.\n   * @param viewMode Possible values are \"REGULAR\", \"FILL\", \"BLUR\".\n   * With \"REGULAR\" video tag would try to be fully shown.\n   * With \"FILL\" video tag would fill all space, removing black lines on sides.\n   * With \"BLUR\" black lines would be filled with blured pixels from video.\n   * @example\n   * player.setVideoViewMode(\"BLUR\");\n   */\n  @playerAPI()\n  setVideoViewMode(viewMode: VideoViewMode) {\n    this.view.setViewMode(viewMode);\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._clearDelayedPlaybackToggle();\n    this.view.destroy();\n    this.view = null;\n\n    this._interactionIndicator = null;\n    this._eventEmitter = null;\n    this._engine = null;\n    this._fullScreenManager = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport {\n  containerTemplate,\n  playIconTemplate,\n  pauseIconTemplate,\n  forwardIconTemplate,\n  rewindIconTemplate,\n  increaseVolumeIconTemplate,\n  decreaseVolumeIconTemplate,\n  muteIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\n\nimport { IInteractionIndicatorViewStyles } from './types';\n\nimport styles from './interaction-indicator.scss';\n\nconst SECONDS_COUNT = 5;\n\nclass InteractionIndicatorView extends View<IInteractionIndicatorViewStyles>\n  implements IView<IInteractionIndicatorViewStyles> {\n  private _$rootElement: HTMLElement;\n\n  private _playIcon: string;\n  private _pauseIcon: string;\n  private _forwardIcon: string;\n  private _rewindIcon: string;\n  private _increaseVolumeIcon: string;\n  private _decreaseVolumeIcon: string;\n  private _muteIcon: string;\n\n  constructor() {\n    super();\n\n    this._$rootElement = htmlToElement(\n      containerTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._playIcon = playIconTemplate({\n      styles: this.styleNames,\n    });\n    this._pauseIcon = pauseIconTemplate({\n      styles: this.styleNames,\n    });\n    this._forwardIcon = forwardIconTemplate({\n      texts: {\n        SECONDS_COUNT,\n      },\n      styles: this.styleNames,\n    });\n    this._rewindIcon = rewindIconTemplate({\n      texts: {\n        SECONDS_COUNT,\n      },\n      styles: this.styleNames,\n    });\n    this._increaseVolumeIcon = increaseVolumeIconTemplate({\n      styles: this.styleNames,\n    });\n    this._decreaseVolumeIcon = decreaseVolumeIconTemplate({\n      styles: this.styleNames,\n    });\n    this._muteIcon = muteIconTemplate({\n      styles: this.styleNames,\n    });\n  }\n\n  activatePlayIcon() {\n    this._$rootElement.innerHTML = this._playIcon;\n  }\n\n  activatePauseIcon() {\n    this._$rootElement.innerHTML = this._pauseIcon;\n  }\n\n  activateForwardIcon() {\n    this._$rootElement.innerHTML = this._forwardIcon;\n  }\n\n  activateRewindIcon() {\n    this._$rootElement.innerHTML = this._rewindIcon;\n  }\n\n  activateIncreaseVolumeIcon() {\n    this._$rootElement.innerHTML = this._increaseVolumeIcon;\n  }\n\n  activateDecreaseVolumeIcon() {\n    this._$rootElement.innerHTML = this._decreaseVolumeIcon;\n  }\n\n  activateMuteVolumeIcon() {\n    this._$rootElement.innerHTML = this._muteIcon;\n  }\n\n  deactivateIcon() {\n    this._$rootElement.innerHTML = '';\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n  }\n}\n\nInteractionIndicatorView.extendStyleNames(styles);\n\nexport default InteractionIndicatorView;\n","import { UI_EVENTS, EngineState } from '../../../constants';\n\nimport View from './interaction-indicator.view';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IInteractionIndicator } from './types';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\n\nexport default class InteractionIndicator implements IInteractionIndicator {\n  static moduleName = 'interactionIndicator';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'config', 'rootContainer'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n\n  private _unbindEvents: Function;\n\n  view: View;\n\n  constructor({\n    eventEmitter,\n    engine,\n    config,\n    rootContainer,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    config: IPlayerConfig;\n    rootContainer: IRootContainer;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n\n    this._initUI();\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.showInteractionIndicator === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    this.view = new View();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n          this._showPlaybackChangeIndicator,\n        ],\n        [UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED, this.showRewind],\n        [UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED, this.showForward],\n        [\n          UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n          this.showIncreaseVolume,\n        ],\n        [\n          UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n          this.showDecreaseVolume,\n        ],\n        [UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED, this.showMute],\n        [\n          UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          this.showIncreaseVolume,\n        ],\n      ],\n      this,\n    );\n  }\n\n  showPause() {\n    this.view.activatePauseIcon();\n  }\n\n  showPlay() {\n    this.view.activatePlayIcon();\n  }\n\n  showRewind() {\n    this.view.activateRewindIcon();\n  }\n\n  showForward() {\n    this.view.activateForwardIcon();\n  }\n\n  showMute() {\n    this.view.activateMuteVolumeIcon();\n  }\n\n  showIncreaseVolume() {\n    this.view.activateIncreaseVolumeIcon();\n  }\n\n  showDecreaseVolume() {\n    this.view.activateDecreaseVolumeIcon();\n  }\n\n  hideIcons() {\n    this.view.deactivateIcon();\n    this._eventEmitter.emit(UI_EVENTS.HIDE_INTERACTION_INDICATOR_TRIGGERED);\n  }\n\n  show() {\n    this.view.hide();\n  }\n\n  hide() {\n    this.view.show();\n  }\n\n  private _showPlaybackChangeIndicator() {\n    const state = this._engine.getCurrentState();\n\n    if (state === EngineState.PLAY_REQUESTED || state === EngineState.PLAYING) {\n      this.view.activatePauseIcon();\n    } else {\n      this.view.activatePlayIcon();\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { overlayTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport {\n  IOverlayViewConfig,\n  IOverlayViewCallbacks,\n  IOverlayViewStyles,\n} from './types';\n\nimport overlayViewTheme from './overlay.theme';\nimport styles from './overlay.scss';\n\nclass OverlayView extends View<IOverlayViewStyles>\n  implements IView<IOverlayViewStyles> {\n  private _callbacks: IOverlayViewCallbacks;\n\n  private _$rootElement: HTMLElement;\n  private _$content: HTMLElement;\n  private _$playButton: HTMLElement;\n\n  constructor(config: IOverlayViewConfig) {\n    super(config.theme);\n\n    const { callbacks, src } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n\n    this.setPoster(src);\n  }\n\n  private _initDOM() {\n    this._$rootElement = htmlToElement(\n      overlayTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      }),\n    );\n\n    this._$content = getElementByHook(this._$rootElement, 'overlay-content');\n    this._$playButton = getElementByHook(\n      this._$rootElement,\n      'overlay-play-button',\n    );\n  }\n\n  private _bindEvents() {\n    this._$playButton.addEventListener('click', this._callbacks.onPlayClick);\n  }\n\n  private _unbindEvents() {\n    this._$playButton.removeEventListener('click', this._callbacks.onPlayClick);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  hideContent() {\n    this._$rootElement.classList.remove(this.styleNames.active);\n  }\n\n  showContent() {\n    this._$rootElement.classList.add(this.styleNames.active);\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  setPoster(src: string) {\n    this._$content.style.backgroundImage = src ? `url('${src}')` : 'none';\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n    this._$content = null;\n    this._$playButton = null;\n  }\n}\n\nOverlayView.setTheme(overlayViewTheme);\nOverlayView.extendStyleNames(styles);\n\nexport default OverlayView;\n","import { IThemeConfig } from '../core/theme/types';\n\nexport default {\n  overlayPlaySvgFill: {\n    fill: (data: IThemeConfig) => data.color,\n  },\n  overlayPlaySvgStroke: {\n    stroke: (data: IThemeConfig) => data.color,\n  },\n};\n","import { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../constants';\n\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport View from './overlay.view';\nimport { IOverlay, IOverlayConfig, IOverlayViewConfig } from './types';\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IThemeService } from '../core/theme';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\n\nexport default class Overlay implements IOverlay {\n  static moduleName = 'overlay';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'config',\n    'rootContainer',\n    'theme',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _theme: IThemeService;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean = false;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    rootContainer,\n    theme,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    rootContainer: IRootContainer;\n    theme: IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._theme = theme;\n\n    this._bindEvents();\n    this._initUI(config.overlay);\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.overlay === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(overlayConfig: IOverlayConfig | boolean) {\n    const poster: string =\n      typeof overlayConfig === 'object' ? overlayConfig.poster : null;\n    const viewConfig: IOverlayViewConfig = {\n      callbacks: {\n        onPlayClick: this._playVideo.bind(this),\n      },\n      src: poster,\n      theme: this._theme,\n    };\n\n    this.view = new Overlay.View(viewConfig);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._updatePlayingStatus],\n        [VIDEO_EVENTS.RESET, this._tryShowContent],\n      ],\n      this,\n    );\n  }\n\n  private _updatePlayingStatus({ nextState }: { nextState: EngineState }) {\n    if (nextState === EngineState.PLAY_REQUESTED) {\n      this._hideContent();\n    } else if (\n      nextState === EngineState.ENDED ||\n      nextState === EngineState.SRC_SET\n    ) {\n      this._tryShowContent();\n    }\n  }\n\n  private _playVideo() {\n    this._engine.play();\n\n    this._eventEmitter.emit(UI_EVENTS.PLAY_OVERLAY_TRIGGERED);\n  }\n\n  private _tryShowContent() {\n    if (this._engine.isVideoPaused) {\n      this._showContent();\n    }\n  }\n\n  private _hideContent() {\n    this.view.hideContent();\n  }\n\n  private _showContent() {\n    this.view.showContent();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  /**\n   * Method for setting overlay poster\n   * @param src - Source of image\n   * @example\n   * player.setPoster('https://example.com/poster.png');\n   *\n   */\n  @playerAPI()\n  setPoster(src: string) {\n    this.view.setPoster(src);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import { IView } from '../core/types';\nimport View from '../core/view';\n\nimport { loaderTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\n\nimport { ILoaderViewStyles } from './types';\n\nimport styles from './loader.scss';\n\nclass LoaderView extends View<ILoaderViewStyles>\n  implements IView<ILoaderViewStyles> {\n  private _$rootElement: HTMLElement;\n\n  constructor() {\n    super();\n\n    this._$rootElement = htmlToElement(\n      loaderTemplate({\n        styles: this.styleNames,\n      }),\n    );\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  showContent() {\n    this._$rootElement.classList.add(this.styleNames.active);\n  }\n\n  hideContent() {\n    this._$rootElement.classList.remove(this.styleNames.active);\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  destroy() {\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n  }\n}\n\nLoaderView.extendStyleNames(styles);\n\nexport default LoaderView;\n","import { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../constants';\n\nimport View from './loader.view';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\n\nexport const DELAYED_SHOW_TIMEOUT = 100;\n\nexport default class Loader {\n  static moduleName = 'loader';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'config', 'rootContainer'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n\n  private _delayedShowTimeout: number;\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    rootContainer,\n  }: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    rootContainer: IRootContainer;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this.isHidden = false;\n    this._engine = engine;\n\n    this._bindCallbacks();\n\n    this._initUI();\n    this._bindEvents();\n    this._hideContent();\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.loader === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._showContent = this._showContent.bind(this);\n    this._hideContent = this._hideContent.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._checkForWaitingState],\n        [VIDEO_EVENTS.UPLOAD_SUSPEND, this.hide],\n      ],\n      this,\n    );\n  }\n\n  private _checkForWaitingState({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.SEEK_IN_PROGRESS:\n        this.startDelayedShow();\n        break;\n      case EngineState.WAITING:\n        this.startDelayedShow();\n        break;\n      case EngineState.LOAD_STARTED:\n        if (this._engine.isPreloadAvailable) {\n          this._showContent();\n        }\n        break;\n      case EngineState.READY_TO_PLAY:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n      case EngineState.PLAYING:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n      case EngineState.PAUSED:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n\n      /* ignore coverage */\n      default:\n        break;\n    }\n  }\n\n  private _initUI() {\n    this.view = new Loader.View();\n  }\n\n  private _showContent() {\n    if (this.isHidden) {\n      this._eventEmitter.emit(UI_EVENTS.LOADER_SHOW_TRIGGERED);\n      this.view.showContent();\n      this.isHidden = false;\n    }\n  }\n\n  private _hideContent() {\n    if (!this.isHidden) {\n      this._eventEmitter.emit(UI_EVENTS.LOADER_HIDE_TRIGGERED);\n      this.view.hideContent();\n      this.isHidden = true;\n    }\n  }\n\n  hide() {\n    this.view.hide();\n  }\n\n  show() {\n    this.view.show();\n  }\n\n  startDelayedShow() {\n    if (this.isDelayedShowScheduled) {\n      this.stopDelayedShow();\n    }\n    this._delayedShowTimeout = window.setTimeout(\n      this._showContent,\n      DELAYED_SHOW_TIMEOUT,\n    );\n  }\n\n  stopDelayedShow() {\n    window.clearTimeout(this._delayedShowTimeout);\n    this._delayedShowTimeout = null;\n  }\n\n  get isDelayedShowScheduled() {\n    return Boolean(this._delayedShowTimeout);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.stopDelayedShow();\n\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { mainUIBlockTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport styles from './main-ui-block.scss';\n\nimport {\n  IMainUIBlockViewStyles,\n  IMainUIBlockViewConfig,\n  IMainUIBlockViewElements,\n} from './types';\n\nclass MainUIBlockView extends View<IMainUIBlockViewStyles>\n  implements IView<IMainUIBlockViewStyles> {\n  private _$rootElement: HTMLElement;\n\n  constructor(config: IMainUIBlockViewConfig) {\n    super();\n\n    this._initDOM(config.elements);\n  }\n\n  private _initDOM(elements: IMainUIBlockViewElements) {\n    this._$rootElement = htmlToElement(\n      mainUIBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $tooltipContainerWrapper = document.createElement('div');\n    $tooltipContainerWrapper.classList.add(\n      this.styleNames.tooltipContainerWrapper,\n    );\n    $tooltipContainerWrapper.appendChild(elements.tooltipContainer);\n\n    this._$rootElement.appendChild(elements.topBlock);\n    this._$rootElement.appendChild($tooltipContainerWrapper);\n    this._$rootElement.appendChild(elements.bottomBlock);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n  }\n}\n\nMainUIBlockView.extendStyleNames(styles);\n\nexport { IMainUIBlockViewConfig };\n\nexport default MainUIBlockView;\n","import { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../constants';\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport MainUIBlockView from './main-ui-block.view';\n\nimport {\n  IMainUIBlock,\n  IMainUIBlockConfig,\n  IMainUIBlockViewElements,\n} from './types';\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IBottomBlock } from '../bottom-block/types';\nimport { ITopBlock } from '../top-block/types';\nimport { IScreen } from '../screen/types';\nimport { IPlayerConfig } from '../../../core/config';\nimport { IRootContainer } from '../../root-container/types';\nimport { ITooltipService } from '../core/tooltip/tooltip-service';\n\nconst HIDE_BLOCK_TIMEOUT = 2000;\n\nconst DEFAULT_CONFIG: IMainUIBlockConfig = {\n  shouldAlwaysShow: false,\n};\n\nexport default class MainUIBlock implements IMainUIBlock {\n  static moduleName = 'mainUIBlock';\n  static View = MainUIBlockView;\n  static dependencies = [\n    'config',\n    'screen',\n    'rootContainer',\n    'tooltipService',\n    'eventEmitter',\n    'topBlock',\n    'bottomBlock',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _bottomBlock: IBottomBlock;\n  private _topBlock: ITopBlock;\n  private _screen: IScreen;\n\n  private _hideTimeout: number = null;\n\n  private _isContentShowingEnabled: boolean = true;\n  private _isContentShown: boolean = false;\n  private _shouldShowContent: boolean = true;\n  private _shouldAlwaysShow: boolean = false;\n  private _isDragging: boolean = false;\n\n  private _unbindEvents: Function;\n\n  view: MainUIBlockView;\n  isHidden: boolean;\n\n  constructor(dependencies: {\n    config: IPlayerConfig;\n    eventEmitter: IEventEmitter;\n    rootContainer: IRootContainer;\n    tooltipService: ITooltipService;\n    topBlock: ITopBlock;\n    bottomBlock: IBottomBlock;\n    screen: IScreen;\n  }) {\n    const {\n      config,\n      eventEmitter,\n      rootContainer,\n      tooltipService,\n      topBlock,\n      bottomBlock,\n      screen,\n    } = dependencies;\n\n    this._eventEmitter = eventEmitter;\n    this._topBlock = topBlock;\n    this._bottomBlock = bottomBlock;\n    this._screen = screen;\n\n    this.isHidden = false;\n    const mainBlockConfig = {\n      ...DEFAULT_CONFIG,\n      ...(typeof config.controls === 'object' ? config.controls : null),\n    };\n\n    this._shouldAlwaysShow = mainBlockConfig.shouldAlwaysShow;\n\n    this._initUI({\n      tooltipContainer: tooltipService.tooltipContainerNode,\n      topBlock: topBlock.node,\n      bottomBlock: bottomBlock.node,\n    });\n    this._bindViewCallbacks();\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.view.getNode());\n\n    if (config.controls === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(elements: IMainUIBlockViewElements) {\n    this.view = new MainUIBlock.View({ elements });\n  }\n\n  private _bindViewCallbacks() {\n    this._startHideBlockTimeout = this._startHideBlockTimeout.bind(this);\n    this._tryShowContent = this._tryShowContent.bind(this);\n    this._tryHideContent = this._tryHideContent.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED, this._startHideBlockTimeout],\n        [UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED, this._tryHideContent],\n        [UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED, this._startHideBlockTimeout],\n        [UI_EVENTS.LOADER_HIDE_TRIGGERED, this._startHideBlockTimeout],\n        [VIDEO_EVENTS.STATE_CHANGED, this._updatePlayingStatus],\n        [UI_EVENTS.CONTROL_DRAG_START, this._onControlDragStart],\n        [UI_EVENTS.CONTROL_DRAG_END, this._onControlDragEnd],\n      ],\n      this,\n    );\n  }\n\n  private _updatePlayingStatus({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.PLAY_REQUESTED: {\n        this._shouldShowContent = false;\n        this._startHideBlockTimeout();\n        break;\n      }\n      case EngineState.ENDED: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      case EngineState.PAUSED: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      case EngineState.SRC_SET: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  private get _isBlockFocused() {\n    return this._bottomBlock.isFocused;\n  }\n\n  private _startHideBlockTimeout() {\n    this._stopHideBlockTimeout();\n\n    this._tryShowContent();\n\n    this._hideTimeout = window.setTimeout(\n      this._tryHideContent,\n      HIDE_BLOCK_TIMEOUT,\n    );\n  }\n\n  private _stopHideBlockTimeout() {\n    if (this._hideTimeout) {\n      window.clearTimeout(this._hideTimeout);\n    }\n  }\n\n  private _tryShowContent() {\n    if (this._isContentShowingEnabled) {\n      this._showContent();\n    }\n  }\n\n  private _onControlDragStart() {\n    this._isDragging = true;\n  }\n\n  private _onControlDragEnd() {\n    this._isDragging = false;\n    this._tryHideContent();\n  }\n\n  private _showContent() {\n    if (this.isHidden || this._isContentShown) {\n      return;\n    }\n\n    this._screen.showCursor();\n\n    this._eventEmitter.emit((UI_EVENTS as any).MAIN_BLOCK_SHOW_TRIGGERED);\n    this._bottomBlock.showContent();\n    this._topBlock.showContent();\n    this._isContentShown = true;\n  }\n\n  private _tryHideContent() {\n    if (\n      !this._isBlockFocused &&\n      !this._isDragging &&\n      !this._shouldShowContent &&\n      !this._shouldAlwaysShow\n    ) {\n      this._hideContent();\n    }\n  }\n\n  private _hideContent() {\n    if (this.isHidden || !this._isContentShown) {\n      return;\n    }\n\n    if (this._isContentShowingEnabled) {\n      this._screen.hideCursor();\n    }\n\n    this._eventEmitter.emit((UI_EVENTS as any).MAIN_BLOCK_HIDE_TRIGGERED);\n    this._bottomBlock.hideContent();\n    this._topBlock.hideContent();\n    this._isContentShown = false;\n  }\n\n  disableShowingContent() {\n    this._isContentShowingEnabled = false;\n    this._hideContent();\n  }\n\n  enableShowingContent() {\n    this._isContentShowingEnabled = true;\n    if (this._shouldShowContent) {\n      this._showContent();\n    }\n  }\n\n  hide() {\n    this.isHidden = true;\n    this._topBlock.hide();\n    this._bottomBlock.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this._topBlock.show();\n    this._bottomBlock.show();\n  }\n\n  /**\n   * Method for allowing bottom block to be always shown.\n   * @param flag - `true` for showing always\n   * @example\n   * player.setControlsShouldAlwaysShow(true);\n   *\n   */\n  @playerAPI('setControlsShouldAlwaysShow')\n  setShouldAlwaysShow(flag: boolean) {\n    this._shouldAlwaysShow = flag;\n\n    if (this._shouldAlwaysShow) {\n      this._tryShowContent();\n    } else {\n      this._startHideBlockTimeout();\n    }\n  }\n\n  destroy() {\n    this._stopHideBlockTimeout();\n    this._unbindEvents();\n    this.view.destroy();\n\n    this.view = null;\n    this._eventEmitter = null;\n    this._topBlock = null;\n    this._bottomBlock = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport { topBlockTemplate } from './templates';\n\nimport {\n  ITopBlockViewStyles,\n  ITopBlockViewConfig,\n  ITopBlockViewElements,\n} from './types';\n\nimport styles from './top-block.scss';\n\nclass TopBlockView extends View<ITopBlockViewStyles>\n  implements IView<ITopBlockViewStyles> {\n  private _$rootElement: HTMLElement;\n\n  constructor(config: ITopBlockViewConfig) {\n    super();\n    const { elements } = config;\n\n    this._initDOM(elements);\n    this._bindEvents();\n  }\n\n  private _initDOM(elements: ITopBlockViewElements) {\n    this._$rootElement = htmlToElement(\n      topBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $titleContainer = getElementByHook(\n      this._$rootElement,\n      'title-container',\n    );\n    const $liveIndicatorContainer = getElementByHook(\n      this._$rootElement,\n      'live-indicator-container',\n    );\n\n    $titleContainer.appendChild(elements.title);\n    $liveIndicatorContainer.appendChild(elements.liveIndicator);\n  }\n\n  private _preventClickPropagation(e: MouseEvent) {\n    e.stopPropagation();\n  }\n\n  private _bindEvents() {\n    this._$rootElement.addEventListener('click', this._preventClickPropagation);\n  }\n\n  private _unbindEvents() {\n    this._$rootElement.removeEventListener(\n      'click',\n      this._preventClickPropagation,\n    );\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  showContent() {\n    this._$rootElement.classList.add(this.styleNames.activated);\n  }\n\n  hideContent() {\n    this._$rootElement.classList.remove(this.styleNames.activated);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n  }\n}\n\nTopBlockView.extendStyleNames(styles);\n\nexport default TopBlockView;\n","import View from './top-block.view';\n\nimport { ILiveIndicator } from '../live-indicator/types';\nimport { ITitle } from '../title/types';\nimport { ITopBlock, ITopBlockViewConfig, ITopBlockViewElements } from './types';\n\ninterface IDependencies {\n  title: ITitle;\n  liveIndicator: ILiveIndicator;\n}\n\nexport default class TopBlock implements ITopBlock {\n  static moduleName = 'topBlock';\n  static View = View;\n  static dependencies = ['title', 'liveIndicator'];\n\n  isHidden: boolean;\n  view: View;\n\n  constructor(dependencies: IDependencies) {\n    this.isHidden = false;\n\n    this._initUI(this._getElementsNodes(dependencies));\n  }\n\n  private _initUI(elementNodes: ITopBlockViewElements) {\n    const config: ITopBlockViewConfig = {\n      elements: elementNodes,\n    };\n\n    this.view = new TopBlock.View(config);\n  }\n\n  private _getElementsNodes(\n    dependencies: IDependencies,\n  ): ITopBlockViewElements {\n    const { title, liveIndicator } = dependencies;\n\n    return {\n      title: title.node,\n      liveIndicator: liveIndicator.node,\n    };\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  showContent() {\n    this.view.showContent();\n  }\n\n  hideContent() {\n    this.view.hideContent();\n  }\n\n  destroy() {\n    this.view.destroy();\n    this.view = null;\n  }\n}\n","import View from '../core/view';\n\nimport { titleTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleElementClass from '../core/toggleElementClass';\n\nimport {\n  ITitleViewStyles,\n  ITitleViewCallbacks,\n  ITitleViewConfig,\n} from './types';\nimport { IView } from '../core/types';\n\nimport titleViewTheme from './title.theme';\nimport styles from './title.scss';\n\nclass TitleView extends View<ITitleViewStyles>\n  implements IView<ITitleViewStyles> {\n  private _callbacks: ITitleViewCallbacks;\n\n  private _$rootElement: HTMLElement;\n  _$title: HTMLElement;\n\n  constructor(config: ITitleViewConfig) {\n    const { callbacks, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$rootElement = htmlToElement(\n      titleTemplate({ styles: this.styleNames, themeStyles: this.themeStyles }),\n    );\n    this._$title = getElementByHook(this._$rootElement, 'video-title');\n  }\n\n  private _bindEvents() {\n    this._$title.addEventListener('click', this._callbacks.onClick);\n  }\n\n  private _unbindEvents() {\n    this._$title.removeEventListener('click', this._callbacks.onClick);\n  }\n\n  setDisplayAsLink(flag: boolean) {\n    toggleElementClass(this._$title, this.styleNames.link, flag);\n  }\n\n  setTitle(title?: string) {\n    // TODO: mb move this logic to controller? title.isHidden is out of control of this method\n    // TODO: what if we call with empty value `.setTitle('')` and then call `.show()` method? Mb clear value anyway?\n    if (title) {\n      this.show();\n      this._$title.innerHTML = title;\n    } else {\n      this.hide();\n    }\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n    this._$title = null;\n  }\n}\n\nTitleView.setTheme(titleViewTheme);\nTitleView.extendStyleNames(styles);\n\nexport default TitleView;\n","import { IThemeConfig } from '../core/theme/types';\n\nexport default {\n  titleText: {\n    color: (data: IThemeConfig) => data.color,\n  },\n};\n","import View from './title.view';\n\nimport playerAPI from '../../../core/player-api-decorator';\n\nimport { IThemeService } from '../core/theme';\nimport { ITitle, ITitleViewConfig } from './types';\nimport { IPlayerConfig } from '../../../core/config';\n\nexport default class TitleControl implements ITitle {\n  static moduleName = 'title';\n  static View = View;\n  static dependencies = ['config', 'theme'];\n\n  private _callback: Function;\n  private _theme: IThemeService;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    theme,\n  }: {\n    config: IPlayerConfig;\n    theme: IThemeService;\n  }) {\n    this._theme = theme;\n\n    this._bindCallbacks();\n    this._initUI();\n    if (typeof config.title === 'object') {\n      this.setTitleClickCallback(config.title.callback || null);\n      this.setTitle(config.title.text);\n    } else if (config.title === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._triggerCallback = this._triggerCallback.bind(this);\n  }\n\n  private _initUI() {\n    const config: ITitleViewConfig = {\n      theme: this._theme,\n      callbacks: {\n        onClick: this._triggerCallback,\n      },\n    };\n\n    this.view = new TitleControl.View(config);\n\n    this.view.setTitle();\n  }\n\n  /**\n   * Display title text over the video. If you want to have clickable title, use `setTitleClickCallback`\n   *\n   * @param title - Text for the video title\n   *\n   * @example\n   * player.setTitle('Your awesome video title here');\n   *\n   * @note\n   * [Live Demo](https://jsfiddle.net/bodia/243k6m0u/)\n   */\n  @playerAPI()\n  setTitle(title?: string) {\n    this.view.setTitle(title);\n  }\n\n  /**\n   * Method for attaching callback for click on title\n   *\n   * @param callback - Your function\n   *\n   * @example\n   * const callback = () => {\n   *   console.log('Click on title);\n   * }\n   * player.setTitleClickCallback(callback);\n   *\n   */\n  @playerAPI()\n  setTitleClickCallback(callback?: Function) {\n    this._callback = callback;\n    this.view.setDisplayAsLink(Boolean(this._callback));\n  }\n\n  private _triggerCallback() {\n    if (this._callback) {\n      this._callback();\n    }\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this.view.destroy();\n    this.view = null;\n  }\n}\n","import { ITooltipReference, ITooltipService } from '../core/tooltip/types';\nimport { IView } from '../core/types';\nimport View from '../core/view';\n\nimport { liveIndicatorTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleElementClass from '../core/toggleElementClass';\n\nimport {\n  ILiveIndicatorViewStyles,\n  ILiveIndicatorViewCallbacks,\n  ILiveIndicatorViewConfig,\n} from './types';\nimport { ITextMap } from '../../text-map/types';\n\nimport styles from './live-indicator.scss';\n\nimport { TEXT_LABELS } from '../../../constants';\n\nclass LiveIndicatorView extends View<ILiveIndicatorViewStyles>\n  implements IView<ILiveIndicatorViewStyles> {\n  private _callbacks: ILiveIndicatorViewCallbacks;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _tooltipReference: ITooltipReference;\n\n  private _$rootElement: HTMLElement;\n  private _$liveIndicatorText: HTMLElement;\n\n  constructor(config: ILiveIndicatorViewConfig) {\n    super();\n\n    this._callbacks = config.callbacks;\n    this._textMap = config.textMap;\n    this._tooltipService = config.tooltipService;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$rootElement = htmlToElement(\n      liveIndicatorTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n        texts: {},\n      }),\n    );\n\n    this._$liveIndicatorText = getElementByHook(\n      this._$rootElement,\n      'live-indicator-text',\n    );\n\n    this._tooltipReference = this._tooltipService.createReference(\n      this._$rootElement,\n      {\n        text: this._textMap.get(TEXT_LABELS.LIVE_SYNC_TOOLTIP),\n      },\n    );\n\n    // NOTE: LIVE indicator is hidden and inactive by default\n    this.toggle(false);\n    this.toggleActive(false);\n    this.toggleEnded(false);\n  }\n\n  private _bindEvents() {\n    this._$rootElement.addEventListener('click', this._callbacks.onClick);\n  }\n\n  private _unbindEvents() {\n    this._$rootElement.removeEventListener('click', this._callbacks.onClick);\n  }\n\n  toggleActive(shouldActivate: boolean) {\n    toggleElementClass(\n      this._$rootElement,\n      this.styleNames.active,\n      shouldActivate,\n    );\n\n    // NOTE: disable tooltip while video is sync with live\n    if (shouldActivate) {\n      this._tooltipReference.disable();\n    } else {\n      this._tooltipReference.enable();\n    }\n  }\n\n  toggleEnded(isEnded: boolean) {\n    toggleElementClass(this._$rootElement, this.styleNames.ended, isEnded);\n\n    this._$liveIndicatorText.innerText = this._textMap.get(\n      TEXT_LABELS.LIVE_INDICATOR_TEXT,\n      { isEnded },\n    );\n    this._$liveIndicatorText.setAttribute(\n      'aria-label',\n      !isEnded ? this._textMap.get(TEXT_LABELS.LIVE_SYNC_LABEL) : '',\n    );\n\n    if (isEnded) {\n      this._tooltipReference.disable();\n    } else {\n      this._tooltipReference.enable();\n    }\n  }\n\n  show() {\n    this.toggle(true);\n  }\n\n  hide() {\n    this.toggle(false);\n  }\n\n  toggle(shouldShow: boolean) {\n    toggleElementClass(this._$rootElement, this.styleNames.hidden, !shouldShow);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n    this._$liveIndicatorText = null;\n    this._callbacks = null;\n    this._textMap = null;\n  }\n}\n\nLiveIndicatorView.extendStyleNames(styles);\n\nexport default LiveIndicatorView;\n","import { ITooltipService } from '../core/tooltip/types';\nimport LiveIndicatorView from './live-indicator.view';\nimport { VIDEO_EVENTS, UI_EVENTS, LiveState } from '../../../constants';\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { ITextMap } from '../../text-map/types';\nimport { IPlaybackEngine } from '../../playback-engine/types';\nimport { ILiveIndicator } from './types';\n\nexport default class LiveIndicator implements ILiveIndicator {\n  static moduleName = 'liveIndicator';\n  static View = LiveIndicatorView;\n  static dependencies = ['engine', 'eventEmitter', 'textMap', 'tooltipService'];\n\n  private _engine: IPlaybackEngine;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _isHidden: boolean = true;\n  private _isActive: boolean = false;\n  private _isEnded: boolean = false;\n\n  private _unbindEvents: Function;\n\n  view: LiveIndicatorView;\n\n  constructor({\n    engine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n  }: {\n    engine: IPlaybackEngine;\n    eventEmitter: IEventEmitter;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n  }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  get isHidden(): boolean {\n    return this._isHidden;\n  }\n\n  get isActive(): boolean {\n    return this._isActive;\n  }\n\n  show() {\n    this._toggle(true);\n  }\n\n  hide() {\n    this._toggle(false);\n  }\n\n  private _initUI() {\n    this.view = new LiveIndicator.View({\n      callbacks: {\n        onClick: this._syncWithLive,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    });\n  }\n\n  private _bindCallbacks() {\n    this._syncWithLive = this._syncWithLive.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processStateChange],\n        [\n          UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED,\n          () => {\n            this.view.toggleActive(true);\n          },\n        ],\n        [\n          UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED,\n          () => {\n            // NOTE: restore state before mouse enter\n            this.view.toggleActive(this._isActive);\n          },\n        ],\n      ],\n      this,\n    );\n  }\n\n  private _processStateChange({ nextState }: { nextState: LiveState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this._toggle(false);\n        this._toggleActive(false);\n        this._toggleEnded(false);\n        break;\n\n      case LiveState.INITIAL:\n        this._toggle(true);\n        break;\n\n      case LiveState.SYNC:\n        this._toggleActive(true);\n        break;\n\n      case LiveState.NOT_SYNC:\n        this._toggleActive(false);\n        break;\n\n      case LiveState.ENDED:\n        this._toggleActive(false);\n        this._toggleEnded(true);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _syncWithLive() {\n    if (!this._isEnded) {\n      this._engine.syncWithLive();\n    }\n  }\n\n  private _toggle(shouldShow: boolean) {\n    this._isHidden = !shouldShow;\n    this.view.toggle(shouldShow);\n  }\n\n  private _toggleActive(shouldActivate: boolean) {\n    this._isActive = shouldActivate;\n    this.view.toggleActive(shouldActivate);\n  }\n\n  private _toggleEnded(isEnded: boolean) {\n    this._isEnded = isEnded;\n    this.view.toggleEnded(isEnded);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n\n    this.view = null;\n\n    this._engine = null;\n    this._eventEmitter = null;\n    this._textMap = null;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleElementClass from '../core/toggleElementClass';\n\nimport { bottomBlockTemplate } from './templates';\n\nimport {\n  IBottomBlockViewStyles,\n  IBottomBlockViewCallbacks,\n  IBottomBlockViewElements,\n  IBottomBlockViewConfig,\n} from './types';\n\nimport styles from './bottom-block.scss';\n\nclass BottomBlockView extends View<IBottomBlockViewStyles>\n  implements IView<IBottomBlockViewStyles> {\n  private _callbacks: IBottomBlockViewCallbacks;\n  private _$rootElement: HTMLElement;\n\n  constructor(config: IBottomBlockViewConfig) {\n    super();\n    const { callbacks, elements } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM(elements);\n    this._bindEvents();\n  }\n\n  private _initDOM(elements: IBottomBlockViewElements) {\n    this._$rootElement = htmlToElement(\n      bottomBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $playContainer = getElementByHook(\n      this._$rootElement,\n      'play-container',\n    );\n    const $volumeContainer = getElementByHook(\n      this._$rootElement,\n      'volume-container',\n    );\n    const $timeContainer = getElementByHook(\n      this._$rootElement,\n      'time-container',\n    );\n    const $fullScreenContainer = getElementByHook(\n      this._$rootElement,\n      'full-screen-container',\n    );\n    const $logoContainer = getElementByHook(\n      this._$rootElement,\n      'logo-container',\n    );\n    const $progressBarContainer = getElementByHook(\n      this._$rootElement,\n      'progress-bar-container',\n    );\n\n    const $downloadContainer = getElementByHook(\n      this._$rootElement,\n      'playable-download-container',\n    );\n\n    $playContainer.appendChild(elements.play);\n    $volumeContainer.appendChild(elements.volume);\n    $timeContainer.appendChild(elements.time);\n    $fullScreenContainer.appendChild(elements.fullScreen);\n    $logoContainer.appendChild(elements.logo);\n    $progressBarContainer.appendChild(elements.progress);\n    $downloadContainer.appendChild(elements.download);\n  }\n\n  private _preventClickPropagation(e: MouseEvent) {\n    e.stopPropagation();\n  }\n\n  private _bindEvents() {\n    this._$rootElement.addEventListener('click', this._preventClickPropagation);\n    this._$rootElement.addEventListener(\n      'mousemove',\n      this._callbacks.onBlockMouseMove,\n    );\n    this._$rootElement.addEventListener(\n      'mouseleave',\n      this._callbacks.onBlockMouseOut,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$rootElement.removeEventListener(\n      'click',\n      this._preventClickPropagation,\n    );\n    this._$rootElement.removeEventListener(\n      'mousemove',\n      this._callbacks.onBlockMouseMove,\n    );\n    this._$rootElement.removeEventListener(\n      'mouseleave',\n      this._callbacks.onBlockMouseOut,\n    );\n  }\n\n  setShouldLogoShowAlwaysFlag(isShowAlways: boolean) {\n    toggleElementClass(\n      this._$rootElement,\n      this.styleNames.showLogoAlways,\n      isShowAlways,\n    );\n    this.showLogo();\n  }\n\n  showPlayControl() {\n    this._$rootElement.classList.remove(this.styleNames.playControlHidden);\n  }\n\n  hidePlayControl() {\n    this._$rootElement.classList.add(this.styleNames.playControlHidden);\n  }\n\n  showTimeControl() {\n    this._$rootElement.classList.remove(this.styleNames.timeControlHidden);\n  }\n\n  hideTimeControl() {\n    this._$rootElement.classList.add(this.styleNames.timeControlHidden);\n  }\n\n  showVolumeControl() {\n    this._$rootElement.classList.remove(this.styleNames.volumeControlHidden);\n  }\n\n  hideVolumeControl() {\n    this._$rootElement.classList.add(this.styleNames.volumeControlHidden);\n  }\n\n  showFullScreenControl() {\n    this._$rootElement.classList.remove(\n      this.styleNames.fullScreenControlHidden,\n    );\n  }\n\n  hideFullScreenControl() {\n    this._$rootElement.classList.add(this.styleNames.fullScreenControlHidden);\n  }\n\n  showLogo() {\n    this._$rootElement.classList.remove(this.styleNames.logoHidden);\n  }\n\n  hideLogo() {\n    this._$rootElement.classList.add(this.styleNames.logoHidden);\n  }\n\n  showProgressControl() {\n    this._$rootElement.classList.remove(this.styleNames.progressControlHidden);\n  }\n\n  hideProgressControl() {\n    this._$rootElement.classList.add(this.styleNames.progressControlHidden);\n  }\n\n  showDownloadButton() {\n    this._$rootElement.classList.remove(this.styleNames.downloadButtonHidden);\n  }\n\n  hideDownloadButton() {\n    this._$rootElement.classList.add(this.styleNames.downloadButtonHidden);\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  showContent() {\n    this._$rootElement.classList.add(this.styleNames.activated);\n  }\n\n  hideContent() {\n    this._$rootElement.classList.remove(this.styleNames.activated);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n    this._$rootElement = null;\n  }\n}\n\nBottomBlockView.extendStyleNames(styles);\n\nexport default BottomBlockView;\n","import playerAPI from '../../../core/player-api-decorator';\n\nimport View from './bottom-block.view';\nimport { UI_EVENTS } from '../../../constants';\n\nimport { IEventEmitter } from '../../event-emitter/types';\nimport { IPlayControl } from '../controls/play/types';\nimport { ITimeControl } from '../controls/time/types';\nimport { IProgressControl } from '../controls/progress/types';\nimport { IVolumeControl } from '../controls/volume/types';\nimport { IFullScreenControl } from '../controls/full-screen/types';\nimport { ILogoControl, ILogoConfig } from '../controls/logo/types';\nimport { IDownloadButton } from '../controls/download/types';\n\nimport {\n  IBottomBlock,\n  IBottomBlockViewConfig,\n  IBottomBlockViewElements,\n} from './types';\nimport { IPlayerConfig } from '../../../core/config';\n\ninterface IDependencies {\n  config: IPlayerConfig;\n  eventEmitter: IEventEmitter;\n  playControl: IPlayControl;\n  progressControl: IProgressControl;\n  timeControl: ITimeControl;\n  volumeControl: IVolumeControl;\n  fullScreenControl: IFullScreenControl;\n  logo: ILogoControl;\n  downloadButton: IDownloadButton;\n}\n\nexport default class BottomBlock implements IBottomBlock {\n  static moduleName = 'bottomBlock';\n  static View = View;\n  static dependencies = [\n    'config',\n    'playControl',\n    'progressControl',\n    'timeControl',\n    'volumeControl',\n    'fullScreenControl',\n    'logo',\n    'downloadButton',\n    'eventEmitter',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n\n  private _isBlockFocused: boolean = false;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean = false;\n\n  constructor(dependencies: IDependencies) {\n    const { config, eventEmitter } = dependencies;\n    this._eventEmitter = eventEmitter;\n\n    this._bindViewCallbacks();\n    this._initUI(this._getElementsNodes(dependencies));\n    this._initLogo(config.logo);\n    this._bindEvents();\n  }\n\n  private _getElementsNodes(\n    dependencies: IDependencies,\n  ): IBottomBlockViewElements {\n    const {\n      playControl,\n      progressControl,\n      timeControl,\n      volumeControl,\n      fullScreenControl,\n      logo,\n      downloadButton,\n    } = dependencies;\n\n    return {\n      play: playControl.node,\n      progress: progressControl.node,\n      time: timeControl.node,\n      volume: volumeControl.node,\n      fullScreen: fullScreenControl.node,\n      download: downloadButton.node,\n      logo: logo.node,\n    };\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(elementNodes: IBottomBlockViewElements) {\n    const config: IBottomBlockViewConfig = {\n      elements: elementNodes,\n      callbacks: {\n        onBlockMouseMove: this._setFocusState,\n        onBlockMouseOut: this._removeFocusState,\n      },\n    };\n\n    this.view = new BottomBlock.View(config);\n    this.hideDownloadButton();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this._removeFocusState]],\n      this,\n    );\n  }\n\n  private _initLogo(logoConfig: ILogoConfig | boolean) {\n    if (logoConfig) {\n      if (typeof logoConfig === 'object') {\n        this.setLogoAlwaysShowFlag(logoConfig.showAlways);\n      }\n    } else {\n      this.hideLogo();\n    }\n  }\n\n  private _bindViewCallbacks() {\n    this._setFocusState = this._setFocusState.bind(this);\n    this._removeFocusState = this._removeFocusState.bind(this);\n  }\n\n  private _setFocusState() {\n    this._isBlockFocused = true;\n  }\n\n  private _removeFocusState() {\n    this._isBlockFocused = false;\n  }\n\n  get isFocused() {\n    return this._isBlockFocused;\n  }\n\n  showContent() {\n    this.view.showContent();\n  }\n\n  hideContent() {\n    this.view.hideContent();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  /**\n   * Method for allowing logo to be always shown in bottom block\n   * @param flag - `true` for showing always\n   * @example\n   * player.setLogoAlwaysShowFlag(true);\n   *\n   */\n  @playerAPI()\n  setLogoAlwaysShowFlag(flag: boolean) {\n    this.view.setShouldLogoShowAlwaysFlag(flag);\n  }\n\n  /**\n   * Method for hidding logo. If you use `setLogoAlwaysShowFlag` or `setControlsShouldAlwaysShow`, logo would automaticaly appear.\n   * @example\n   * player.hideLogo();\n   */\n  @playerAPI()\n  hideLogo() {\n    this.view.hideLogo();\n  }\n\n  /**\n   * Method for showing logo.\n   * @example\n   * player.showLogo();\n   */\n  @playerAPI()\n  showLogo() {\n    this.view.showLogo();\n  }\n\n  /**\n   * Method for showing play control.\n   * @example\n   * player.showPlayControl();\n   */\n  @playerAPI()\n  showPlayControl() {\n    this.view.showPlayControl();\n  }\n\n  /**\n   * Method for showing volume control.\n   * @example\n   * player.showVolumeControl();\n   */\n  @playerAPI()\n  showVolumeControl() {\n    this.view.showVolumeControl();\n  }\n\n  /**\n   * Method for showing time control.\n   * @example\n   * player.showTimeControl();\n   */\n  @playerAPI()\n  showTimeControl() {\n    this.view.showTimeControl();\n  }\n\n  /**\n   * Method for showing full screen control.\n   * @example\n   * player.showFullScreenControl();\n   */\n  @playerAPI()\n  showFullScreenControl() {\n    this.view.showFullScreenControl();\n  }\n\n  /**\n   * Method for showing progress control.\n   * @example\n   * player.showProgressControl();\n   */\n  @playerAPI()\n  showProgressControl() {\n    this.view.showProgressControl();\n  }\n\n  /**\n   * Method for showing download button.\n   * @example\n   * player.showDownloadButton();\n   */\n  @playerAPI()\n  showDownloadButton() {\n    this.view.showDownloadButton();\n  }\n\n  /**\n   * Method for hidding play control.\n   * @example\n   * player.hidePlayControl();\n   */\n  @playerAPI()\n  hidePlayControl() {\n    this.view.hidePlayControl();\n  }\n\n  /**\n   * Method for hidding voluem control.\n   * @example\n   * player.hideVolumeControl();\n   */\n  @playerAPI()\n  hideVolumeControl() {\n    this.view.hideVolumeControl();\n  }\n\n  /**\n   * Method for hidding time control.\n   * @example\n   * player.hideTimeControl();\n   */\n  @playerAPI()\n  hideTimeControl() {\n    this.view.hideTimeControl();\n  }\n\n  /**\n   * Method for hidding full screen control.\n   * @example\n   * player.hideFullScreenControl();\n   */\n  @playerAPI()\n  hideFullScreenControl() {\n    this.view.hideFullScreenControl();\n  }\n\n  /**\n   * Method for hidding progress control.\n   * @example\n   * player.hideProgressControl();\n   */\n  @playerAPI()\n  hideProgressControl() {\n    this.view.hideProgressControl();\n  }\n\n  /**\n   * Method for hidding download button.\n   * @example\n   * player.hideDownloadButton();\n   */\n  @playerAPI()\n  hideDownloadButton() {\n    this.view.hideDownloadButton();\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n\n    this.view = null;\n    this._eventEmitter = null;\n  }\n}\n","enum TooltipPositionPlacement {\n  TOP = 'top',\n  BOTTOM = 'bottom',\n}\n\ntype ITooltipPosition = {\n  placement: TooltipPositionPlacement;\n  x: number;\n};\n\ntype ITooltipPositionFunction = (\n  tooltipContainerNode: HTMLElement,\n) => ITooltipPosition;\n\ntype ITooltipShowOptions = {\n  text?: string;\n  element?: HTMLElement;\n  position: ITooltipPosition | ITooltipPositionFunction;\n};\n\ntype ITooltipStyles = {\n  tooltip: string;\n  tooltipVisible: string;\n  tooltipInner: string;\n  showAsText: string;\n  showAsElement: string;\n};\n\ninterface ITooltip {\n  node: HTMLElement;\n  isHidden: boolean;\n  show(): void;\n  hide(): void;\n  setText(text: string): void;\n  setStyle(style: { [key: string]: string | number }): void;\n  destroy(): void;\n}\n\ntype ITooltipReferenceOptions = {\n  text?: string;\n  element?: HTMLElement;\n};\n\ninterface ITooltipReference {\n  isHidden: boolean;\n  isDisabled: boolean;\n  show(): void;\n  hide(): void;\n  setText(text: string): void;\n  disable(): void;\n  enable(): void;\n  destroy(): void;\n}\n\ninterface ITooltipService {\n  isHidden: boolean;\n  tooltipContainerNode: HTMLElement;\n  setText(text: string): void;\n  show(options: ITooltipShowOptions): void;\n  hide(): void;\n  createReference(\n    reference: HTMLElement,\n    options: ITooltipReferenceOptions,\n  ): ITooltipReference;\n  destroy(): void;\n}\n\nexport {\n  TooltipPositionPlacement,\n  ITooltipPosition,\n  ITooltipPositionFunction,\n  ITooltipShowOptions,\n  ITooltipStyles,\n  ITooltip,\n  ITooltipReference,\n  ITooltipReferenceOptions,\n  ITooltipService,\n};\n","import { tooltipTemplate } from './templates';\nimport htmlToElement from '../htmlToElement';\nimport getElementByHook from '../getElementByHook';\nimport Stylable from '../stylable';\n\nimport { ITooltip, ITooltipStyles } from './types';\n\nimport styles from './tooltip.scss';\n\nclass Tooltip extends Stylable<ITooltipStyles> implements ITooltip {\n  private _$rootElement: HTMLElement;\n  private _$tooltipInner: HTMLElement;\n  private _isHidden: boolean;\n\n  constructor() {\n    super();\n\n    this._isHidden = true;\n    this._initDOM();\n  }\n\n  private _initDOM() {\n    this._$rootElement = htmlToElement(\n      tooltipTemplate({\n        styles: this.styleNames,\n      }),\n    );\n    this._$tooltipInner = getElementByHook(this._$rootElement, 'tooltipInner');\n  }\n\n  get node(): HTMLElement {\n    return this._$rootElement;\n  }\n\n  get isHidden(): boolean {\n    return this._isHidden;\n  }\n\n  show() {\n    if (!this._isHidden) {\n      return;\n    }\n    this._isHidden = false;\n    this._$rootElement.classList.add(this.styleNames.tooltipVisible);\n  }\n\n  hide() {\n    if (this._isHidden) {\n      return;\n    }\n    this._isHidden = true;\n    this._$rootElement.classList.remove(this.styleNames.tooltipVisible);\n  }\n\n  setText(text: string) {\n    this.clearElement();\n    this._showAsText();\n    this._$tooltipInner.innerText = text;\n  }\n\n  clearElement() {\n    this._$tooltipInner.firstChild &&\n      this._$tooltipInner.removeChild(this._$tooltipInner.firstChild);\n  }\n\n  setElement(element: HTMLElement) {\n    if (element !== this._$tooltipInner.firstChild) {\n      this._showAsElement();\n      this.clearElement();\n      if (element) {\n        this._$tooltipInner.appendChild(element);\n      }\n    }\n  }\n\n  private _showAsText() {\n    this._$rootElement.classList.remove(this.styleNames.showAsElement);\n    this._$rootElement.classList.add(this.styleNames.showAsText);\n  }\n\n  private _showAsElement() {\n    this._$rootElement.classList.remove(this.styleNames.showAsText);\n    this._$rootElement.classList.add(this.styleNames.showAsElement);\n  }\n\n  setStyle(style: any) {\n    Object.keys(style).forEach(styleKey => {\n      (this._$rootElement.style as any)[styleKey] = style[styleKey];\n    });\n  }\n\n  destroy() {\n    this._$rootElement = null;\n    this._$tooltipInner = null;\n  }\n}\n\nTooltip.extendStyleNames(styles);\n\nexport { ITooltip, ITooltipStyles };\n\nexport default Tooltip;\n","import { ITooltipPosition, TooltipPositionPlacement } from '../types';\n\ntype ITooltipCenterXfn = (\n  tooltipReferenceOffsetX: number,\n  tooltipReferenceWidth: number,\n) => number;\n\nfunction calcTooltipCenterX(\n  tooltipReferenceOffsetX: number,\n  tooltipReferenceWidth: number,\n) {\n  return tooltipReferenceOffsetX + tooltipReferenceWidth / 2;\n}\n\nfunction getTooltipPositionByReferenceNode(\n  tooltipReferenceNode: HTMLElement,\n  tooltipContainerNode: HTMLElement,\n  tooltipCenterXfn: ITooltipCenterXfn = calcTooltipCenterX,\n): ITooltipPosition {\n  const tooltipReferenceRect = tooltipReferenceNode.getBoundingClientRect();\n  const tooltipContainerRect = tooltipContainerNode.getBoundingClientRect();\n\n  const tooltipPlacement =\n    tooltipReferenceRect.top > tooltipContainerRect.top\n      ? TooltipPositionPlacement.BOTTOM\n      : TooltipPositionPlacement.TOP;\n  const tooltipReferenceOffsetX =\n    tooltipReferenceRect.left - tooltipContainerRect.left;\n  const tooltipCenterX = tooltipCenterXfn(\n    tooltipReferenceOffsetX,\n    tooltipReferenceRect.width,\n  );\n\n  return { placement: tooltipPlacement, x: tooltipCenterX };\n}\n\nexport default getTooltipPositionByReferenceNode;\n","import {\n  ITooltipService,\n  ITooltipReference,\n  ITooltipReferenceOptions,\n} from './types';\nimport getTooltipPositionByReferenceNode from './utils/getTooltipPositionByReferenceNode';\n\nconst SHOW_EVENTS = ['mouseenter', 'focus'];\nconst HIDE_EVENTS = ['mouseleave', 'blur'];\n\nclass TooltipReference implements ITooltipReference {\n  private _$reference: HTMLElement;\n  private _tooltipService: ITooltipService;\n\n  private _options: ITooltipReferenceOptions;\n  private _eventListeners: {\n    event: string;\n    fn: EventListener;\n  }[];\n\n  private _isDisabled: boolean;\n\n  constructor(\n    reference: HTMLElement,\n    tooltipService: ITooltipService,\n    options: ITooltipReferenceOptions,\n  ) {\n    this._$reference = reference;\n    this._options = options;\n    this._tooltipService = tooltipService;\n\n    this._eventListeners = [];\n\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    SHOW_EVENTS.forEach(event => {\n      const fn = () => {\n        this.show();\n      };\n      this._eventListeners.push({ event, fn });\n      this._$reference.addEventListener(event, fn);\n    });\n\n    HIDE_EVENTS.forEach(event => {\n      const fn = () => {\n        this.hide();\n      };\n      this._eventListeners.push({ event, fn });\n      this._$reference.addEventListener(event, fn);\n    });\n  }\n\n  get isHidden(): boolean {\n    return this._tooltipService.isHidden;\n  }\n\n  get isDisabled(): boolean {\n    return this._isDisabled;\n  }\n\n  show() {\n    if (this._isDisabled) {\n      return;\n    }\n\n    this._tooltipService.show({\n      text: this._options.text,\n      element: this._options.element,\n      position: getTooltipPositionByReferenceNode(\n        this._$reference,\n        this._tooltipService.tooltipContainerNode,\n      ),\n    });\n  }\n\n  hide() {\n    this._tooltipService.hide();\n  }\n\n  setText(text: string) {\n    this._options.text = text;\n    this._tooltipService.setText(text);\n  }\n\n  disable() {\n    this._isDisabled = true;\n  }\n\n  enable() {\n    this._isDisabled = false;\n  }\n\n  destroy() {\n    this._eventListeners.forEach(({ event, fn }) => {\n      this._$reference.removeEventListener(event, fn);\n    });\n    this._eventListeners = null;\n    this._$reference = null;\n    this._tooltipService = null;\n    this._options = null;\n  }\n}\n\nexport default TooltipReference;\n","import { tooltipContainerTemplate } from './templates';\nimport htmlToElement from '../htmlToElement';\nimport Tooltip from './tooltip';\nimport Stylable from '../stylable';\n\nimport {\n  ITooltipPosition,\n  ITooltipPositionFunction,\n  TooltipPositionPlacement,\n} from './types';\n\nimport styles from './tooltip-container.scss';\n\ninterface ITooltipContainer {\n  node: HTMLElement;\n  getTooltipPositionStyles(\n    position: ITooltipPosition,\n  ): { [ket: string]: string | number };\n  destroy(): void;\n}\n\nclass TooltipContainer extends Stylable implements ITooltipContainer {\n  private _tooltip: Tooltip;\n  private _$rootElement: HTMLElement;\n\n  constructor(tooltip: Tooltip) {\n    super();\n\n    this._tooltip = tooltip;\n    this._initDOM();\n  }\n\n  get node(): HTMLElement {\n    return this._$rootElement;\n  }\n\n  private _initDOM() {\n    this._$rootElement = htmlToElement(\n      tooltipContainerTemplate({\n        styles: this.styleNames,\n      }),\n    );\n    this._$rootElement.appendChild(this._tooltip.node);\n  }\n\n  getTooltipPositionStyles(\n    position: ITooltipPosition | ITooltipPositionFunction,\n  ) {\n    if (typeof position === 'function') {\n      position = position(this._$rootElement);\n    }\n\n    if (position.placement === TooltipPositionPlacement.TOP) {\n      return {\n        left: `${this._getTooltipLeftX(position.x)}px`,\n        top: 0,\n        bottom: 'initial',\n      };\n    }\n\n    return {\n      left: `${this._getTooltipLeftX(position.x)}px`,\n      top: 'initial',\n      bottom: 0,\n    };\n  }\n\n  destroy() {\n    this._tooltip = null;\n    this._$rootElement = null;\n  }\n\n  private _getTooltipLeftX(tooltipCenterX: number) {\n    const tooltipRect = this._tooltip.node.getBoundingClientRect();\n    const tooltipContainerRect = this._$rootElement.getBoundingClientRect();\n\n    let tooltipLeftX = tooltipCenterX - tooltipRect.width / 2;\n\n    // ensure `x` is in range of placeholder rect\n    tooltipLeftX = Math.max(tooltipLeftX, 0);\n    tooltipLeftX = Math.min(\n      tooltipLeftX,\n      tooltipContainerRect.width - tooltipRect.width,\n    );\n\n    return tooltipLeftX;\n  }\n}\n\nTooltipContainer.extendStyleNames(styles);\n\nexport { ITooltipContainer };\nexport default TooltipContainer;\n","import TooltipReference from './tooltip-reference';\nimport TooltipContainer from './tooltip-container';\nimport Tooltip from './tooltip';\n\nimport { UI_EVENTS } from '../../../../constants';\n\nimport {\n  ITooltipShowOptions,\n  ITooltipService,\n  ITooltipReferenceOptions,\n} from './types';\nimport { IEventEmitter } from '../../../event-emitter/types';\n\nclass TooltipService implements ITooltipService {\n  static moduleName = 'tooltipService';\n  static dependencies = ['eventEmitter'];\n  private _tooltip: Tooltip;\n  private _tooltipContainer: TooltipContainer;\n  private _eventEmitter: IEventEmitter;\n\n  private _unbindEvents: Function;\n\n  constructor({ eventEmitter }: { eventEmitter: IEventEmitter }) {\n    this._eventEmitter = eventEmitter;\n    this._tooltip = new Tooltip();\n    this._tooltipContainer = new TooltipContainer(this._tooltip);\n    this._bindEvents();\n  }\n\n  get isHidden(): boolean {\n    return this._tooltip.isHidden;\n  }\n\n  get tooltipContainerNode(): HTMLElement {\n    return this._tooltipContainer.node;\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this.hide]],\n      this,\n    );\n  }\n\n  /**\n   * Set new tooltip title\n   */\n  setText(text: string) {\n    this._tooltip.setText(text);\n  }\n\n  /**\n   * Show tooltip with title\n   */\n  show(options: ITooltipShowOptions) {\n    // NOTE: its important to set tooltip text before update tooltip position styles\n    if (options.element) {\n      this._tooltip.setElement(options.element);\n    } else {\n      this._tooltip.setText(options.text);\n    }\n    this._tooltip.setStyle(\n      this._tooltipContainer.getTooltipPositionStyles(options.position),\n    );\n    this._tooltip.show();\n  }\n\n  clearElement() {\n    this._tooltip.clearElement();\n  }\n\n  /**\n   * Hide tooltip\n   */\n  hide() {\n    this._tooltip.hide();\n  }\n\n  /**\n   * Create tooltip reference which show/hide tooltip on hover and focus events\n   * @param reference - reference node\n   * @param options - tooltip title and other options\n   * @returns tooltip reference instance\n   */\n  createReference(\n    reference: HTMLElement,\n    options: ITooltipReferenceOptions,\n  ): TooltipReference {\n    return new TooltipReference(reference, this, options);\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._tooltip.destroy();\n    this._tooltipContainer.destroy();\n    this._tooltip = null;\n    this._tooltipContainer = null;\n\n    this._eventEmitter = null;\n  }\n}\n\nexport { ITooltipService };\n\nexport default TooltipService;\n","import { IThemeConfig } from '../../core/theme/types';\n\nimport { transperentizeColor } from '../../core/theme';\n\nexport default {\n  progressPlayed: {\n    backgroundColor: (data: IThemeConfig) => data.progressColor,\n  },\n  progressSeekTo: {\n    backgroundColor: (data: IThemeConfig) =>\n      transperentizeColor(data.progressColor, 0.5),\n  },\n  progressBackground: {\n    backgroundColor: (data: IThemeConfig) =>\n      transperentizeColor(data.progressColor, 0.25),\n  },\n  progressSeekBtn: {\n    backgroundColor: (data: IThemeConfig) => data.progressColor,\n  },\n  progressSyncBtn: {\n    borderColor: (data: IThemeConfig) => data.progressColor,\n  },\n};\n","import { IThemeService } from '../../core/theme';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport { ITextMap } from '../../../text-map/types';\n\nenum ProgressScrubingMode {\n  REGULAR = 'REGULAR',\n  PREVIEW = 'PREVIEW',\n}\n\ntype IProgressViewStyles = {\n  seekBlock: string;\n  progressBarsWrapper: string;\n  progressBar: string;\n  background: string;\n  buffered: string;\n  seekTo: string;\n  played: string;\n  timeIndicators: string;\n  hitbox: string;\n  syncButton: string;\n  hidden: string;\n  inLive: string;\n  isDragging: string;\n  liveSync: string;\n};\n\ntype IProgressViewCallbacks = {\n  onChangePlayedPercent: Function;\n  onSeekToByMouseStart: Function;\n  onSeekToByMouseEnd: Function;\n  onSyncWithLiveClick: Function;\n  onSyncWithLiveMouseEnter: EventListenerOrEventListenerObject;\n  onSyncWithLiveMouseLeave: EventListenerOrEventListenerObject;\n  onDragStart: Function;\n  onDragEnd: Function;\n};\n\ntype IProgressViewConfig = {\n  callbacks: IProgressViewCallbacks;\n  textMap: ITextMap;\n  theme: IThemeService;\n  tooltipService: ITooltipService;\n};\n\ninterface IProgressControl {\n  node: HTMLElement;\n\n  addTimeIndicator(time: number): void;\n  addTimeIndicators(times: number[]): void;\n  clearTimeIndicators(): void;\n\n  show(): void;\n  hide(): void;\n\n  destroy(): void;\n}\n\nexport {\n  ProgressScrubingMode,\n  IProgressControl,\n  IProgressViewStyles,\n  IProgressViewCallbacks,\n  IProgressViewConfig,\n};\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\n\nimport { IView } from '../../core/types';\nimport { ITooltipReference, ITooltipService } from '../../core/tooltip/types';\nimport getProgressTimeTooltipPosition from './utils/getProgressTimeTooltipPosition';\nimport { progressTemplate, progressTimeIndicatorTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\nimport toggleElementClass from '../../core/toggleElementClass';\n\nimport {\n  IProgressViewStyles,\n  IProgressViewCallbacks,\n  IProgressViewConfig,\n} from './types';\nimport { ITextMap } from '../../../text-map/types';\n\nimport progressViewTheme from './progress.theme';\nimport styles from './progress.scss';\n\nconst DATA_PLAYED = 'data-played-percent';\n\nconst getPercentBasedOnXPosition = (\n  event: MouseEvent,\n  element: HTMLElement,\n) => {\n  const boundingRect = element.getBoundingClientRect();\n  const positionX = event.clientX;\n\n  if (positionX < boundingRect.left) {\n    return 0;\n  }\n\n  if (positionX > boundingRect.left + boundingRect.width) {\n    return 100;\n  }\n\n  return ((event.clientX - boundingRect.left) / boundingRect.width) * 100;\n};\n\nclass ProgressView extends View<IProgressViewStyles>\n  implements IView<IProgressViewStyles> {\n  private _callbacks: IProgressViewCallbacks;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _syncButtonTooltipReference: ITooltipReference;\n\n  private _isDragging: boolean;\n\n  private _$rootElement: HTMLElement;\n  private _$hitbox: HTMLElement;\n  private _$played: HTMLElement;\n  private _$buffered: HTMLElement;\n  private _$seekTo: HTMLElement;\n  private _$timeIndicators: HTMLElement;\n  private _$seekButton: HTMLElement;\n  private _$syncButton: HTMLElement;\n\n  constructor(config: IProgressViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._initDOM();\n    this._bindCallbacks();\n    this._bindEvents();\n\n    this._setPlayedDOMAttributes(0);\n    this._setBufferedDOMAttributes(0);\n    this.setUsualMode();\n  }\n\n  private _initDOM() {\n    this._$rootElement = htmlToElement(\n      progressTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      }),\n    );\n\n    this._$played = getElementByHook(this._$rootElement, 'progress-played');\n    this._$buffered = getElementByHook(this._$rootElement, 'progress-buffered');\n    this._$seekTo = getElementByHook(this._$rootElement, 'progress-seek-to');\n    this._$timeIndicators = getElementByHook(\n      this._$rootElement,\n      'progress-time-indicators',\n    );\n    this._$seekButton = getElementByHook(\n      this._$rootElement,\n      'progress-seek-button',\n    );\n    this._$syncButton = getElementByHook(\n      this._$rootElement,\n      'progress-sync-button',\n    );\n    this._syncButtonTooltipReference = this._tooltipService.createReference(\n      this._$syncButton,\n      {\n        text: this._textMap.get(TEXT_LABELS.LIVE_SYNC_TOOLTIP),\n      },\n    );\n    this._$hitbox = getElementByHook(this._$rootElement, 'progress-hitbox');\n  }\n\n  private _bindCallbacks() {\n    this._setPlayedByDrag = this._setPlayedByDrag.bind(this);\n    this._startDragOnMouseDown = this._startDragOnMouseDown.bind(this);\n    this._stopDragOnMouseUp = this._stopDragOnMouseUp.bind(this);\n    this._startSeekToByMouse = this._startSeekToByMouse.bind(this);\n    this._stopSeekToByMouse = this._stopSeekToByMouse.bind(this);\n    this._syncWithLive = this._syncWithLive.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$seekButton.addEventListener('mousedown', this._startDragOnMouseDown);\n    this._$seekButton.addEventListener('mousemove', this._startSeekToByMouse);\n    this._$seekButton.addEventListener('mouseout', this._stopSeekToByMouse);\n\n    this._$hitbox.addEventListener('mousedown', this._startDragOnMouseDown);\n    this._$hitbox.addEventListener('mousemove', this._startSeekToByMouse);\n    this._$hitbox.addEventListener('mouseout', this._stopSeekToByMouse);\n\n    window.addEventListener('mousemove', this._setPlayedByDrag);\n    window.addEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$syncButton.addEventListener('click', this._syncWithLive);\n    this._$syncButton.addEventListener(\n      'mouseenter',\n      this._callbacks.onSyncWithLiveMouseEnter,\n    );\n    this._$syncButton.addEventListener(\n      'mouseleave',\n      this._callbacks.onSyncWithLiveMouseLeave,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$seekButton.removeEventListener(\n      'mousedown',\n      this._startDragOnMouseDown,\n    );\n    this._$seekButton.removeEventListener(\n      'mousemove',\n      this._startSeekToByMouse,\n    );\n    this._$seekButton.removeEventListener('mouseout', this._stopSeekToByMouse);\n\n    this._$hitbox.removeEventListener('mousedown', this._startDragOnMouseDown);\n    this._$hitbox.removeEventListener('mousemove', this._startSeekToByMouse);\n    this._$hitbox.removeEventListener('mouseout', this._stopSeekToByMouse);\n\n    window.removeEventListener('mousemove', this._setPlayedByDrag);\n    window.removeEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$syncButton.removeEventListener('click', this._syncWithLive);\n    this._$syncButton.removeEventListener(\n      'mouseenter',\n      this._callbacks.onSyncWithLiveMouseEnter,\n    );\n    this._$syncButton.removeEventListener(\n      'mouseleave',\n      this._callbacks.onSyncWithLiveMouseLeave,\n    );\n  }\n\n  private _startDragOnMouseDown(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    this._setPlayedDOMAttributes(percent);\n    this._callbacks.onChangePlayedPercent(percent);\n\n    this._startDrag();\n  }\n\n  private _stopDragOnMouseUp(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    this._stopDrag();\n  }\n\n  private _startSeekToByMouse(event: MouseEvent) {\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n\n    this._setSeekToDOMAttributes(percent);\n    this._callbacks.onSeekToByMouseStart(percent);\n  }\n\n  private _stopSeekToByMouse() {\n    this._setSeekToDOMAttributes(0);\n    this._callbacks.onSeekToByMouseEnd();\n  }\n\n  private _setPlayedByDrag(event: MouseEvent) {\n    if (this._isDragging) {\n      const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n      this._setPlayedDOMAttributes(percent);\n      this._callbacks.onChangePlayedPercent(percent);\n    }\n  }\n\n  private _startDrag() {\n    this._isDragging = true;\n    this._callbacks.onDragStart();\n    this._$rootElement.classList.add(this.styleNames.isDragging);\n  }\n\n  private _stopDrag() {\n    if (this._isDragging) {\n      this._isDragging = false;\n      this._callbacks.onDragEnd();\n      this._$rootElement.classList.remove(this.styleNames.isDragging);\n    }\n  }\n\n  private _setSeekToDOMAttributes(percent: number) {\n    this._$seekTo.setAttribute('style', `width:${percent}%;`);\n  }\n\n  private _setPlayedDOMAttributes(percent: number) {\n    this._$rootElement.setAttribute(\n      'aria-valuetext',\n      this._textMap.get(TEXT_LABELS.PROGRESS_CONTROL_VALUE, { percent }),\n    );\n    this._$rootElement.setAttribute('aria-valuenow', String(percent));\n    this._$rootElement.setAttribute(DATA_PLAYED, String(percent));\n    this._$played.setAttribute('style', `width:${percent}%;`);\n    this._$seekButton.setAttribute('style', `left:${percent}%;`);\n  }\n\n  private _setBufferedDOMAttributes(percent: number) {\n    this._$buffered.setAttribute('style', `width:${percent}%;`);\n  }\n\n  private _syncWithLive() {\n    this._callbacks.onSyncWithLiveClick();\n  }\n\n  showSyncWithLive() {\n    this._$syncButton.classList.remove(this.styleNames.hidden);\n  }\n\n  hideSyncWithLive() {\n    this._$syncButton.classList.add(this.styleNames.hidden);\n  }\n\n  setLiveSyncStatus(isSync: boolean) {\n    toggleElementClass(this._$syncButton, this.styleNames.liveSync, isSync);\n\n    if (isSync) {\n      this._syncButtonTooltipReference.disable();\n      this._$played.setAttribute('style', `width:100%;`);\n      this._$seekButton.setAttribute('style', `left:100%;`);\n    } else {\n      this._syncButtonTooltipReference.enable();\n    }\n  }\n\n  showProgressTimeTooltip(element: HTMLElement, percent: number) {\n    this._tooltipService.show({\n      element,\n      position: tooltipContainerNode =>\n        getProgressTimeTooltipPosition(\n          percent,\n          this._$hitbox,\n          tooltipContainerNode,\n        ),\n    });\n  }\n\n  hideProgressTimeTooltip() {\n    this._tooltipService.hide();\n  }\n\n  setLiveMode() {\n    this._$rootElement.classList.add(this.styleNames.inLive);\n\n    this.showSyncWithLive();\n  }\n\n  setUsualMode() {\n    this._$rootElement.classList.remove(this.styleNames.inLive);\n\n    this.hideSyncWithLive();\n  }\n\n  setPlayed(percent: number) {\n    this._setPlayedDOMAttributes(percent);\n  }\n\n  setBuffered(percent: number) {\n    this._setBufferedDOMAttributes(percent);\n  }\n\n  addTimeIndicator(percent: number) {\n    this._$timeIndicators.appendChild(\n      htmlToElement(\n        progressTimeIndicatorTemplate({\n          percent,\n          styles: this.styleNames,\n        }),\n      ),\n    );\n  }\n\n  clearTimeIndicators() {\n    this._$timeIndicators.innerHTML = '';\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._syncButtonTooltipReference.destroy();\n    this._syncButtonTooltipReference = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n    this._$buffered = null;\n    this._$hitbox = null;\n    this._$played = null;\n    this._$seekTo = null;\n    this._$seekButton = null;\n    this._$syncButton = null;\n    this._$timeIndicators = null;\n\n    this._textMap = null;\n  }\n}\n\nProgressView.setTheme(progressViewTheme);\nProgressView.extendStyleNames(styles);\n\nexport default ProgressView;\n","import { getTooltipPositionByReferenceNode } from '../../../core/tooltip';\n\nimport { ITooltipPosition } from '../../../core/tooltip/types';\n\nfunction calcProgressTimeTooltipCenterX(\n  progressPercent: number,\n  progressNodeOffsetX: number,\n  progressNodeWidth: number,\n) {\n  return progressNodeOffsetX + progressPercent * progressNodeWidth / 100;\n}\n\nfunction getProgressTimeTooltipPosition(\n  progressPercent: number,\n  progressNode: HTMLElement,\n  tooltipContainerNode: HTMLElement,\n): ITooltipPosition {\n  return getTooltipPositionByReferenceNode(\n    progressNode,\n    tooltipContainerNode,\n    (progressNodeOffsetX, progressNodeWidth) =>\n      calcProgressTimeTooltipCenterX(\n        progressPercent,\n        progressNodeOffsetX,\n        progressNodeWidth,\n      ),\n  );\n}\n\nexport default getProgressTimeTooltipPosition;\n","export function getTimePercent(time: number, durationTime: number): number {\n  if (!durationTime) {\n    return 0;\n  }\n\n  return parseFloat((time / durationTime * 100).toFixed(1));\n}\n\nexport function getOverallBufferedPercent(\n  buffered: TimeRanges,\n  currentTime: number = 0,\n  duration: number = 0,\n) {\n  if (!buffered || !buffered.length || !duration) {\n    return 0;\n  }\n\n  const info = getNearestBufferSegmentInfo(buffered, currentTime);\n\n  return getTimePercent(info.end, duration);\n}\n\nexport function getOverallPlayedPercent(currentTime = 0, duration = 0) {\n  return getTimePercent(currentTime, duration);\n}\n\nexport function geOverallBufferLength(buffered: TimeRanges) {\n  let size = 0;\n\n  if (!buffered || !buffered.length) {\n    return size;\n  }\n\n  for (let i = 0; i < buffered.length; i += 1) {\n    size += buffered.end(i) - buffered.start(i);\n  }\n\n  return size;\n}\n\nexport function getNearestBufferSegmentInfo(\n  buffered: TimeRanges,\n  currentTime?: number,\n) {\n  let i = 0;\n\n  if (!buffered || !buffered.length) {\n    return null;\n  }\n\n  while (\n    i < buffered.length - 1 &&\n    !(buffered.start(i) <= currentTime && currentTime <= buffered.end(i))\n  ) {\n    i += 1;\n  }\n\n  return {\n    start: buffered.start(i),\n    end: buffered.end(i),\n  };\n}\n","function formatTime(seconds: number): string {\n  const isValid = !isNaN(seconds) && isFinite(seconds);\n  const isNegative = isValid && seconds < 0;\n  const date = new Date(null);\n\n  date.setSeconds(isValid ? Math.abs(Math.floor(seconds)) : 0);\n\n  // get HH:mm:ss part, remove hours if they are \"00:\"\n  const time = date\n    .toISOString()\n    .substr(11, 8)\n    .replace(/^00:/, '');\n\n  return isNegative ? `-${time}` : time;\n}\n\nexport default formatTime;\n","import View from './progress.view';\n\nimport {\n  getTimePercent,\n  getOverallBufferedPercent,\n  getOverallPlayedPercent,\n} from '../../../../utils/video-data';\n\nimport {\n  VIDEO_EVENTS,\n  UI_EVENTS,\n  EngineState,\n  LiveState,\n} from '../../../../constants';\nimport { AMOUNT_TO_SKIP_SECONDS } from '../../../keyboard-control/keyboard-control';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\nimport formatTime from '../../core/utils/formatTime';\n\nimport playerAPI from '../../../../core/player-api-decorator';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport {\n  ProgressScrubingMode,\n  IProgressControl,\n  IProgressViewConfig,\n} from './types';\nimport { ITextMap } from '../../../text-map/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\nimport { IPreviewThumbnail } from '../../preview-thumbnail/types';\nimport { IPreviewFullSize } from '../../preview-full-size/types';\n\nimport { IThemeService } from '../../core/theme';\n\nconst UPDATE_INTERVAL_DELAY = 1000 / 60;\n\nexport default class ProgressControl implements IProgressControl {\n  static moduleName = 'progressControl';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'liveStateEngine',\n    'eventEmitter',\n    'textMap',\n    'tooltipService',\n    'theme',\n    'previewThumbnail',\n    'previewFullSize',\n  ];\n\n  private _engine: IPlaybackEngine;\n  private _liveStateEngine: any;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _theme: IThemeService;\n  private _previewThumbnail: IPreviewThumbnail;\n  private _previewFullSize: IPreviewFullSize;\n\n  private _isUserDragging: boolean;\n  private _shouldPlayAfterDragEnd: boolean;\n  private _desiredSeekPosition: number;\n  private _interceptor: KeyboardInterceptor;\n  private _updateControlInterval: number;\n  private _timeIndicatorsToAdd: number[];\n\n  private _shouldHidePreviewOnUpdate: boolean;\n\n  private _scrubingMode: ProgressScrubingMode;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    liveStateEngine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n    theme,\n    previewThumbnail,\n    previewFullSize,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    liveStateEngine: any;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n    theme: IThemeService;\n    previewThumbnail: IPreviewThumbnail;\n    previewFullSize: IPreviewFullSize;\n  }) {\n    this._engine = engine;\n    this._liveStateEngine = liveStateEngine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n    this._previewThumbnail = previewThumbnail;\n    this._previewFullSize = previewFullSize;\n\n    this._isUserDragging = false;\n    this._desiredSeekPosition = 0;\n    this._theme = theme;\n\n    this._timeIndicatorsToAdd = [];\n\n    this._scrubingMode = ProgressScrubingMode.REGULAR;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.view.setPlayed(0);\n    this.view.setBuffered(0);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [VIDEO_EVENTS.STATE_CHANGED, this._processStateChange],\n        [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processLiveStateChange],\n        [VIDEO_EVENTS.CHUNK_LOADED, this._updateBufferIndicator],\n        [VIDEO_EVENTS.DURATION_UPDATED, this._updateAllIndicators],\n      ],\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: IProgressViewConfig = {\n      callbacks: {\n        onSyncWithLiveClick: this._syncWithLive,\n        onSyncWithLiveMouseEnter: this._onSyncWithLiveMouseEnter,\n        onSyncWithLiveMouseLeave: this._onSyncWithLiveMouseLeave,\n        onChangePlayedPercent: this._onChangePlayedPercent,\n        onSeekToByMouseStart: this._showTooltipAndPreview,\n        onSeekToByMouseEnd: this._hideTooltip,\n        onDragStart: this._startProcessingUserDrag,\n        onDragEnd: this._stopProcessingUserDrag,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new ProgressControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.view.getNode(), {\n      [KEYCODES.UP_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n      },\n      [KEYCODES.DOWN_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n      },\n      [KEYCODES.RIGHT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n      },\n      [KEYCODES.LEFT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED);\n        this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _bindCallbacks() {\n    this._syncWithLive = this._syncWithLive.bind(this);\n    this._onSyncWithLiveMouseEnter = this._onSyncWithLiveMouseEnter.bind(this);\n    this._onSyncWithLiveMouseLeave = this._onSyncWithLiveMouseLeave.bind(this);\n    this._updateAllIndicators = this._updateAllIndicators.bind(this);\n    this._onChangePlayedPercent = this._onChangePlayedPercent.bind(this);\n    this._showTooltipAndPreview = this._showTooltipAndPreview.bind(this);\n    this._hideTooltip = this._hideTooltip.bind(this);\n    this._startProcessingUserDrag = this._startProcessingUserDrag.bind(this);\n    this._stopProcessingUserDrag = this._stopProcessingUserDrag.bind(this);\n  }\n\n  private _startIntervalUpdates() {\n    if (this._updateControlInterval) {\n      this._stopIntervalUpdates();\n    }\n\n    this._updateAllIndicators();\n\n    this._updateControlInterval = window.setInterval(\n      this._updateAllIndicators,\n      UPDATE_INTERVAL_DELAY,\n    );\n  }\n\n  private _stopIntervalUpdates() {\n    window.clearInterval(this._updateControlInterval);\n    this._updateControlInterval = null;\n  }\n\n  private _convertPlayedPercentToTime(percent: number): number {\n    const duration = this._engine.getDurationTime();\n    return (duration * percent) / 100;\n  }\n\n  private _onChangePlayedPercent(percent: number) {\n    const newTime = this._convertPlayedPercentToTime(percent);\n    this._desiredSeekPosition = newTime;\n    if (this._scrubingMode === ProgressScrubingMode.PREVIEW) {\n      this._eventEmitter.emit(UI_EVENTS.USER_PREVIEWING_FRAME, newTime);\n    } else {\n      this._changeCurrentTimeOfVideo(newTime);\n    }\n\n    if (this._isUserDragging) {\n      this._showTooltipAndPreview(percent);\n    }\n  }\n\n  private _showTooltipAndPreview(percent: number) {\n    const duration = this._engine.getDurationTime();\n    const seekToTime = this._convertPlayedPercentToTime(percent);\n    const timeToShow = this._engine.isDynamicContent\n      ? seekToTime - duration\n      : seekToTime;\n\n    this._previewThumbnail.setTime(formatTime(timeToShow));\n    this._previewThumbnail.showAt(seekToTime);\n    this.view.showProgressTimeTooltip(\n      this._previewThumbnail.getElement(),\n      percent,\n    );\n\n    if (\n      this._isUserDragging &&\n      this._scrubingMode === ProgressScrubingMode.PREVIEW\n    ) {\n      this._previewFullSize.showAt(seekToTime);\n    }\n  }\n\n  private _hideTooltip() {\n    if (!this._isUserDragging) {\n      this.view.hideProgressTimeTooltip();\n    }\n  }\n\n  private _startProcessingUserDrag() {\n    if (!this._isUserDragging) {\n      this._isUserDragging = true;\n      this._pauseVideoOnDragStart();\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_START);\n  }\n\n  private _stopProcessingUserDrag() {\n    if (this._isUserDragging) {\n      this._isUserDragging = false;\n      if (this._scrubingMode === ProgressScrubingMode.PREVIEW) {\n        this._shouldHidePreviewOnUpdate = true;\n      }\n\n      this._changeCurrentTimeOfVideo(this._desiredSeekPosition);\n      this._playVideoOnDragEnd();\n      this.view.hideProgressTimeTooltip();\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_END);\n  }\n\n  private _hidePreview() {\n    this._shouldHidePreviewOnUpdate = false;\n    this._previewFullSize.hide();\n  }\n\n  private _processStateChange({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.SRC_SET:\n        this._reset();\n        break;\n      case EngineState.METADATA_LOADED:\n        this._initTimeIndicators();\n\n        if (this._engine.isSeekAvailable) {\n          this.show();\n        } else {\n          this.hide();\n        }\n\n        break;\n      case EngineState.PLAYING:\n        if (this._shouldHidePreviewOnUpdate) {\n          this._hidePreview();\n        }\n        if (this._liveStateEngine.state === LiveState.SYNC) {\n          this.view.setPlayed(100);\n        } else {\n          this._startIntervalUpdates();\n        }\n        break;\n      case EngineState.PAUSED:\n        if (this._shouldHidePreviewOnUpdate) {\n          this._hidePreview();\n        }\n        this._stopIntervalUpdates();\n        break;\n      case EngineState.SEEK_IN_PROGRESS:\n        this._updateAllIndicators();\n        break;\n      default:\n        break;\n    }\n  }\n\n  private _processLiveStateChange({ nextState }: { nextState: LiveState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this.view.setLiveSyncStatus(false);\n        this.view.setUsualMode();\n        break;\n\n      case LiveState.INITIAL:\n        this.view.setLiveMode();\n        break;\n\n      case LiveState.SYNC:\n        this.view.setLiveSyncStatus(true);\n        break;\n\n      case LiveState.NOT_SYNC:\n        this.view.setLiveSyncStatus(false);\n        break;\n\n      case LiveState.ENDED:\n        this.view.setLiveSyncStatus(false);\n        this.view.hideSyncWithLive();\n\n        // ensure progress indicators show latest info\n        if (this._engine.getCurrentState() === EngineState.PLAYING) {\n          this._startIntervalUpdates();\n        } else {\n          this._updateAllIndicators();\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _changeCurrentTimeOfVideo(newTime: number) {\n    const duration = this._engine.getDurationTime();\n\n    if (this._engine.isDynamicContent && duration === newTime) {\n      this._engine.syncWithLive();\n    } else {\n      this._engine.setCurrentTime(newTime);\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_CHANGE_TRIGGERED, newTime);\n  }\n\n  private _pauseVideoOnDragStart() {\n    const currentState = this._engine.getCurrentState();\n\n    if (\n      currentState === EngineState.PLAYING ||\n      currentState === EngineState.PLAY_REQUESTED\n    ) {\n      this._shouldPlayAfterDragEnd = true;\n      this._engine.pause();\n    }\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_DRAG_STARTED);\n  }\n\n  private _playVideoOnDragEnd() {\n    if (this._shouldPlayAfterDragEnd) {\n      this._engine.play();\n\n      this._shouldPlayAfterDragEnd = false;\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_DRAG_ENDED);\n  }\n\n  private _updateBufferIndicator() {\n    const currentTime = this._engine.getCurrentTime();\n    const buffered = this._engine.getBuffered();\n    const duration = this._engine.getDurationTime();\n\n    this._setBuffered(\n      getOverallBufferedPercent(buffered, currentTime, duration),\n    );\n  }\n\n  private _updatePlayedIndicator() {\n    if (this._liveStateEngine.state === LiveState.SYNC) {\n      // TODO: mb use this.updatePlayed(100) here?\n      return;\n    }\n\n    const currentTime = this._engine.getCurrentTime();\n    const duration = this._engine.getDurationTime();\n\n    this._setPlayed(getOverallPlayedPercent(currentTime, duration));\n  }\n\n  private _updateAllIndicators() {\n    this._updatePlayedIndicator();\n    this._updateBufferIndicator();\n  }\n\n  private _initTimeIndicators() {\n    this._timeIndicatorsToAdd.forEach(time => {\n      this._addTimeIndicator(time);\n    });\n    this._timeIndicatorsToAdd = [];\n  }\n\n  private _addTimeIndicator(time: number) {\n    const durationTime = this._engine.getDurationTime();\n\n    if (time > durationTime) {\n      // TODO: log error for developers\n      return;\n    }\n\n    this.view.addTimeIndicator(getTimePercent(time, durationTime));\n  }\n\n  private _syncWithLive() {\n    this._engine.syncWithLive();\n  }\n\n  private _onSyncWithLiveMouseEnter() {\n    this._eventEmitter.emit(\n      UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED,\n    );\n  }\n\n  private _onSyncWithLiveMouseLeave() {\n    this._eventEmitter.emit(\n      UI_EVENTS.PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED,\n    );\n  }\n\n  private _setPlayed(percent: number) {\n    this.view.setPlayed(percent);\n  }\n\n  private _setBuffered(percent: number) {\n    this.view.setBuffered(percent);\n  }\n\n  private _reset() {\n    this._setPlayed(0);\n    this._setBuffered(0);\n    this.clearTimeIndicators();\n  }\n\n  @playerAPI()\n  setProgressScrubingMode(mode: ProgressScrubingMode) {\n    this._scrubingMode = mode;\n  }\n\n  /**\n   * Add time indicator to progress bar\n   */\n  @playerAPI()\n  addTimeIndicator(time: number) {\n    this.addTimeIndicators([time]);\n  }\n\n  /**\n   * Add time indicators to progress bar\n   */\n  @playerAPI()\n  addTimeIndicators(times: number[]) {\n    if (!this._engine.isMetadataLoaded) {\n      // NOTE: Add indicator after metadata loaded\n      this._timeIndicatorsToAdd.push(...times);\n      return;\n    }\n\n    times.forEach(time => {\n      this._addTimeIndicator(time);\n    });\n  }\n\n  /**\n   * Delete all time indicators from progress bar\n   */\n  @playerAPI()\n  clearTimeIndicators() {\n    this.view.clearTimeIndicators();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._stopIntervalUpdates();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n    this._liveStateEngine = null;\n    this._timeIndicatorsToAdd = null;\n    this._textMap = null;\n    this._previewFullSize = null;\n    this._previewThumbnail = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport {\n  controlTemplate,\n  playIconTemplate,\n  pauseIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { IPlayViewStyles, IPlayViewCallbacks, IPlayViewConfig } from './types';\nimport { ITextMap } from '../../../text-map/types';\n\nimport playViewTheme from './play.theme';\nimport styles from './play.scss';\n\nconst DATA_IS_PLAYING = 'data-is-playing';\n\nclass PlayView extends View<IPlayViewStyles> implements IView<IPlayViewStyles> {\n  private _callbacks: IPlayViewCallbacks;\n  private _textMap: ITextMap;\n\n  private _$rootElement: HTMLElement;\n  private _$playbackControl: HTMLElement;\n\n  constructor(config: IPlayViewConfig) {\n    const { callbacks, textMap, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$rootElement = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.PLAY_CONTROL_LABEL),\n        },\n      }),\n    );\n\n    this._$playbackControl = getElementByHook(\n      this._$rootElement,\n      'playback-control',\n    );\n\n    this.setState({ isPlaying: false });\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._$playbackControl.addEventListener('click', this._onButtonClick);\n  }\n\n  private _unbindEvents() {\n    this._$playbackControl.removeEventListener('click', this._onButtonClick);\n  }\n\n  private _onButtonClick() {\n    this._$playbackControl.focus();\n    this._callbacks.onButtonClick();\n  }\n\n  setState({ isPlaying }: { isPlaying: boolean }) {\n    if (isPlaying) {\n      this._$playbackControl.classList.remove(this.styleNames.paused);\n      this._$playbackControl.innerHTML = pauseIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$playbackControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.PAUSE_CONTROL_LABEL),\n      );\n    } else {\n      this._$playbackControl.classList.add(this.styleNames.paused);\n      this._$playbackControl.innerHTML = playIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$playbackControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.PLAY_CONTROL_LABEL),\n      );\n    }\n\n    this._$rootElement.setAttribute(DATA_IS_PLAYING, String(isPlaying));\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$playbackControl = null;\n    this._$rootElement = null;\n    this._textMap = null;\n  }\n}\n\nPlayView.setTheme(playViewTheme);\nPlayView.extendStyleNames(styles);\n\nexport default PlayView;\n","import { IThemeConfig } from '../../core/theme/types';\n\nexport default {\n  playSvgFill: {\n    fill: (data: IThemeConfig) => data.color,\n  },\n};\n","import { IPlayControl, IPlayViewConfig } from './types';\n\nimport View from './play.view';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { VIDEO_EVENTS, UI_EVENTS, EngineState } from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\nimport { IThemeService } from '../../core/theme';\n\nimport { ITextMap } from '../../../text-map/types';\n\nexport default class PlayControl implements IPlayControl {\n  static moduleName = 'playControl';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'textMap', 'theme'];\n\n  private _engine: IPlaybackEngine;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _theme: IThemeService;\n\n  private _interceptor: KeyboardInterceptor;\n  private _isPlaying: boolean;\n\n  private _unbindEvents: Function;\n\n  view: View;\n\n  constructor({\n    engine,\n    eventEmitter,\n    textMap,\n    theme,\n  }: {\n    engine: IPlaybackEngine;\n    eventEmitter: IEventEmitter;\n    textMap: ITextMap;\n    theme: IThemeService;\n  }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._theme = theme;\n\n    this._isPlaying = null;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.setControlStatus(false);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n        );\n      },\n      [KEYCODES.ENTER]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(\n          UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n        );\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _bindCallbacks() {\n    this._togglePlayback = this._togglePlayback.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[VIDEO_EVENTS.STATE_CHANGED, this._updatePlayingStatus]],\n      this,\n    );\n  }\n\n  private _togglePlayback() {\n    if (this._isPlaying) {\n      this._pauseVideo();\n    } else {\n      this._playVideo();\n    }\n  }\n\n  private _playVideo() {\n    this._engine.play();\n\n    this._eventEmitter.emit(UI_EVENTS.PLAY_TRIGGERED);\n  }\n\n  private _pauseVideo() {\n    this._engine.pause();\n\n    this._eventEmitter.emit(UI_EVENTS.PAUSE_TRIGGERED);\n  }\n\n  private _updatePlayingStatus({ nextState }: { nextState: EngineState }) {\n    if (nextState === EngineState.SRC_SET) {\n      this.reset();\n    } else if (nextState === EngineState.PLAYING) {\n      this.setControlStatus(true);\n    } else if (\n      nextState === EngineState.PAUSED ||\n      nextState === EngineState.ENDED ||\n      nextState === EngineState.SEEK_IN_PROGRESS\n    ) {\n      this.setControlStatus(false);\n    }\n  }\n\n  private _initUI() {\n    const config: IPlayViewConfig = {\n      callbacks: {\n        onButtonClick: this._togglePlayback,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n    };\n\n    this.view = new PlayControl.View(config);\n  }\n\n  setControlStatus(isPlaying: boolean) {\n    this._isPlaying = isPlaying;\n    this.view.setState({ isPlaying: this._isPlaying });\n  }\n\n  reset() {\n    this.setControlStatus(false);\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n    this._textMap = null;\n  }\n}\n","import View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport formatTime from '../../core/utils/formatTime';\n\nimport { timeTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { ITimeViewStyles, ITimeViewConfig } from './types';\nimport timeViewTheme from './time.theme';\nimport styles from './time.scss';\n\nclass TimeView extends View<ITimeViewStyles> implements IView<ITimeViewStyles> {\n  private _$rootElement: HTMLElement;\n  private _$currentTime: HTMLElement;\n  private _$durationTime: HTMLElement;\n  private _duration: number;\n  private _current: number;\n  private _isBackward: boolean;\n  constructor(config: ITimeViewConfig) {\n    const { theme } = config;\n    super(theme);\n\n    this._initDOM();\n  }\n\n  private _initDOM() {\n    this._$rootElement = htmlToElement(\n      timeTemplate({ styles: this.styleNames, themeStyles: this.themeStyles }),\n    );\n\n    this._$currentTime = getElementByHook(\n      this._$rootElement,\n      'current-time-indicator',\n    );\n    this._$durationTime = getElementByHook(\n      this._$rootElement,\n      'duration-time-indicator',\n    );\n  }\n\n  setDurationTime(duration: number) {\n    if (duration !== this._duration) {\n      this._duration = duration;\n      this._updateDurationTime();\n    }\n  }\n\n  setCurrentTime(current: number) {\n    if (current !== this._current) {\n      this._current = current;\n      this._updateCurrentTime();\n    }\n  }\n\n  setCurrentTimeBackward(_isBackward: boolean) {\n    this._isBackward = _isBackward;\n    this._updateCurrentTime();\n  }\n\n  private _updateDurationTime() {\n    this._$durationTime.innerHTML = formatTime(this._duration);\n  }\n\n  private _updateCurrentTime() {\n    if (this._isBackward) {\n      this._$currentTime.innerHTML = formatTime(this._current - this._duration);\n    } else {\n      this._$currentTime.innerHTML = formatTime(this._current);\n    }\n  }\n\n  showDuration() {\n    this._$durationTime.classList.remove(this.styleNames.hidden);\n  }\n\n  hideDuration() {\n    this._$durationTime.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$currentTime = null;\n    this._$durationTime = null;\n    this._$rootElement = null;\n  }\n}\n\nTimeView.setTheme(timeViewTheme);\nTimeView.extendStyleNames(styles);\n\nexport default TimeView;\n","import { IThemeConfig } from '../../core/theme/types';\n\nexport default {\n  timeText: {\n    color: (data: IThemeConfig) => data.color,\n  },\n};\n","import View from './time.view';\n\nimport {\n  VIDEO_EVENTS,\n  EngineState,\n  LiveState,\n  UI_EVENTS,\n} from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\nimport { ITimeControl, ITimeViewConfig } from './types';\nimport { IThemeService } from '../../core/theme';\n\nconst UPDATE_INTERVAL_DELAY = 1000 / 60;\n\nexport default class TimeControl implements ITimeControl {\n  static moduleName = 'timeControl';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'theme'];\n\n  private _eventEmitter: IEventEmitter;\n  private _engine: IPlaybackEngine;\n  private _theme: IThemeService;\n\n  private _updateControlInterval: number;\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    engine,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    theme: IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._theme = theme;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.setCurrentTime(0);\n    this.setDurationTime(0);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._updateCurrentTime = this._updateCurrentTime.bind(this);\n    this._updateDurationTime = this._updateDurationTime.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [\n        [UI_EVENTS.USER_PREVIEWING_FRAME, this._updateTimeFromPreview],\n        [VIDEO_EVENTS.STATE_CHANGED, this._toggleIntervalUpdates],\n        [VIDEO_EVENTS.DURATION_UPDATED, this._updateDurationTime],\n        [VIDEO_EVENTS.LIVE_STATE_CHANGED, this._processLiveStateChange],\n      ],\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: ITimeViewConfig = {\n      theme: this._theme,\n    };\n    this.view = new TimeControl.View(config);\n  }\n\n  private _startIntervalUpdates() {\n    if (this._updateControlInterval) {\n      this._stopIntervalUpdates();\n    }\n    this._updateControlInterval = window.setInterval(\n      this._updateCurrentTime,\n      UPDATE_INTERVAL_DELAY,\n    );\n  }\n\n  private _stopIntervalUpdates() {\n    window.clearInterval(this._updateControlInterval);\n    this._updateControlInterval = null;\n  }\n\n  private _processLiveStateChange({ nextState }: { nextState: LiveState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this.show();\n        break;\n\n      case LiveState.INITIAL:\n        this.hide();\n        break;\n\n      case LiveState.ENDED:\n        this.show();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _toggleIntervalUpdates({ nextState }: { nextState: EngineState }) {\n    switch (nextState) {\n      case EngineState.SRC_SET:\n        this.reset();\n        break;\n      case EngineState.PLAYING:\n        this._startIntervalUpdates();\n        break;\n      case EngineState.SEEK_IN_PROGRESS:\n        this._startIntervalUpdates();\n        break;\n      default:\n        this._stopIntervalUpdates();\n        break;\n    }\n  }\n\n  private _updateDurationTime() {\n    this.setDurationTime(this._engine.getDurationTime());\n  }\n\n  private _updateCurrentTime() {\n    this.setCurrentTime(this._engine.getCurrentTime());\n  }\n\n  private _updateTimeFromPreview(time: number) {\n    this.view.setCurrentTime(time);\n  }\n\n  setDurationTime(time: number) {\n    this.view.setDurationTime(time);\n  }\n\n  setCurrentTime(time: number) {\n    this.view.setCurrentTime(time);\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  reset() {\n    this.setDurationTime(0);\n    this.setCurrentTime(0);\n    this.view.showDuration();\n    this.view.setCurrentTimeBackward(false);\n    this.show();\n  }\n\n  destroy() {\n    this._stopIntervalUpdates();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n  }\n}\n","import { IThemeConfig } from '../../core/theme/types';\n\nimport { transperentizeColor } from '../../core/theme';\n\nexport default {\n  volumeSvgFill: {\n    fill: (data: IThemeConfig) => data.color,\n  },\n  volumeSvgStroke: {\n    stroke: (data: IThemeConfig) => data.color,\n  },\n  volumeProgress: {\n    backgroundColor: (data: IThemeConfig) => data.color,\n    '&:after': {\n      backgroundColor: (data: IThemeConfig) => data.color,\n    },\n  },\n  volumeProgressBackground: {\n    backgroundColor: (data: IThemeConfig) =>\n      transperentizeColor(data.color, 0.25),\n  },\n};\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport { ITooltipReference, ITooltipService } from '../../core/tooltip/types';\nimport {\n  controlTemplate,\n  volume0IconTemplate,\n  volume50IconTemplate,\n  volume100IconTemplate,\n} from './templates';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport {\n  IVolumeViewStyles,\n  IVolumeViewCallbacks,\n  IVolumeViewConfig,\n} from './types';\nimport { ITextMap } from '../../../text-map/types';\n\nimport volumeViewTheme from './volume.theme';\nimport styles from './volume.scss';\n\nconst DATA_IS_MUTED = 'data-is-muted';\nconst DATA_VOLUME = 'data-volume-percent';\n\nconst MAX_VOLUME_ICON_RANGE = 50;\n\nconst getPercentBasedOnXPosition = (\n  event: MouseEvent,\n  element: HTMLElement,\n) => {\n  const boundingRect = element.getBoundingClientRect();\n  const positionX = event.clientX;\n\n  if (positionX < boundingRect.left) {\n    return 0;\n  }\n\n  if (positionX > boundingRect.left + boundingRect.width) {\n    return 100;\n  }\n\n  return (event.clientX - boundingRect.left) / boundingRect.width * 100;\n};\n\nclass VolumeView extends View<IVolumeViewStyles>\n  implements IView<IVolumeViewStyles> {\n  private _callbacks: IVolumeViewCallbacks;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _muteButtonTooltipReference: ITooltipReference;\n\n  private _$rootElement: HTMLElement;\n  private _$muteButton: HTMLElement;\n  private _$volumeNode: HTMLElement;\n  private _$volume: HTMLElement;\n  private _$hitbox: HTMLElement;\n\n  private _isDragging: boolean;\n\n  constructor(config: IVolumeViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$rootElement = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n        texts: {\n          muteLabel: this._textMap.get(TEXT_LABELS.MUTE_CONTROL_LABEL),\n          volumeLabel: this._textMap.get(TEXT_LABELS.VOLUME_CONTROL_LABEL),\n        },\n      }),\n    );\n\n    this._$muteButton = getElementByHook(this._$rootElement, 'mute-button');\n    this._$volumeNode = getElementByHook(\n      this._$rootElement,\n      'volume-input-block',\n    );\n    this._$hitbox = getElementByHook(this._$rootElement, 'volume-hitbox');\n    this._$volume = getElementByHook(this._$rootElement, 'volume-input');\n\n    this._muteButtonTooltipReference = this._tooltipService.createReference(\n      this._$muteButton,\n      {\n        text: this._textMap.get(TEXT_LABELS.MUTE_CONTROL_TOOLTIP),\n      },\n    );\n  }\n\n  private _bindCallbacks() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._startDragOnMouseDown = this._startDragOnMouseDown.bind(this);\n    this._stopDragOnMouseUp = this._stopDragOnMouseUp.bind(this);\n    this._setVolumeByWheel = this._setVolumeByWheel.bind(this);\n    this._setVolumeByClick = this._setVolumeByClick.bind(this);\n    this._setVolumeByDrag = this._setVolumeByDrag.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$hitbox.addEventListener('wheel', this._setVolumeByWheel);\n    this._$hitbox.addEventListener('mousedown', this._startDragOnMouseDown);\n    window.addEventListener('mousemove', this._setVolumeByDrag);\n    window.addEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$muteButton.addEventListener('click', this._onButtonClick);\n  }\n\n  private _unbindEvents() {\n    this._$hitbox.removeEventListener('wheel', this._setVolumeByWheel);\n    this._$hitbox.removeEventListener('mousedown', this._startDragOnMouseDown);\n    window.removeEventListener('mousemove', this._setVolumeByDrag);\n    window.removeEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$muteButton.removeEventListener('click', this._onButtonClick);\n  }\n\n  private _startDragOnMouseDown(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n    this._setVolumeByClick(event);\n    this._startDrag();\n  }\n\n  private _stopDragOnMouseUp(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    this._stopDrag();\n  }\n\n  private _setVolumeByClick(event: MouseEvent) {\n    this._$volumeNode.focus();\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    this._callbacks.onVolumeLevelChangeFromInput(percent);\n  }\n\n  private _setVolumeByDrag(event: MouseEvent) {\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    if (this._isDragging) {\n      this._callbacks.onVolumeLevelChangeFromInput(percent);\n    }\n  }\n\n  private _setVolumeByWheel(e: WheelEvent) {\n    e.preventDefault();\n    const value = e.deltaX || e.deltaY * -1;\n\n    if (!value) {\n      return;\n    }\n\n    this._callbacks.onVolumeLevelChangeFromWheel(value);\n  }\n\n  private _startDrag() {\n    this._isDragging = true;\n    this._$rootElement.classList.add(this.styleNames.isDragging);\n    this._callbacks.onDragStart();\n  }\n\n  private _stopDrag() {\n    if (this._isDragging) {\n      this._isDragging = false;\n      this._$rootElement.classList.remove(this.styleNames.isDragging);\n      this._callbacks.onDragEnd();\n    }\n  }\n\n  private _setVolumeDOMAttributes(percent: number) {\n    this._$volumeNode.setAttribute('value', String(percent));\n    this._$volumeNode.setAttribute(\n      'aria-valuetext',\n      this._textMap.get(TEXT_LABELS.VOLUME_CONTROL_VALUE, { percent }),\n    );\n    this._$volumeNode.setAttribute('aria-valuenow', String(percent));\n    this._$volumeNode.setAttribute(DATA_VOLUME, String(percent));\n\n    this._$volume.setAttribute('style', `width:${percent}%;`);\n\n    this._$rootElement.setAttribute(DATA_VOLUME, String(percent));\n\n    const iconTemplateProps = {\n      styles: this.styleNames,\n      themeStyles: this.themeStyles,\n    };\n\n    if (percent >= MAX_VOLUME_ICON_RANGE) {\n      this._$muteButton.innerHTML = volume100IconTemplate(iconTemplateProps);\n    } else if (percent > 0) {\n      this._$muteButton.innerHTML = volume50IconTemplate(iconTemplateProps);\n    } else {\n      this._$muteButton.innerHTML = volume0IconTemplate(iconTemplateProps);\n    }\n  }\n\n  private _onButtonClick() {\n    this._$muteButton.focus();\n    this._callbacks.onToggleMuteClick();\n  }\n\n  setVolume(volume: number) {\n    this._setVolumeDOMAttributes(volume);\n  }\n\n  setMute(isMuted: boolean) {\n    this._setMuteDOMAttributes(isMuted);\n  }\n\n  private _setMuteDOMAttributes(isMuted: boolean) {\n    if (isMuted) {\n      this._$muteButton.innerHTML = volume0IconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n    }\n\n    this._$rootElement.setAttribute(DATA_IS_MUTED, String(isMuted));\n    this._$muteButton.setAttribute(\n      'aria-label',\n      isMuted\n        ? this._textMap.get(TEXT_LABELS.UNMUTE_CONTROL_LABEL)\n        : this._textMap.get(TEXT_LABELS.MUTE_CONTROL_LABEL),\n    );\n    this._muteButtonTooltipReference.setText(\n      isMuted\n        ? this._textMap.get(TEXT_LABELS.UNMUTE_CONTROL_TOOLTIP)\n        : this._textMap.get(TEXT_LABELS.MUTE_CONTROL_TOOLTIP),\n    );\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  getButtonNode() {\n    return this._$muteButton;\n  }\n\n  getInputNode() {\n    return this._$volumeNode;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._muteButtonTooltipReference.destroy();\n    this._muteButtonTooltipReference = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$muteButton = null;\n    this._$rootElement = null;\n\n    this._textMap = null;\n  }\n}\n\nVolumeView.setTheme(volumeViewTheme);\nVolumeView.extendStyleNames(styles);\n\nexport default VolumeView;\n","import View from './volume.view';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { AMOUNT_TO_CHANGE_VOLUME } from '../../../keyboard-control/keyboard-control';\nimport { VIDEO_EVENTS, UI_EVENTS } from '../../../../constants';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport { IVolumeControl, IVolumeViewConfig } from './types';\nimport { ITextMap } from '../../../text-map/types';\nimport { IPlaybackEngine } from '../../../playback-engine/types';\nimport { IThemeService } from '../../core/theme';\n\nexport default class VolumeControl implements IVolumeControl {\n  static moduleName = 'volumeControl';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _engine: IPlaybackEngine;\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n  private _theme: IThemeService;\n\n  private _buttonInterceptor: KeyboardInterceptor;\n  private _inputInterceptor: KeyboardInterceptor;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    engine: IPlaybackEngine;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n    theme: IThemeService;\n  }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n    this._theme = theme;\n\n    this._bindCallbacks();\n\n    this._initUI();\n\n    this._bindEvents();\n\n    this.view.setVolume(this._engine.getVolume());\n    this.view.setMute(this._engine.getMute());\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    const config: IVolumeViewConfig = {\n      callbacks: {\n        onDragStart: this._broadcastDragStart,\n        onDragEnd: this._broadcastDragEnd,\n        onVolumeLevelChangeFromInput: this._getVolumeLevelFromInput,\n        onVolumeLevelChangeFromWheel: this._getVolumeLevelFromWheel,\n        onToggleMuteClick: this._toggleMuteStatus,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new VolumeControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._buttonInterceptor = new KeyboardInterceptor(\n      this.view.getButtonNode(),\n      {\n        [KEYCODES.SPACE_BAR]: e => {\n          e.stopPropagation();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            this._engine.getMute()\n              ? UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED\n              : UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n        [KEYCODES.ENTER]: e => {\n          e.stopPropagation();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            this._engine.getMute()\n              ? UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED\n              : UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n      },\n    );\n\n    this._inputInterceptor = new KeyboardInterceptor(this.view.getInputNode(), {\n      [KEYCODES.RIGHT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.increaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n      [KEYCODES.LEFT_ARROW]: e => {\n        e.stopPropagation();\n        e.preventDefault();\n\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._eventEmitter.emit(\n          UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n        );\n        this._engine.setMute(false);\n        this._engine.decreaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._buttonInterceptor.destroy();\n    this._inputInterceptor.destroy();\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[VIDEO_EVENTS.VOLUME_STATUS_CHANGED, this._updateVolumeStatus]],\n      this,\n    );\n  }\n\n  private _bindCallbacks() {\n    this._getVolumeLevelFromInput = this._getVolumeLevelFromInput.bind(this);\n    this._toggleMuteStatus = this._toggleMuteStatus.bind(this);\n    this._getVolumeLevelFromWheel = this._getVolumeLevelFromWheel.bind(this);\n    this._broadcastDragStart = this._broadcastDragStart.bind(this);\n    this._broadcastDragEnd = this._broadcastDragEnd.bind(this);\n  }\n\n  private _broadcastDragStart() {\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_START);\n  }\n\n  private _broadcastDragEnd() {\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_END);\n  }\n\n  private _changeVolumeLevel(level: number) {\n    this._engine.setVolume(level);\n    this._eventEmitter.emit(UI_EVENTS.VOLUME_CHANGE_TRIGGERED, level);\n  }\n\n  private _toggleMuteStatus() {\n    this._engine.setMute(!this._engine.getMute());\n    this._eventEmitter.emit(\n      UI_EVENTS.MUTE_STATUS_TRIGGERED,\n      !this._engine.getMute(),\n    );\n  }\n\n  private _getVolumeLevelFromWheel(delta: number) {\n    const adjustedVolume = this._engine.getVolume() + delta / 10;\n    const validatedVolume = Math.min(100, Math.max(0, adjustedVolume));\n\n    this._changeVolumeStatus(validatedVolume);\n  }\n\n  private _getVolumeLevelFromInput(level: number) {\n    this._changeVolumeStatus(level);\n  }\n\n  private _changeVolumeStatus(level: number) {\n    this._changeVolumeLevel(level);\n    if (this._engine.getMute()) {\n      this._toggleMuteStatus();\n    }\n  }\n\n  private _updateVolumeStatus() {\n    this.setVolumeLevel(this._engine.getVolume());\n    this.setMuteStatus(this._engine.getMute());\n  }\n\n  setVolumeLevel(level: number) {\n    this.view.setVolume(level);\n    this.view.setMute(Boolean(!level));\n  }\n\n  setMuteStatus(isMuted: boolean) {\n    const volume = this._engine.getVolume();\n\n    this.view.setVolume(isMuted ? 0 : volume);\n    this.view.setMute(isMuted || Boolean(!volume));\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._engine = null;\n    this._textMap = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport { ITooltipReference } from '../../core/tooltip/types';\nimport {\n  controlTemplate,\n  enterFullScreenIconTemplate,\n  exitFullScreenIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { ITextMap } from '../../../text-map/types';\n\nimport {\n  IFullScreenViewStyles,\n  IFullScreenViewCallbacks,\n  IFullScreenViewConfig,\n} from './types';\n\nimport fullScreenViewTheme from './full-screen.theme';\nimport styles from './full-screen.scss';\n\nconst DATA_IS_IN_FULL_SCREEN = 'data-is-in-full-screen';\n\nclass FullScreenView extends View<IFullScreenViewStyles>\n  implements IView<IFullScreenViewStyles> {\n  private _callbacks: IFullScreenViewCallbacks;\n  private _textMap: ITextMap;\n  private _tooltipReference: ITooltipReference;\n\n  private _$rootElement: HTMLElement;\n  private _$toggleFullScreenControl: HTMLElement;\n\n  constructor(config: IFullScreenViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$rootElement = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_LABEL),\n        },\n      }),\n    );\n\n    this._$toggleFullScreenControl = getElementByHook(\n      this._$rootElement,\n      'full-screen-button',\n    );\n\n    this._tooltipReference = tooltipService.createReference(\n      this._$toggleFullScreenControl,\n      {\n        text: this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP),\n      },\n    );\n\n    this.setState({ isInFullScreen: false });\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._$toggleFullScreenControl.addEventListener(\n      'click',\n      this._onButtonClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$toggleFullScreenControl.removeEventListener(\n      'click',\n      this._onButtonClick,\n    );\n  }\n\n  private _onButtonClick() {\n    this._$toggleFullScreenControl.focus();\n    this._callbacks.onButtonClick();\n  }\n\n  //TODO: No need to create icons every tims on setState\n  setState({ isInFullScreen }: { isInFullScreen: boolean }) {\n    if (isInFullScreen) {\n      this._$toggleFullScreenControl.classList.add(\n        this.styleNames.inFullScreen,\n      );\n      this._$toggleFullScreenControl.innerHTML = exitFullScreenIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$toggleFullScreenControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.EXIT_FULL_SCREEN_LABEL),\n      );\n\n      this._tooltipReference.setText(\n        this._textMap.get(TEXT_LABELS.EXIT_FULL_SCREEN_TOOLTIP),\n      );\n    } else {\n      this._$toggleFullScreenControl.classList.remove(\n        this.styleNames.inFullScreen,\n      );\n      this._$toggleFullScreenControl.innerHTML = enterFullScreenIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$toggleFullScreenControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_LABEL),\n      );\n\n      this._tooltipReference.setText(\n        this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP),\n      );\n    }\n\n    this._$rootElement.setAttribute(\n      DATA_IS_IN_FULL_SCREEN,\n      String(isInFullScreen),\n    );\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$toggleFullScreenControl = null;\n    this._$rootElement = null;\n\n    this._textMap = null;\n  }\n}\n\nFullScreenView.setTheme(fullScreenViewTheme);\nFullScreenView.extendStyleNames(styles);\n\nexport default FullScreenView;\n","import { IThemeConfig } from '../../core/theme/types';\n\nexport default {\n  fullScreenSvgFill: {\n    fill: (data: IThemeConfig) => data.color,\n  },\n};\n","import { UI_EVENTS } from '../../../../constants';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport View from './full-screen.view';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport { IFullScreenControl, IFullScreenViewConfig } from './types';\nimport { IFullScreenManager } from '../../../full-screen-manager/types';\nimport { ITextMap } from '../../../text-map/types';\nimport { IThemeService } from '../../core/theme';\n\nexport default class FullScreenControl implements IFullScreenControl {\n  static moduleName = 'fullScreenControl';\n  static View = View;\n  static dependencies = [\n    'eventEmitter',\n    'fullScreenManager',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _eventEmitter: IEventEmitter;\n  private _fullScreenManager: IFullScreenManager;\n  private _textMap: ITextMap;\n  private _interceptor: KeyboardInterceptor;\n  private _tooltipService: ITooltipService;\n  private _theme: IThemeService;\n\n  private _unbindEvents: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    fullScreenManager,\n    textMap,\n    tooltipService,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    fullScreenManager: IFullScreenManager;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n    theme: IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._fullScreenManager = fullScreenManager;\n    this._textMap = textMap;\n    this._theme = theme;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n\n    this._initUI();\n\n    this._bindEvents();\n\n    this.setControlStatus(false);\n\n    if (!this._fullScreenManager.isEnabled) {\n      this.hide();\n    }\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._toggleFullScreen = this._toggleFullScreen.bind(this);\n  }\n\n  private _bindEvents() {\n    this._unbindEvents = this._eventEmitter.bindEvents(\n      [[UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this.setControlStatus]],\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: IFullScreenViewConfig = {\n      callbacks: {\n        onButtonClick: this._toggleFullScreen,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n      theme: this._theme,\n    };\n\n    this.view = new FullScreenControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: (e: Event) => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n      },\n      [KEYCODES.ENTER]: (e: Event) => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _toggleFullScreen() {\n    if (this._fullScreenManager.isInFullScreen) {\n      this._exitFullScreen();\n    } else {\n      this._enterFullScreen();\n    }\n  }\n\n  private _enterFullScreen() {\n    this._fullScreenManager.enterFullScreen();\n  }\n\n  private _exitFullScreen() {\n    this._fullScreenManager.exitFullScreen();\n  }\n\n  setControlStatus(isInFullScreen: boolean) {\n    this.view.setState({ isInFullScreen });\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._fullScreenManager = null;\n    this._textMap = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport { ITooltipReference } from '../../core/tooltip/types';\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\nimport { ILogoViewStyles, ILogoViewCallbacks, ILogoViewConfig } from './types';\nimport { logoTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { ITextMap } from '../../../text-map/types';\n\nimport styles from './logo.scss';\n\nclass LogoView extends View<ILogoViewStyles> implements IView<ILogoViewStyles> {\n  private _tooltipReference: ITooltipReference;\n  private _callbacks: ILogoViewCallbacks;\n  private _textMap: ITextMap;\n\n  private _$rootElement: HTMLElement;\n  private _$logo: HTMLElement;\n  private _$placeholder: HTMLElement;\n\n  constructor(config: ILogoViewConfig) {\n    super();\n    const { callbacks, textMap, tooltipService } = config;\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$rootElement = htmlToElement(\n      logoTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.LOGO_LABEL),\n        },\n      }),\n    );\n\n    this._$logo = getElementByHook(this._$rootElement, 'company-logo');\n    this._$placeholder = getElementByHook(\n      this._$rootElement,\n      'logo-placeholder',\n    );\n\n    this._tooltipReference = tooltipService.createReference(\n      this._$rootElement,\n      {\n        text: this._textMap.get(TEXT_LABELS.LOGO_TOOLTIP),\n      },\n    );\n\n    this.setLogo(config.logo);\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  setLogo(url: string) {\n    if (url) {\n      this._$logo.classList.remove(this.styleNames.hidden);\n      this._$placeholder.classList.add(this.styleNames.hidden);\n      this._$logo.setAttribute('src', url);\n    } else {\n      this._$logo.classList.add(this.styleNames.hidden);\n      this._$placeholder.classList.remove(this.styleNames.hidden);\n      this._$logo.removeAttribute('src');\n    }\n  }\n\n  setDisplayAsLink(flag: boolean) {\n    if (flag) {\n      this._$rootElement.classList.add(this.styleNames.link);\n      this._tooltipReference.enable();\n    } else {\n      this._$rootElement.classList.remove(this.styleNames.link);\n      this._tooltipReference.disable();\n    }\n  }\n\n  private _bindCallbacks() {\n    this._onNodeClick = this._onNodeClick.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$rootElement.addEventListener('click', this._onNodeClick);\n  }\n\n  private _unbindEvents() {\n    this._$rootElement.removeEventListener('click', this._onNodeClick);\n  }\n\n  private _onNodeClick() {\n    this._$rootElement.focus();\n    this._callbacks.onLogoClick();\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$rootElement = null;\n    this._$logo = null;\n    this._$placeholder = null;\n\n    this._tooltipReference = null;\n    this._textMap = null;\n  }\n}\n\nLogoView.extendStyleNames(styles);\n\nexport default LogoView;\n","import playerAPI from '../../../../core/player-api-decorator';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { UI_EVENTS } from '../../../../constants';\nimport View from './logo.view';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport { ILogoControl, ILogoViewConfig } from './types';\nimport { ITextMap } from '../../../text-map/types';\nimport { IPlayerConfig } from '../../../../core/config';\n\nexport default class Logo implements ILogoControl {\n  static moduleName = 'logo';\n  static View = View;\n  static dependencies = ['config', 'eventEmitter', 'textMap', 'tooltipService'];\n\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _tooltipService: ITooltipService;\n\n  private _interceptor: KeyboardInterceptor;\n  private _callback: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    config,\n    textMap,\n    tooltipService,\n  }: {\n    eventEmitter: IEventEmitter;\n    config: IPlayerConfig;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n\n    this._initUI();\n    this._initInterceptor();\n\n    const logoConfig = {\n      ...(typeof config.logo === 'object' ? config.logo : {}),\n    };\n\n    this.setLogo(logoConfig.src);\n    this.setLogoClickCallback(logoConfig.callback);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._triggerCallback = this._triggerCallback.bind(this);\n  }\n\n  private _initUI() {\n    const config: ILogoViewConfig = {\n      callbacks: {\n        onLogoClick: this._triggerCallback,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new Logo.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._triggerCallback();\n      },\n      [KEYCODES.ENTER]: e => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._triggerCallback();\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _triggerCallback() {\n    if (this._callback) {\n      this._callback();\n    }\n  }\n\n  /**\n   * Method for setting source of image, that would be used as logo\n   * @param src - Source of logo\n   * @example\n   * player.setLogo('https://example.com/logo.png');\n   *\n   */\n  @playerAPI()\n  setLogo(src: string) {\n    this.view.setLogo(src);\n  }\n\n  /**\n   * Method for attaching callback for click on logo\n   *\n   * @param callback - Your function\n   *\n   * @example\n   * const callback = () => {\n   *   console.log('Click on title);\n   * }\n   * player.setLogoClickCallback(callback);\n   *\n   */\n  @playerAPI()\n  setLogoClickCallback(callback?: Function) {\n    this._callback = callback;\n    this.view.setDisplayAsLink(Boolean(this._callback));\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._textMap = null;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport { ITooltipReference } from '../../core/tooltip/types';\nimport { buttonTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { ITextMap } from '../../../text-map/types';\n\nimport {\n  IDownloadViewStyles,\n  IDownloadViewCallbacks,\n  IDownloadViewConfig,\n} from './types';\n\nimport downloadViewTheme from './download.theme';\nimport styles from './download.scss';\n\nclass DownloadView extends View<IDownloadViewStyles>\n  implements IView<IDownloadViewStyles> {\n  private _callbacks: IDownloadViewCallbacks;\n  private _textMap: ITextMap;\n  private _tooltipReference: ITooltipReference;\n\n  private _$rootElement: HTMLElement;\n  private _$downloadButton: HTMLElement;\n\n  constructor(config: IDownloadViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$rootElement = htmlToElement(\n      buttonTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.DOWNLOAD_BUTTON_LABEL),\n        },\n      }),\n    );\n\n    this._$downloadButton = getElementByHook(\n      this._$rootElement,\n      'playable-download-button',\n    );\n\n    this._tooltipReference = tooltipService.createReference(\n      this._$downloadButton,\n      {\n        text: this._textMap.get(TEXT_LABELS.DOWNLOAD_BUTTON_TOOLTIP),\n      },\n    );\n\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._$downloadButton.addEventListener('click', this._onButtonClick);\n  }\n\n  private _unbindEvents() {\n    this._$downloadButton.removeEventListener('click', this._onButtonClick);\n  }\n\n  private _onButtonClick() {\n    this._$rootElement.focus();\n    this._callbacks.onButtonClick();\n  }\n\n  hide() {\n    this._$rootElement.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$rootElement.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$rootElement;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._callbacks = null;\n\n    this._tooltipReference.destroy();\n    this._tooltipReference = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$downloadButton = null;\n    this._$rootElement = null;\n\n    this._textMap = null;\n  }\n}\n\nDownloadView.setTheme(downloadViewTheme);\nDownloadView.extendStyleNames(styles);\n\nexport default DownloadView;\n","import { IThemeConfig } from '../../core/theme/types';\n\nexport default {\n  downloadSvgFill: {\n    fill: (data: IThemeConfig) => data.color,\n  },\n};\n","import playerAPI from '../../../../core/player-api-decorator';\n\nimport { UI_EVENTS } from '../../../../constants';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport View from './download.view';\n\nimport { IEventEmitter } from '../../../event-emitter/types';\nimport { ITooltipService } from '../../core/tooltip/types';\nimport { IDownloadButton, IDownloadViewConfig } from './types';\nimport { ITextMap } from '../../../text-map/types';\nimport { IThemeService } from '../../core/theme';\n\nexport default class DownloadButton implements IDownloadButton {\n  static moduleName = 'downloadButton';\n  static View = View;\n  static dependencies = ['eventEmitter', 'textMap', 'tooltipService', 'theme'];\n\n  private _eventEmitter: IEventEmitter;\n  private _textMap: ITextMap;\n  private _interceptor: KeyboardInterceptor;\n  private _tooltipService: ITooltipService;\n  private _theme: IThemeService;\n\n  private _callback: Function;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    textMap,\n    tooltipService,\n    theme,\n  }: {\n    eventEmitter: IEventEmitter;\n    textMap: ITextMap;\n    tooltipService: ITooltipService;\n    theme: IThemeService;\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._theme = theme;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n\n    this._initUI();\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindCallbacks() {\n    this._triggerCallback = this._triggerCallback.bind(this);\n  }\n\n  private _initUI() {\n    const config: IDownloadViewConfig = {\n      callbacks: {\n        onButtonClick: this._triggerCallback,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n      theme: this._theme,\n    };\n\n    this.view = new DownloadButton.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor(this.node, {\n      [KEYCODES.SPACE_BAR]: (e: Event) => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._triggerCallback();\n      },\n      [KEYCODES.ENTER]: (e: Event) => {\n        e.stopPropagation();\n        this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        this._triggerCallback();\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _triggerCallback() {\n    if (this._callback) {\n      this._callback();\n    }\n  }\n\n  @playerAPI()\n  setDownloadClickCallback(callback: Function) {\n    this._callback = callback;\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this.view.destroy();\n    this.view = null;\n\n    this._eventEmitter = null;\n    this._textMap = null;\n  }\n}\n","import { IFramesData, IFramesQuality, INormalizedFramesQuality } from './types';\n\nfunction normalizeFramesQuality(\n  framesCount: number,\n  quality: IFramesQuality,\n  neededFrame: number,\n): INormalizedFramesQuality {\n  const framesInSprite =\n    quality.framesInSprite.vert * quality.framesInSprite.horz;\n  const frameNumberInSprite = neededFrame % framesInSprite;\n  const spriteNumber = Math.floor(neededFrame / framesInSprite);\n  const horzPositionInSprite =\n    frameNumberInSprite % quality.framesInSprite.horz;\n  const vertPositionInSprite = Math.floor(\n    frameNumberInSprite / quality.framesInSprite.vert,\n  );\n\n  const url = `https://storage.googleapis.com/video-player-media-server-static/thumbnails/${quality.spriteNameMask.replace(\n    '%d',\n    spriteNumber.toString(),\n  )}`;\n\n  return {\n    frameSize: quality.frameSize,\n    framesInSprite:\n      (spriteNumber + 1) * framesInSprite <= framesCount\n        ? quality.framesInSprite\n        : {\n            horz: quality.framesInSprite.horz,\n            vert: Math.ceil(\n              (framesCount % framesInSprite) / quality.framesInSprite.vert,\n            ),\n          },\n    framePositionInSprite: {\n      vert: vertPositionInSprite,\n      horz: horzPositionInSprite,\n    },\n    spriteUrl: url,\n  };\n}\n\nfunction getAt(\n  data: IFramesData,\n  second: number,\n  duration: number,\n): INormalizedFramesQuality[] {\n  const { framesCount } = data;\n  const neededFrame = Math.floor((second * framesCount) / duration);\n  return data.qualities.map(quality =>\n    normalizeFramesQuality(framesCount, quality, neededFrame),\n  );\n}\n\nexport { getAt };\n","import playerAPI from '../../../core/player-api-decorator';\n\nimport { IPlaybackEngine } from '../../playback-engine/types';\n\nimport { getAt } from './adapter';\nimport {\n  IPreviewService,\n  IFramesData,\n  INormalizedFramesQuality,\n} from './types';\n\nexport default class PreviewService implements IPreviewService {\n  static moduleName = 'previewService';\n  static dependencies = ['engine'];\n\n  private _engine: IPlaybackEngine;\n\n  private _framesMap: IFramesData;\n\n  constructor({ engine }: { engine: IPlaybackEngine }) {\n    this._engine = engine;\n  }\n\n  @playerAPI()\n  setFramesMap(map: IFramesData) {\n    this._framesMap = map;\n  }\n\n  getAt(second: number): INormalizedFramesQuality[] {\n    if (!this._framesMap) {\n      return;\n    }\n\n    const duration = this._engine.getDurationTime();\n    if (!duration) {\n      return;\n    }\n\n    return getAt(this._framesMap, second, duration);\n  }\n\n  destroy(): void {\n    this._engine = null;\n  }\n}\n","import { thumbnailTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport {\n  IPreviewService,\n  INormalizedFramesQuality,\n} from '../preview-service/types';\n\nimport { IPreviewThumbnail } from './types';\n\nimport styleNames from './preview-thumbnail.scss';\n\nexport default class PreviewThumbnail implements IPreviewThumbnail {\n  static moduleName = 'previewThumbnail';\n  static dependencies = ['previewService'];\n\n  private _previewService: IPreviewService;\n\n  private _currentFrames: INormalizedFramesQuality[];\n\n  private _$rootElement: HTMLElement;\n  private _$lowQualityThumb: HTMLElement;\n  private _$highQualityThumb: HTMLElement;\n  private _$timeText: HTMLDivElement;\n\n  constructor({ previewService }: { previewService: IPreviewService }) {\n    this._previewService = previewService;\n\n    this._initUI();\n  }\n\n  private _initUI() {\n    this._$rootElement = htmlToElement(\n      thumbnailTemplate({\n        styles: styleNames,\n      }),\n    );\n\n    this._$timeText = getElementByHook(\n      this._$rootElement,\n      'playable-thumb-text-block',\n    ) as HTMLDivElement;\n\n    this._$lowQualityThumb = getElementByHook(\n      this._$rootElement,\n      'playable-thumb-low-quality',\n    );\n    this._$highQualityThumb = getElementByHook(\n      this._$rootElement,\n      'playable-thumb-high-quality',\n    );\n  }\n\n  getElement(): HTMLElement {\n    return this._$rootElement;\n  }\n\n  showAt(second: number) {\n    const config: INormalizedFramesQuality[] = this._previewService.getAt(\n      second,\n    );\n\n    if (!config) {\n      this._setEmpty();\n      return;\n    }\n\n    this._unsetEmpty();\n\n    if (this._currentFrames) {\n      if (this._currentFrames[0].spriteUrl !== config[0].spriteUrl) {\n        this._$lowQualityThumb.style.background = '';\n      }\n      if (this._currentFrames[1].spriteUrl !== config[1].spriteUrl) {\n        this._$highQualityThumb.style.background = '';\n      }\n    }\n\n    this._applyQualityToThumbElement(this._$lowQualityThumb, config[0]);\n    this._applyQualityToThumbElement(this._$highQualityThumb, config[1]);\n\n    this._currentFrames = config;\n  }\n\n  private _applyQualityToThumbElement(\n    element: HTMLElement,\n    quality: INormalizedFramesQuality,\n  ) {\n    const viewWidth = element.offsetWidth;\n    const viewHeight = element.offsetHeight;\n\n    const backgroudWidth = viewWidth * quality.framesInSprite.horz;\n    const backgroundHeight = viewHeight * quality.framesInSprite.vert;\n\n    element.style.background = `url('${quality.spriteUrl}') -${viewWidth *\n      quality.framePositionInSprite.horz}px -${viewHeight *\n      quality.framePositionInSprite\n        .vert}px / ${backgroudWidth}px ${backgroundHeight}px`;\n  }\n\n  private _setEmpty() {\n    this._$rootElement.classList.add(styleNames.empty);\n  }\n\n  private _unsetEmpty() {\n    this._$rootElement.classList.remove(styleNames.empty);\n  }\n\n  setTime(time: string) {\n    this._$timeText.innerText = time;\n  }\n\n  destroy(): void {\n    this._previewService = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$timeText = null;\n    this._$lowQualityThumb = null;\n    this._$highQualityThumb = null;\n    this._$rootElement = null;\n  }\n}\n","import { previewTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport {\n  IPreviewService,\n  INormalizedFramesQuality,\n} from '../preview-service/types';\nimport { IRootContainer } from '../../root-container/types';\n\nimport { IPreviewFullSize } from './types';\n\nimport styleNames from './preview-full-size.scss';\n\nexport default class PreviewFullsize implements IPreviewFullSize {\n  static moduleName = 'previewFullSize';\n  static dependencies = ['previewService', 'rootContainer'];\n\n  private _previewService: IPreviewService;\n\n  private _currentFrame: INormalizedFramesQuality;\n\n  private _$rootElement: HTMLElement;\n  private _$frame: HTMLElement;\n\n  constructor({\n    previewService,\n    rootContainer,\n  }: {\n    previewService: IPreviewService;\n    rootContainer: IRootContainer;\n  }) {\n    this._previewService = previewService;\n\n    this._initUI();\n\n    this.hide();\n    rootContainer.appendComponentNode(this.getElement());\n  }\n\n  private _initUI() {\n    this._$rootElement = htmlToElement(\n      previewTemplate({\n        styles: styleNames,\n      }),\n    );\n\n    this._$frame = getElementByHook(\n      this._$rootElement,\n      'playable-preview-full-size-frame',\n    ) as HTMLDivElement;\n  }\n\n  getElement(): HTMLElement {\n    return this._$rootElement;\n  }\n\n  showAt(second: number) {\n    this._showFrame();\n    const config: INormalizedFramesQuality[] = this._previewService.getAt(\n      second,\n    );\n\n    if (!config) {\n      this._clearFrame();\n      return;\n    }\n\n    const frameData = config.pop();\n\n    if (this._currentFrame) {\n      if (this._currentFrame.spriteUrl !== frameData.spriteUrl) {\n        this._$frame.style.background = '';\n      }\n    }\n\n    this._applyFrame(frameData);\n\n    this._currentFrame = frameData;\n  }\n\n  private _applyFrame(frameData: INormalizedFramesQuality) {\n    const viewWidth = this._$frame.offsetWidth;\n    const viewHeight = this._$frame.offsetHeight;\n\n    const backgroudWidth = viewWidth * frameData.framesInSprite.horz;\n    const backgroundHeight = viewHeight * frameData.framesInSprite.vert;\n\n    this._$frame.style.background = `url('${\n      frameData.spriteUrl\n    }') -${viewWidth * frameData.framePositionInSprite.horz}px -${viewHeight *\n      frameData.framePositionInSprite\n        .vert}px / ${backgroudWidth}px ${backgroundHeight}px`;\n  }\n\n  private _clearFrame() {\n    this._$frame.style.background = '';\n  }\n\n  private _showFrame() {\n    this._$rootElement.classList.remove(styleNames.hidden);\n  }\n\n  private _hideFrame() {\n    this._$rootElement.classList.add(styleNames.hidden);\n  }\n\n  hide() {\n    this._hideFrame();\n  }\n\n  destroy(): void {\n    this._previewService = null;\n\n    if (this._$rootElement.parentNode) {\n      this._$rootElement.parentNode.removeChild(this._$rootElement);\n    }\n\n    this._$frame = null;\n    this._$rootElement = null;\n  }\n}\n","import DependencyContainer from './dependency-container';\n\nimport RootContainer from '../modules/root-container/root-container';\nimport EventEmitter from '../modules/event-emitter/event-emitter';\nimport Engine from '../modules/playback-engine/playback-engine';\nimport ThemeService from '../modules/ui/core/theme';\nimport TextMap from '../modules/text-map/text-map';\n\nimport FullScreenManager from '../modules/full-screen-manager/full-screen-manager';\n\nimport LiveStateEngine from '../modules/playback-engine/live-state-engine';\nimport KeyboardControls from '../modules/keyboard-control/keyboard-control';\nimport DebugPanel from '../modules/ui/debug-panel/debug-panel';\n\nimport Screen from '../modules/ui/screen/screen';\nimport InteractionIndicator from '../modules/ui/interaction-indicator/interaction-indicator';\n\nimport Overlay from '../modules/ui/overlay/overlay';\nimport Loader from '../modules/ui/loader/loader';\n\nimport MainUIBlock from '../modules/ui/main-ui-block/main-ui-block';\nimport TopBlock from '../modules/ui/top-block/top-block';\nimport Title from '../modules/ui/title/title';\nimport LiveIndicator from '../modules/ui/live-indicator/live-indicator';\n\nimport BottomBlock from '../modules/ui/bottom-block/bottom-block';\nimport ProgressControl from '../modules/ui/controls/progress/progress';\nimport PlayControl from '../modules/ui/controls/play/play';\nimport TimeControl from '../modules/ui/controls/time/time';\nimport VolumeControl from '../modules/ui/controls/volume/volume';\nimport FullScreenControl from '../modules/ui/controls/full-screen/full-screen';\nimport Logo from '../modules/ui/controls/logo/logo';\nimport DownloadButton from '../modules/ui/controls/download/download';\n\nimport PreviewService from '../modules/ui/preview-service/preview-service';\nimport PreviewThumbnail from '../modules/ui/preview-thumbnail/preview-thumbnail';\nimport PreviewFullSize from '../modules/ui/preview-full-size/preview-full-size';\n\nimport { TooltipService } from '../modules/ui/core/tooltip';\n\nconst { asClass } = DependencyContainer;\n\nexport const modules: { [id: string]: any } = {\n  RootContainer,\n  EventEmitter,\n  Engine,\n  ThemeService,\n  TextMap,\n\n  FullScreenManager,\n\n  LiveStateEngine,\n  KeyboardControls,\n  DebugPanel,\n\n  Screen,\n  InteractionIndicator,\n\n  Overlay,\n  Loader,\n\n  MainUIBlock,\n\n  TopBlock,\n  LiveIndicator,\n  Title,\n\n  BottomBlock,\n  ProgressControl,\n  PlayControl,\n  TimeControl,\n  VolumeControl,\n  FullScreenControl,\n  Logo,\n  DownloadButton,\n\n  PreviewService,\n  PreviewThumbnail,\n  PreviewFullSize,\n\n  TooltipService,\n};\n\nconst DIModules: { [id: string]: any } = Object.keys(modules).reduce(\n  (DIModules: { [id: string]: any }, key: string) => {\n    const module = modules[key] as any;\n    if (!module.moduleName) {\n      throw new Error(`No moduleName in module: ${key}`);\n    }\n\n    DIModules[module.moduleName] = asClass(module).scoped();\n    return DIModules;\n  },\n  {},\n);\n\nexport default DIModules;\n","/**\n * `true` if we are running inside a web browser, `false` otherwise (e.g. running inside Node.js).\n */\nexport const isBrowser = typeof window !== 'undefined';\n\n/**\n * This is a map which lists native support of formats and APIs.\n * It gets filled during runtime with the relevant values to the current environment.\n */\nexport const NativeEnvironmentSupport: { [format: string]: boolean } = {\n  MSE: false,\n  HLS: false,\n  DASH: false,\n  MP4: false,\n  WEBM: false,\n  OGG: false,\n  MOV: false,\n  MKV: false,\n};\n\n/* ignore coverage */\nfunction detectEnvironment() {\n  if (!isBrowser) {\n    return; // Not in a browser\n  }\n  NativeEnvironmentSupport.MSE =\n    'WebKitMediaSource' in window || 'MediaSource' in window;\n  const video = document.createElement('video');\n  if (typeof video.canPlayType !== 'function') {\n    return; // env doesn't support HTMLMediaElement (e.g PhantomJS)\n  }\n  if (\n    video.canPlayType('application/x-mpegURL') ||\n    video.canPlayType('application/vnd.apple.mpegURL')\n  ) {\n    NativeEnvironmentSupport.HLS = true;\n  }\n  if (video.canPlayType('application/dash+xml')) {\n    NativeEnvironmentSupport.DASH = true;\n  }\n  if (video.canPlayType('video/mp4')) {\n    NativeEnvironmentSupport.MP4 = true;\n  }\n  if (video.canPlayType('video/webm')) {\n    NativeEnvironmentSupport.WEBM = true;\n  }\n  if (video.canPlayType('video/ogg')) {\n    NativeEnvironmentSupport.OGG = true;\n  }\n  if (video.canPlayType('video/quicktime')) {\n    NativeEnvironmentSupport.MOV = true;\n  }\n  if (video.canPlayType('video/x-matroska')) {\n    NativeEnvironmentSupport.MKV = true;\n  }\n}\n\ndetectEnvironment(); // Run once\n","import { VIDEO_EVENTS, ERRORS } from '../../../constants';\n\nimport {\n  geOverallBufferLength,\n  getNearestBufferSegmentInfo,\n} from '../../../utils/video-data';\nimport { NativeEnvironmentSupport } from '../../../utils/environment-detection';\nimport { IPlaybackAdapter } from './types';\nimport { IEventEmitter } from '../../event-emitter/types';\n\nconst NATIVE_ERROR_CODES = {\n  ABORTED: 1,\n  NETWORK: 2,\n  DECODE: 3,\n  SRC_NOT_SUPPORTED: 4,\n};\n\nimport {\n  MediaStreamTypes,\n  MediaStreamDeliveryPriority,\n} from '../../../constants';\n\nexport default function getNativeAdapterCreator(\n  streamType: MediaStreamTypes,\n  deliveryPriority: MediaStreamDeliveryPriority,\n) {\n  class NativeAdapter implements IPlaybackAdapter {\n    static isSupported(): boolean {\n      return NativeEnvironmentSupport[streamType];\n    }\n\n    private mediaStreams: any;\n    private eventEmitter: IEventEmitter;\n    private currentLevel: number;\n    private videoElement: HTMLVideoElement;\n\n    constructor(eventEmitter: IEventEmitter) {\n      this.mediaStreams = null;\n      this.eventEmitter = eventEmitter;\n      this.currentLevel = 0;\n\n      this._bindCallbacks();\n    }\n\n    get currentUrl() {\n      return this.mediaStreams[this.currentLevel].url;\n    }\n    //@ts-ignore\n    get syncWithLiveTime() {\n      // TODO: implement syncWithLiveTime for `native`\n      return undefined;\n    }\n\n    get isDynamicContent() {\n      return !isFinite(this.videoElement.duration);\n    }\n\n    get isDynamicContentEnded() {\n      // TODO: implement isDynamicContentEnded\n      return false;\n    }\n\n    get isSyncWithLive() {\n      // TODO: implement isSyncWithLive for `native`\n      return false;\n    }\n\n    get isSeekAvailable() {\n      return true;\n      //Need to find better solution\n      /*\n      if (this.isDynamicContent) {\n        return false;\n      }\n\n      return Boolean(this.videoElement.seekable.length);\n      */\n    }\n\n    get mediaStreamDeliveryPriority() {\n      return deliveryPriority;\n    }\n\n    get mediaStreamType() {\n      return streamType;\n    }\n\n    get debugInfo() {\n      if (this.videoElement) {\n        const { buffered, currentTime } = this.videoElement;\n\n        const overallBufferLength = geOverallBufferLength(buffered);\n        const nearestBufferSegInfo = getNearestBufferSegmentInfo(\n          buffered,\n          currentTime,\n        );\n\n        return {\n          ...this.mediaStreams[0],\n          deliveryPriority: this.mediaStreamDeliveryPriority,\n          overallBufferLength,\n          nearestBufferSegInfo,\n        };\n      }\n\n      return {};\n    }\n\n    private _bindCallbacks() {\n      this._broadcastError = this._broadcastError.bind(this);\n    }\n\n    canPlay(mediaType: MediaStreamTypes) {\n      return mediaType === streamType;\n    }\n\n    setMediaStreams(mediaStreams: any) {\n      this.mediaStreams = mediaStreams;\n    }\n\n    private _logError(error: string, errorEvent: MediaError) {\n      this.eventEmitter.emit(VIDEO_EVENTS.ERROR, {\n        errorType: error,\n        streamType,\n        streamProvider: 'native',\n        errorInstance: errorEvent,\n      });\n    }\n\n    private _broadcastError() {\n      const error = this.videoElement.error;\n      if (!error) {\n        this._logError(ERRORS.UNKNOWN, null);\n        return;\n      }\n\n      switch (error.code) {\n        case NATIVE_ERROR_CODES.ABORTED:\n          //No need for broadcasting\n\n          break;\n        case NATIVE_ERROR_CODES.NETWORK:\n          this._logError(ERRORS.CONTENT_LOAD, error);\n          break;\n        case NATIVE_ERROR_CODES.DECODE:\n          this._logError(ERRORS.MEDIA, error);\n          break;\n        case NATIVE_ERROR_CODES.SRC_NOT_SUPPORTED:\n          /*\n            Our url checks would not allow not supported formats, so only case would be\n             when video tag couldn't retriev any info from endpoit\n          */\n\n          this._logError(ERRORS.CONTENT_LOAD, error);\n\n          break;\n        default:\n          this._logError(ERRORS.UNKNOWN, error);\n          break;\n      }\n    }\n\n    attach(videoElement: HTMLVideoElement) {\n      this.videoElement = videoElement;\n      this.videoElement.addEventListener('error', this._broadcastError);\n      this.videoElement.src = this.mediaStreams[this.currentLevel].url;\n    }\n\n    detach() {\n      this.videoElement.removeEventListener('error', this._broadcastError);\n      this.videoElement.removeAttribute('src');\n      this.videoElement = null;\n    }\n  }\n\n  return NativeAdapter;\n}\n","import getNativeAdapterCreator from './native';\n\nimport {\n  MediaStreamTypes,\n  MediaStreamDeliveryPriority,\n} from '../../../constants';\n\nconst defaultPlaybackAdapters = [\n  getNativeAdapterCreator(\n    MediaStreamTypes.HLS,\n    MediaStreamDeliveryPriority.NATIVE_ADAPTIVE,\n  ),\n  getNativeAdapterCreator(\n    MediaStreamTypes.DASH,\n    MediaStreamDeliveryPriority.NATIVE_ADAPTIVE,\n  ),\n  getNativeAdapterCreator(\n    MediaStreamTypes.MP4,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ),\n  getNativeAdapterCreator(\n    MediaStreamTypes.WEBM,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ), // Native WebM (Chrome, Firefox)\n  getNativeAdapterCreator(\n    MediaStreamTypes.OGG,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ), // Native WebM (Chrome, Firefox)\n  getNativeAdapterCreator(\n    MediaStreamTypes.MOV,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ), // Native QuickTime .mov (Safari)\n  getNativeAdapterCreator(\n    MediaStreamTypes.MKV,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ),\n];\n\nexport default defaultPlaybackAdapters;\n","import DependencyContainer from './dependency-container';\nimport PlayerFacade from './player-facade';\n\nimport defaultModules from './default-modules';\nimport defaultPlaybackAdapters from '../modules/playback-engine/adapters/default-set';\n\nimport { IThemeConfig } from '../modules/ui/core/theme';\n\nimport { IPlayerConfig } from './config';\n\nlet additionalModules: { [id: string]: any } = {};\nlet playbackAdapters: any[] = [...defaultPlaybackAdapters];\n\nexport const container = DependencyContainer.createContainer();\ncontainer.register(defaultModules);\nconst defaultModulesNames = Object.keys(defaultModules);\n\nexport function registerModule(id: string, module: any) {\n  additionalModules[id] = module;\n}\n\nexport function registerPlaybackAdapter(adapter: any) {\n  playbackAdapters.push(adapter);\n}\n\nexport function clearAdditionalModules() {\n  additionalModules = {};\n}\n\nexport function clearPlaybackAdapters() {\n  playbackAdapters = [...defaultPlaybackAdapters];\n}\n\nexport function create(params: IPlayerConfig = {}, themeConfig?: IThemeConfig) {\n  const scope = container.createScope();\n\n  const additionalModuleNames = Object.keys(additionalModules);\n\n  if (additionalModuleNames.length) {\n    additionalModuleNames.forEach(moduleName =>\n      scope.registerClass(moduleName, additionalModules[moduleName], {\n        lifetime: DependencyContainer.Lifetime.SCOPED,\n      }),\n    );\n  }\n\n  scope.registerValue('availablePlaybackAdapters', playbackAdapters);\n\n  return new PlayerFacade(\n    params,\n    scope,\n    defaultModulesNames,\n    additionalModuleNames,\n    themeConfig,\n  );\n}\n","import * as playerFactoryMethods from './core/player-factory';\nimport { modules as DefaultModules } from './core/default-modules';\nimport playerAPIDecorator from './core/player-api-decorator';\nimport {\n  ERRORS,\n  UI_EVENTS,\n  VIDEO_EVENTS,\n  TEXT_LABELS,\n  MediaStreamTypes as MEDIA_STREAM_TYPES,\n  MediaStreamDeliveryPriority as MEDIA_STREAM_DELIVERY_PRIORITY,\n  EngineState as ENGINE_STATES,\n  LiveState as LIVE_STATES,\n} from './constants';\nimport { Tooltip } from './modules/ui/core/tooltip';\nimport { IPlaybackAdapter } from './modules/playback-engine/adapters/types';\nimport { VideoViewMode as VIDEO_VIEW_MODES } from './modules/ui/screen/types';\n\nexport {\n  ERRORS,\n  UI_EVENTS,\n  VIDEO_EVENTS,\n  TEXT_LABELS,\n  MEDIA_STREAM_TYPES,\n  MEDIA_STREAM_DELIVERY_PRIORITY,\n  ENGINE_STATES,\n  LIVE_STATES,\n  VIDEO_VIEW_MODES,\n  Tooltip,\n  playerAPIDecorator,\n  DefaultModules,\n  IPlaybackAdapter,\n};\n\nexport * from './core/player-factory';\n\nexport default {\n  ...playerFactoryMethods,\n  UI_EVENTS,\n  VIDEO_EVENTS,\n  TEXT_LABELS,\n  MEDIA_STREAM_TYPES,\n  MEDIA_STREAM_DELIVERY_PRIORITY,\n  ENGINE_STATES,\n  LIVE_STATES,\n  VIDEO_VIEW_MODES,\n  Tooltip,\n  playerAPIDecorator,\n  DefaultModules,\n};\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","Lifetime","message","_super","_this","enumerable","value","name","Error","captureStackTrace","tslib_1.__extends","functionName","expectedType","givenType","ExtendableError","PROPERTY_FOR_DEPENDENCIES","makeFluidInterface","obj","setLifetime","lifetime","transient","TRANSIENT","scoped","SCOPED","singleton","SINGLETON","asValue","resolve","asFunction","fn","options","NotAFunctionError","defaults","generateResolve","result","bind","asClass","Type","_i","args","dependencyParseTarget","dependencies","container","wrapper","reduce","dependency","createErrorMessage","resolutionStack","slice","push","resolutionPathString","join","msg","FAMILY_TREE","_parentContainer","concat","cache","Container","registrations","_registrations","verbatimValue","nameValueToObject","keys","forEach","valueToRegister","isArray","register","registration","_registerAs","root","_resolutionStack","indexOf","ResolutionError","cached","resolved","undefined","_a","pop","err","createContainer","__parentContainer","IPHONE_PATTERN","IPOD_PATTERN","IPAD_PATTERN","ANDROID_PATTERN","SAFARI_PATTERN","isIE","window","MSStream","getUserAgent","navigator","userAgent","isIPhone","test","isIPod","isIPad","isIOS","isAndroid","isSafari","convertToDeviceRelatedConfig","params","showInteractionIndicator","screen","disableClickProcessing","nativeControls","title","loader","controls","convertUIConfigForIOS","convertUIConfigForAndroid","playerAPI","property","descriptor","desc1","desc2","methodName","get","set","scope","defaultModulesNames","additionalModuleNames","themeConfig","registerValue","config","_config","_resolveAdditionalModules","_resolveDefaultModules","Player","modulesNames","_defaultModules","modules","moduleName","_additionalModules","resolvedModule","_addPlayerAPIFromModule","module","_destroyed","playerMethodDescriptor","configurable","_getWrappedCallToModuleFunction","writable","apiKey","_getPlayerAPIMethodDescriptor","_clearPlayerAPIForModule","destroy","MapShim","Map","getIndex","arr","some","entry","index","anonymous","__entries__","prototypeAccessors","size","delete","entries","splice","has","clear","callback","ctx","list","defineProperties","isBrowser","document","global$1","global","Math","self","Function","requestAnimationFrame$1","requestAnimationFrame","setTimeout","Date","now","trailingTimeout","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","throttle","addObserver","observer","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","filter","gatherActive","hasActive","broadcastActive","addEventListener","observe","attributes","childList","characterData","subtree","removeEventListener","disconnect","ref","propertyName","getInstance","instance_","defineConfigurable","props","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","styles","positions","len","position","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","paddings","getPaddings","horizPad","left","right","vertPad","top","bottom","width","height","boxSizing","round","documentElement","isDocumentElement","vertScrollbar","horizScrollbar","abs","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","getBBox","getContentRect","bbox","getSVGContentRect","x","y","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","rect","broadcastRect","ResizeObserverEntry","rectInit","Constr","contentRect","DOMRectReadOnly","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","this$1","observation","map","WeakMap","ResizeObserver","method","_activePointers","_activeKeys","pointerStartEvents","pointerEndEvents","handleWindowBlurEvent","handlePointerStartEvent","event","isPrimary","handlePointerEndEvent","touches","setImmediate","max","handleKeyStartEvent","keyCode","which","handleKeyEndEvent","getInteractionType","pointer","Boolean","interactionTypeHandler","engage","disengage","supportsFocusIn","focusEventName","blurEventName","current","lock","used","script","initial","handleFocusEvent","source","type","interactionType","setAttribute","getCurrentFocusSource","getUsedFocusSource","lockFocusSource","unlockFocusSource","MediaStreamTypes","MediaStreamDeliveryPriority","engageInteractionTypeObserver","unlock","removeAttribute","EngineState","UI_EVENTS","PLAY_TRIGGERED","PLAY_OVERLAY_TRIGGERED","PAUSE_TRIGGERED","PROGRESS_CHANGE_TRIGGERED","VOLUME_CHANGE_TRIGGERED","MUTE_STATUS_TRIGGERED","FULLSCREEN_STATUS_CHANGED","MOUSE_ENTER_ON_PLAYER_TRIGGERED","MOUSE_MOVE_ON_PLAYER_TRIGGERED","MOUSE_LEAVE_ON_PLAYER_TRIGGERED","CONTROL_BLOCK_HIDE_TRIGGERED","CONTROL_BLOCK_SHOW_TRIGGERED","PROGRESS_DRAG_STARTED","PROGRESS_DRAG_ENDED","KEYBOARD_KEYDOWN_INTERCEPTED","LOADER_SHOW_TRIGGERED","LOADER_HIDE_TRIGGERED","LOADING_COVER_SHOW_TRIGGERED","LOADING_COVER_HIDE_TRIGGERED","TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED","GO_BACKWARD_WITH_KEYBOARD_TRIGGERED","GO_FORWARD_WITH_KEYBOARD_TRIGGERED","INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED","DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED","MUTE_SOUND_WITH_KEYBOARD_TRIGGERED","UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED","HIDE_INTERACTION_INDICATOR_TRIGGERED","PLAYER_WIDTH_CHANGE_TRIGGERED","PLAYER_HEIGHT_CHANGE_TRIGGERED","PLAY_WITH_SCREEN_CLICK_TRIGGERED","PAUSE_WITH_SCREEN_CLICK_TRIGGERED","CONTROL_DRAG_START","CONTROL_DRAG_END","MAIN_BLOCK_HIDE_TRIGGERED","MAIN_BLOCK_SHOW_TRIGGERED","PROGRESS_SYNC_BUTTON_MOUSE_ENTER_TRIGGERED","PROGRESS_SYNC_BUTTON_MOUSE_LEAVE_TRIGGERED","RESIZE","USER_PREVIEWING_FRAME","VIDEO_EVENTS","ERROR","STATE_CHANGED","LIVE_STATE_CHANGED","DYNAMIC_CONTENT_ENDED","CHUNK_LOADED","CURRENT_TIME_UPDATED","DURATION_UPDATED","VOLUME_STATUS_CHANGED","VOLUME_CHANGED","MUTE_CHANGED","SEEK_IN_PROGRESS","UPLOAD_STALLED","UPLOAD_SUSPEND","PLAY_REQUEST_TRIGGERED","PLAY_ABORTED","RESET","Errors","SRC_PARSE","MANIFEST_LOAD","MANIFEST_PARSE","MANIFEST_INCOMPATIBLE","LEVEL_LOAD","CONTENT_LOAD","CONTENT_PARSE","MEDIA","UNKNOWN","LOGO_LABEL","LOGO_TOOLTIP","LIVE_INDICATOR_TEXT","LIVE_SYNC_LABEL","LIVE_SYNC_TOOLTIP","ENTER_FULL_SCREEN_LABEL","ENTER_FULL_SCREEN_TOOLTIP","EXIT_FULL_SCREEN_LABEL","EXIT_FULL_SCREEN_TOOLTIP","PLAY_CONTROL_LABEL","PAUSE_CONTROL_LABEL","PROGRESS_CONTROL_LABEL","PROGRESS_CONTROL_VALUE","UNMUTE_CONTROL_LABEL","UNMUTE_CONTROL_TOOLTIP","MUTE_CONTROL_LABEL","MUTE_CONTROL_TOOLTIP","VOLUME_CONTROL_LABEL","VOLUME_CONTROL_VALUE","DOWNLOAD_BUTTON_LABEL","DOWNLOAD_BUTTON_TOOLTIP","LiveState","htmlToElement","html","div","createElement","innerHTML","trim","childElementCount","firstChild","classnames","commonjsHelpers.createCommonjsModule","hasOwn","classNames","classes","arg","argType","inner","exports","default","theme","moduleTheme","_moduleTheme","registerModuleTheme","_themeStyles","Stylable","_styles","sourceStyles","partialStyles","styleName","extendStyles","styleInject","css","insertAt","head","getElementsByTagName","style","insertBefore","appendChild","styleSheet","cssText","createTextNode","fillAllSpace","callbacks","_callbacks","_$rootElement","styleNames","setFillAllSpaceFlag","setWidth","setHeight","_bindEvents","RootContainerView","onMouseEnter","onMouseMove","onMouseLeave","offsetWidth","offsetHeight","classList","add","hidden","remove","element","isFullScreen","fullScreen","isFillAllSpace","_unbindEvents","parentNode","removeChild","View","arrayLike","initialValue","forEachMatch","string","pattern","match","exec","extendStyleNames","matchesSelectorFn","ALIASES","HTMLElement","isElementMatchesSelector","selector","querySelectorAll","CSS_SELECTOR_PATTERN","QUERY_ATTR_PATTERN","getQueriesFromCssSelector","cssSelector","results","replace","selectorPart1","attribute","_b","prefix","mode","parseInt","getQueries","styleSheets","rules","cssRules","rule","selectorText","getQueriesFromRules","e","DEFAULT_QUERY_PREFIX","_element","_queryPrefix","_queries","matchedSelectors","queries","query","_query","sort","a","getQueriesForElement","ElementQueries","elementWidth","attributeName","attributeValue","_getQueryAttributeValue","_setQueryAttribute","DEFAULT_CONFIG","eventEmitter","_eventEmitter","isHidden","_bindCallbacks","_initUI","RootContainer","view","getNode","_onResized","_broadcastMouseEnter","_broadcastMouseMove","_broadcastMouseLeave","bindEvents","setFullScreenStatus","sizeConfig","_elementQueries","node","appendComponentElement","emit","running","last","action","removeClass","update","_disengageFocusWithin","elem","activeElement","getElementsByClassName","_disengageFocusSource","focusSource","getWidth","getHeight","_enableFocusInterceptors","_resizeObserver","flag","hide","show","_disableFocusInterceptors","tslib_1.__decorate","eventemitter3_1","Events","addListener","emitter","context","once","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","eventNames","events","names","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","a1","a2","a3","a4","a5","removeListener","j","on","removeAllListeners","off","prefixed","EventEmitterModule","eventsMap","defaultFnContext","eventName","fnContext","unbindEvent","NATIVE_VIDEO_EVENTS_TO_STATE","video","_video","_currentState","_isMetadataLoaded","_statesTimestamps","StateEngine","_processEventFromVideo","_initialTimeStamp","state","_setInitialTimeStamp","videoEl","setState","LOAD_STARTED","_setStateTimestamp","METADATA_LOADED","READY_TO_PLAY","PLAY_REQUESTED","paused","PLAYING","WAITING","played","PAUSED","ENDED","prevState","nextState","NATIVE_VIDEO_TO_BROADCAST","_currentMute","muted","_currentVolume","volume","NativeEventsBroadcaster","currentTime","duration","resolveAdapters","mediaStreams","availableAdapters","playableAdapters","groupedStreams","typeMap","mediaStream","groupStreamsByMediaType","groupedStreamKeys","adapter","mediaType","mediaStreams_1","canPlay","setMediaStreams","firstAdapter","secondAdapter","mediaStreamDeliveryPriority","extensionsMap","mp4","MP4","webm","WEBM","m3u8","HLS","mpd","DASH","ogg","OGG","mkv","MKV","mov","MOV","playbackAdapters","_playableAdapters","_availableAdapters","_attachedAdapter","isSupported","AdaptersStrategy","mediaSources","mediaSource","url","anchorElement","href","path","pathname","split","toLowerCase","errorType","ERRORS","streamSrc","src","_autoDetectSourceTypes","attach","detach","_detachCurrentAdapter","_resolvePlayableAdapters","_connectAdapterToVideo","availablePlaybackAdapters","_currentSrc","_createVideoTag","videoElement","_stateEngine","_nativeEventsBroadcaster","_adapterStrategy","AdapterStrategy","_applyConfig","Engine","tagName","preload","autoPlay","loop","playInline","crossOrigin","setPreload","setAutoPlay","setLoop","setMute","setVolume","setPlayInline","setCrossOrigin","setSrc","attachedAdapter","isDynamicContent","isDynamicContentEnded","isSeekAvailable","isMetadataLoaded","getPreload","getAutoPlay","isSyncWithLive","clearTimestamps","connectAdapter","SRC_SET","pause","setCurrentTime","_pauseRequested","_playPromise","play","then","catch","isVideoPaused","ended","syncWithLiveTime","sec","getDurationTime","getCurrentTime","min","parsedVolume","Number","isNaN","getVolume","isMuted","isAutoPlay","autoplay","isLoop","rate","playbackRate","time","videoWidth","videoHeight","buffered","isPlayInline","getAttribute","data","debugInfo","viewDimensions","_getViewDimensions","loadingStateTimestamps","stateTimestamps","SHORTHAND_HEX_COLOR_PATTERN","HEX_COLOR_PATTERN","transperentizeColor","color","alpha","_","g","camelToKebab","generatedIds","getUniqueId","classImportName","kebabName","className","newID","getUniquePostfix","generateClassNames","acc","getUniqueClassName","StyleSheet","_styleNode","discoveredStyles","_rulesByModule","_getModuleCSS","_data","_classNamesByModule","moduleRules","moduleClassNames","_getRuleCSS","ruleClassName","complexRules","ruleName","_getRuleStyles","DEFAULT_THEME_CONFIG","liveColor","progressColor","_styleSheet","ThemeService","getModuleClassNames","TEXT_LABELS","_textMap","DEFAULT_TEXTS","texts","TextMap","id","text","fnMap","_elem","_callback","_fullscreenFn","ret","getFullScreenFn","DesktopFullScreen","fullscreenElement","isAPIExist","fullscreenEnabled","fullscreenchange","isEnabled","request","requestFullscreen","ALLOW_KEYBOARD_INPUT","exitFullscreen","isFullScreenRequested","_enterWhenHasMetaData","IOSFullScreen","webkitSupportsFullscreen","webkitDisplayingFullscreen","isInFullScreen","webkitEnterFullscreen","readyState","webkitExitFullscreen","exitFullScreenOnEnd","enterFullScreenOnPlay","exitFullScreenOnPause","pauseVideoOnFullScreenExit","engine","rootContainer","_engine","_isEnabled","_exitFullScreenOnEnd","_enterFullScreenOnPlay","_exitFullScreenOnPause","_pauseVideoOnFullScreenExit","_onChange","_helper","FullScreenManager","_processNextStateFromEngine","_enterOnPlayRequested","exitFullScreen","enterFullScreen","_exitOnEnd","_exitOnPauseRequested","exit","SEEK_BY_UI_EVENTS","_state","NONE","_isSeekedByUIWhilePlaying","LiveStateEngine","_processStateChange","_processSeekByUI","_onDynamicContentEnded","_setState","INITIAL","syncWithLive","NOT_SYNC","SYNC","getCurrentState","optionalParams","console","warn","KEYCODES","SPACE_BAR","ENTER","TAB","LEFT_ARROW","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","DEBUG_KEY","_node","_attachCallbacks","KeyboardInterceptorCore","keyCodeCallbacks","_processKeyboardInput","_isDestroyed","logger","_unattachCallbacks","_rootNode","disableControlWithKeyboard","_initInterceptor","KeyboardControl","_keyboardInterceptor","KeyboardInterceptor","_attachDefaultControls","addCallbacks","preventDefault","togglePlayback","goBackward","goForward","increaseVolume","decreaseVolume","_destroyInterceptor","getElementByHook","hook","querySelector","toggleElementClass","shouldAdd","_initDOM","DebugPanelView","_$closeButton","_$infoContainer","onCloseButtonClick","info","json","JSON","stringify","cls","number","boolean","null","VideoViewMode","keyboardControl","appendComponentNode","addKeyControl","_keyControlCallback","DebugPanel","ctrlKey","shiftKey","updateInfo","deliveryPriority","currentBitrate","overallBufferLength","nearestBufferSegInfo","bitrates","bwEstimate","setInfo","getDebugInfo","clearUpdateInterval","_interval","setInterval","clearInterval","setUpdateInterval","playbackViewNode","_styleNamesByViewMode","REGULAR","regularMode","BLUR","blurMode","FILL","fillMode","setViewMode","ScreenView","_updateBackground","_$playbackNode","_$canvas","onWrapperMouseClick","onWrapperMouseDblClick","widthHeightRatio","_widthHeightRatio","isHorizontal","horizontalVideo","verticalVideo","focus","hiddenCursor","viewMode","resetBackground","_startUpdatingBackground","_stopUpdatingBackground","_currentMode","setBackgroundWidth","setBackgroundHeight","_requestAnimationFrameID","cancelAnimationFrame","_clearBackground","area","sourceX","sourceY","sourceWidth","sourceHeight","areaX","areaY","areaWidth","areaHeight","getContext","drawImage","canvasWidth","canvasHeight","sourceAreas","_getSourceAreas","canvasAreas","_getCanvasAreas","_drawAreaFromSource","_drawBackground","clearRect","fullScreenManager","interactionIndicator","_fullScreenManager","_interactionIndicator","_delayedToggleVideoPlaybackTimeout","screenConfig","_isClickProcessingDisabled","Screen","_processNodeClick","_processNodeDblClick","_toggleVideoPlayback","isNativeControls","focusOnNode","_updateBackgroundSize","resetAspectRatio","setBackgroundSize","showCursor","hideCursor","_showPlaybackChangeIndicator","_setDelayedPlaybackToggle","_isDelayedPlaybackToggleExist","_clearDelayedPlaybackToggle","_hideDelayedPlaybackChangeIndicator","_toggleFullScreen","showPause","showPlay","hideIcons","clearTimeout","_playIcon","playIconTemplate","_pauseIcon","pauseIconTemplate","_forwardIcon","forwardIconTemplate","SECONDS_COUNT","_rewindIcon","rewindIconTemplate","_increaseVolumeIcon","increaseVolumeIconTemplate","_decreaseVolumeIcon","decreaseVolumeIconTemplate","_muteIcon","muteIconTemplate","InteractionIndicatorView","InteractionIndicator","showRewind","showForward","showIncreaseVolume","showDecreaseVolume","showMute","activatePauseIcon","activatePlayIcon","activateRewindIcon","activateForwardIcon","activateMuteVolumeIcon","activateIncreaseVolumeIcon","activateDecreaseVolumeIcon","deactivateIcon","setPoster","OverlayView","themeStyles","_$content","_$playButton","onPlayClick","active","backgroundImage","setTheme","overlayPlaySvgFill","fill","overlayPlaySvgStroke","stroke","_theme","overlay","Overlay","overlayConfig","poster","viewConfig","_playVideo","_updatePlayingStatus","_tryShowContent","_hideContent","_showContent","hideContent","showContent","LoaderView","Loader","_checkForWaitingState","startDelayedShow","isPreloadAvailable","stopDelayedShow","isDelayedShowScheduled","_delayedShowTimeout","elements","MainUIBlockView","$tooltipContainerWrapper","tooltipContainerWrapper","tooltipContainer","topBlock","bottomBlock","shouldAlwaysShow","tooltipService","_topBlock","_bottomBlock","_screen","mainBlockConfig","_shouldAlwaysShow","tooltipContainerNode","_bindViewCallbacks","MainUIBlock","_startHideBlockTimeout","_tryHideContent","_onControlDragStart","_onControlDragEnd","_shouldShowContent","isFocused","_stopHideBlockTimeout","_hideTimeout","_isContentShowingEnabled","_isDragging","_isContentShown","_isBlockFocused","TopBlockView","$titleContainer","$liveIndicatorContainer","liveIndicator","stopPropagation","_preventClickPropagation","activated","_getElementsNodes","TopBlock","elementNodes","TitleView","_$title","onClick","link","titleText","setTitleClickCallback","setTitle","TitleControl","_triggerCallback","setDisplayAsLink","textMap","_tooltipService","LiveIndicatorView","_$liveIndicatorText","_tooltipReference","createReference","toggle","toggleActive","toggleEnded","shouldActivate","disable","enable","isEnded","innerText","shouldShow","LiveIndicator","_isHidden","_isActive","_toggle","_syncWithLive","_toggleActive","_toggleEnded","_isEnded","BottomBlockView","$playContainer","$volumeContainer","$timeContainer","$fullScreenContainer","$logoContainer","$progressBarContainer","$downloadContainer","logo","progress","download","onBlockMouseMove","onBlockMouseOut","isShowAlways","showLogoAlways","showLogo","playControlHidden","timeControlHidden","volumeControlHidden","fullScreenControlHidden","logoHidden","progressControlHidden","downloadButtonHidden","_initLogo","BottomBlock","playControl","progressControl","timeControl","volumeControl","fullScreenControl","downloadButton","_setFocusState","_removeFocusState","hideDownloadButton","logoConfig","setLogoAlwaysShowFlag","showAlways","hideLogo","setShouldLogoShowAlwaysFlag","showPlayControl","showVolumeControl","showTimeControl","showFullScreenControl","showProgressControl","showDownloadButton","hidePlayControl","hideVolumeControl","hideTimeControl","hideFullScreenControl","hideProgressControl","TooltipPositionPlacement","Tooltip","_$tooltipInner","tooltipVisible","clearElement","_showAsText","_showAsElement","showAsElement","showAsText","styleKey","calcTooltipCenterX","tooltipReferenceOffsetX","tooltipReferenceWidth","getTooltipPositionByReferenceNode","tooltipReferenceNode","tooltipCenterXfn","tooltipReferenceRect","getBoundingClientRect","tooltipContainerRect","placement","BOTTOM","TOP","SHOW_EVENTS","HIDE_EVENTS","reference","_$reference","_options","_eventListeners","TooltipReference","_isDisabled","setText","tooltip","_tooltip","TooltipContainer","_getTooltipLeftX","tooltipCenterX","tooltipRect","tooltipLeftX","_tooltipContainer","TooltipService","setElement","setStyle","getTooltipPositionStyles","progressPlayed","backgroundColor","progressSeekTo","progressBackground","progressSeekBtn","progressSyncBtn","borderColor","ProgressScrubingMode","getPercentBasedOnXPosition","boundingRect","positionX","clientX","_setPlayedDOMAttributes","_setBufferedDOMAttributes","setUsualMode","ProgressView","_$played","_$buffered","_$seekTo","_$timeIndicators","_$seekButton","_$syncButton","_syncButtonTooltipReference","_$hitbox","_setPlayedByDrag","_startDragOnMouseDown","_stopDragOnMouseUp","_startSeekToByMouse","_stopSeekToByMouse","onSyncWithLiveMouseEnter","onSyncWithLiveMouseLeave","button","percent","onChangePlayedPercent","_startDrag","_stopDrag","_setSeekToDOMAttributes","onSeekToByMouseStart","onSeekToByMouseEnd","onDragStart","isDragging","onDragEnd","String","onSyncWithLiveClick","isSync","liveSync","progressPercent","progressNode","progressNodeOffsetX","progressNodeWidth","calcProgressTimeTooltipCenterX","getProgressTimeTooltipPosition","inLive","showSyncWithLive","hideSyncWithLive","getTimePercent","durationTime","toFixed","getNearestBufferSegmentInfo","start","end","formatTime","seconds","isValid","isFinite","isNegative","date","setSeconds","floor","toISOString","substr","progressViewTheme","liveStateEngine","previewThumbnail","previewFullSize","_liveStateEngine","_previewThumbnail","_previewFullSize","_isUserDragging","_desiredSeekPosition","_timeIndicatorsToAdd","_scrubingMode","setPlayed","setBuffered","ProgressControl","_processLiveStateChange","_updateBufferIndicator","_updateAllIndicators","_onSyncWithLiveMouseEnter","_onSyncWithLiveMouseLeave","_onChangePlayedPercent","_showTooltipAndPreview","_hideTooltip","_startProcessingUserDrag","_stopProcessingUserDrag","_interceptor","_updateControlInterval","_stopIntervalUpdates","newTime","_convertPlayedPercentToTime","PREVIEW","_changeCurrentTimeOfVideo","seekToTime","timeToShow","setTime","showAt","showProgressTimeTooltip","getElement","hideProgressTimeTooltip","_pauseVideoOnDragStart","_shouldHidePreviewOnUpdate","_playVideoOnDragEnd","_reset","_initTimeIndicators","_hidePreview","_startIntervalUpdates","setLiveSyncStatus","setLiveMode","currentState","_shouldPlayAfterDragEnd","getBuffered","_setBuffered","getOverallBufferedPercent","_setPlayed","getOverallPlayedPercent","_updatePlayedIndicator","_addTimeIndicator","addTimeIndicator","clearTimeIndicators","addTimeIndicators","times","label","_$playbackControl","isPlaying","PlayView","_onButtonClick","onButtonClick","playSvgFill","_isPlaying","setControlStatus","PlayControl","_togglePlayback","_pauseVideo","reset","TimeView","_$currentTime","_$durationTime","_duration","_updateDurationTime","_current","_updateCurrentTime","_isBackward","timeText","setDurationTime","TimeControl","_updateTimeFromPreview","_toggleIntervalUpdates","showDuration","setCurrentTimeBackward","volumeSvgFill","volumeSvgStroke","volumeProgress","&:after","volumeProgressBackground","VolumeView","muteLabel","volumeLabel","_$muteButton","_$volumeNode","_$volume","_muteButtonTooltipReference","_setVolumeByWheel","_setVolumeByClick","_setVolumeByDrag","onVolumeLevelChangeFromInput","deltaX","deltaY","onVolumeLevelChangeFromWheel","iconTemplateProps","volume50IconTemplate","volume0IconTemplate","onToggleMuteClick","_setVolumeDOMAttributes","_setMuteDOMAttributes","volumeViewTheme","getMute","VolumeControl","_broadcastDragStart","_broadcastDragEnd","_getVolumeLevelFromInput","_getVolumeLevelFromWheel","_toggleMuteStatus","_buttonInterceptor","getButtonNode","_inputInterceptor","getInputNode","_updateVolumeStatus","level","delta","adjustedVolume","validatedVolume","_changeVolumeStatus","_changeVolumeLevel","setVolumeLevel","setMuteStatus","_$toggleFullScreenControl","FullScreenView","inFullScreen","enterFullScreenIconTemplate","fullScreenSvgFill","FullScreenControl","_exitFullScreen","_enterFullScreen","_$logo","_$placeholder","setLogo","LogoView","_onNodeClick","onLogoClick","setLogoClickCallback","Logo","_$downloadButton","DownloadView","downloadSvgFill","DownloadButton","getAt","second","framesCount","neededFrame","qualities","quality","framesInSprite","vert","horz","frameNumberInSprite","spriteNumber","horzPositionInSprite","vertPositionInSprite","spriteNameMask","toString","frameSize","ceil","framePositionInSprite","spriteUrl","normalizeFramesQuality","PreviewService","_framesMap","previewService","_previewService","PreviewThumbnail","_$timeText","_$lowQualityThumb","_$highQualityThumb","_unsetEmpty","_currentFrames","background","_applyQualityToThumbElement","_setEmpty","viewWidth","viewHeight","backgroudWidth","backgroundHeight","empty","PreviewFullsize","_$frame","_showFrame","frameData","_currentFrame","_applyFrame","_clearFrame","_hideFrame","KeyboardControls","Title","PreviewFullSize","DIModules","NativeEnvironmentSupport","MSE","canPlayType","detectEnvironment","NATIVE_ERROR_CODES","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED","getNativeAdapterCreator","streamType","currentLevel","NativeAdapter","geOverallBufferLength","_broadcastError","error","errorEvent","streamProvider","errorInstance","code","_logError","defaultPlaybackAdapters","NATIVE_ADAPTIVE","NATIVE_PROGRESSIVE","additionalModules","DependencyContainer","defaultModules","registerModule","registerPlaybackAdapter","clearAdditionalModules","clearPlaybackAdapters","createScope","registerClass","PlayerFacade","MEDIA_STREAM_TYPES","MEDIA_STREAM_DELIVERY_PRIORITY","ENGINE_STATES","LIVE_STATES","VIDEO_VIEW_MODES","playerAPIDecorator","DefaultModules"],"mappings":"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"}