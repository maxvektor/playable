// Credits to https://github.com/kazzkiq/balloon.css

//
// Variables
// -----------------------------------------

$tooltip-bg: rgba(0,0,0,.6);
$tooltip-base-size: 10px;
$tooltip-margin: 6px;


//
// Mixins
// -----------------------------------------

@mixin transition ($args...) {
  transition: $args;
}

@mixin transform ($val) {
  transform: $val;
}

@mixin transform-origin ($val) {
  transform-origin: $val;
}

@mixin opacity ($trans) {
         opacity: $trans;

      filter: alpha(opactiy=($trans * 100));
  -ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=#{$trans * 100})';
    -moz-opacity: $trans;
  -khtml-opacity: $trans;
}

@mixin base-effects () {
  pointer-events: none;

  @include opacity(0);
  @include transition(all .1s ease-out .1s);
}


//
// Styles
// -----------------------------------------

// IE 11 button bugfix
button[data-tooltip] {
  overflow: visible;
}

[data-tooltip] {
  position: relative; // alt. absolute or fixed

  &:after {
    font-size: $tooltip-base-size + 2;

    position: absolute;
    z-index: 10;

    padding: 10px 4px;

    content: attr(data-tooltip);
    white-space: nowrap;

    color: #fff;
    background: $tooltip-bg;

    @include base-effects();
  }

  &:before {
    position: absolute;
    z-index: 10;

    content: '';

    @include base-effects();
  }

  &:hover,
  &[data-tooltip-visible] {
    &:before,
    &:after {
      pointer-events: auto;

      @include opacity(1);
    }
  }

  &[data-tooltip-break] {
    &:after {
      white-space: pre;
    }
  }

  &[data-tooltip-pos='up'] {
    &:after {
      bottom: 100%;
      left: 50%;

      margin-bottom: 5px + $tooltip-margin;

      @include transform(translate(-50%, 10px));
      @include transform-origin(top);
    }
    &:before {
      bottom: 100%;
      left: 50%;

      margin-bottom: 5px;

      @include transform(translate(-50%, 10px));
      @include transform-origin(top);
    }

    &:hover,
    &[data-tooltip-visible] {
      &:after {
        @include transform(translate(-50%, 0));
      }

      &:before {
        @include transform(translate(-50%, 0));
      }
    }
  }

  &[data-tooltip-pos='down'] {
    &:after {
      top: 100%;
      left: 50%;

      margin-top: 5px + $tooltip-margin;

      @include transform(translate(-50%, -10px));
    }

    &:before {
      top: 100%;
      left: 50%;

      margin-top: 5px;

      @include transform(translate(-50%, -10px));
    }

    &:hover,
    &[data-tooltip-visible] {
      &:after {
        @include transform(translate(-50%, 0));
      }

      &:before {
        @include transform(translate(-50%, 0));
      }
    }
  }

  &[data-tooltip-pos='left'] {
    &:after {
      top: 50%;
      right: 100%;

      margin-right: 5px + $tooltip-margin;

      @include transform(translate(10px, -50%));
    }

    &:before {
      top: 50%;
      right: 100%;

      margin-right: 5px;

      @include transform(translate(10px, -50%));
    }

    &:hover,
    &[data-tooltip-visible] {
      &:after {
        @include transform(translate(0, -50%));
      }

      &:before {
        @include transform(translate(0, -50%));
      }
    }
  }

  &[data-tooltip-pos='right'] {
    &:after {
      top: 50%;
      left: 100%;

      margin-left: 5px + $tooltip-margin;

      @include transform(translate(-10px, -50%));
    }

    &:before {
      top: 50%;
      left: 100%;

      margin-left: 5px;

      @include transform(translate(-10px, -50%));
    }

    &:hover,
    &[data-tooltip-visible] {
      &:after {
        @include transform(translate(0, -50%));
      }

      &:before {
        @include transform(translate(0, -50%));
      }
    }
  }

  &[data-tooltip-length='small'] {
    &:after {
      width: 80px;

      white-space: normal;
    }
  }

  &[data-tooltip-length='medium'] {
    &:after {
      width: 150px;

      white-space: normal;
    }
  }

  &[data-tooltip-length='large'] {
    &:after {
      width: 260px;

      white-space: normal;
    }
  }

  &[data-tooltip-length='xlarge'] {
    &:after {
      width: 380px;

      white-space: normal;

      @media screen and (max-width: 768px) {
        width: 90vw;

        white-space: normal;
      }
    }
  }

  &[data-tooltip-length='fit'] {
    &:after {
      width: 100%;

      white-space: normal;
    }
  }
}
