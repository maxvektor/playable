{"version":3,"file":"playable.bundle.min.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/core/dependency-container/constants/Lifetime.ts","../../src/core/dependency-container/errors/ExtendableError.ts","../../src/core/dependency-container/errors/NotAFunctionError.ts","../../src/core/dependency-container/registrations.ts","../../src/core/dependency-container/errors/ResolutionError.ts","../../src/core/dependency-container/utils/nameValueToObject.ts","../../src/core/dependency-container/createContainer.ts","../../src/core/dependency-container/index.ts","../../src/utils/device-detection.ts","../../src/core/config.ts","../../src/utils/player-api-decorator.ts","../../src/core/player-facade.ts","../../src/utils/interaction-type.ts","../../src/utils/focus-source.ts","../../src/constants/media-stream.ts","../../src/constants/events/ui.ts","../../src/constants/live-state.ts","../../src/constants/events/video.ts","../../src/constants/errors.ts","../../src/constants/text-labels.ts","../../src/constants/engine-states.ts","../../src/default-modules/ui/core/htmlToElement.ts","../../node_modules/classnames/index.js","../../src/default-modules/ui/core/stylable.ts","../../src/default-modules/ui/core/extendStyles.ts","../../src/default-modules/ui/core/view.ts","../../node_modules/style-inject/dist/style-inject.es.js","../../src/default-modules/root-container/root-container.view.ts","../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","../../src/default-modules/ui/core/element-queries/utils.ts","../../src/default-modules/ui/core/isElementMatchesSelector.ts","../../src/default-modules/ui/core/element-queries/getQueriesForElement.ts","../../src/default-modules/ui/core/element-queries/element-queries.ts","../../src/default-modules/root-container/root-container.ts","../../src/utils/focus-within.ts","../../src/default-modules/event-emitter/event-emitter.ts","../../node_modules/eventemitter3/index.js","../../src/default-modules/playback-engine/state-engine.ts","../../src/default-modules/playback-engine/native-events-broadcaster.ts","../../src/default-modules/playback-engine/playback-resolution.ts","../../src/default-modules/playback-engine/detect-stream-type.ts","../../src/default-modules/playback-engine/adapters-strategy.ts","../../src/default-modules/playback-engine/playback-engine.ts","../../src/default-modules/ui/core/theme/utils/hexToRgb.ts","../../src/default-modules/ui/core/theme/utils/transperentizeColor.ts","../../src/default-modules/ui/core/theme/utils/camelToKebab.ts","../../src/default-modules/ui/core/theme/utils/getUniqueId.ts","../../src/default-modules/ui/core/theme/utils/generateClassNames.ts","../../src/default-modules/ui/core/theme/style-sheet.ts","../../src/default-modules/ui/core/theme/theme-service.ts","../../src/default-modules/text-map/default-texts.ts","../../src/default-modules/text-map/text-map.ts","../../src/default-modules/full-screen-manager/desktop.ts","../../src/default-modules/full-screen-manager/ios.ts","../../src/default-modules/full-screen-manager/full-screen-manager.ts","../../src/default-modules/playback-engine/live-state-engine.ts","../../src/utils/keyboard-interceptor.ts","../../src/default-modules/keyboard-control/keyboard-control.ts","../../src/default-modules/mouse-interceptor/mouse-interceptor.ts","../../src/default-modules/ui/core/getElementByHook.ts","../../src/default-modules/ui/core/toggleNodeClass.ts","../../src/default-modules/ui/debug-panel/debug-panel.view.ts","../../src/default-modules/ui/debug-panel/syntaxHighlight.ts","../../src/default-modules/ui/debug-panel/debug-panel.ts","../../src/default-modules/ui/screen/screen.view.ts","../../src/default-modules/ui/screen/screen.ts","../../src/default-modules/ui/interaction-indicator/interaction-indicator.view.ts","../../src/default-modules/ui/interaction-indicator/interaction-indicator.ts","../../src/default-modules/ui/overlay/overlay.view.ts","../../src/default-modules/ui/overlay/overlay.theme.ts","../../src/default-modules/ui/overlay/overlay.ts","../../src/default-modules/ui/loader/loader.view.ts","../../src/default-modules/ui/loader/loader.ts","../../src/default-modules/ui/main-ui-block/main-ui-block.view.ts","../../src/default-modules/ui/main-ui-block/main-ui-block.ts","../../src/default-modules/ui/top-block/top-block.view.ts","../../src/default-modules/ui/top-block/top-block.ts","../../src/default-modules/ui/title/title.view.ts","../../src/default-modules/ui/title/title.theme.ts","../../src/default-modules/ui/title/title.ts","../../src/default-modules/ui/live-indicator/live-indicator.view.ts","../../src/default-modules/ui/live-indicator/live-indicator.ts","../../src/default-modules/ui/bottom-block/bottom-block.view.ts","../../src/default-modules/ui/bottom-block/bottom-block.ts","../../src/default-modules/ui/core/utils/formatTime.ts","../../src/default-modules/ui/core/tooltip/types.ts","../../src/default-modules/ui/core/tooltip/tooltip.ts","../../src/default-modules/ui/core/tooltip/utils/getTooltipPositionByReferenceNode.ts","../../src/default-modules/ui/core/tooltip/tooltip-reference.ts","../../src/default-modules/ui/core/tooltip/tooltip-container.ts","../../src/default-modules/ui/core/tooltip/tooltip-service.ts","../../src/default-modules/ui/controls/progress/progress.theme.ts","../../src/default-modules/ui/controls/progress/progress.view.ts","../../src/default-modules/ui/controls/progress/utils/getProgressTimeTooltipPosition.ts","../../src/utils/video-data.ts","../../src/default-modules/ui/controls/progress/progress.ts","../../src/default-modules/ui/controls/play/play.view.ts","../../src/default-modules/ui/controls/play/play.theme.ts","../../src/default-modules/ui/controls/play/play.ts","../../src/default-modules/ui/controls/time/time.view.ts","../../src/default-modules/ui/controls/time/time.theme.ts","../../src/default-modules/ui/controls/time/time.ts","../../src/default-modules/ui/controls/volume/volume.theme.ts","../../src/default-modules/ui/controls/volume/volume.view.ts","../../src/default-modules/ui/controls/volume/volume.ts","../../src/default-modules/ui/controls/full-screen/full-screen.view.ts","../../src/default-modules/ui/controls/full-screen/full-screen.theme.ts","../../src/default-modules/ui/controls/full-screen/full-screen.ts","../../src/default-modules/ui/controls/logo/logo.view.ts","../../src/default-modules/ui/controls/logo/logo.ts","../../src/default-modules/ui/subtitles/subtitles.view.ts","../../src/default-modules/ui/subtitles/subtitles.ts","../../src/default-modules/index.ts","../../src/utils/environment-detection.ts","../../src/default-modules/playback-engine/adapters/native.ts","../../src/default-modules/playback-engine/adapters/default-set.ts","../../src/core/player-factory.ts","../../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","const SINGLETON = 'SINGLETON';\nconst TRANSIENT = 'TRANSIENT';\nconst SCOPED = 'SCOPED';\n\nexport default {\n  SINGLETON,\n  TRANSIENT,\n  SCOPED,\n};\n","export default class ExtendableError extends Error {\n  constructor(message) {\n    super(message);\n\n    Object.defineProperty(this, 'message', {\n      enumerable: false,\n      value: message,\n    });\n\n    Object.defineProperty(this, 'name', {\n      enumerable: false,\n      value: this.constructor.name,\n    });\n\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n","import ExtendableError from './ExtendableError';\n\nexport default class NotAFunctionError extends ExtendableError {\n  constructor(functionName, expectedType, givenType) {\n    super(\n      `The function ${functionName} expected a ${expectedType}, ${givenType} given.`,\n    );\n  }\n}\n","import { __assign } from 'tslib';\n\nimport Lifetime from './constants/Lifetime';\nimport NotAFunctionError from './errors/NotAFunctionError';\n\nexport const PROPERTY_FOR_DEPENDENCIES = 'dependencies';\nconst makeOptions = (defaults, input) => __assign({}, defaults, input);\n\nexport const makeFluidInterface = obj => {\n  const setLifetime = value => {\n    obj.lifetime = value;\n    return obj;\n  };\n\n  return {\n    setLifetime,\n    transient: () => setLifetime(Lifetime.TRANSIENT),\n    scoped: () => setLifetime(Lifetime.SCOPED),\n    singleton: () => setLifetime(Lifetime.SINGLETON),\n  };\n};\n\nexport const asValue = value => {\n  const resolve = () => value;\n\n  return {\n    resolve,\n    lifetime: Lifetime.TRANSIENT,\n  };\n};\n\nexport const asFunction: any = (fn, opts?) => {\n  if (typeof fn !== 'function') {\n    throw new NotAFunctionError('asFunction', 'function', typeof fn);\n  }\n\n  const defaults = {\n    lifetime: Lifetime.TRANSIENT,\n  };\n\n  opts = makeOptions(defaults, opts);\n\n  const resolve = generateResolve(fn);\n  const result = {\n    resolve,\n    lifetime: opts.lifetime,\n  };\n  result.resolve = resolve.bind(result);\n  __assign(result, makeFluidInterface(result));\n  return result;\n};\n\nexport const asClass: any = (Type: FunctionConstructor, opts?) => {\n  if (typeof Type !== 'function') {\n    throw new NotAFunctionError('asClass', 'class', typeof Type);\n  }\n\n  const defaults = {\n    lifetime: Lifetime.TRANSIENT,\n  };\n\n  opts = makeOptions(defaults, opts);\n\n  // A function to handle object construction for us, as to make the generateResolve more reusable\n  const newClass = (...args) => new Type(...args);\n\n  const resolve = generateResolve(newClass, Type);\n  const result = {\n    resolve,\n    lifetime: opts.lifetime,\n  };\n  result.resolve = resolve.bind(result);\n  __assign(result, makeFluidInterface(result));\n\n  return result;\n};\n\nfunction generateResolve(fn, dependencyParseTarget?) {\n  // If the function used for dependency parsing is falsy, use the supplied function\n  if (!dependencyParseTarget) {\n    dependencyParseTarget = fn;\n  }\n  // Try to resolve the dependencies\n  const dependencies = dependencyParseTarget[PROPERTY_FOR_DEPENDENCIES] || [];\n\n  // Use a regular function instead of an arrow function to facilitate binding to the registration.\n  return function resolve(container) {\n    if (dependencies.length > 0) {\n      const wrapper = dependencies.reduce((wrapper, d) => {\n        wrapper[d] = container.resolve(d);\n        return wrapper;\n      }, {});\n\n      return fn(wrapper, container);\n    }\n    return fn(container);\n  };\n}\n\nexport default {\n  asValue,\n  asFunction,\n  asClass,\n};\n","import ExtendableError from './ExtendableError';\n\nconst createErrorMessage = (name, resolutionStack, message?) => {\n  resolutionStack = resolutionStack.slice();\n  resolutionStack.push(name);\n  const resolutionPathString = resolutionStack.join(' -> ');\n  let msg = `Could not resolve '${name}'.`;\n  if (message) {\n    msg += ` ${message} \\n\\n Resolution path: ${resolutionPathString}`;\n  }\n\n  return msg;\n};\n\nexport default class ResolutionError extends ExtendableError {\n  constructor(name, resolutionStack, message?) {\n    super(createErrorMessage(name, resolutionStack, message));\n  }\n}\n","import { __assign } from 'tslib';\n\nexport default function(name, value) {\n  let obj = name;\n  if (typeof obj !== 'object') {\n    obj = __assign({ [name]: value });\n  }\n\n  return obj;\n}\n","import { __assign } from 'tslib';\n\nimport { asClass, asFunction, asValue } from './registrations';\nimport ResolutionError from './errors/ResolutionError';\nimport nameValueToObject from './utils/nameValueToObject';\nimport Lifetime from './constants/Lifetime';\n\nconst FAMILY_TREE = '__familyTree__';\n\nexport default function createContainer(options?, __parentContainer?) {\n  options = __assign({}, options);\n\n  // The resolution stack is used to keep track\n  // of what modules are being resolved, so when\n  // an error occurs, we have something to present\n  // to the poor developer who fucked up.\n  let resolutionStack = [];\n\n  // Internal registration store.\n  const registrations = {};\n\n  // The container being exposed.\n  const container: any = {\n    options,\n    get registrations() {\n      return __assign(\n        {},\n        __parentContainer && __parentContainer.registrations,\n        registrations,\n      );\n    },\n  };\n\n  // Track the family tree.\n  const familyTree = __parentContainer\n    ? [container].concat(__parentContainer[FAMILY_TREE])\n    : [container];\n\n  container[FAMILY_TREE] = familyTree;\n  container.cache = {};\n  container.createScope = () => createContainer(options, container);\n  container.register = (name, registration) => {\n    const obj = nameValueToObject(name, registration);\n    Object.keys(obj).forEach(key => {\n      registrations[key] = obj[key];\n    });\n\n    return container;\n  };\n\n  const makeRegister = (fn, verbatimValue?) =>\n    function(name, value, opts) {\n      // This ensures that we can support name+value style and object style.\n      const obj = nameValueToObject(name, value);\n\n      Object.keys(obj).forEach(key => {\n        let valueToRegister = obj[key];\n\n        // If we have options, copy them over.\n        opts = __assign({}, opts);\n\n        /* ignore coverage */\n        if (!verbatimValue && Array.isArray(valueToRegister)) {\n          // The ('name', [value, opts]) style\n          opts = __assign({}, opts, valueToRegister[1]);\n          valueToRegister = valueToRegister[0];\n        }\n\n        container.register(key, fn(valueToRegister, opts));\n      });\n\n      // Chaining\n      return container;\n    };\n\n  container.registerFunction = makeRegister(asFunction);\n  container.registerClass = makeRegister(asClass);\n  container.registerValue = makeRegister(asValue, /* verbatimValue: */ true);\n  container.resolve = name => {\n    // We need a reference to the root container,\n    // so we can retrieve and store singletons.\n    const root = familyTree[familyTree.length - 1];\n\n    try {\n      // Grab the registration by name.\n      const registration = container.registrations[name];\n\n      if (resolutionStack.indexOf(name) > -1) {\n        throw new ResolutionError(\n          name,\n          resolutionStack,\n          'Cyclic dependencies detected.',\n        );\n      }\n\n      if (!registration) {\n        throw new ResolutionError(name, resolutionStack);\n      }\n\n      // Pushes the currently-resolving module name onto the stack\n      resolutionStack.push(name);\n\n      // Do the thing\n      let cached;\n      let resolved;\n\n      switch (registration.lifetime) {\n        case Lifetime.TRANSIENT:\n          // Transient lifetime means resolve every time.\n          resolved = registration.resolve(container);\n          break;\n        case Lifetime.SINGLETON:\n          // Singleton lifetime means cache at all times, regardless of scope.\n          cached = root.cache[name];\n          if (cached === undefined) {\n            resolved = registration.resolve(container);\n            root.cache[name] = resolved;\n          } else {\n            resolved = cached;\n          }\n          break;\n        case Lifetime.SCOPED:\n          // Scoped lifetime means that the container\n          // that resolves the registration also caches it.\n          // When a registration is not found, we travel up\n          // the family tree until we find one that is cached.\n\n          // Note: The first element in the family tree is this container.\n          for (const c of familyTree) {\n            cached = c.cache[name];\n            if (cached !== undefined) {\n              // We found one!\n              resolved = cached;\n              break;\n            }\n          }\n\n          // If we still have not found one, we need to resolve and cache it.\n          if (cached === undefined) {\n            resolved = registration.resolve(container);\n            container.cache[name] = resolved;\n          }\n          break;\n        default:\n          throw new ResolutionError(\n            name,\n            resolutionStack,\n            `Unknown lifetime \"${registration.lifetime}\"`,\n          );\n      }\n      // Pop it from the stack again, ready for the next resolution\n      resolutionStack.pop();\n      return resolved;\n    } catch (err) {\n      // When we get an error we need to reset the stack.\n      resolutionStack = [];\n      throw err;\n    }\n  };\n\n  // Finally return the container\n  return container;\n}\n","import createContainer from './createContainer';\nimport Lifetime from './constants/Lifetime';\nimport registrations from './registrations';\n\nexport default {\n  createContainer,\n  Lifetime,\n  ...registrations,\n};\n","declare const window: {\n  navigator: any;\n  MSStream: any;\n};\n\nconst IPHONE_PATTERN = /iPhone/;\nconst IPOD_PATTERN = /iPod/;\nconst IPAD_PATTERN = /iPad/;\nconst DESKTOP_SAFARI_PATTERN = /^((?!chrome|android|iphone|ipod|ipad).)*safari/i;\n\n// There is some iPhone/iPad/iPod in Windows Phone...\n// https://msdn.microsoft.com/en-us/library/hh869301(v=vs.85).aspx\nconst isIE = () => !!window.MSStream;\n\nconst getUserAgent = () => window.navigator && window.navigator.userAgent;\n\nconst isIPhone = () => !isIE() && IPHONE_PATTERN.test(getUserAgent());\n\nconst isIPod = () => !isIE() && IPOD_PATTERN.test(getUserAgent());\n\nconst isIPad = () => !isIE() && IPAD_PATTERN.test(getUserAgent());\n\nconst isIOS = () => isIPhone() || isIPod() || isIPad();\n\nconst isAndroid = () => /(android)/i.test(getUserAgent());\n\nconst isDesktopSafari = () => DESKTOP_SAFARI_PATTERN.test(getUserAgent());\n\nexport { isIPhone, isIPod, isIPad, isIOS, isAndroid, isDesktopSafari };\n","import { isIOS, isAndroid } from '../utils/device-detection';\n\nimport { ITitleConfig } from '../default-modules/ui/title/title';\nimport { IFullScreenConfig } from '../default-modules/full-screen-manager/full-screen-manager';\nimport { ILogoConfig } from '../default-modules/ui/controls/logo/logo';\nimport { IOverlayConfig } from '../default-modules/ui/overlay/overlay';\nimport { ITextMapConfig } from '../default-modules/text-map/text-map';\nimport { IScreenConfig } from '../default-modules/ui/screen/screen';\nimport { IControlsConfig } from '../default-modules/ui/main-ui-block/main-ui-block';\nimport {\n  PreloadTypes,\n  MediaSource,\n} from '../default-modules/playback-engine/playback-engine';\nimport { IPlayerSize } from '../default-modules/root-container/root-container';\n\nexport interface IPlayerConfig {\n  src?: MediaSource;\n\n  size?: IPlayerSize;\n\n  videoElement?: HTMLVideoElement;\n\n  preload?: PreloadTypes;\n  autoPlay?: boolean;\n  loop?: boolean;\n  muted?: boolean;\n  volume?: number;\n  playInline?: boolean;\n\n  title?: boolean | ITitleConfig;\n  loader?: boolean;\n  screen?: IScreenConfig;\n  controls?: boolean | IControlsConfig;\n  overlay?: boolean | IOverlayConfig;\n  fullScreen?: boolean | IFullScreenConfig;\n  logo?: boolean | ILogoConfig;\n\n  texts?: ITextMapConfig;\n\n  showInteractionIndicator?: boolean;\n  fillAllSpace?: boolean;\n  disableControlWithKeyboard?: boolean;\n}\n\nconst convertUIConfigForIOS = params => ({\n  ...params,\n  showInteractionIndicator: false,\n  screen: {\n    ...params.screen,\n    disableClickProcessing: true,\n    nativeControls: true,\n  },\n  title: false,\n  loader: false,\n  controls: false,\n});\n\nconst convertUIConfigForAndroid = params => ({\n  ...params,\n  screen: {\n    ...params.screen,\n    disableClickProcessing: true,\n  },\n});\n\nconst convertToDeviceRelatedConfig = params => {\n  if (isIOS()) {\n    return convertUIConfigForIOS(params);\n  }\n\n  if (isAndroid()) {\n    return convertUIConfigForAndroid(params);\n  }\n\n  return params;\n};\n\nexport default convertToDeviceRelatedConfig;\n","export const PLAYER_API_PROPERTY = '___playerAPI';\n\nconst checkDescriptorsOnEquality = (desc1, desc2) =>\n  desc1.value === desc2.value &&\n  desc1.get === desc2.get &&\n  desc1.set === desc2.set;\n\n// tslint:disable-next-line\nconst playerAPI = (name?) => (target, property, descriptor) => {\n  const methodName = name || property;\n\n  if (!target[PLAYER_API_PROPERTY]) {\n    target[PLAYER_API_PROPERTY] = {};\n  }\n\n  if (target[PLAYER_API_PROPERTY][methodName]) {\n    if (\n      !checkDescriptorsOnEquality(\n        target[PLAYER_API_PROPERTY][methodName],\n        descriptor,\n      )\n    ) {\n      throw new Error(\n        `Method \"${methodName}\" for public API in ${\n          target.constructor.name\n        } is already defined`,\n      );\n    }\n  }\n\n  target[PLAYER_API_PROPERTY][methodName] = descriptor;\n};\n\nexport default playerAPI;\n","import convertToDeviceRelatedConfig, { IPlayerConfig } from './config';\nimport { PLAYER_API_PROPERTY } from '../utils/player-api-decorator';\nimport { IThemeConfig } from '../default-modules/ui/core/theme';\n\nexport default class Player {\n  private _config;\n  private _defaultModules;\n  private _additionalModules;\n  private _destroyed: boolean;\n\n  constructor(\n    params: IPlayerConfig,\n    scope,\n    defaultModules,\n    additionalModules = {},\n    themeConfig?: IThemeConfig,\n  ) {\n    scope.registerValue({\n      config: convertToDeviceRelatedConfig(params),\n    });\n\n    scope.registerValue({\n      themeConfig,\n    });\n\n    this._config = scope.resolve('config');\n\n    this._resolveDefaultModules(scope, defaultModules);\n    this._resolveAdditionalModules(scope, additionalModules);\n  }\n\n  /*\n    Separation for default and additional modules is needed\n    for future implementation of public methods of resolved modules and\n    could be abolished in future\n  */\n\n  _resolveDefaultModules(scope, modules) {\n    this._defaultModules = Object.keys(modules).reduce(\n      (modules, moduleName) => {\n        const resolvedModule = scope.resolve(moduleName);\n\n        this._addPlayerAPIFromModule(resolvedModule, moduleName);\n\n        modules[moduleName] = resolvedModule;\n        return modules;\n      },\n      {},\n    );\n  }\n\n  _resolveAdditionalModules(scope, modules) {\n    this._additionalModules = Object.keys(modules).reduce(\n      (modules, moduleName) => {\n        const resolvedModule = scope.resolve(moduleName);\n\n        this._addPlayerAPIFromModule(resolvedModule, moduleName);\n\n        modules[moduleName] = resolvedModule;\n        return modules;\n      },\n      {},\n    );\n  }\n\n  _getWrappedCallToModuleFunction(module, _moduleName, fn) {\n    // TODO: do we need `_moduleName` as second parameter?\n    return (...args) => {\n      if (this._destroyed) {\n        throw new Error('Player instance is destroyed');\n      }\n\n      return fn.apply(module, args);\n    };\n  }\n\n  _getPlayerAPIMethodDescriptor(module, moduleName, descriptor) {\n    const playerMethodDescriptor: any = {\n      enumerable: true,\n      configurable: true,\n    };\n\n    const { get, set, value } = descriptor;\n\n    if (get) {\n      playerMethodDescriptor.get = this._getWrappedCallToModuleFunction(\n        module,\n        moduleName,\n        get,\n      );\n    }\n\n    if (set) {\n      playerMethodDescriptor.set = this._getWrappedCallToModuleFunction(\n        module,\n        moduleName,\n        set,\n      );\n    }\n\n    if (value) {\n      playerMethodDescriptor.value = this._getWrappedCallToModuleFunction(\n        module,\n        moduleName,\n        value,\n      );\n    }\n\n    return playerMethodDescriptor;\n  }\n\n  _addPlayerAPIFromModule(module, moduleName) {\n    if (module[PLAYER_API_PROPERTY]) {\n      Object.keys(module[PLAYER_API_PROPERTY]).forEach(apiKey => {\n        if (this[apiKey]) {\n          throw new Error(\n            `API method ${apiKey} is already defined in Player facade`,\n          );\n        }\n\n        Object.defineProperty(\n          this,\n          apiKey,\n          this._getPlayerAPIMethodDescriptor(\n            module,\n            moduleName,\n            module[PLAYER_API_PROPERTY][apiKey],\n          ),\n        );\n      });\n    }\n  }\n\n  _clearPlayerAPIForModule(module) {\n    if (module[PLAYER_API_PROPERTY]) {\n      Object.keys(module[PLAYER_API_PROPERTY]).forEach(apiKey => {\n        delete this[apiKey];\n      });\n    }\n  }\n\n  destroy() {\n    Object.keys(this._defaultModules).forEach(moduleName => {\n      const module = this._defaultModules[moduleName];\n      this._clearPlayerAPIForModule(module);\n      module.destroy();\n    });\n\n    Object.keys(this._additionalModules).forEach(moduleName => {\n      const module = this._additionalModules[moduleName];\n      this._clearPlayerAPIForModule(module);\n      if (module.destroy) {\n        module.destroy();\n      }\n    });\n\n    delete this._defaultModules;\n    delete this._additionalModules;\n    delete this._config;\n\n    this._destroyed = true;\n  }\n}\n","// Code from ally.js\n\n/*\n  Observe keyboard-, pointer-, mouse- and touch-events so that a query for\n  the current interaction type can be made at any time. For pointer interaction\n  this observer is limited to pointer button down/up - move is not observed!\n\n  USAGE:\n    var listener = engage();\n    listener.get() === {pointer: Boolean, key: Boolean}\n*/\n\n// counters to track primary input\nlet _activePointers = 0;\nlet _activeKeys = 0;\n\nconst pointerStartEvents = [\n  'touchstart',\n  'pointerdown',\n  'MSPointerDown',\n  'mousedown',\n];\nconst pointerEndEvents = [\n  'touchend',\n  'touchcancel',\n  'pointerup',\n  'MSPointerUp',\n  'pointercancel',\n  'MSPointerCancel',\n  'mouseup',\n];\n\nfunction handleWindowBlurEvent() {\n  // reset internal counters when window loses focus\n  _activePointers = 0;\n  _activeKeys = 0;\n}\n\nfunction handlePointerStartEvent(event) {\n  if (event.isPrimary === false) {\n    // ignore non-primary pointer events\n    // https://w3c.github.io/pointerevents/#widl-PointerEvent-isPrimary\n    return;\n  }\n\n  // mousedown without following mouseup\n  // (likely not possible in Chrome)\n  _activePointers += 1;\n}\n\nfunction handlePointerEndEvent(event) {\n  if (event.isPrimary === false) {\n    // ignore non-primary pointer events\n    // https://w3c.github.io/pointerevents/#widl-PointerEvent-isPrimary\n    return;\n  } else if (event.touches) {\n    _activePointers = event.touches.length;\n    return;\n  }\n\n  // delay reset to when the current handlers are executed\n  (window.setImmediate || window.setTimeout)(() => {\n    // mouseup without prior mousedown\n    // (drag something out of the window)\n    _activePointers = Math.max(_activePointers - 1, 0);\n  });\n}\n\nfunction handleKeyStartEvent(event) {\n  // ignore modifier keys\n  switch (event.keyCode || event.which) {\n    case 16: // space\n    case 17: // control\n    case 18: // alt\n    case 91: // command left\n    case 93: // command right\n      return;\n    default:\n      break;\n  }\n\n  // keydown without a following keyup\n  // (may happen on CMD+TAB)\n  _activeKeys += 1;\n}\n\nfunction handleKeyEndEvent(event) {\n  // ignore modifier keys\n  switch (event.keyCode || event.which) {\n    case 16: // space\n    case 17: // control\n    case 18: // alt\n    case 91: // command left\n    case 93: // command right\n      return;\n    default:\n      break;\n  }\n\n  // delay reset to when the current handlers are executed\n  (window.setImmediate || window.setTimeout)(() => {\n    // keyup without prior keydown\n    // (may happen on CMD+R)\n    _activeKeys = Math.max(_activeKeys - 1, 0);\n  });\n}\n\nfunction getInteractionType() {\n  return {\n    pointer: Boolean(_activePointers),\n    key: Boolean(_activeKeys),\n  };\n}\n\nfunction disengage() {\n  _activePointers = _activeKeys = 0;\n  window.removeEventListener('blur', handleWindowBlurEvent, false);\n  document.documentElement.removeEventListener(\n    'keydown',\n    handleKeyStartEvent,\n    true,\n  );\n  document.documentElement.removeEventListener(\n    'keyup',\n    handleKeyEndEvent,\n    true,\n  );\n  pointerStartEvents.forEach(event => {\n    document.documentElement.removeEventListener(\n      event,\n      handlePointerStartEvent,\n      true,\n    );\n  });\n  pointerEndEvents.forEach(event => {\n    document.documentElement.removeEventListener(\n      event,\n      handlePointerEndEvent,\n      true,\n    );\n  });\n}\n\nfunction engage() {\n  // window blur must be in bubble phase so it won't capture regular blurs\n  window.addEventListener('blur', handleWindowBlurEvent, false);\n  // handlers to identify the method of focus change\n  document.documentElement.addEventListener(\n    'keydown',\n    handleKeyStartEvent,\n    true,\n  );\n  document.documentElement.addEventListener('keyup', handleKeyEndEvent, true);\n  pointerStartEvents.forEach(event => {\n    document.documentElement.addEventListener(\n      event,\n      handlePointerStartEvent,\n      true,\n    );\n  });\n  pointerEndEvents.forEach(event => {\n    document.documentElement.addEventListener(\n      event,\n      handlePointerEndEvent,\n      true,\n    );\n  });\n\n  return {\n    get: getInteractionType,\n  };\n}\n\nexport default { engage, disengage };\n","// Code from ally.js\n/*\n  add data-focus-source attribute to html element containing \"key\", \"pointer\" or \"script\"\n  depending on the input method used to change focus.\n\n  USAGE:\n    style/focus-source()\n\n    body :focus {\n      outline: 1px solid grey;\n    }\n\n    html[data-focus-source=\"key\"] body :focus {\n      outline: 5px solid red;\n    }\n\n    html[data-focus-source=\"key\"] body :focus {\n      outline: 1px solid blue;\n    }\n\n  NOTE: I don't have a GamePad to test, if you do and you want to\n  implement an observer for https://w3c.github.io/gamepad/ - send a PR!\n\n  Alternate implementation: https://github.com/alice/modality\n*/\n\nimport engageInteractionTypeObserver from './interaction-type';\n\n// preferring focusin/out because they are synchronous in IE10+11\nconst supportsFocusIn =\n  typeof document !== 'undefined' && 'onfocusin' in document;\nconst focusEventName = supportsFocusIn ? 'focusin' : 'focus';\nconst blurEventName = supportsFocusIn ? 'focusout' : 'blur';\n\n// interface to read interaction-type-listener state\nlet interactionTypeHandler;\n// keep track of last focus source\nlet current = null;\n// overwrite focus source for use with the every upcoming focus event\nlet lock = null;\n// keep track of ever having used a particular input method to change focus\nconst used = {\n  pointer: false,\n  key: false,\n  script: false,\n  initial: false,\n};\n\nfunction handleFocusEvent(event) {\n  let source = '';\n  if (event.type === focusEventName) {\n    const interactionType = interactionTypeHandler.get();\n    source =\n      lock ||\n      (interactionType.pointer && 'pointer') ||\n      (interactionType.key && 'key') ||\n      'script';\n  } else if (event.type === 'initial') {\n    source = 'initial';\n  }\n\n  document.documentElement.setAttribute('data-focus-source', source);\n\n  if (event.type !== blurEventName) {\n    used[source] = true;\n    current = source;\n  }\n}\n\nfunction getCurrentFocusSource() {\n  return current;\n}\n\nfunction getUsedFocusSource(source) {\n  return used[source];\n}\n\nfunction lockFocusSource(source) {\n  lock = source;\n}\n\nfunction unlockFocusSource() {\n  lock = false;\n}\n\nfunction disengage() {\n  // clear dom state\n  handleFocusEvent({ type: blurEventName });\n  current = lock = null;\n  Object.keys(used).forEach(function(key) {\n    used[key] = false;\n  });\n  // kill interaction type identification listener\n  engageInteractionTypeObserver.disengage();\n  document.documentElement.removeEventListener(\n    focusEventName,\n    handleFocusEvent,\n    true,\n  );\n  document.documentElement.removeEventListener(\n    blurEventName,\n    handleFocusEvent,\n    true,\n  );\n  document.documentElement.removeAttribute('data-focus-source');\n}\n\nfunction engage() {\n  document.documentElement.addEventListener(\n    focusEventName,\n    handleFocusEvent,\n    true,\n  );\n  document.documentElement.addEventListener(\n    blurEventName,\n    handleFocusEvent,\n    true,\n  );\n  // enable the interaction type identification observer\n  interactionTypeHandler = engageInteractionTypeObserver.engage();\n  // set up initial dom state\n  handleFocusEvent({ type: 'initial' });\n\n  return {\n    used: getUsedFocusSource,\n    current: getCurrentFocusSource,\n    lock: lockFocusSource,\n    unlock: unlockFocusSource,\n  };\n}\n\nexport default { engage, disengage };\n","enum MediaStreamTypes {\n  MP4 = 'MP4',\n  WEBM = 'WEBM',\n  HLS = 'HLS',\n  DASH = 'DASH',\n  OGG = 'OGG',\n}\n\nenum MediaStreamDeliveryPriority {\n  NATIVE_PROGRESSIVE,\n  ADAPTIVE_VIA_MSE,\n  NATIVE_ADAPTIVE,\n  FORCED,\n}\n\nexport { MediaStreamTypes, MediaStreamDeliveryPriority };\n","const UI_EVENTS = {\n  PLAY_TRIGGERED: 'ui-play-triggered',\n  PLAY_OVERLAY_TRIGGERED: 'ui-play-overlay-triggered',\n  PAUSE_TRIGGERED: 'ui-pause-triggered',\n  PROGRESS_CHANGE_TRIGGERED: 'ui-progress-change-triggered',\n  VOLUME_CHANGE_TRIGGERED: 'ui-volume-change-triggered',\n  MUTE_STATUS_TRIGGERED: 'ui-mute-status-triggered',\n  FULLSCREEN_STATUS_CHANGED: 'ui-fullscreen-status-changed',\n  MOUSE_ENTER_ON_PLAYER_TRIGGERED: 'ui-mouse-enter-on-player-triggered',\n  MOUSE_MOVE_ON_PLAYER_TRIGGERED: 'ui-mouse-move-on-player-triggered',\n  MOUSE_LEAVE_ON_PLAYER_TRIGGERED: 'ui-mouse-leave-on-player-triggered',\n  CONTROL_BLOCK_HIDE_TRIGGERED: 'ui-control-block-hide-triggered',\n  CONTROL_BLOCK_SHOW_TRIGGERED: 'ui-control-block-show-triggered',\n  PROGRESS_MANIPULATION_STARTED: 'ui-progress-manipulation-started',\n  PROGRESS_MANIPULATION_ENDED: 'ui-progress-manipulation-ended',\n  KEYBOARD_KEYDOWN_INTERCEPTED: 'ui-keyboard-keydown-intercepted',\n  LOADER_SHOW_TRIGGERED: 'ui-loader-show-triggered',\n  LOADER_HIDE_TRIGGERED: 'ui-loader-hide-triggered',\n  LOADING_COVER_SHOW_TRIGGERED: 'ui-loading-cover-show-triggered',\n  LOADING_COVER_HIDE_TRIGGERED: 'ui-loading-cover-hide-triggered',\n  TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED:\n    'ui-toggle-playback-with-keyboard-triggered',\n  GO_BACKWARD_WITH_KEYBOARD_TRIGGERED: 'ui-go-backward-with-keyboard-triggered',\n  GO_FORWARD_WITH_KEYBOARD_TRIGGERED: 'ui-go-forward-with-keyboard-triggered',\n  INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED:\n    'ui-increase-volume-with-keyboard-triggered',\n  DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED:\n    'ui-decrease-volume-with-keyboard-triggered',\n  MUTE_SOUND_WITH_KEYBOARD_TRIGGERED: 'ui-mute-sound-with-keyboard-triggered',\n  UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED:\n    'ui-unmute-sound-with-keyboard-triggered',\n  HIDE_INTERACTION_INDICATOR_TRIGGERED:\n    'ui-hide-interaction-indicator-triggered',\n  PLAYER_WIDTH_CHANGE_TRIGGERED: 'ui-player-width-change-triggered',\n  PLAYER_HEIGHT_CHANGE_TRIGGERED: 'ui-player-height-change-triggered',\n  PLAY_WITH_SCREEN_CLICK_TRIGGERED: 'ui-play-with-screen-click-triggered',\n  PAUSE_WITH_SCREEN_CLICK_TRIGGERED: 'ui-pause-with-screen-click-triggered',\n  CONTROL_DRAG_START: 'ui-control-drag-start',\n  CONTROL_DRAG_END: 'ui-control-drag-end',\n  MAIN_BLOCK_HIDE_TRIGGERED: 'ui-main-block-hide-triggered',\n  MAIN_BLOCK_SHOW_TRIGGERED: 'ui-main-block-show-triggered',\n};\n\nexport default UI_EVENTS;\n","enum LiveState {\n  NONE = 'none',\n  INITIAL = 'initial',\n  NOT_SYNC = 'not-sync',\n  SYNC = 'sync',\n  ENDED = 'ended',\n}\n\nexport default LiveState;\n","const VIDEO_EVENTS = {\n  ERROR: 'error',\n  STATE_CHANGED: 'state-changed',\n  LIVE_STATE_CHANGED: 'live-state-changed',\n  DYNAMIC_CONTENT_ENDED: 'dynamic-content-ended',\n  CHUNK_LOADED: 'chunk-loaded',\n  CURRENT_TIME_UPDATED: 'current-time-updated',\n  DURATION_UPDATED: 'duration-updated',\n  VOLUME_STATUS_CHANGED: 'volume-status-changed',\n  VOLUME_CHANGED: 'volume-changed',\n  MUTE_CHANGED: 'mute-changed',\n  SEEK_IN_PROGRESS: 'seek-in-progress',\n  UPLOAD_STALLED: 'upload-stalled',\n  UPLOAD_SUSPEND: 'upload-suspend',\n  PLAY_REQUEST_TRIGGERED: 'play-request-triggered',\n  PLAY_ABORTED: 'play-aborted',\n  UNKNOWN: 'unknown',\n};\n\nexport default VIDEO_EVENTS;\n","const Errors = {\n  SRC_PARSE: 'error-src-parse',\n  MANIFEST_LOAD: 'error-manifest-load',\n  MANIFEST_PARSE: 'error-manifest-parse',\n  MANIFEST_INCOMPATIBLE: 'error-manifest-incompatible',\n  LEVEL_LOAD: 'error-level-load',\n  CONTENT_LOAD: 'error-content-load',\n  CONTENT_PARSE: 'error-content-parse',\n  MEDIA: 'error-media',\n  UNKNOWN: 'error-unknown',\n};\n\nexport default Errors;\n","export default {\n  LOGO_LABEL: 'logo-label',\n  LOGO_TOOLTIP: 'logo-tooltip',\n  LIVE_INDICATOR_TEXT: 'live-indicator-text',\n  LIVE_SYNC_LABEL: 'live-sync-button-label',\n  LIVE_SYNC_TOOLTIP: 'live-sync-button-tooltip',\n  ENTER_FULL_SCREEN_LABEL: 'enter-full-screen-label',\n  ENTER_FULL_SCREEN_TOOLTIP: 'enter-full-screen-tooltip',\n  EXIT_FULL_SCREEN_LABEL: 'exit-full-screen-label',\n  EXIT_FULL_SCREEN_TOOLTIP: 'exit-full-screen-tooltip',\n  PLAY_CONTROL_LABEL: 'play-control-label',\n  PAUSE_CONTROL_LABEL: 'pause-control-label',\n  PROGRESS_CONTROL_LABEL: 'progress-control-label',\n  PROGRESS_CONTROL_VALUE: 'progress-control-value',\n  UNMUTE_CONTROL_LABEL: 'unmute-control-label',\n  UNMUTE_CONTROL_TOOLTIP: 'unmute-control-label',\n  MUTE_CONTROL_LABEL: 'mute-control-label',\n  MUTE_CONTROL_TOOLTIP: 'mute-control-tooltip',\n  VOLUME_CONTROL_LABEL: 'volume-control-label',\n  VOLUME_CONTROL_VALUE: 'volume-control-value',\n};\n","const STATES = {\n  SRC_SET: 'src-set',\n  LOAD_STARTED: 'load-started',\n  METADATA_LOADED: 'metadata-loaded',\n  READY_TO_PLAY: 'ready-to-play',\n  SEEK_IN_PROGRESS: 'seek-in-progress',\n  PLAY_REQUESTED: 'play-requested',\n  WAITING: 'waiting',\n  PLAYING: 'playing',\n  PAUSED: 'paused',\n  ENDED: 'ended',\n};\n\nexport default STATES;\n","function htmlToElement(html) {\n  const div: HTMLDivElement = document.createElement('div');\n  div.innerHTML = html.trim();\n  return div.firstChild as HTMLElement;\n}\n\nexport default htmlToElement;\n","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import extendStyles from './extendStyles';\nimport { IThemeService, ICSSRules } from './theme';\nimport { IStyles, IStylable } from './types';\n\nclass Stylable<TStyles = IStyles> implements IStylable<TStyles> {\n  private static _moduleTheme: ICSSRules;\n  private static _styles: IStyles = {};\n\n  private _themeStyles: IStyles = {};\n\n  constructor(theme?: IThemeService) {\n    const moduleTheme = (<typeof Stylable>this.constructor)._moduleTheme;\n    if (theme && moduleTheme) {\n      theme.registerModuleTheme(this, moduleTheme);\n      this._themeStyles = theme.get(this);\n    }\n  }\n\n  static setTheme(theme: ICSSRules) {\n    this._moduleTheme = theme;\n  }\n\n  static extendStyleNames(styles: IStyles) {\n    this._styles = extendStyles(this._styles, styles);\n  }\n\n  static resetStyles() {\n    this._styles = {};\n  }\n\n  get themeStyles(): IStyles {\n    return this._themeStyles;\n  }\n\n  get styleNames(): TStyles {\n    // NOTE: TS does not work with instance static fields + generic type\n    return (this.constructor as any)._styles || {};\n  }\n}\n\nexport default Stylable;\n","import classnames from 'classnames';\nimport { IStyles } from './types';\n\nfunction extendStyles(sourceStyles: IStyles, partialStyles: IStyles) {\n  const styles = {\n    ...sourceStyles,\n  };\n\n  Object.keys(partialStyles).forEach(styleName => {\n    styles[styleName] = styles[styleName]\n      ? classnames(styles[styleName], partialStyles[styleName])\n      : partialStyles[styleName];\n  });\n\n  return styles;\n}\n\nexport default extendStyles;\n","import Stylable from './stylable';\nimport { IView, IStyles } from './types';\n\nclass View<TStyles = IStyles> extends Stylable<TStyles>\n  implements IView<TStyles> {}\n\nexport default View;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import htmlToElement from '../ui/core/htmlToElement';\n\nimport { containerTemplate } from './templates';\n\nimport View from '../ui/core/view';\n\nimport styles from './root-container.scss';\n\nclass RootContainerView extends View {\n  private _width: number;\n  private _height: number;\n  private _$node: HTMLElement;\n\n  constructor(config) {\n    super();\n    const { width, height, fillAllSpace } = config;\n\n    this._$node = htmlToElement(containerTemplate({ styles: this.styleNames }));\n\n    this.setFillAllSpaceFlag(fillAllSpace);\n\n    this.setWidth(width);\n    this.setHeight(height);\n  }\n\n  setWidth(width) {\n    if (!width) {\n      return;\n    }\n\n    this._width = width;\n\n    this._$node.style.width = `${this._width}px`;\n  }\n\n  setHeight(height) {\n    if (!height) {\n      return;\n    }\n\n    this._height = height;\n\n    this._$node.style.height = `${this._height}px`;\n  }\n\n  getWidth() {\n    return this._width;\n  }\n\n  getHeight() {\n    return this._height;\n  }\n\n  show() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  appendComponentNode(node) {\n    this._$node.appendChild(node);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  setFullScreenStatus(isFullScreen) {\n    if (isFullScreen) {\n      this._$node.setAttribute('data-in-full-screen', 'true');\n      this._$node.classList.add(this.styleNames.fullScreen);\n    } else {\n      this._$node.setAttribute('data-in-full-screen', 'false');\n      this._$node.classList.remove(this.styleNames.fullScreen);\n    }\n  }\n\n  setFillAllSpaceFlag(isFillAllSpace = false) {\n    if (isFillAllSpace) {\n      this._$node.classList.add(this.styleNames.fillAllSpace);\n    } else {\n      this._$node.classList.remove(this.styleNames.fillAllSpace);\n    }\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n  }\n}\n\nRootContainerView.extendStyleNames(styles);\n\nexport default RootContainerView;\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\n/* eslint-disable require-jsdoc, valid-jsdoc */\nvar MapShim = (function () {\n    if (typeof Map !== 'undefined') {\n        return Map;\n    }\n\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\n    function getIndex(arr, key) {\n        var result = -1;\n\n        arr.some(function (entry, index) {\n            if (entry[0] === key) {\n                result = index;\n\n                return true;\n            }\n\n            return false;\n        });\n\n        return result;\n    }\n\n    return (function () {\n        function anonymous() {\n            this.__entries__ = [];\n        }\n\n        var prototypeAccessors = { size: { configurable: true } };\n\n        /**\r\n         * @returns {boolean}\r\n         */\n        prototypeAccessors.size.get = function () {\n            return this.__entries__.length;\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\n        anonymous.prototype.get = function (key) {\n            var index = getIndex(this.__entries__, key);\n            var entry = this.__entries__[index];\n\n            return entry && entry[1];\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.set = function (key, value) {\n            var index = getIndex(this.__entries__, key);\n\n            if (~index) {\n                this.__entries__[index][1] = value;\n            } else {\n                this.__entries__.push([key, value]);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.delete = function (key) {\n            var entries = this.__entries__;\n            var index = getIndex(entries, key);\n\n            if (~index) {\n                entries.splice(index, 1);\n            }\n        };\n\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.has = function (key) {\n            return !!~getIndex(this.__entries__, key);\n        };\n\n        /**\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.clear = function () {\n            this.__entries__.splice(0);\n        };\n\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\n        anonymous.prototype.forEach = function (callback, ctx) {\n            var this$1 = this;\n            if ( ctx === void 0 ) ctx = null;\n\n            for (var i = 0, list = this$1.__entries__; i < list.length; i += 1) {\n                var entry = list[i];\n\n                callback.call(ctx, entry[1], entry[0]);\n            }\n        };\n\n        Object.defineProperties( anonymous.prototype, prototypeAccessors );\n\n        return anonymous;\n    }());\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\nvar global$1 = (function () {\n    if (typeof global !== 'undefined' && global.Math === Math) {\n        return global;\n    }\n\n    if (typeof self !== 'undefined' && self.Math === Math) {\n        return self;\n    }\n\n    if (typeof window !== 'undefined' && window.Math === Math) {\n        return window;\n    }\n\n    // eslint-disable-next-line no-new-func\n    return Function('return this')();\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\nvar requestAnimationFrame$1 = (function () {\n    if (typeof requestAnimationFrame === 'function') {\n        // It's required to use a bounded function because IE sometimes throws\n        // an \"Invalid calling object\" error if rAF is invoked without the global\n        // object on the left hand side.\n        return requestAnimationFrame.bind(global$1);\n    }\n\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\n})();\n\n// Defines minimum timeout before adding a trailing call.\nvar trailingTimeout = 2;\n\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\nvar throttle = function (callback, delay) {\n    var leadingCall = false,\n        trailingCall = false,\n        lastCallTime = 0;\n\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\n    function resolvePending() {\n        if (leadingCall) {\n            leadingCall = false;\n\n            callback();\n        }\n\n        if (trailingCall) {\n            proxy();\n        }\n    }\n\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\n    function timeoutCallback() {\n        requestAnimationFrame$1(resolvePending);\n    }\n\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\n    function proxy() {\n        var timeStamp = Date.now();\n\n        if (leadingCall) {\n            // Reject immediately following calls.\n            if (timeStamp - lastCallTime < trailingTimeout) {\n                return;\n            }\n\n            // Schedule new call to be in invoked when the pending one is resolved.\n            // This is important for \"transitions\" which never actually start\n            // immediately so there is a chance that we might miss one if change\n            // happens amids the pending invocation.\n            trailingCall = true;\n        } else {\n            leadingCall = true;\n            trailingCall = false;\n\n            setTimeout(timeoutCallback, delay);\n        }\n\n        lastCallTime = timeStamp;\n    }\n\n    return proxy;\n};\n\n// Minimum delay before invoking the update of observers.\nvar REFRESH_DELAY = 20;\n\n// A list of substrings of CSS properties used to find transition events that\n// might affect dimensions of observed elements.\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\n\n// Check if MutationObserver is available.\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\n\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\nvar ResizeObserverController = function() {\n    this.connected_ = false;\n    this.mutationEventsAdded_ = false;\n    this.mutationsObserver_ = null;\n    this.observers_ = [];\n\n    this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\n    this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\n};\n\n/**\r\n * Adds observer to observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be added.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Holds reference to the controller's instance.\r\n *\r\n * @private {ResizeObserverController}\r\n */\n\n\n/**\r\n * Keeps reference to the instance of MutationObserver.\r\n *\r\n * @private {MutationObserver}\r\n */\n\n/**\r\n * Indicates whether DOM listeners have been added.\r\n *\r\n * @private {boolean}\r\n */\nResizeObserverController.prototype.addObserver = function (observer) {\n    if (!~this.observers_.indexOf(observer)) {\n        this.observers_.push(observer);\n    }\n\n    // Add listeners if they haven't been added yet.\n    if (!this.connected_) {\n        this.connect_();\n    }\n};\n\n/**\r\n * Removes observer from observers list.\r\n *\r\n * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.removeObserver = function (observer) {\n    var observers = this.observers_;\n    var index = observers.indexOf(observer);\n\n    // Remove observer if it's present in registry.\n    if (~index) {\n        observers.splice(index, 1);\n    }\n\n    // Remove listeners if controller has no connected observers.\n    if (!observers.length && this.connected_) {\n        this.disconnect_();\n    }\n};\n\n/**\r\n * Invokes the update of observers. It will continue running updates insofar\r\n * it detects changes.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.refresh = function () {\n    var changesDetected = this.updateObservers_();\n\n    // Continue running updates if changes have been detected as there might\n    // be future ones caused by CSS transitions.\n    if (changesDetected) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Updates every observer from observers list and notifies them of queued\r\n * entries.\r\n *\r\n * @private\r\n * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n *  dimensions of it's elements.\r\n */\nResizeObserverController.prototype.updateObservers_ = function () {\n    // Collect observers that have active observations.\n    var activeObservers = this.observers_.filter(function (observer) {\n        return observer.gatherActive(), observer.hasActive();\n    });\n\n    // Deliver notifications in a separate cycle in order to avoid any\n    // collisions between observers, e.g. when multiple instances of\n    // ResizeObserver are tracking the same element and the callback of one\n    // of them changes content dimensions of the observed target. Sometimes\n    // this may result in notifications being blocked for the rest of observers.\n    activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\n\n    return activeObservers.length > 0;\n};\n\n/**\r\n * Initializes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.connect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already added.\n    if (!isBrowser || this.connected_) {\n        return;\n    }\n\n    // Subscription to the \"Transitionend\" event is used as a workaround for\n    // delayed transitions. This way it's possible to capture at least the\n    // final state of an element.\n    document.addEventListener('transitionend', this.onTransitionEnd_);\n\n    window.addEventListener('resize', this.refresh);\n\n    if (mutationObserverSupported) {\n        this.mutationsObserver_ = new MutationObserver(this.refresh);\n\n        this.mutationsObserver_.observe(document, {\n            attributes: true,\n            childList: true,\n            characterData: true,\n            subtree: true\n        });\n    } else {\n        document.addEventListener('DOMSubtreeModified', this.refresh);\n\n        this.mutationEventsAdded_ = true;\n    }\n\n    this.connected_ = true;\n};\n\n/**\r\n * Removes DOM listeners.\r\n *\r\n * @private\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.disconnect_ = function () {\n    // Do nothing if running in a non-browser environment or if listeners\n    // have been already removed.\n    if (!isBrowser || !this.connected_) {\n        return;\n    }\n\n    document.removeEventListener('transitionend', this.onTransitionEnd_);\n    window.removeEventListener('resize', this.refresh);\n\n    if (this.mutationsObserver_) {\n        this.mutationsObserver_.disconnect();\n    }\n\n    if (this.mutationEventsAdded_) {\n        document.removeEventListener('DOMSubtreeModified', this.refresh);\n    }\n\n    this.mutationsObserver_ = null;\n    this.mutationEventsAdded_ = false;\n    this.connected_ = false;\n};\n\n/**\r\n * \"Transitionend\" event handler.\r\n *\r\n * @private\r\n * @param {TransitionEvent} event\r\n * @returns {void}\r\n */\nResizeObserverController.prototype.onTransitionEnd_ = function (ref) {\n        var propertyName = ref.propertyName; if ( propertyName === void 0 ) propertyName = '';\n\n    // Detect whether transition may affect dimensions of an element.\n    var isReflowProperty = transitionKeys.some(function (key) {\n        return !!~propertyName.indexOf(key);\n    });\n\n    if (isReflowProperty) {\n        this.refresh();\n    }\n};\n\n/**\r\n * Returns instance of the ResizeObserverController.\r\n *\r\n * @returns {ResizeObserverController}\r\n */\nResizeObserverController.getInstance = function () {\n    if (!this.instance_) {\n        this.instance_ = new ResizeObserverController();\n    }\n\n    return this.instance_;\n};\n\nResizeObserverController.instance_ = null;\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\nvar defineConfigurable = (function (target, props) {\n    for (var i = 0, list = Object.keys(props); i < list.length; i += 1) {\n        var key = list[i];\n\n        Object.defineProperty(target, key, {\n            value: props[key],\n            enumerable: false,\n            writable: false,\n            configurable: true\n        });\n    }\n\n    return target;\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\nvar getWindowOf = (function (target) {\n    // Assume that the element is an instance of Node, which means that it\n    // has the \"ownerDocument\" property from which we can retrieve a\n    // corresponding global object.\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\n\n    // Return the local global object if it's not possible extract one from\n    // provided element.\n    return ownerGlobal || global$1;\n});\n\n// Placeholder of an empty content rectangle.\nvar emptyRect = createRectInit(0, 0, 0, 0);\n\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\nfunction toFloat(value) {\n    return parseFloat(value) || 0;\n}\n\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\nfunction getBordersSize(styles) {\n    var positions = [], len = arguments.length - 1;\n    while ( len-- > 0 ) positions[ len ] = arguments[ len + 1 ];\n\n    return positions.reduce(function (size, position) {\n        var value = styles['border-' + position + '-width'];\n\n        return size + toFloat(value);\n    }, 0);\n}\n\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\nfunction getPaddings(styles) {\n    var positions = ['top', 'right', 'bottom', 'left'];\n    var paddings = {};\n\n    for (var i = 0, list = positions; i < list.length; i += 1) {\n        var position = list[i];\n\n        var value = styles['padding-' + position];\n\n        paddings[position] = toFloat(value);\n    }\n\n    return paddings;\n}\n\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getSVGContentRect(target) {\n    var bbox = target.getBBox();\n\n    return createRectInit(0, 0, bbox.width, bbox.height);\n}\n\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\nfunction getHTMLElementContentRect(target) {\n    // Client width & height properties can't be\n    // used exclusively as they provide rounded values.\n    var clientWidth = target.clientWidth;\n    var clientHeight = target.clientHeight;\n\n    // By this condition we can catch all non-replaced inline, hidden and\n    // detached elements. Though elements with width & height properties less\n    // than 0.5 will be discarded as well.\n    //\n    // Without it we would need to implement separate methods for each of\n    // those cases and it's not possible to perform a precise and performance\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\n    // gives wrong results for elements with width & height less than 0.5.\n    if (!clientWidth && !clientHeight) {\n        return emptyRect;\n    }\n\n    var styles = getWindowOf(target).getComputedStyle(target);\n    var paddings = getPaddings(styles);\n    var horizPad = paddings.left + paddings.right;\n    var vertPad = paddings.top + paddings.bottom;\n\n    // Computed styles of width & height are being used because they are the\n    // only dimensions available to JS that contain non-rounded values. It could\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\n    var width = toFloat(styles.width),\n        height = toFloat(styles.height);\n\n    // Width & height include paddings and borders when the 'border-box' box\n    // model is applied (except for IE).\n    if (styles.boxSizing === 'border-box') {\n        // Following conditions are required to handle Internet Explorer which\n        // doesn't include paddings and borders to computed CSS dimensions.\n        //\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\n        // properties then it's either IE, and thus we don't need to subtract\n        // anything, or an element merely doesn't have paddings/borders styles.\n        if (Math.round(width + horizPad) !== clientWidth) {\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\n        }\n\n        if (Math.round(height + vertPad) !== clientHeight) {\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\n        }\n    }\n\n    // Following steps can't be applied to the document's root element as its\n    // client[Width/Height] properties represent viewport area of the window.\n    // Besides, it's as well not necessary as the <html> itself neither has\n    // rendered scroll bars nor it can be clipped.\n    if (!isDocumentElement(target)) {\n        // In some browsers (only in Firefox, actually) CSS width & height\n        // include scroll bars size which can be removed at this step as scroll\n        // bars are the only difference between rounded dimensions + paddings\n        // and \"client\" properties, though that is not always true in Chrome.\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\n\n        // Chrome has a rather weird rounding of \"client\" properties.\n        // E.g. for an element with content width of 314.2px it sometimes gives\n        // the client width of 315px and for the width of 314.7px it may give\n        // 314px. And it doesn't happen all the time. So just ignore this delta\n        // as a non-relevant.\n        if (Math.abs(vertScrollbar) !== 1) {\n            width -= vertScrollbar;\n        }\n\n        if (Math.abs(horizScrollbar) !== 1) {\n            height -= horizScrollbar;\n        }\n    }\n\n    return createRectInit(paddings.left, paddings.top, width, height);\n}\n\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nvar isSVGGraphicsElement = (function () {\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\n    // interface.\n    if (typeof SVGGraphicsElement !== 'undefined') {\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\n    }\n\n    // If it's so, then check that element is at least an instance of the\n    // SVGElement and that it has the \"getBBox\" method.\n    // eslint-disable-next-line no-extra-parens\n    return function (target) { return target instanceof getWindowOf(target).SVGElement && typeof target.getBBox === 'function'; };\n})();\n\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\nfunction isDocumentElement(target) {\n    return target === getWindowOf(target).document.documentElement;\n}\n\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\nfunction getContentRect(target) {\n    if (!isBrowser) {\n        return emptyRect;\n    }\n\n    if (isSVGGraphicsElement(target)) {\n        return getSVGContentRect(target);\n    }\n\n    return getHTMLElementContentRect(target);\n}\n\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\nfunction createReadOnlyRect(ref) {\n    var x = ref.x;\n    var y = ref.y;\n    var width = ref.width;\n    var height = ref.height;\n\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\n    var rect = Object.create(Constr.prototype);\n\n    // Rectangle's properties are not writable and non-enumerable.\n    defineConfigurable(rect, {\n        x: x, y: y, width: width, height: height,\n        top: y,\n        right: x + width,\n        bottom: height + y,\n        left: x\n    });\n\n    return rect;\n}\n\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\nfunction createRectInit(x, y, width, height) {\n    return { x: x, y: y, width: width, height: height };\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\nvar ResizeObservation = function(target) {\n    this.broadcastWidth = 0;\n    this.broadcastHeight = 0;\n    this.contentRect_ = createRectInit(0, 0, 0, 0);\n\n    this.target = target;\n};\n\n/**\r\n * Updates content rectangle and tells whether it's width or height properties\r\n * have changed since the last broadcast.\r\n *\r\n * @returns {boolean}\r\n */\n\n\n/**\r\n * Reference to the last observed content rectangle.\r\n *\r\n * @private {DOMRectInit}\r\n */\n\n\n/**\r\n * Broadcasted width of content rectangle.\r\n *\r\n * @type {number}\r\n */\nResizeObservation.prototype.isActive = function () {\n    var rect = getContentRect(this.target);\n\n    this.contentRect_ = rect;\n\n    return rect.width !== this.broadcastWidth || rect.height !== this.broadcastHeight;\n};\n\n/**\r\n * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n * from the corresponding properties of the last observed content rectangle.\r\n *\r\n * @returns {DOMRectInit} Last observed content rectangle.\r\n */\nResizeObservation.prototype.broadcastRect = function () {\n    var rect = this.contentRect_;\n\n    this.broadcastWidth = rect.width;\n    this.broadcastHeight = rect.height;\n\n    return rect;\n};\n\nvar ResizeObserverEntry = function(target, rectInit) {\n    var contentRect = createReadOnlyRect(rectInit);\n\n    // According to the specification following properties are not writable\n    // and are also not enumerable in the native implementation.\n    //\n    // Property accessors are not being used as they'd require to define a\n    // private WeakMap storage which may cause memory leaks in browsers that\n    // don't support this type of collections.\n    defineConfigurable(this, { target: target, contentRect: contentRect });\n};\n\nvar ResizeObserverSPI = function(callback, controller, callbackCtx) {\n    this.activeObservations_ = [];\n    this.observations_ = new MapShim();\n\n    if (typeof callback !== 'function') {\n        throw new TypeError('The callback provided as parameter 1 is not a function.');\n    }\n\n    this.callback_ = callback;\n    this.controller_ = controller;\n    this.callbackCtx_ = callbackCtx;\n};\n\n/**\r\n * Starts observing provided element.\r\n *\r\n * @param {Element} target - Element to be observed.\r\n * @returns {void}\r\n */\n\n\n/**\r\n * Registry of the ResizeObservation instances.\r\n *\r\n * @private {Map<Element, ResizeObservation>}\r\n */\n\n\n/**\r\n * Public ResizeObserver instance which will be passed to the callback\r\n * function and used as a value of it's \"this\" binding.\r\n *\r\n * @private {ResizeObserver}\r\n */\n\n/**\r\n * Collection of resize observations that have detected changes in dimensions\r\n * of elements.\r\n *\r\n * @private {Array<ResizeObservation>}\r\n */\nResizeObserverSPI.prototype.observe = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is already being observed.\n    if (observations.has(target)) {\n        return;\n    }\n\n    observations.set(target, new ResizeObservation(target));\n\n    this.controller_.addObserver(this);\n\n    // Force the update of observations.\n    this.controller_.refresh();\n};\n\n/**\r\n * Stops observing provided element.\r\n *\r\n * @param {Element} target - Element to stop observing.\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.unobserve = function (target) {\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    // Do nothing if current environment doesn't have the Element interface.\n    if (typeof Element === 'undefined' || !(Element instanceof Object)) {\n        return;\n    }\n\n    if (!(target instanceof getWindowOf(target).Element)) {\n        throw new TypeError('parameter 1 is not of type \"Element\".');\n    }\n\n    var observations = this.observations_;\n\n    // Do nothing if element is not being observed.\n    if (!observations.has(target)) {\n        return;\n    }\n\n    observations.delete(target);\n\n    if (!observations.size) {\n        this.controller_.removeObserver(this);\n    }\n};\n\n/**\r\n * Stops observing all elements.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.disconnect = function () {\n    this.clearActive();\n    this.observations_.clear();\n    this.controller_.removeObserver(this);\n};\n\n/**\r\n * Collects observation instances the associated element of which has changed\r\n * it's content rectangle.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.gatherActive = function () {\n        var this$1 = this;\n\n    this.clearActive();\n\n    this.observations_.forEach(function (observation) {\n        if (observation.isActive()) {\n            this$1.activeObservations_.push(observation);\n        }\n    });\n};\n\n/**\r\n * Invokes initial callback function with a list of ResizeObserverEntry\r\n * instances collected from active resize observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.broadcastActive = function () {\n    // Do nothing if observer doesn't have active observations.\n    if (!this.hasActive()) {\n        return;\n    }\n\n    var ctx = this.callbackCtx_;\n\n    // Create ResizeObserverEntry instance for every active observation.\n    var entries = this.activeObservations_.map(function (observation) {\n        return new ResizeObserverEntry(observation.target, observation.broadcastRect());\n    });\n\n    this.callback_.call(ctx, entries, ctx);\n    this.clearActive();\n};\n\n/**\r\n * Clears the collection of active observations.\r\n *\r\n * @returns {void}\r\n */\nResizeObserverSPI.prototype.clearActive = function () {\n    this.activeObservations_.splice(0);\n};\n\n/**\r\n * Tells whether observer has active observations.\r\n *\r\n * @returns {boolean}\r\n */\nResizeObserverSPI.prototype.hasActive = function () {\n    return this.activeObservations_.length > 0;\n};\n\n// Registry of internal observers. If WeakMap is not available use current shim\n// for the Map collection as it has all required methods and because WeakMap\n// can't be fully polyfilled anyway.\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\n\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\nvar ResizeObserver = function(callback) {\n    if (!(this instanceof ResizeObserver)) {\n        throw new TypeError('Cannot call a class as a function.');\n    }\n    if (!arguments.length) {\n        throw new TypeError('1 argument required, but only 0 present.');\n    }\n\n    var controller = ResizeObserverController.getInstance();\n    var observer = new ResizeObserverSPI(callback, controller, this);\n\n    observers.set(this, observer);\n};\n\n// Expose public methods of ResizeObserver.\n['observe', 'unobserve', 'disconnect'].forEach(function (method) {\n    ResizeObserver.prototype[method] = function () {\n        return (ref = observers.get(this))[method].apply(ref, arguments);\n        var ref;\n    };\n});\n\nvar index = (function () {\n    // Export existing implementation if available.\n    if (typeof global$1.ResizeObserver !== 'undefined') {\n        return global$1.ResizeObserver;\n    }\n\n    return ResizeObserver;\n})();\n\nexport default index;\n","function reduce(\n  arrayLike: { length: number },\n  callback: Function,\n  initialValue: any,\n) {\n  return Array.prototype.reduce.call(arrayLike, callback, initialValue);\n}\n\nfunction forEachMatch(string: string, pattern: RegExp, callback: Function) {\n  let match = pattern.exec(string);\n\n  while (match !== null) {\n    callback(match);\n    match = pattern.exec(string);\n  }\n}\n\nexport { reduce, forEachMatch };\n","const ALIASES = [\n  'matches',\n  'webkitMatchesSelector',\n  'mozMatchesSelector',\n  'msMatchesSelector',\n];\n\nlet matchesSelectorFn;\n\nif (typeof Element !== 'undefined') {\n  for (let i = 0; i < ALIASES.length; i++) {\n    matchesSelectorFn = Element.prototype[ALIASES[i]];\n\n    if (matchesSelectorFn) {\n      break;\n    }\n  }\n}\n\nconst isElementMatchesSelector = matchesSelectorFn\n  ? (element, selector) => matchesSelectorFn.call(element, selector)\n  : (element, selector) =>\n      Array.prototype.indexOf.call(\n        document.querySelectorAll(selector),\n        element,\n      ) !== -1;\n\nexport default isElementMatchesSelector;\n","import { forEachMatch, reduce } from './utils';\nimport isElementMatchesSelector from '../isElementMatchesSelector';\n\n// NOTE: \"inspired\" by https://github.com/marcj/css-element-queries/blob/1.0.2/src/ElementQueries.js#L340-L393\n\nconst CSS_SELECTOR_PATTERN = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:[a-z-]+-)?(?:min|max)-width[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/gim;\nconst QUERY_ATTR_PATTERN = /\\[[\\s\\t]*?(?:([a-z-]+)-)?(min|max)-width[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/gim;\n\nfunction getQueriesFromCssSelector(cssSelector: string) {\n  const results = [];\n\n  if (\n    cssSelector.indexOf('min-width') === -1 &&\n    cssSelector.indexOf('max-width') === -1\n  ) {\n    return [];\n  }\n\n  cssSelector = cssSelector.replace(/'/g, '\"');\n\n  forEachMatch(cssSelector, CSS_SELECTOR_PATTERN, match => {\n    const [selectorPart1, attribute, selectorPart2] = match.slice(1);\n    const selector = selectorPart1 + selectorPart2;\n\n    forEachMatch(attribute, QUERY_ATTR_PATTERN, match => {\n      const [prefix = '', mode, width] = match.slice(1);\n\n      results.push({\n        selector,\n        prefix,\n        mode,\n        width: parseInt(width, 10),\n      });\n    });\n  });\n\n  return results;\n}\n\nfunction getQueriesFromRules(rules: CSSRuleList) {\n  return reduce(\n    rules,\n    (results, rule) => {\n      // https://developer.mozilla.org/en-US/docs/Web/API/CSSRule\n      // CSSRule.STYLE_RULE\n      if (rule.type === 1) {\n        const selector = rule.selectorText || rule.cssText;\n\n        return results.concat(getQueriesFromCssSelector(selector));\n      }\n\n      // NOTE: add other `CSSRule` types if required.\n      // Example - https://github.com/marcj/css-element-queries/blob/1.0.2/src/ElementQueries.js#L384-L390\n\n      return results;\n    },\n    [],\n  );\n}\n\nfunction getQueries() {\n  return reduce(\n    document.styleSheets,\n    (results, styleSheet) => {\n      // NOTE: browser may not able to read rules for cross-domain stylesheets\n      try {\n        const rules = styleSheet.cssRules || styleSheet.rules;\n\n        if (rules) {\n          return results.concat(getQueriesFromRules(rules));\n        }\n\n        if (styleSheet.cssText) {\n          return results.concat(getQueriesFromCssSelector(styleSheet.cssText));\n        }\n      } catch (e) {}\n\n      return results;\n    },\n    [],\n  );\n}\n\nfunction getQueriesForElement(element, prefix = '') {\n  const matchedSelectors = new Map();\n  const queries = [];\n\n  getQueries().forEach(query => {\n    if (!matchedSelectors.has(query.selector)) {\n      matchedSelectors.set(\n        query.selector,\n        isElementMatchesSelector(element, query.selector),\n      );\n    }\n\n    if (!matchedSelectors.get(query.selector)) {\n      return;\n    }\n\n    if (\n      query.prefix === prefix &&\n      !queries.some(\n        _query => _query.mode === query.mode && _query.width === query.width,\n      )\n    ) {\n      queries.push({\n        mode: query.mode,\n        width: query.width,\n      });\n    }\n  });\n\n  return queries.sort((a, b) => a.width - b.width);\n}\n\nexport default getQueriesForElement;\n","import ResizeObserver from 'resize-observer-polyfill';\nimport getQueriesForElement from './getQueriesForElement';\n\nconst DEFAULT_QUERY_PREFIX = 'data';\n\nclass ElementQueries {\n  private _element: Element;\n  private _queryPrefix: string;\n  private _queries: { mode: string; width: number }[];\n  private _observer: ResizeObserver;\n\n  constructor(element, { prefix = DEFAULT_QUERY_PREFIX } = {}) {\n    this._element = element;\n    this._queryPrefix = prefix;\n    this._queries = getQueriesForElement(element, prefix);\n\n    if (this._queries.length) {\n      this._observer = new ResizeObserver(([entry]) => {\n        this._onResized(entry.contentRect.width);\n      });\n\n      this._observer.observe(element);\n    }\n  }\n\n  private _getQueryAttributeValue(mode, elementWidth) {\n    return this._queries\n      .filter(\n        query =>\n          query.mode === mode &&\n          ((mode === 'max' && query.width >= elementWidth) ||\n            (mode === 'min' && query.width <= elementWidth)),\n      )\n      .map(query => `${query.width}px`)\n      .join(' ');\n  }\n\n  private _setQueryAttribute(mode, elementWidth) {\n    const attributeName = this._queryPrefix\n      ? `${this._queryPrefix}-${mode}-width`\n      : `${mode}-width`;\n    const attributeValue = this._getQueryAttributeValue(mode, elementWidth);\n\n    if (attributeValue) {\n      this._element.setAttribute(attributeName, attributeValue);\n    } else {\n      this._element.removeAttribute(attributeName);\n    }\n  }\n\n  private _onResized(width) {\n    this._setQueryAttribute('min', width);\n    this._setQueryAttribute('max', width);\n  }\n\n  destroy() {\n    if (this._observer) {\n      this._observer.unobserve(this._element);\n      this._observer = null;\n    }\n  }\n}\n\nexport default ElementQueries;\n","import focusSource from '../../utils/focus-source';\nimport focusWithin from '../../utils/focus-within';\n\nimport playerAPI from '../../utils/player-api-decorator';\n\nimport { UI_EVENTS } from '../../constants/index';\n\nimport View from './root-container.view';\nimport ElementQueries from '../ui/core/element-queries';\n\nconst DEFAULT_CONFIG = {\n  fillAllSpace: false,\n};\n\nexport interface IPlayerSize {\n  width: number;\n  height: number;\n}\n\nclass RootContainer {\n  static moduleName = 'rootContainer';\n  static dependencies = ['eventEmitter', 'config', 'engine'];\n\n  private _eventEmitter;\n  private _engine;\n\n  private _elementQueries: ElementQueries;\n  private _disengageFocusWithin;\n  private _disengageFocusSource;\n\n  // TODO: check if props should be `private`\n  view: View;\n  isHidden: boolean;\n\n  constructor({ eventEmitter, config, engine }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this.isHidden = false;\n\n    this._initUI(config);\n\n    this._bindEvents();\n  }\n\n  /**\n   * Getter for DOM node with player UI element\n   * (use it only for debug, if you need attach player to your document use `attachToElement` method)\n   */\n  @playerAPI()\n  get node(): Node {\n    return this.view.getNode();\n  }\n\n  _bindEvents() {\n    this._eventEmitter.on(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this.view.setFullScreenStatus,\n      this.view,\n    );\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this.view.setFullScreenStatus,\n      this.view,\n    );\n  }\n\n  _initUI(config) {\n    const sizeConfig = {\n      ...config.size,\n    };\n    this.view = new View({\n      width: sizeConfig.width || null,\n      height: sizeConfig.height || null,\n      fillAllSpace: config.fillAllSpace || DEFAULT_CONFIG.fillAllSpace,\n    });\n  }\n\n  appendComponentNode(node) {\n    this.view.appendComponentNode(node);\n  }\n\n  _enableFocusInterceptors() {\n    if (!this._disengageFocusWithin) {\n      this._disengageFocusWithin = focusWithin();\n    }\n\n    if (!this._disengageFocusSource) {\n      focusSource.engage();\n      this._disengageFocusSource = focusSource.disengage;\n    }\n  }\n\n  _disableFocusInterceptors() {\n    if (this._disengageFocusSource) {\n      this._disengageFocusSource();\n      delete this._disengageFocusSource;\n    }\n\n    if (this._disengageFocusWithin) {\n      this._disengageFocusWithin();\n      delete this._disengageFocusWithin;\n    }\n  }\n\n  /**\n   * Method for attaching player node to your container\n   * It's important to call this methods after `DOMContentLoaded` event!\n   *\n   * @example\n   * document.addEventListener('DOMContentLoaded', function() {\n   *   const config = { src: 'http://my-url/video.mp4' }\n   *   const player = Playable.create(config);\n   *\n   *   player.attachToElement(document.getElementById('content'));\n   * });\n   */\n  @playerAPI()\n  attachToElement(node: Node) {\n    this._enableFocusInterceptors();\n\n    node.appendChild(this.node);\n\n    if (!this._elementQueries) {\n      // NOTE: required for valid work of player \"media queries\"\n      this._elementQueries = new ElementQueries(this.node, {\n        prefix: '',\n      });\n    }\n  }\n\n  /**\n   * Method for setting width of player\n   * @param width - Desired width of player in pixels\n   * @example\n   * player.setWidth(400);\n   */\n  @playerAPI()\n  setWidth(width: number) {\n    this.view.setWidth(width);\n    this._eventEmitter.emit(UI_EVENTS.PLAYER_WIDTH_CHANGE_TRIGGERED, width);\n  }\n\n  /**\n   * Return current width of player in pixels\n   * @example\n   * player.getWidth(); // 400\n   */\n  @playerAPI()\n  getWidth(): number {\n    return this.view.getWidth();\n  }\n\n  /**\n   * Method for setting width of player\n   * @param height - Desired height of player in pixels\n   * @example\n   * player.setHeight(225);\n   */\n  @playerAPI()\n  setHeight(height: number) {\n    this.view.setHeight(height);\n    this._eventEmitter.emit(UI_EVENTS.PLAYER_HEIGHT_CHANGE_TRIGGERED, height);\n  }\n\n  /**\n   * Return current height of player in pixels\n   * @example\n   * player.getHeight(); // 225\n   */\n  @playerAPI()\n  getHeight(): number {\n    return this.view.getHeight();\n  }\n\n  /**\n   * Method for allowing player fill all available space\n   * @param flag - `true` for allowing\n   * @example\n   * player.setFillAllSpace(true);\n   */\n  @playerAPI()\n  setFillAllSpace(flag: boolean) {\n    this.view.setFillAllSpaceFlag(flag);\n  }\n\n  /**\n   * Hide whole ui\n   * @example\n   * player.hide();\n   */\n  @playerAPI()\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  /**\n   * Show whole ui\n   * @example\n   * player.show();\n   */\n  @playerAPI()\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._disableFocusInterceptors();\n\n    if (this._elementQueries) {\n      this._elementQueries.destroy();\n      delete this._elementQueries;\n    }\n\n    this.view.destroy();\n    delete this.view;\n\n    delete this._engine;\n    delete this._eventEmitter;\n  }\n}\n\nexport default RootContainer;\n","// inspired by https://gist.github.com/aFarkas/a7e0d85450f323d5e164\nconst focusWithin = () => {\n  const slice = [].slice;\n  const removeClass = elem => {\n    elem.classList.remove('focus-within');\n  };\n  const update = (() => {\n    let running;\n    let last;\n    const action = () => {\n      let element: any = document.activeElement;\n\n      running = false;\n      if (last !== element) {\n        last = element;\n        slice\n          .call(document.getElementsByClassName('focus-within'))\n          .forEach(removeClass);\n        while (element && element.classList) {\n          element.classList.add('focus-within');\n          element = element.parentNode;\n        }\n      }\n    };\n\n    return () => {\n      if (!running) {\n        requestAnimationFrame(action);\n        running = true;\n      }\n    };\n  })();\n\n  document.addEventListener('focus', update, true);\n  document.addEventListener('blur', update, true);\n  update();\n\n  return () => {\n    document.removeEventListener('focus', update, true);\n    document.removeEventListener('blur', update, true);\n  };\n};\n\nexport default focusWithin;\n","import { EventEmitter, ListenerFn } from 'eventemitter3';\n\nimport playerAPI from '../../utils/player-api-decorator';\n\nexport default class EventEmitterModule extends EventEmitter {\n  static moduleName = 'eventEmitter';\n  /**\n   * Method for adding listeners of events inside player.\n   * You can check all events inside `Playable.UI_EVENTS` and `Playable.VIDEO_EVENTS`\n   *\n   * @param event - The Event name, such as `Playable.UI_EVENTS.PLAY_TRIGGERED`\n   * @param fn - A function callback to execute when the event is triggered.\n   * @param context - Value to use as `this` (i.e the reference Object) when executing callback.\n   *\n   * @example\n   * const Playable = require('playable');\n   * const player = Playable.create();\n   *\n   * player.on(Playable.UI_EVENTS.PLAY_TRIGGERED, () => {\n   *   // Will be executed after you will click on play button\n   * });\n   *\n   * // To supply a context value for `this` when the callback is invoked,\n   * // pass the optional context argument\n   * player.on(Playable.VIDEO_EVENTS.UPLOAD_STALLED, this.handleStalledUpload, this);\n   */\n  @playerAPI()\n  on(event: string, fn: ListenerFn, context?: any) {\n    return super.on(event, fn, context);\n  }\n\n  /**\n   * Method for removing listeners of events inside player.\n   *\n   * @param event - The Event name, such as `Playable.UI_EVENTS.PLAY_TRIGGERED`\n   * @param fn - Only remove the listeners that match this function.\n   * @param context - Only remove the listeners that have this context.\n   * @param once - Only remove one-time listeners.\n   *\n   * @example\n   * const Playable = require('playable');\n   * const player = Playable.create();\n   *\n   * const callback = function() {\n   *   // Code to handle some kind of event\n   * };\n   *\n   * // ... Now callback will be called when some one will pause the video ...\n   * player.on(Playable.UI_EVENTS.PAUSE_TRIGGERED, callback);\n   *\n   * // ... callback will no longer be called.\n   * player.off(Playable.UI_EVENTS.PAUSE_TRIGGERED, callback);\n   *\n   * // ... remove all handlers for event UI_EVENTS.PAUSE_TRIGGERED.\n   * player.off(Playable.UI_EVENTS.PAUSE_TRIGGERED);\n   */\n  @playerAPI()\n  off(event: string, fn?: ListenerFn, context?: any, once?: boolean) {\n    return super.off(event, fn, context, once);\n  }\n\n  destroy() {\n    this.eventNames().forEach(eventName => {\n      this.removeAllListeners(eventName);\n    });\n  }\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { VIDEO_EVENTS, STATES } from '../../constants/index';\n\nexport const NATIVE_VIDEO_EVENTS_TO_STATE = [\n  'loadstart',\n  'loadedmetadata',\n  'canplay',\n  'play',\n  'playing',\n  'pause',\n  'ended',\n  'waiting',\n  'seeking',\n  'seeked',\n];\n\nexport default class StateEngine {\n  static dependencies = ['eventEmitter', 'config'];\n\n  private _eventEmitter;\n  private _video;\n  private _currentState;\n  private _statesTimestamps;\n  private _initialTimeStamp;\n  private _isMetadataLoaded: boolean;\n\n  constructor(eventEmitter, video) {\n    this._eventEmitter = eventEmitter;\n    this._video = video;\n\n    this._currentState = null;\n\n    this._isMetadataLoaded = false;\n    this._statesTimestamps = {};\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  _bindCallbacks() {\n    this._processEventFromVideo = this._processEventFromVideo.bind(this);\n  }\n\n  _bindEvents() {\n    NATIVE_VIDEO_EVENTS_TO_STATE.forEach(event =>\n      this._video.addEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  _unbindEvents() {\n    NATIVE_VIDEO_EVENTS_TO_STATE.forEach(event =>\n      this._video.removeEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  clearTimestamps() {\n    this._statesTimestamps = {};\n  }\n\n  _setInitialTimeStamp() {\n    this._initialTimeStamp = Date.now();\n  }\n\n  _setStateTimestamp(state) {\n    if (!this._statesTimestamps[state]) {\n      this._statesTimestamps[state] = Date.now() - this._initialTimeStamp;\n      this._setInitialTimeStamp();\n    }\n  }\n\n  getStateTimestamps() {\n    return this._statesTimestamps;\n  }\n\n  _processEventFromVideo(event: any = {}) {\n    const videoEl = this._video;\n\n    switch (event.type) {\n      case 'loadstart': {\n        this._setInitialTimeStamp();\n        this.setState(STATES.LOAD_STARTED);\n        break;\n      }\n      case 'loadedmetadata': {\n        this._setStateTimestamp(STATES.METADATA_LOADED);\n        this.setState(STATES.METADATA_LOADED);\n        this._isMetadataLoaded = true;\n        break;\n      }\n      case 'canplay': {\n        this._setStateTimestamp(STATES.READY_TO_PLAY);\n        this.setState(STATES.READY_TO_PLAY);\n        break;\n      }\n      case 'play': {\n        this.setState(STATES.PLAY_REQUESTED);\n        break;\n      }\n      case 'playing': {\n        // Event 'playing' also triggers even when play request aborted by browser. So we need to check if video is actualy playing\n        if (!videoEl.paused) {\n          this.setState(STATES.PLAYING);\n        }\n        break;\n      }\n      case 'waiting': {\n        this.setState(STATES.WAITING);\n        break;\n      }\n      case 'pause': {\n        // No need to set state PAUSED since there was no actual playing of any parts of video\n        if (videoEl.played.length) {\n          this.setState(STATES.PAUSED);\n        }\n        break;\n      }\n      case 'ended': {\n        this.setState(STATES.ENDED);\n        break;\n      }\n      case 'seeking': {\n        this.setState(STATES.SEEK_IN_PROGRESS);\n        break;\n      }\n      case 'seeked': {\n        this.setState(videoEl.paused ? STATES.PAUSED : STATES.PLAYING);\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  setState(state) {\n    if (state === this._currentState) {\n      return;\n    }\n\n    //This case is happens only with dash.js sometimes when manifest got some problems\n    if (this._currentState === STATES.METADATA_LOADED) {\n      if (state === STATES.SEEK_IN_PROGRESS || state === STATES.PAUSED) {\n        return;\n      }\n    }\n\n    this._eventEmitter.emit(VIDEO_EVENTS.STATE_CHANGED, {\n      prevState: this._currentState,\n      nextState: state,\n    });\n    this._currentState = state;\n  }\n\n  get isMetadataLoaded() {\n    return this._isMetadataLoaded;\n  }\n\n  getState() {\n    return this._currentState;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    delete this._eventEmitter;\n    delete this._video;\n  }\n}\n","import { VIDEO_EVENTS } from '../../constants/index';\n\nexport const NATIVE_VIDEO_TO_BROADCAST = [\n  'progress',\n  'error',\n  'stalled',\n  'suspend',\n  'durationchange',\n  'timeupdate',\n  'volumechange',\n  'seeking',\n];\n\nexport default class NativeEventsBroadcaster {\n  private _eventEmitter;\n  private _video;\n  private _currentVolume: number;\n  private _currentMute: boolean;\n\n  constructor(eventEmitter, video) {\n    this._eventEmitter = eventEmitter;\n    this._video = video;\n\n    this._currentMute = this._video.muted;\n    this._currentVolume = this._video.volume;\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  _bindCallbacks() {\n    this._processEventFromVideo = this._processEventFromVideo.bind(this);\n  }\n\n  _bindEvents() {\n    NATIVE_VIDEO_TO_BROADCAST.forEach(event =>\n      this._video.addEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  _unbindEvents() {\n    NATIVE_VIDEO_TO_BROADCAST.forEach(event =>\n      this._video.removeEventListener(event, this._processEventFromVideo),\n    );\n  }\n\n  _processEventFromVideo(event: any = {}) {\n    const videoEl = this._video;\n\n    switch (event.type) {\n      case 'progress': {\n        this._eventEmitter.emit(VIDEO_EVENTS.CHUNK_LOADED);\n        break;\n      }\n      case 'stalled': {\n        this._eventEmitter.emit(VIDEO_EVENTS.UPLOAD_STALLED);\n        break;\n      }\n      case 'suspend': {\n        this._eventEmitter.emit(VIDEO_EVENTS.UPLOAD_SUSPEND);\n        break;\n      }\n      case 'seeking': {\n        this._eventEmitter.emit(\n          VIDEO_EVENTS.SEEK_IN_PROGRESS,\n          videoEl.currentTime,\n        );\n        break;\n      }\n      case 'durationchange': {\n        this._eventEmitter.emit(\n          VIDEO_EVENTS.DURATION_UPDATED,\n          videoEl.duration,\n        );\n        break;\n      }\n      case 'timeupdate': {\n        this._eventEmitter.emit(\n          VIDEO_EVENTS.CURRENT_TIME_UPDATED,\n          videoEl.currentTime,\n        );\n        break;\n      }\n      case 'volumechange': {\n        if (this._currentVolume !== videoEl.volume) {\n          this._currentVolume = videoEl.volume * 100;\n          this._eventEmitter.emit(\n            VIDEO_EVENTS.VOLUME_CHANGED,\n            this._currentVolume,\n          );\n        }\n\n        if (this._currentMute !== videoEl.muted) {\n          this._currentMute = videoEl.muted;\n          this._eventEmitter.emit(VIDEO_EVENTS.MUTE_CHANGED, this._currentMute);\n        }\n\n        this._eventEmitter.emit(VIDEO_EVENTS.VOLUME_STATUS_CHANGED, {\n          volume: videoEl.volume,\n          muted: videoEl.muted,\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    delete this._video;\n    delete this._eventEmitter;\n  }\n}\n","export function resolveAdapters(mediaStreams, availableAdapters) {\n  const playableAdapters = [];\n\n  const groupedStreams = groupStreamsByMediaType(mediaStreams);\n  const groupedStreamKeys = Object.keys(groupedStreams);\n\n  availableAdapters.forEach(adapter => {\n    for (let i = 0; i < groupedStreamKeys.length; i += 1) {\n      const mediaType = groupedStreamKeys[i];\n      const mediaStreams = groupedStreams[mediaType];\n\n      if (adapter.canPlay(mediaType)) {\n        adapter.setMediaStreams(mediaStreams);\n        playableAdapters.push(adapter);\n        break;\n      }\n    }\n  });\n\n  playableAdapters.sort(\n    (firstAdapter, secondAdapter) =>\n      secondAdapter.mediaStreamDeliveryPriority -\n      firstAdapter.mediaStreamDeliveryPriority,\n  );\n\n  return playableAdapters;\n}\n\nfunction groupStreamsByMediaType(mediaStreams) {\n  const typeMap = {};\n  mediaStreams.forEach(mediaStream => {\n    if (!mediaStream.type) {\n      return;\n    }\n\n    if (!Array.isArray(typeMap[mediaStream.type])) {\n      typeMap[mediaStream.type] = [];\n    }\n    typeMap[mediaStream.type].push(mediaStream);\n  });\n\n  return typeMap;\n}\n","import { MediaStreamTypes } from '../../constants';\n\nconst extensionsMap = Object.create(null);\nextensionsMap.mp4 = MediaStreamTypes.MP4;\nextensionsMap.webm = MediaStreamTypes.WEBM;\nextensionsMap.m3u8 = MediaStreamTypes.HLS;\nextensionsMap.mpd = MediaStreamTypes.DASH;\nextensionsMap.ogg = MediaStreamTypes.OGG;\n\nexport function getStreamType(url) {\n  const anchorElement = document.createElement('a');\n  anchorElement.href = url;\n  const streamType = extensionsMap[getExtFromPath(anchorElement.pathname)];\n\n  return streamType || false;\n}\n\nexport function getExtFromPath(path) {\n  return path.split('.').pop();\n}\n","import { VIDEO_EVENTS, ERRORS } from '../../constants';\n\nimport { resolveAdapters } from './playback-resolution';\nimport { getStreamType } from './detect-stream-type';\n\nexport default class AdaptersStrategy {\n  private _video: HTMLVideoElement;\n  private _eventEmitter;\n  private _playableAdapters;\n  private _availableAdapters;\n  private _attachedAdapter;\n\n  constructor(eventEmitter, video: HTMLVideoElement, playbackAdapters = []) {\n    this._video = video;\n    this._eventEmitter = eventEmitter;\n    this._playableAdapters = [];\n    this._availableAdapters = [];\n    this._attachedAdapter = null;\n\n    playbackAdapters.forEach(\n      adapter =>\n        adapter.isSupported() &&\n        this._availableAdapters.push(new adapter(eventEmitter)),\n    );\n  }\n\n  _autoDetectSourceTypes(mediaSources) {\n    return mediaSources.map(mediaSource => {\n      if (typeof mediaSource === 'string') {\n        const type = getStreamType(mediaSource);\n        if (!type) {\n          this._eventEmitter.emit(VIDEO_EVENTS.ERROR, {\n            errorType: ERRORS.SRC_PARSE,\n            streamSrc: mediaSource,\n          });\n        }\n        return { url: mediaSource, type };\n      }\n\n      return mediaSource;\n    });\n  }\n\n  _resolvePlayableAdapters(src) {\n    if (!src) {\n      this._playableAdapters = [];\n      return;\n    }\n\n    const mediaSources = [].concat(src);\n    const mediaStreams = this._autoDetectSourceTypes(mediaSources);\n    this._playableAdapters = resolveAdapters(\n      mediaStreams,\n      this._availableAdapters,\n    );\n  }\n\n  _connectAdapterToVideo() {\n    if (this._playableAdapters.length > 0) {\n      // Use the first PlayableStream for now\n      // Later, we can use the others as fallback\n      this._attachedAdapter = this._playableAdapters[0];\n      this._attachedAdapter.attach(this._video);\n    }\n  }\n\n  _detachCurrentAdapter() {\n    if (this._attachedAdapter) {\n      this._attachedAdapter.detach(this._video);\n      this._attachedAdapter = null;\n    }\n  }\n\n  get attachedAdapter() {\n    return this._attachedAdapter;\n  }\n\n  connectAdapter(src) {\n    this._detachCurrentAdapter();\n    this._resolvePlayableAdapters(src);\n    this._connectAdapterToVideo();\n  }\n\n  destroy() {\n    this._detachCurrentAdapter();\n\n    delete this._attachedAdapter;\n    delete this._availableAdapters;\n    delete this._playableAdapters;\n\n    delete this._video;\n  }\n}\n","import playerAPI from '../../utils/player-api-decorator';\n\nimport StateEngine from './state-engine';\nimport NativeEventsBroadcaster from './native-events-broadcaster';\nimport AdapterStrategy from './adapters-strategy';\n\nimport {\n  isIPhone,\n  isIPod,\n  isIPad,\n  isAndroid,\n} from '../../utils/device-detection';\n\nimport { VIDEO_EVENTS, STATES } from '../../constants/index';\nimport { IPlaybackAdapter } from './adapters/types';\n\nexport { STATES };\n\nexport enum PreloadTypes {\n  NONE = 'none',\n  METADATA = 'metadata',\n  AUTO = 'auto',\n}\n\ninterface IMediaSource {\n  url: string;\n  type: string;\n}\n\nexport type MediaSource = string | IMediaSource | Array<string | IMediaSource>;\n\n/**\n * @property type - Name of current attached stream.\n * @property viewDimensions - Current size of view port provided by engine (right now - actual size of video tag)\n * @property url - Url of current source\n * @property currentTime - Current time of playback\n * @property duration - Duration of current video\n * @property loadingStateTimestamps - Object with time spend for different initial phases\n * @property bitrates - List of all available bitrates. Internal structure different for different type of streams\n * @property currentBitrate - Current bitrate. Internal structure different for different type of streams\n * @property overallBufferLength - Overall length of buffer\n * @property nearestBufferSegInfo - Object with start and end for current buffer segment\n */\ninterface DebugInfo {\n  type: 'HLS' | 'DASH' | 'MP4' | 'WEBM';\n  viewDimensions: Object;\n  url: string;\n  currentTime: number;\n  duration: number;\n  loadingStateTimestamps: Object;\n  bitrates: Array<Object>;\n  currentBitrate: Object;\n  overallBufferLength: number;\n  nearestBufferSegInfo: Object;\n}\n\n//TODO: Find source of problem with native HLS on Safari, when playing state triggered but actual playing is delayed\nexport default class Engine {\n  static moduleName = 'engine';\n  static dependencies = ['eventEmitter', 'config', 'availablePlaybackAdapters'];\n\n  private _eventEmitter;\n  private _currentSrc;\n  private _stateEngine;\n  private _video: HTMLVideoElement;\n  private _nativeEventsBroadcaster;\n  private _adapterStrategy;\n  private _playPromise: Promise<any>;\n  private _pauseRequested: boolean;\n\n  constructor({ eventEmitter, config, availablePlaybackAdapters = [] }) {\n    this._eventEmitter = eventEmitter;\n\n    this._currentSrc = null;\n\n    this._createVideoTag(config.videoElement);\n\n    this._stateEngine = new StateEngine(eventEmitter, this._video);\n    this._nativeEventsBroadcaster = new NativeEventsBroadcaster(\n      eventEmitter,\n      this._video,\n    );\n    this._adapterStrategy = new AdapterStrategy(\n      this._eventEmitter,\n      this._video,\n      availablePlaybackAdapters,\n    );\n\n    this._applyConfig(config);\n  }\n\n  _createVideoTag(videoElement?: HTMLVideoElement) {\n    if (videoElement && videoElement.tagName === 'VIDEO') {\n      this._video = videoElement;\n    } else {\n      this._video = document.createElement('video');\n    }\n\n    this._video.setAttribute('crossorigin', 'anonymous');\n  }\n\n  _applyConfig(config: any = {}) {\n    const { preload, autoPlay, loop, muted, volume, playInline, src } = config;\n\n    this.setPreload(preload);\n    this.setAutoPlay(autoPlay);\n    this.setLoop(loop);\n    this.setMute(muted);\n    this.setVolume(volume);\n    this.setPlayInline(playInline);\n\n    this.setSrc(src);\n  }\n\n  getNode() {\n    return this._video;\n  }\n\n  _getViewDimensions() {\n    return {\n      width: this._video.offsetWidth,\n      height: this._video.offsetHeight,\n    };\n  }\n\n  get isDynamicContent() {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isDynamicContent;\n  }\n\n  get isDynamicContentEnded() {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isDynamicContentEnded;\n  }\n\n  get isSeekAvailable() {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isSeekAvailable;\n  }\n\n  get isMetadataLoaded() {\n    return this._stateEngine.isMetadataLoaded;\n  }\n\n  get isPreloadAvailable() {\n    if (isIPad() || isIPhone() || isIPod() || isAndroid()) {\n      return false;\n    }\n\n    return this.getPreload() !== 'none';\n  }\n\n  get isAutoPlayAvailable() {\n    if (isIPad() || isIPhone() || isIPod() || isAndroid()) {\n      return false;\n    }\n\n    return this.getAutoPlay();\n  }\n\n  get isSyncWithLive(): boolean {\n    if (!this.attachedAdapter) {\n      return false;\n    }\n\n    return this.attachedAdapter.isSyncWithLive;\n  }\n\n  get attachedAdapter(): IPlaybackAdapter {\n    return this._adapterStrategy.attachedAdapter;\n  }\n\n  /**\n   * Method for setting source of video to player.\n   * @param src Array with multiple sources\n   * @example\n   * player.setSrc([\n   *   'https://my-url/video.mp4',\n   *   'https://my-url/video.webm',\n   *   'https://my-url/video.m3u8'\n   * ]);\n   * @note\n   * Read more about [video source](/video-source)\n   */\n  @playerAPI()\n  setSrc(src: string[]) {\n    if (src === this._currentSrc) {\n      return;\n    }\n\n    this._stateEngine.clearTimestamps();\n\n    this._currentSrc = src;\n    this._adapterStrategy.connectAdapter(this._currentSrc);\n\n    this._stateEngine.setState(STATES.SRC_SET);\n  }\n\n  /**\n   * Return current source of video\n   * @example\n   * player.getSrc(); // ['https://my-url/video.mp4']\n   */\n  @playerAPI()\n  getSrc(): string[] {\n    return this._currentSrc;\n  }\n\n  /**\n   * Method for starting playback of video\n   * @example\n   * player.play();\n   */\n  @playerAPI()\n  play() {\n    //Workaround for triggering functionality that requires user event pipe\n    this._eventEmitter.emit(VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED);\n\n    this._pauseRequested = false;\n\n    if (!this._playPromise) {\n      this._playPromise = this._video.play();\n      if (this._playPromise !== undefined) {\n        this._playPromise\n          .then(() => {\n            this._playPromise = null;\n\n            if (this._pauseRequested) {\n              this.pause();\n            }\n          })\n          .catch(event => {\n            this._eventEmitter.emit(VIDEO_EVENTS.PLAY_ABORTED, event);\n            this._playPromise = null;\n          });\n      }\n    }\n  }\n\n  /**\n   * Method for pausing playback of video\n   * @example\n   * player.pause();\n   */\n  @playerAPI()\n  pause() {\n    if (this._playPromise) {\n      this._pauseRequested = true;\n    } else {\n      this._video.pause();\n      this._pauseRequested = false;\n    }\n  }\n\n  /**\n   * Method for toggling(play\\pause) playback of video\n   * @example\n   * player.togglePlayback();\n   */\n  @playerAPI()\n  togglePlayback() {\n    if (this.isVideoPaused) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  /**\n   * High level status of video playback. Returns true if playback is paused.\n   * For more advance state use `getCurrentPlaybackState`\n   * @example\n   * player.play();\n   * console.log(player.isVideoPaused);\n   */\n  @playerAPI()\n  get isVideoPaused(): boolean {\n    return this._video.paused;\n  }\n\n  /**\n   * High level status of video playback. Returns true if playback is ended. Also note, that `isPaused` will return `true` if playback is ended also.\n   * For more advance state use `getCurrentPlaybackState`\n   * @example\n   * player.play();\n   * console.log(player.isVideoEnded);\n   */\n  @playerAPI()\n  get isVideoEnded(): boolean {\n    return this._video.ended;\n  }\n\n  /**\n   * Method for synchronize current playback with live point. Available only if you playing live source.\n   * @example\n   * player.syncWithLive();\n   */\n  @playerAPI()\n  syncWithLive() {\n    if (\n      this.attachedAdapter &&\n      this.attachedAdapter.isDynamicContent &&\n      !this.attachedAdapter.isDynamicContentEnded &&\n      !this.isSyncWithLive\n    ) {\n      this.setCurrentTime(this.attachedAdapter.syncWithLiveTime);\n\n      this.play();\n    }\n  }\n\n  /**\n   * Method for going forward in playback by your value\n   * @param sec - Value in seconds\n   * @example\n   * player.goForward(5);\n   */\n  @playerAPI()\n  goForward(sec: number) {\n    const duration = this.getDurationTime();\n\n    if (duration) {\n      const current = this.getCurrentTime();\n      this.setCurrentTime(Math.min(current + sec, duration));\n    }\n  }\n\n  /**\n   * Method for going backward in playback by your value\n   * @param sec - Value in seconds\n   * @example\n   * player.goBackward(5);\n   */\n  @playerAPI()\n  goBackward(sec: number) {\n    const duration = this.getDurationTime();\n\n    if (duration) {\n      const current = this.getCurrentTime();\n      this.setCurrentTime(Math.max(current - sec, 0));\n    }\n  }\n\n  /**\n   * Set volume\n   * @param volume - Volume value `0..100`\n   * @example\n   * player.setVolume(50);\n   */\n  @playerAPI()\n  setVolume(volume: number) {\n    const parsedVolume = Number(volume);\n    this._video.volume = isNaN(parsedVolume)\n      ? 1\n      : Math.max(0, Math.min(Number(volume) / 100, 1));\n  }\n\n  /**\n   * Get volume\n   * @example\n   * player.getVolume(); // 50\n   */\n  @playerAPI()\n  getVolume(): number {\n    return this._video.volume * 100;\n  }\n\n  /**\n   * Method for increasing current volume by value\n   * @param value - Value from 0 to 100\n   * @example\n   * player.increaseVolume(30);\n   */\n  @playerAPI()\n  increaseVolume(value: number) {\n    this.setVolume(this.getVolume() + value);\n  }\n\n  /**\n   * Method for decreasing current volume by value\n   * @param value - Value from 0 to 100\n   * @example\n   * player.decreaseVolume(30);\n   */\n  @playerAPI()\n  decreaseVolume(value: number) {\n    this.setVolume(this.getVolume() - value);\n  }\n\n  /**\n   * Mute or unmute the video\n   * @param isMuted - `true` to mute the video.\n   * @example\n   * player.setMute(true);\n   */\n  @playerAPI()\n  setMute(isMuted: boolean) {\n    this._video.muted = Boolean(isMuted);\n  }\n\n  /**\n   * Get mute flag\n   * @example\n   * player.getMute(); // true\n   */\n  @playerAPI()\n  getMute(): boolean {\n    return this._video.muted;\n  }\n\n  /**\n   * Set autoPlay flag\n   * @example\n   * player.setAutoPlay();\n   */\n  @playerAPI()\n  setAutoPlay(isAutoPlay: boolean) {\n    this._video.autoplay = Boolean(isAutoPlay);\n  }\n\n  /**\n   * Get autoPlay flag\n   * @example\n   * player.getAutoPlay(); // true\n   */\n  @playerAPI()\n  getAutoPlay(): boolean {\n    return this._video.autoplay;\n  }\n\n  /**\n   * Set loop flag\n   * @param isLoop - If `true` video will be played again after it will finish\n   * @example\n   * player.setLoop(true);\n   */\n  @playerAPI()\n  setLoop(isLoop: boolean) {\n    this._video.loop = Boolean(isLoop);\n  }\n\n  /**\n   * Get loop flag\n   * @example\n   * player.getLoop(); // true\n   */\n  @playerAPI()\n  getLoop(): boolean {\n    return this._video.loop;\n  }\n\n  /**\n   * Method for setting playback rate\n   */\n  @playerAPI()\n  setPlaybackRate(rate: number) {\n    this._video.playbackRate = rate;\n  }\n\n  /**\n   * Return current playback rate\n   */\n  @playerAPI()\n  getPlaybackRate(): number {\n    return this._video.playbackRate;\n  }\n\n  /**\n   * Set preload type\n   * @example\n   * player.setPreload('none');\n   */\n  @playerAPI()\n  setPreload(preload: 'auto' | 'metadata' | 'none') {\n    this._video.preload = preload || 'auto';\n  }\n\n  /**\n   * Return preload type\n   * @example\n   * player.getPreload(); // none\n   */\n  @playerAPI()\n  getPreload(): string {\n    return this._video.preload;\n  }\n\n  /**\n   * Return current time of video playback\n   * @example\n   * player.getCurrentTime(); //  60.139683\n   */\n  @playerAPI()\n  getCurrentTime(): number {\n    return this._video.currentTime;\n  }\n\n  /**\n   * Method for seeking to time in video\n   * @param time - Time in seconds\n   * @example\n   * player.goTo(34);\n   */\n  @playerAPI('goTo')\n  setCurrentTime(time: number) {\n    this._video.currentTime = time;\n  }\n\n  /**\n   * Return duration of video\n   * @example\n   * player.getDurationTime(); // 180.149745\n   */\n  @playerAPI()\n  getDurationTime(): number {\n    return this._video.duration || 0;\n  }\n\n  /**\n   * Return real width of video from metadata\n   * @example\n   * player.getVideoWidth(); // 400\n   */\n  @playerAPI('getVideoRealWidth')\n  getVideoWidth(): number {\n    return this._video.videoWidth;\n  }\n\n  /**\n   * Return real height of video from metadata\n   * @example\n   * player.getVideoHeight(); // 225\n   */\n  @playerAPI('getVideoRealHeight')\n  getVideoHeight(): number {\n    return this._video.videoHeight;\n  }\n\n  getBuffered() {\n    return this._video.buffered;\n  }\n\n  /**\n   * Set playInline flag\n   * @param isPlayInline - If `false` - video will be played in full screen, `true` - inline\n   * @example\n   * player.setPlayInline(true);\n   */\n  @playerAPI()\n  setPlayInline(isPlayInline: boolean) {\n    if (isPlayInline) {\n      this._video.setAttribute('playsInline', String(isPlayInline));\n    }\n  }\n\n  /**\n   * Get playInline flag\n   * @example\n   * player.getPlayInline(); // true\n   */\n  @playerAPI()\n  getPlayInline(): boolean {\n    return this._video.getAttribute('playsInline') === 'true';\n  }\n\n  /**\n   * Return current state of playback\n   */\n  @playerAPI('getCurrentPlaybackState')\n  getCurrentState() {\n    return this._stateEngine.getState();\n  }\n\n  /**\n   * Return object with internal debug info\n   *\n   * @example\n   * player.getDebugInfo();\n   *\n   * @note\n   * The above command returns JSON structured like this:\n   *\n   * @example\n   * {\n   *   \"type\": \"HLS\",\n   *   \"viewDimensions\": {\n   *     \"width\": 700,\n   *     \"height\": 394\n   *   }\n   *   \"url\": \"https://example.com/video.m3u8\",\n   *   \"currentTime\": 22.092514,\n   *   \"duration\": 60.139683,\n   *   \"loadingStateTimestamps\": {\n   *     \"metadata-loaded\": 76,\n   *     \"ready-to-play\": 67\n   *   },\n   *   \"bitrates\": [\n   *     // Different for different type of streams\n   *     { ... },\n   *     { ... }\n   *   ],\n   *   \"currentBitrate\": { ... },\n   *   \"overallBufferLength\": 60.139683,\n   *   \"nearestBufferSegInfo\": {\n   *     \"start\": 0,\n   *     \"end\": 60.139683\n   *   }\n   * }\n   */\n  @playerAPI()\n  getDebugInfo(): DebugInfo {\n    const { duration, currentTime } = this._video;\n    let data;\n\n    if (this._adapterStrategy.attachedAdapter) {\n      data = this._adapterStrategy.attachedAdapter.debugInfo;\n    }\n\n    return {\n      ...data,\n      viewDimensions: this._getViewDimensions(),\n      currentTime,\n      duration,\n      loadingStateTimestamps: this._stateEngine.getStateTimestamps(),\n    };\n  }\n\n  destroy() {\n    this._stateEngine.destroy();\n    this._nativeEventsBroadcaster.destroy();\n    this._adapterStrategy.destroy();\n    this._video.parentNode && this._video.parentNode.removeChild(this._video);\n\n    delete this._stateEngine;\n    delete this._nativeEventsBroadcaster;\n    delete this._adapterStrategy;\n    delete this._eventEmitter;\n    delete this._video;\n  }\n}\n","const SHORTHAND_HEX_COLOR_PATTERN = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\nconst HEX_COLOR_PATTERN = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n\ntype IRGB = {\n  r: number;\n  g: number;\n  b: number;\n};\n\nfunction hexToRgb(hex: string): IRGB {\n  hex = hex.replace(\n    SHORTHAND_HEX_COLOR_PATTERN,\n    (_, r, g, b) => r + r + g + g + b + b,\n  );\n\n  const result = hex.match(HEX_COLOR_PATTERN);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n}\n\nexport default hexToRgb;\n","import hexToRgb from './hexToRgb';\n\nfunction transperentizeColor(color, alpha) {\n  const { r, g, b } = hexToRgb(color);\n  return `rgba(${r},${g},${b},${alpha})`;\n}\n\nexport default transperentizeColor;\n","function camelToKebab(string: string): string {\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\nexport default camelToKebab;\n","import camelToKebab from './camelToKebab';\n\nconst generatedIds: Map<string, number> = new Map();\n\nfunction getUniquePostfix(className): string {\n  if (generatedIds.has(className)) {\n    const newID: number = generatedIds.get(className) + 1;\n    generatedIds.set(className, newID);\n\n    return `${newID}`;\n  }\n\n  generatedIds.set(className, 0);\n  return '';\n}\n\nfunction getUniqueId(classImportName: string): string {\n  const kebabName: string = camelToKebab(classImportName);\n\n  return `${kebabName}${getUniquePostfix(kebabName)}`;\n}\n\nexport default getUniqueId;\n","import getUniqueId from './getUniqueId';\n\nimport { IStyles } from '../../types';\nimport { ICSSRules } from '../types';\n\nfunction getUniqueClassName(classImportName: string) {\n  return `wix-playable--${getUniqueId(classImportName)}`;\n}\n\nfunction generateClassNames(rules: ICSSRules): IStyles {\n  return Object.keys(rules).reduce(\n    (acc, classImportName) => ({\n      ...acc,\n      [classImportName]: getUniqueClassName(classImportName),\n    }),\n    {},\n  );\n}\n\nexport default generateClassNames;\n","import camelToKebab from './utils/camelToKebab';\nimport generateClassNames from './utils/generateClassNames';\n\nimport { IStyles } from '../types';\nimport { ICSSRuleFunction, ICSSRules, ICSSRule } from './types';\n\nexport class StyleSheet {\n  private _rulesByModule: Map<object, ICSSRules> = new Map();\n  private _classNamesByModule: Map<object, IStyles> = new Map();\n  private _data: any = {};\n  private _styleNode: Element;\n\n  attach() {\n    this._styleNode = this._styleNode || document.createElement('style');\n\n    const discoveredStyles = [];\n    this._rulesByModule.forEach((_, module) => {\n      discoveredStyles.push(this._getModuleCSS(module));\n    });\n\n    this._styleNode.innerHTML = discoveredStyles.join(' ');\n\n    document.getElementsByTagName('head')[0].appendChild(this._styleNode);\n  }\n\n  update(data: any) {\n    this._data = {\n      ...this._data,\n      ...data,\n    };\n\n    if (this._styleNode) {\n      this.attach();\n    }\n  }\n\n  registerModuleTheme(module: object, rules: ICSSRules) {\n    //todo maybe we would like to update overrides for module? Or at least show warning instead of Error\n    if (this._rulesByModule.get(module)) {\n      throw new Error('can`t register multiple themes for one module');\n    }\n\n    this._rulesByModule.set(module, rules);\n    this._classNamesByModule.set(module, generateClassNames(rules));\n  }\n\n  getModuleClassNames(module): IStyles {\n    return this._classNamesByModule.get(module);\n  }\n\n  private _getModuleCSS(module): string {\n    const moduleRules = this._rulesByModule.get(module);\n    const moduleClassNames = this._classNamesByModule.get(module);\n\n    if (!moduleRules || !moduleClassNames) {\n      return '';\n    }\n\n    return Object.keys(moduleRules)\n      .map(classImportName =>\n        this._getRuleCSS(\n          moduleRules[classImportName],\n          moduleClassNames[classImportName],\n        ),\n      )\n      .join(' ');\n  }\n\n  private _getRuleCSS(rule: ICSSRule, ruleClassName: string): string {\n    if (!rule || !ruleClassName) {\n      return '';\n    }\n\n    const complexRuleNames = Object.keys(rule)\n      .filter(ruleName => typeof rule[ruleName] === 'object')\n      .map(\n        ruleName => (ruleName.indexOf('&') !== -1 ? ruleName : `& ${ruleName}`),\n      );\n\n    const complexRules = complexRuleNames\n      .map(ruleName => {\n        const selector = ruleName.replace(/&/g, `.${ruleClassName}`);\n        //don't want to allow deep nesting now, maybe later\n        return `${selector} {${this._getRuleStyles(rule[ruleName])}}`;\n      })\n      .join(' ');\n\n    return `.${ruleClassName} {${this._getRuleStyles(rule)}} ${complexRules}`;\n  }\n\n  private _getRuleStyles(rule) {\n    const simpleRuleNames: Array<string> = Object.keys(rule).filter(\n      ruleName => typeof rule[ruleName] !== 'object',\n    );\n\n    return simpleRuleNames\n      .map(\n        ruleName =>\n          `${camelToKebab(ruleName)}: ${\n            typeof rule[ruleName] === 'function'\n              ? (rule[ruleName] as ICSSRuleFunction)(this._data)\n              : rule[ruleName]\n          }`,\n      )\n      .join('; ');\n  }\n}\n","import { StyleSheet } from './style-sheet';\n\nimport playerAPI from '../../../../utils/player-api-decorator';\n\nimport { IStyles } from '../types';\nimport { ICSSRules, IThemeConfig } from './types';\n\nconst DEFAULT_THEME_CONFIG = {\n  color: '#FFF',\n  liveColor: '#ea492e',\n  progressColor: '#FFF',\n};\n\ninterface IThemeService {\n  updateTheme(IThemeConfig): void;\n  registerModuleTheme(module: object, rules: ICSSRules): void;\n  get(module: object): IStyles;\n  destroy(): void;\n}\n\nclass ThemeService implements IThemeService {\n  static moduleName = 'theme';\n  static dependencies = ['themeConfig'];\n\n  private _styleSheet: StyleSheet;\n\n  constructor({ themeConfig }) {\n    this._styleSheet = new StyleSheet();\n\n    this._styleSheet.update({\n      ...DEFAULT_THEME_CONFIG,\n      ...themeConfig,\n    });\n\n    // setTimeout here is for calling `attach` after all modules resolved.\n    setTimeout(() => {\n      this._styleSheet && this._styleSheet.attach();\n    }, 0);\n  }\n\n  /**\n   * Method for setting theme for player instance\n   *\n   * @example\n   * player.updateTheme({\n   *   progressColor: \"#AEAD22\"\n   * })\n   * @note\n   *\n   * You can check info about theming [here](/themes)\n   *\n   * @param themeConfig - Theme config\n   *\n   */\n  @playerAPI()\n  updateTheme(themeConfig: IThemeConfig) {\n    this._styleSheet.update(themeConfig);\n  }\n\n  registerModuleTheme(module: object, rules: ICSSRules) {\n    this._styleSheet.registerModuleTheme(module, rules);\n  }\n\n  get(module) {\n    return this._styleSheet.getModuleClassNames(module);\n  }\n\n  destroy() {\n    delete this._styleSheet;\n  }\n}\n\nexport { DEFAULT_THEME_CONFIG, IThemeService };\n\nexport default ThemeService;\n","import { TEXT_LABELS } from '../../constants';\n\nconst map = {\n  [TEXT_LABELS.LOGO_LABEL]: 'Watch On Site',\n  [TEXT_LABELS.LOGO_TOOLTIP]: 'Watch On Site',\n  [TEXT_LABELS.LIVE_INDICATOR_TEXT]: ({ isEnded }) =>\n    !isEnded ? 'Live' : 'Live Ended',\n  [TEXT_LABELS.LIVE_SYNC_LABEL]: 'Sync to Live',\n  [TEXT_LABELS.LIVE_SYNC_TOOLTIP]: 'Sync to Live',\n  [TEXT_LABELS.PAUSE_CONTROL_LABEL]: 'Pause',\n  [TEXT_LABELS.PLAY_CONTROL_LABEL]: 'Play',\n  [TEXT_LABELS.PROGRESS_CONTROL_LABEL]: 'Progress control',\n  [TEXT_LABELS.PROGRESS_CONTROL_VALUE]: ({ percent }) =>\n    `Already played ${percent}%`,\n  [TEXT_LABELS.MUTE_CONTROL_LABEL]: 'Mute',\n  [TEXT_LABELS.MUTE_CONTROL_TOOLTIP]: 'Mute',\n  [TEXT_LABELS.UNMUTE_CONTROL_LABEL]: 'Unmute',\n  [TEXT_LABELS.UNMUTE_CONTROL_TOOLTIP]: 'Unmute',\n  [TEXT_LABELS.VOLUME_CONTROL_LABEL]: 'Volume control',\n  [TEXT_LABELS.VOLUME_CONTROL_VALUE]: ({ volume }) => `Volume is ${volume}%`,\n  [TEXT_LABELS.ENTER_FULL_SCREEN_LABEL]: 'Enter full screen mode',\n  [TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP]: 'Enter full screen mode',\n  [TEXT_LABELS.EXIT_FULL_SCREEN_LABEL]: 'Exit full screen mode',\n  [TEXT_LABELS.EXIT_FULL_SCREEN_TOOLTIP]: 'Exit full screen mode',\n};\n\nexport default map;\n","import DEFAULT_TEXTS from './default-texts';\n\nexport interface ITextMapConfig {\n  [index: string]: string | Function;\n}\n\nexport default class TextMap {\n  static moduleName = 'textMap';\n  static dependencies = ['config'];\n\n  private _textMap;\n\n  constructor({ config }) {\n    this._textMap = {\n      ...DEFAULT_TEXTS,\n      ...config.texts,\n    };\n  }\n\n  get(id, args) {\n    if (!this._textMap) {\n      return;\n    }\n\n    const text = this._textMap[id];\n\n    if (typeof text === 'function') {\n      return text(args);\n    }\n\n    return text;\n  }\n\n  destroy() {\n    delete this._textMap;\n  }\n}\n","const fnMap = [\n  [\n    'requestFullscreen',\n    'exitFullscreen',\n    'fullscreenElement',\n    'fullscreenEnabled',\n    'fullscreenchange',\n    'fullscreenerror',\n  ],\n  // new WebKit\n  [\n    'webkitRequestFullscreen',\n    'webkitExitFullscreen',\n    'webkitFullscreenElement',\n    'webkitFullscreenEnabled',\n    'webkitfullscreenchange',\n    'webkitfullscreenerror',\n  ],\n  // old WebKit (Safari 5.1)\n  [\n    'webkitRequestFullScreen',\n    'webkitCancelFullScreen',\n    'webkitCurrentFullScreenElement',\n    'webkitCancelFullScreen',\n    'webkitfullscreenchange',\n    'webkitfullscreenerror',\n  ],\n  [\n    'mozRequestFullScreen',\n    'mozCancelFullScreen',\n    'mozFullScreenElement',\n    'mozFullScreenEnabled',\n    'mozfullscreenchange',\n    'mozfullscreenerror',\n  ],\n  [\n    'msRequestFullscreen',\n    'msExitFullscreen',\n    'msFullscreenElement',\n    'msFullscreenEnabled',\n    'MSFullscreenChange',\n    'MSFullscreenError',\n  ],\n];\n\n/* ignore coverage */\nfunction getFullScreenFn() {\n  const ret = {};\n\n  for (let i = 0; i < fnMap.length; i += 1) {\n    if (fnMap[i][1] in document) {\n      for (let j = 0; j < fnMap[i].length; j += 1) {\n        ret[fnMap[0][j]] = fnMap[i][j];\n      }\n      return ret;\n    }\n  }\n\n  return false;\n}\n\nexport default class DesktopFullScreen {\n  private _elem;\n  private _callback;\n  private _fullscreenFn;\n\n  constructor(elem, callback) {\n    this._elem = elem;\n    this._callback = callback;\n    this._fullscreenFn = getFullScreenFn();\n\n    this._bindEvents();\n  }\n\n  get isAPIExist() {\n    return Boolean(this._fullscreenFn);\n  }\n\n  get isInFullScreen() {\n    return Boolean(document[this._fullscreenFn.fullscreenElement]);\n  }\n\n  get isEnabled() {\n    return this.isAPIExist && document[this._fullscreenFn.fullscreenEnabled];\n  }\n\n  _bindEvents() {\n    document.addEventListener(\n      this._fullscreenFn.fullscreenchange,\n      this._callback,\n    );\n  }\n\n  _unbindEvents() {\n    document.removeEventListener(\n      this._fullscreenFn.fullscreenchange,\n      this._callback,\n    );\n  }\n\n  request() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    const request = this._fullscreenFn.requestFullscreen;\n\n    // Work around Safari 5.1 bug: reports support for\n    // keyboard in fullscreen even though it doesn't.\n    // Browser sniffing, since the alternative with\n    // setTimeout is even worse.\n\n    if (/5\\.1[.\\d]* Safari/.test(navigator.userAgent)) {\n      this._elem[request]();\n    } else {\n      this._elem[request]((Element as any).ALLOW_KEYBOARD_INPUT);\n    }\n  }\n\n  exit() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    document[this._fullscreenFn.exitFullscreen]();\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    delete this._elem;\n    delete this._callback;\n  }\n}\n","const HAVE_METADATA = 1;\n\nlet isFullScreenRequested = false;\n\nexport default class IOSFullScreen {\n  private _elem;\n  private _callback;\n\n  constructor(elem, callback) {\n    this._elem = elem;\n    this._callback = callback;\n\n    this._bindEvents();\n\n    this._enterWhenHasMetaData = this._enterWhenHasMetaData.bind(this);\n  }\n\n  get isAPIExist() {\n    return Boolean(this._elem && this._elem.webkitSupportsFullscreen);\n  }\n\n  get isInFullScreen() {\n    return Boolean(this._elem && this._elem.webkitDisplayingFullscreen);\n  }\n\n  get isEnabled() {\n    return this.isAPIExist;\n  }\n\n  _bindEvents() {\n    this._elem.addEventListener('webkitbeginfullscreen', this._callback);\n    this._elem.addEventListener('webkitendfullscreen', this._callback);\n  }\n\n  _unbindEvents() {\n    this._elem.removeEventListener('webkitbeginfullscreen', this._callback);\n    this._elem.removeEventListener('webkitendfullscreen', this._callback);\n\n    this._elem.removeEventListener(\n      'loadedmetadata',\n      this._enterWhenHasMetaData,\n    );\n  }\n\n  _enterWhenHasMetaData() {\n    this._elem.removeEventListener(\n      'loadedmetadata',\n      this._enterWhenHasMetaData,\n    );\n\n    isFullScreenRequested = false;\n\n    this._elem.webkitEnterFullscreen();\n  }\n\n  request() {\n    if (!this.isEnabled || this.isInFullScreen) {\n      return false;\n    }\n\n    try {\n      this._elem.webkitEnterFullscreen();\n    } catch (e) {\n      if (this._elem.readyState < HAVE_METADATA) {\n        if (isFullScreenRequested) {\n          return;\n        }\n        this._elem.addEventListener(\n          'loadedmetadata',\n          this._enterWhenHasMetaData,\n        );\n        isFullScreenRequested = true;\n      }\n    }\n  }\n\n  exit() {\n    if (!this.isEnabled || !this.isInFullScreen) {\n      return false;\n    }\n\n    this._elem.webkitExitFullscreen();\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    delete this._elem;\n    delete this._callback;\n  }\n}\n","import { isIOS } from '../../utils/device-detection';\nimport playerAPI from '../../utils/player-api-decorator';\nimport DesktopFullScreen from './desktop';\nimport IOSFullScreen from './ios';\n\nimport { VIDEO_EVENTS, UI_EVENTS, STATES } from '../../constants/index';\n\nexport interface IFullScreenConfig {\n  exitFullScreenOnEnd?: boolean;\n  enterFullScreenOnPlay?: boolean;\n  exitFullScreenOnPause?: boolean;\n  pauseVideoOnFullScreenExit?: boolean;\n}\n\nconst DEFAULT_CONFIG: IFullScreenConfig = {\n  exitFullScreenOnEnd: true,\n  enterFullScreenOnPlay: false,\n  exitFullScreenOnPause: false,\n  pauseVideoOnFullScreenExit: false,\n};\n\nexport default class FullScreenManager {\n  static moduleName = 'fullScreenManager';\n  static dependencies = ['eventEmitter', 'engine', 'rootContainer', 'config'];\n\n  private _eventEmitter;\n  private _engine;\n  private _helper;\n\n  private _exitFullScreenOnEnd: boolean = false;\n  private _enterFullScreenOnPlay: boolean = false;\n  private _exitFullScreenOnPause: boolean = false;\n  private _pauseVideoOnFullScreenExit: boolean = false;\n\n  private _isEnabled: boolean;\n\n  constructor({ eventEmitter, engine, rootContainer, config }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n\n    if (config.fullScreen === false) {\n      this._isEnabled = false;\n    } else {\n      this._isEnabled = true;\n      const _config: IFullScreenConfig = {\n        ...DEFAULT_CONFIG,\n        ...config.fullScreen,\n      };\n\n      this._exitFullScreenOnEnd = _config.exitFullScreenOnEnd;\n      this._enterFullScreenOnPlay = _config.enterFullScreenOnPlay;\n      this._exitFullScreenOnPause = _config.exitFullScreenOnPause;\n      this._pauseVideoOnFullScreenExit = _config.pauseVideoOnFullScreenExit;\n    }\n    this._onChange = this._onChange.bind(this);\n\n    if (isIOS()) {\n      this._helper = new IOSFullScreen(this._engine.getNode(), this._onChange);\n    } else {\n      this._helper = new DesktopFullScreen(rootContainer.node, this._onChange);\n    }\n\n    this._bindEvents();\n  }\n\n  _onChange() {\n    if (!this._helper.isInFullScreen && this._pauseVideoOnFullScreenExit) {\n      this._engine.pause();\n    }\n    this._eventEmitter.emit(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this._helper.isInFullScreen,\n    );\n  }\n\n  _bindEvents() {\n    this._eventEmitter.on(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._processNextStateFromEngine,\n      this,\n    );\n    this._eventEmitter.on(\n      VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED,\n      this._enterOnPlayRequested,\n      this,\n    );\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._processNextStateFromEngine,\n      this,\n    );\n    this._eventEmitter.off(\n      VIDEO_EVENTS.PLAY_REQUEST_TRIGGERED,\n      this._enterOnPlayRequested,\n      this,\n    );\n  }\n\n  _exitOnEnd() {\n    if (this._exitFullScreenOnEnd && this.isInFullScreen) {\n      this.exitFullScreen();\n    }\n  }\n\n  _enterOnPlayRequested() {\n    if (this._enterFullScreenOnPlay && !this.isInFullScreen) {\n      this.enterFullScreen();\n    }\n  }\n\n  _exitOnPauseRequested() {\n    if (this._exitFullScreenOnPause && this.isInFullScreen) {\n      this.exitFullScreen();\n    }\n  }\n\n  _processNextStateFromEngine({ nextState }) {\n    switch (nextState) {\n      case STATES.ENDED: {\n        this._exitOnEnd();\n        break;\n      }\n      case STATES.PAUSED: {\n        this._exitOnPauseRequested();\n        break;\n      }\n\n      /* ignore coverage */\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Player would try to enter fullscreen mode.\n   * Behavior of fullscreen mode on different platforms may differ.\n   * @example\n   * player.enterFullScreen();\n   */\n  @playerAPI()\n  enterFullScreen() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    this._helper.request();\n  }\n\n  /**\n   * Player would try to exit fullscreen mode.\n   * @example\n   * player.exitFullScreen();\n   */\n  @playerAPI()\n  exitFullScreen() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    this._helper.exit();\n  }\n\n  /**\n   * Return true if player is in full screen\n   * @example\n   * console.log(player.isInFullScreen); // false\n   */\n  @playerAPI()\n  get isInFullScreen(): boolean {\n    if (!this.isEnabled) {\n      return false;\n    }\n\n    return this._helper.isInFullScreen;\n  }\n\n  get isEnabled() {\n    return this._helper.isEnabled && this._isEnabled;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._helper.destroy();\n\n    delete this._eventEmitter;\n    delete this._engine;\n  }\n}\n","import { STATES, VIDEO_EVENTS, LiveState, UI_EVENTS } from '../../constants';\nimport Engine from './playback-engine';\n\nconst SEEK_BY_UI_EVENTS = [\n  UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,\n  UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n  UI_EVENTS.PROGRESS_CHANGE_TRIGGERED,\n];\n\nclass LiveStateEngine {\n  static moduleName = 'liveStateEngine';\n  static dependencies = ['eventEmitter', 'engine'];\n\n  private _eventEmitter;\n  private _engine: Engine;\n  private _state: LiveState;\n\n  private _isSeekedByUIWhilePlaying: boolean;\n\n  constructor({ eventEmitter, engine }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._state = LiveState.NONE;\n\n    this._isSeekedByUIWhilePlaying = null;\n\n    this._bindEvents();\n  }\n\n  getState(): LiveState {\n    return this._state;\n  }\n\n  private _bindEvents() {\n    this._eventEmitter.on(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._processStateChange,\n      this,\n    );\n\n    SEEK_BY_UI_EVENTS.forEach(event => {\n      this._eventEmitter.on(event, this._processSeekByUI, this);\n    });\n\n    this._eventEmitter.on(\n      VIDEO_EVENTS.DYNAMIC_CONTENT_ENDED,\n      this._onDynamicContentEnded,\n      this,\n    );\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._processStateChange,\n      this,\n    );\n\n    SEEK_BY_UI_EVENTS.forEach(event => {\n      this._eventEmitter.on(event, this._processSeekByUI, this);\n    });\n  }\n\n  private _processStateChange({ prevState, nextState }) {\n    if (nextState === STATES.SRC_SET) {\n      this._setState(LiveState.NONE);\n      return;\n    }\n\n    if (!this._engine.isDynamicContent || this._engine.isDynamicContentEnded) {\n      return;\n    }\n\n    switch (nextState) {\n      case STATES.METADATA_LOADED:\n        this._setState(LiveState.INITIAL);\n        break;\n\n      case STATES.PLAY_REQUESTED:\n        if (this._state === LiveState.INITIAL) {\n          this._engine.syncWithLive();\n        }\n        break;\n\n      case STATES.PLAYING:\n        // NOTE: skip PLAYING event after events like `WAITING` and other not important events.\n        if (\n          this._state === LiveState.INITIAL ||\n          this._state === LiveState.NOT_SYNC ||\n          this._isSeekedByUIWhilePlaying\n        ) {\n          this._setState(\n            this._engine.isSyncWithLive ? LiveState.SYNC : LiveState.NOT_SYNC,\n          );\n          this._isSeekedByUIWhilePlaying = false;\n        }\n        break;\n\n      case STATES.PAUSED:\n        // NOTE: process `PAUSED` event only `PLAYING`, to be sure its not related with `WAITING` events\n        if (prevState === STATES.PLAYING) {\n          this._setState(LiveState.NOT_SYNC);\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _processSeekByUI() {\n    if (\n      this._engine.isDynamicContent &&\n      this._engine.getCurrentState() === STATES.PLAYING\n    ) {\n      // NOTE: flag should be handled on `PLAYING` state in `_processStateChange`\n      this._isSeekedByUIWhilePlaying = true;\n    }\n  }\n\n  private _onDynamicContentEnded() {\n    this._setState(LiveState.ENDED);\n  }\n\n  private _setState(state) {\n    if (this._state !== state) {\n      const prevState = this._state;\n      const nextState = state;\n\n      this._state = state;\n      this._eventEmitter.emit(VIDEO_EVENTS.LIVE_STATE_CHANGED, {\n        prevState,\n        nextState,\n      });\n    }\n  }\n\n  destroy() {\n    this._eventEmitter = null;\n    this._engine = null;\n    this._state = null;\n  }\n}\n\nexport default LiveStateEngine;\n","export const KEYCODES = {\n  SPACE_BAR: 32,\n  ENTER: 13,\n  TAB: 9,\n  LEFT_ARROW: 37,\n  RIGHT_ARROW: 39,\n  UP_ARROW: 38,\n  DOWN_ARROW: 40,\n  DEBUG_KEY: 68,\n};\n\nexport default class KeyboardInterceptorCore {\n  private config;\n\n  constructor(config) {\n    this.config = config;\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  _bindCallbacks() {\n    this._processKeyboardInput = this._processKeyboardInput.bind(this);\n  }\n\n  _bindEvents() {\n    this.config.node.addEventListener(\n      'keydown',\n      this._processKeyboardInput,\n      false,\n    );\n  }\n\n  _unbindEvents() {\n    this.config.node.removeEventListener(\n      'keydown',\n      this._processKeyboardInput,\n      false,\n    );\n  }\n\n  _processKeyboardInput(e) {\n    if (this.config.callbacks[e.keyCode]) {\n      this.config.callbacks[e.keyCode](e);\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    delete this.config;\n  }\n}\n","import { UI_EVENTS } from '../../constants/index';\nimport {\n  isIPhone,\n  isIPod,\n  isIPad,\n  isAndroid,\n} from '../../utils/device-detection';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../utils/keyboard-interceptor';\n\nexport const AMOUNT_TO_SKIP_SECONDS = 5;\nexport const AMOUNT_TO_CHANGE_VOLUME = 10;\n\nexport default class KeyboardControl {\n  static moduleName = 'keyboardControl';\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'rootContainer',\n    'config',\n    'debugPanel',\n  ];\n\n  private _isEnabled;\n  private _eventEmitter;\n  private _engine;\n  private _debugPanel;\n  private _rootNode;\n  private _keyboardInterceptor;\n\n  constructor({ config, eventEmitter, rootContainer, engine, debugPanel }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._debugPanel = debugPanel;\n    this._rootNode = rootContainer.node;\n\n    if (isIPhone() || isIPod() || isIPad() || isAndroid()) {\n      this._isEnabled = false;\n    } else {\n      this._isEnabled = config.disableControlWithKeyboard !== false;\n    }\n\n    this.initInterceptor();\n  }\n\n  initInterceptor() {\n    if (this._isEnabled) {\n      this._keyboardInterceptor = new KeyboardInterceptor({\n        node: this._rootNode,\n        callbacks: {\n          [KEYCODES.DEBUG_KEY]: e => {\n            if (e.ctrlKey && e.shiftKey) {\n              this._debugPanel.show();\n            }\n          },\n          [KEYCODES.TAB]: () => {\n            this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          },\n          [KEYCODES.SPACE_BAR]: e => {\n            e.preventDefault();\n            this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n            this._eventEmitter.emit(\n              UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n            );\n            this._engine.togglePlayback();\n          },\n          [KEYCODES.LEFT_ARROW]: e => {\n            if (this._engine.isSeekAvailable) {\n              e.preventDefault();\n              this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n              this._eventEmitter.emit(\n                UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n              );\n              this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n            }\n          },\n          [KEYCODES.RIGHT_ARROW]: e => {\n            if (this._engine.isSeekAvailable) {\n              e.preventDefault();\n              this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n              this._eventEmitter.emit(\n                UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,\n              );\n              this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n            }\n          },\n          [KEYCODES.UP_ARROW]: e => {\n            e.preventDefault();\n            this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n            this._eventEmitter.emit(\n              UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n            );\n            this._engine.increaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n          },\n          [KEYCODES.DOWN_ARROW]: e => {\n            e.preventDefault();\n            this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n            this._eventEmitter.emit(\n              UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n            );\n            this._engine.decreaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n          },\n        },\n      });\n    }\n  }\n\n  destroyInterceptor() {\n    if (this._keyboardInterceptor) {\n      this._keyboardInterceptor.destroy();\n    }\n  }\n\n  destroy() {\n    this.destroyInterceptor();\n\n    delete this._rootNode;\n    delete this._eventEmitter;\n    delete this._engine;\n    delete this._debugPanel;\n  }\n}\n","import { UI_EVENTS } from '../../constants/index';\n\nexport default class MouseInterceptor {\n  static moduleName = 'mouseInterceptor';\n  static dependencies = ['eventEmitter', 'rootContainer'];\n\n  private _eventEmitter;\n  private _rootNode;\n\n  constructor({ eventEmitter, rootContainer }) {\n    this._eventEmitter = eventEmitter;\n    this._rootNode = rootContainer.node;\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  _bindCallbacks() {\n    this._broadcastMouseEnter = this._broadcastMouseEnter.bind(this);\n    this._broadcastMouseMove = this._broadcastMouseMove.bind(this);\n    this._broadcastMouseLeave = this._broadcastMouseLeave.bind(this);\n  }\n\n  _bindEvents() {\n    this._rootNode.addEventListener('mouseenter', this._broadcastMouseEnter);\n    this._rootNode.addEventListener('mousemove', this._broadcastMouseMove);\n    this._rootNode.addEventListener('mouseleave', this._broadcastMouseLeave);\n  }\n\n  _unbindEvents() {\n    this._rootNode.removeEventListener('mouseenter', this._broadcastMouseEnter);\n    this._rootNode.removeEventListener('mousemove', this._broadcastMouseMove);\n    this._rootNode.removeEventListener('mouseleave', this._broadcastMouseLeave);\n  }\n\n  _broadcastMouseEnter() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_ENTER_ON_PLAYER_TRIGGERED);\n  }\n\n  _broadcastMouseMove() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED);\n  }\n\n  _broadcastMouseLeave() {\n    this._eventEmitter.emit(UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED);\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    delete this._rootNode;\n    delete this._eventEmitter;\n  }\n}\n","function getElementByHook(element: HTMLElement, hook: string): HTMLElement {\n  return element.querySelector(`[data-hook=\"${hook}\"]`);\n}\n\nexport default getElementByHook;\n","function toggleNodeClass(\n  node: HTMLElement,\n  className: string,\n  shouldAdd: boolean,\n) {\n  if (shouldAdd) {\n    node.classList.add(className);\n  } else {\n    node.classList.remove(className);\n  }\n}\n\nexport default toggleNodeClass;\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { debugPanelTemplate } from './templates';\n\nimport syntaxHighlight from './syntaxHighlight';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  IDebugPanelViewStyles,\n  IDebugPanelViewCallbacks,\n  IDebugPanelViewConfig,\n} from './types';\n\nimport styles from './debug-panel.scss';\n\nclass DebugPanelView extends View<IDebugPanelViewStyles>\n  implements IView<IDebugPanelViewStyles> {\n  private _callbacks: IDebugPanelViewCallbacks;\n\n  private _$node: HTMLElement;\n  private _$infoContainer: HTMLElement;\n  private _$closeButton: HTMLElement;\n\n  constructor(config: IDebugPanelViewConfig) {\n    super();\n    const { callbacks } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      debugPanelTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._$closeButton = getElementByHook(\n      this._$node,\n      'debug-panel-close-button',\n    );\n    this._$infoContainer = getElementByHook(\n      this._$node,\n      'debug-panel-info-container',\n    );\n  }\n\n  private _bindEvents() {\n    this._$closeButton.addEventListener(\n      'click',\n      this._callbacks.onCloseButtonClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$closeButton.removeEventListener(\n      'click',\n      this._callbacks.onCloseButtonClick,\n    );\n  }\n\n  show() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, false);\n  }\n\n  hide() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, true);\n  }\n\n  setInfo(info) {\n    this._$infoContainer.innerHTML = syntaxHighlight(\n      JSON.stringify(info, undefined, 4),\n      this.styleNames,\n    );\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n    delete this._$closeButton;\n    delete this._$infoContainer;\n\n    delete this._callbacks;\n  }\n}\n\nDebugPanelView.extendStyleNames(styles);\n\nexport default DebugPanelView;\n","import { IDebugPanelHighlightStyles } from './types';\n\nfunction syntaxHighlight(json, styleNames: IDebugPanelHighlightStyles) {\n  json = json\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n\n  return json.replace(\n    /(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g,\n    match => {\n      let cls = styleNames.number;\n      if (/^\"/.test(match)) {\n        if (/:$/.test(match)) {\n          cls = styleNames.key;\n        } else {\n          cls = styleNames.string;\n        }\n      } else if (/true|false/.test(match)) {\n        cls = styleNames.boolean;\n      } else if (/null/.test(match)) {\n        cls = styleNames.null;\n      }\n      return `<span class=\"${cls}\">${match}</span>`;\n    },\n  );\n}\n\nexport default syntaxHighlight;\n","import { MediaStreamDeliveryPriority } from '../../../constants';\nimport View from './debug-panel.view';\n\nconst UPDATE_TIME = 1000;\n\nexport default class DebugPanel {\n  static moduleName = 'debugPanel';\n  static View = View;\n  static dependencies = ['engine', 'rootContainer'];\n\n  private _engine;\n\n  private _interval;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({ engine, rootContainer }) {\n    this._engine = engine;\n\n    this._bindCallbacks();\n\n    this._initUI();\n\n    this.hide();\n\n    rootContainer.appendComponentNode(this.node);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _initUI() {\n    this.view = new View({\n      callbacks: {\n        onCloseButtonClick: this.hide,\n      },\n    });\n  }\n\n  _bindCallbacks() {\n    this.updateInfo = this.updateInfo.bind(this);\n    this.hide = this.hide.bind(this);\n  }\n\n  getDebugInfo() {\n    const {\n      url,\n      type,\n      deliveryPriority,\n      currentBitrate,\n      overallBufferLength,\n      nearestBufferSegInfo,\n      viewDimensions,\n      currentTime,\n      duration,\n      loadingStateTimestamps,\n    } = this._engine.getDebugInfo();\n\n    return {\n      url,\n      type,\n      deliveryPriority: MediaStreamDeliveryPriority[deliveryPriority],\n      currentBitrate,\n      overallBufferLength,\n      nearestBufferSegInfo,\n      viewDimensions,\n      currentTime,\n      duration,\n      loadingStateTimestamps,\n    };\n  }\n\n  updateInfo() {\n    this.view.setInfo(this.getDebugInfo());\n  }\n\n  setUpdateInterval() {\n    this.clearUpdateInterval();\n    this._interval = setInterval(this.updateInfo, UPDATE_TIME);\n  }\n\n  clearUpdateInterval() {\n    clearInterval(this._interval);\n  }\n\n  show() {\n    if (this.isHidden) {\n      this.updateInfo();\n      this.setUpdateInterval();\n      this.view.show();\n      this.isHidden = false;\n    }\n  }\n\n  hide() {\n    if (!this.isHidden) {\n      this.clearUpdateInterval();\n      this.view.hide();\n      this.isHidden = true;\n    }\n  }\n\n  destroy() {\n    this.clearUpdateInterval();\n\n    this.view.destroy();\n    delete this.view;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { screenTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  IScreenViewStyles,\n  IScreenViewCallbacks,\n  IScreenViewConfig,\n} from './types';\n\nimport styles from './screen.scss';\n\nclass ScreenView extends View<IScreenViewStyles>\n  implements IView<IScreenViewStyles> {\n  private _isNativeControls: boolean;\n  private _callbacks: IScreenViewCallbacks;\n\n  private _$node: HTMLElement;\n  private _$topBackground: HTMLElement;\n  private _$bottomBackground: HTMLElement;\n\n  constructor(config: IScreenViewConfig) {\n    super();\n    const { callbacks, nativeControls, playbackViewNode } = config;\n\n    this._isNativeControls = nativeControls;\n    this._callbacks = callbacks;\n\n    this._initDOM(playbackViewNode);\n    this._bindEvents();\n  }\n\n  private _initDOM(playbackViewNode: HTMLElement) {\n    this._$node = htmlToElement(\n      screenTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._$topBackground = getElementByHook(\n      this._$node,\n      'screen-top-background',\n    );\n    this._$bottomBackground = getElementByHook(\n      this._$node,\n      'screen-bottom-background',\n    );\n\n    if (this._isNativeControls) {\n      playbackViewNode.setAttribute('controls', 'true');\n    }\n\n    playbackViewNode.setAttribute('tabindex', String(-1));\n\n    this._$node.appendChild(playbackViewNode);\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._callbacks.onWrapperMouseClick);\n    this._$node.addEventListener(\n      'dblclick',\n      this._callbacks.onWrapperMouseDblClick,\n    );\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener(\n      'click',\n      this._callbacks.onWrapperMouseClick,\n    );\n    this._$node.removeEventListener(\n      'dblclick',\n      this._callbacks.onWrapperMouseDblClick,\n    );\n  }\n\n  focusOnNode() {\n    this._$node.focus();\n  }\n\n  show() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, false);\n  }\n\n  hide() {\n    toggleNodeClass(this._$node, this.styleNames.hidden, true);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showTopShadow() {\n    this._$topBackground.classList.add(this.styleNames.visible);\n  }\n\n  hideTopShadow() {\n    this._$topBackground.classList.remove(this.styleNames.visible);\n  }\n\n  showBottomShadow() {\n    if (!this._isNativeControls) {\n      this._$bottomBackground.classList.add(this.styleNames.visible);\n    }\n  }\n\n  hideBottomShadow() {\n    this._$bottomBackground.classList.remove(this.styleNames.visible);\n  }\n\n  appendComponentNode(node) {\n    this._$node.appendChild(node);\n  }\n\n  hideCursor() {\n    this._$node.classList.add(this.styleNames.hiddenCursor);\n  }\n\n  showCursor() {\n    this._$node.classList.remove(this.styleNames.hiddenCursor);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n    delete this._$topBackground;\n    delete this._$bottomBackground;\n\n    delete this._callbacks;\n  }\n}\n\nScreenView.extendStyleNames(styles);\n\nexport default ScreenView;\n","import { UI_EVENTS, STATES } from '../../../constants/index';\n\nimport { IScreenViewConfig } from './types';\nimport View from './screen.view';\n\nconst PLAYBACK_CHANGE_TIMEOUT = 300;\n\nconst DEFAULT_CONFIG = {\n  disableClickProcessing: false,\n  nativeControls: false,\n};\n\nexport interface IScreenConfig {\n  disableClickProcessing?: boolean;\n  nativeControls?: boolean;\n}\n\nexport default class Screen {\n  static moduleName = 'screen';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'config',\n    'fullScreenManager',\n    'interactionIndicator',\n    'rootContainer',\n  ];\n\n  private _eventEmitter;\n  private _engine;\n  private _fullScreenManager;\n  private _interactionIndicator;\n\n  private _delayedToggleVideoPlaybackTimeout;\n\n  private _isClickProcessingDisabled: boolean;\n  private _isInFullScreen: boolean;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    config,\n    eventEmitter,\n    engine,\n    fullScreenManager,\n    interactionIndicator,\n    rootContainer,\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._fullScreenManager = fullScreenManager;\n    this._interactionIndicator = interactionIndicator;\n\n    this._isInFullScreen = false;\n    this.isHidden = false;\n\n    this._delayedToggleVideoPlaybackTimeout = null;\n\n    const screenConfig = {\n      ...DEFAULT_CONFIG,\n      ...config.screen,\n    };\n\n    this._isClickProcessingDisabled = screenConfig.disableClickProcessing;\n\n    this._bindCallbacks();\n    this._initUI(screenConfig.nativeControls);\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.node);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _bindCallbacks() {\n    this._processNodeClick = this._processNodeClick.bind(this);\n    this._processNodeDblClick = this._processNodeDblClick.bind(this);\n    this._toggleVideoPlayback = this._toggleVideoPlayback.bind(this);\n  }\n\n  _initUI(isNativeControls) {\n    const config: IScreenViewConfig = {\n      nativeControls: isNativeControls,\n      callbacks: {\n        onWrapperMouseClick: this._processNodeClick,\n        onWrapperMouseDblClick: this._processNodeDblClick,\n      },\n      playbackViewNode: this._engine.getNode(),\n    };\n\n    this.view = new View(config);\n  }\n\n  _bindEvents() {\n    this._eventEmitter.on(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this._setFullScreenStatus,\n      this,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.PLAY_OVERLAY_TRIGGERED,\n      this.view.focusOnNode,\n      this.view,\n    );\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this._setFullScreenStatus,\n      this,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.PLAY_OVERLAY_TRIGGERED,\n      this.view.focusOnNode,\n      this.view,\n    );\n  }\n\n  showCursor() {\n    this.view.showCursor();\n  }\n\n  hideCursor() {\n    this.view.hideCursor();\n  }\n\n  showTopShadow() {\n    this.view.showTopShadow();\n  }\n\n  hideTopShadow() {\n    this.view.hideTopShadow();\n  }\n\n  showBottomShadow() {\n    this.view.showBottomShadow();\n  }\n\n  hideBottomShadow() {\n    this.view.hideBottomShadow();\n  }\n\n  private _setFullScreenStatus(isInFullScreen) {\n    this._isInFullScreen = isInFullScreen;\n  }\n\n  private _processNodeClick() {\n    if (this._isClickProcessingDisabled) {\n      return;\n    }\n\n    this._showPlaybackChangeIndicator();\n\n    if (\n      !this._fullScreenManager.isEnabled ||\n      this._fullScreenManager._enterFullScreenOnPlay\n    ) {\n      this._toggleVideoPlayback();\n    } else {\n      this._setDelayedPlaybackToggle();\n    }\n  }\n\n  private _processNodeDblClick() {\n    if (this._isClickProcessingDisabled) {\n      return;\n    }\n\n    if (\n      this._fullScreenManager.isEnabled ||\n      !this._fullScreenManager._enterFullScreenOnPlay\n    ) {\n      if (this._isDelayedPlaybackToggleExist) {\n        this._clearDelayedPlaybackToggle();\n        this._hideDelayedPlaybackChangeIndicator();\n      }\n\n      this._toggleFullScreen();\n    }\n  }\n\n  private _showPlaybackChangeIndicator() {\n    const state = this._engine.getCurrentState();\n\n    if (state === STATES.PLAY_REQUESTED || state === STATES.PLAYING) {\n      this._interactionIndicator.showPause();\n    } else {\n      this._interactionIndicator.showPlay();\n    }\n  }\n\n  private _hideDelayedPlaybackChangeIndicator() {\n    this._interactionIndicator.hideIcons();\n  }\n\n  private _setDelayedPlaybackToggle() {\n    this._clearDelayedPlaybackToggle();\n\n    this._delayedToggleVideoPlaybackTimeout = setTimeout(\n      this._toggleVideoPlayback,\n      PLAYBACK_CHANGE_TIMEOUT,\n    );\n  }\n\n  private _clearDelayedPlaybackToggle() {\n    clearTimeout(this._delayedToggleVideoPlaybackTimeout);\n    this._delayedToggleVideoPlaybackTimeout = null;\n  }\n\n  private get _isDelayedPlaybackToggleExist() {\n    return Boolean(this._delayedToggleVideoPlaybackTimeout);\n  }\n\n  private _toggleVideoPlayback() {\n    this._clearDelayedPlaybackToggle();\n\n    const state = this._engine.getCurrentState();\n\n    if (state === STATES.PLAY_REQUESTED || state === STATES.PLAYING) {\n      this._eventEmitter.emit(UI_EVENTS.PAUSE_WITH_SCREEN_CLICK_TRIGGERED);\n      this._engine.pause();\n    } else {\n      this._eventEmitter.emit(UI_EVENTS.PLAY_WITH_SCREEN_CLICK_TRIGGERED);\n      this._engine.play();\n    }\n  }\n\n  private _toggleFullScreen() {\n    if (this._isInFullScreen) {\n      this._exitFullScreen();\n    } else {\n      this._enterFullScreen();\n    }\n  }\n\n  hide() {\n    if (!this.isHidden) {\n      this.view.hide();\n      this.isHidden = true;\n    }\n  }\n\n  show() {\n    if (this.isHidden) {\n      this.view.show();\n      this.isHidden = false;\n    }\n  }\n\n  private _enterFullScreen() {\n    this._fullScreenManager.enterFullScreen();\n  }\n\n  private _exitFullScreen() {\n    this._fullScreenManager.exitFullScreen();\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._clearDelayedPlaybackToggle();\n    this.view.destroy();\n    delete this.view;\n\n    delete this._interactionIndicator;\n    delete this._eventEmitter;\n    delete this._engine;\n    delete this._fullScreenManager;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport {\n  containerTemplate,\n  playIconTemplate,\n  pauseIconTemplate,\n  forwardIconTemplate,\n  rewindIconTemplate,\n  increaseVolumeIconTemplate,\n  decreaseVolumeIconTemplate,\n  muteIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\n\nimport { IInteractionIndicatorViewStyles } from './types';\n\nimport styles from './interaction-indicator.scss';\n\nconst SECONDS_COUNT = 5;\n\nclass InteractionIndicatorView extends View<IInteractionIndicatorViewStyles>\n  implements IView<IInteractionIndicatorViewStyles> {\n  private _$node: HTMLElement;\n\n  private _playIcon: string;\n  private _pauseIcon: string;\n  private _forwardIcon: string;\n  private _rewindIcon: string;\n  private _increaseVolumeIcon: string;\n  private _decreaseVolumeIcon: string;\n  private _muteIcon: string;\n\n  constructor() {\n    super();\n\n    this._$node = htmlToElement(\n      containerTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._playIcon = playIconTemplate({\n      styles: this.styleNames,\n    });\n    this._pauseIcon = pauseIconTemplate({\n      styles: this.styleNames,\n    });\n    this._forwardIcon = forwardIconTemplate({\n      texts: {\n        SECONDS_COUNT,\n      },\n      styles: this.styleNames,\n    });\n    this._rewindIcon = rewindIconTemplate({\n      texts: {\n        SECONDS_COUNT,\n      },\n      styles: this.styleNames,\n    });\n    this._increaseVolumeIcon = increaseVolumeIconTemplate({\n      styles: this.styleNames,\n    });\n    this._decreaseVolumeIcon = decreaseVolumeIconTemplate({\n      styles: this.styleNames,\n    });\n    this._muteIcon = muteIconTemplate({\n      styles: this.styleNames,\n    });\n  }\n\n  activatePlayIcon() {\n    this._$node.innerHTML = this._playIcon;\n  }\n\n  activatePauseIcon() {\n    this._$node.innerHTML = this._pauseIcon;\n  }\n\n  activateForwardIcon() {\n    this._$node.innerHTML = this._forwardIcon;\n  }\n\n  activateRewindIcon() {\n    this._$node.innerHTML = this._rewindIcon;\n  }\n\n  activateIncreaseVolumeIcon() {\n    this._$node.innerHTML = this._increaseVolumeIcon;\n  }\n\n  activateDecreaseVolumeIcon() {\n    this._$node.innerHTML = this._decreaseVolumeIcon;\n  }\n\n  activateMuteVolumeIcon() {\n    this._$node.innerHTML = this._muteIcon;\n  }\n\n  deactivateIcon() {\n    this._$node.innerHTML = '';\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n  }\n}\n\nInteractionIndicatorView.extendStyleNames(styles);\n\nexport default InteractionIndicatorView;\n","import { UI_EVENTS, STATES } from '../../../constants/index';\n\nimport View from './interaction-indicator.view';\n\nexport default class InteractionIndicator {\n  static moduleName = 'interactionIndicator';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'config', 'rootContainer'];\n\n  private _eventEmitter;\n  private _engine;\n\n  view: View;\n\n  constructor({ eventEmitter, engine, config, rootContainer }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n\n    this._initUI();\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.showInteractionIndicator === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _initUI() {\n    this.view = new View();\n  }\n\n  _bindEvents() {\n    this._eventEmitter.on(\n      UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n      this._showPlaybackChangeIndicator,\n      this,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n      this.showRewind,\n      this,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,\n      this.showForward,\n      this,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n      this.showIncreaseVolume,\n      this,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n      this.showDecreaseVolume,\n      this,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n      this.showMute,\n      this,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n      this.showIncreaseVolume,\n      this,\n    );\n  }\n\n  showPause() {\n    this.view.activatePauseIcon();\n  }\n\n  showPlay() {\n    this.view.activatePlayIcon();\n  }\n\n  showRewind() {\n    this.view.activateRewindIcon();\n  }\n\n  showForward() {\n    this.view.activateForwardIcon();\n  }\n\n  showMute() {\n    this.view.activateMuteVolumeIcon();\n  }\n\n  showIncreaseVolume() {\n    this.view.activateIncreaseVolumeIcon();\n  }\n\n  showDecreaseVolume() {\n    this.view.activateDecreaseVolumeIcon();\n  }\n\n  hideIcons() {\n    this.view.deactivateIcon();\n    this._eventEmitter.emit(UI_EVENTS.HIDE_INTERACTION_INDICATOR_TRIGGERED);\n  }\n\n  show() {\n    this.view.hide();\n  }\n\n  hide() {\n    this.view.show();\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n      this._showPlaybackChangeIndicator,\n      this,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n      this.showRewind,\n      this,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED,\n      this.showForward,\n      this,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n      this.showIncreaseVolume,\n      this,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n      this.showDecreaseVolume,\n      this,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n      this.showMute,\n      this,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n      this.showIncreaseVolume,\n      this,\n    );\n  }\n\n  _showPlaybackChangeIndicator() {\n    const state = this._engine.getCurrentState();\n\n    if (state === STATES.PLAY_REQUESTED || state === STATES.PLAYING) {\n      this.view.activatePauseIcon();\n    } else {\n      this.view.activatePlayIcon();\n    }\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this.view.destroy();\n    delete this.view;\n\n    delete this._eventEmitter;\n    delete this._engine;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { overlayTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport {\n  IOverlayViewConfig,\n  IOverlayViewCallbacks,\n  IOverlayViewStyles,\n} from './types';\n\nimport overlayViewTheme from './overlay.theme';\nimport styles from './overlay.scss';\n\nclass OverlayView extends View<IOverlayViewStyles>\n  implements IView<IOverlayViewStyles> {\n  private _callbacks: IOverlayViewCallbacks;\n\n  private _$node: HTMLElement;\n  private _$content: HTMLElement;\n  private _$playButton: HTMLElement;\n\n  constructor(config: IOverlayViewConfig) {\n    super(config.theme);\n\n    const { callbacks, src } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n\n    this.setPoster(src);\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      overlayTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      }),\n    );\n\n    this._$content = getElementByHook(this._$node, 'overlay-content');\n    this._$playButton = getElementByHook(this._$node, 'overlay-play-button');\n  }\n\n  private _bindEvents() {\n    this._$playButton.addEventListener('click', this._callbacks.onPlayClick);\n  }\n\n  private _unbindEvents() {\n    this._$playButton.removeEventListener('click', this._callbacks.onPlayClick);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.active);\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.active);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  setPoster(src: string) {\n    this._$content.style.backgroundImage = src ? `url('${src}')` : 'none';\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n    delete this._$content;\n    delete this._$playButton;\n  }\n}\n\nOverlayView.setTheme(overlayViewTheme);\nOverlayView.extendStyleNames(styles);\n\nexport default OverlayView;\n","export default {\n  overlayPlaySvgFill: {\n    fill: data => data.color,\n  },\n  overlayPlaySvgStroke: {\n    stroke: data => data.color,\n  },\n};\n","import { VIDEO_EVENTS, UI_EVENTS, STATES } from '../../../constants/index';\n\nimport playerAPI from '../../../utils/player-api-decorator';\n\nimport View from './overlay.view';\nimport { IOverlayViewConfig } from './types';\n\nexport interface IOverlayConfig {\n  poster?: string;\n}\n\nexport default class Overlay {\n  static moduleName = 'overlay';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'config',\n    'rootContainer',\n    'theme',\n  ];\n\n  private _eventEmitter;\n  private _engine;\n  private _theme;\n\n  view: View;\n  isHidden: boolean = false;\n\n  constructor({ config, eventEmitter, engine, rootContainer, theme }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._theme = theme;\n\n    this._bindEvents();\n    this._initUI(config.overlay && config.overlay.poster);\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.overlay === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _initUI(poster) {\n    const config: IOverlayViewConfig = {\n      callbacks: {\n        onPlayClick: this._playVideo,\n      },\n      src: poster,\n      theme: this._theme,\n    };\n\n    this.view = new Overlay.View(config);\n  }\n\n  _bindEvents() {\n    this._playVideo = this._playVideo.bind(this);\n\n    this._eventEmitter.on(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._updatePlayingStatus,\n      this,\n    );\n  }\n\n  _updatePlayingStatus({ nextState }) {\n    if (nextState === STATES.PLAY_REQUESTED) {\n      this._hideContent();\n    } else if (\n      nextState === STATES.ENDED ||\n      (nextState === STATES.SRC_SET && !this._engine.isPlaying)\n    ) {\n      this._showContent();\n    }\n  }\n\n  _playVideo() {\n    this._engine.play();\n\n    this._eventEmitter.emit(UI_EVENTS.PLAY_OVERLAY_TRIGGERED);\n  }\n\n  private _hideContent() {\n    this.view.hideContent();\n  }\n\n  private _showContent() {\n    this.view.showContent();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  /**\n   * Method for setting overlay poster\n   * @param src - Source of image\n   * @example\n   * player.setPoster('https://example.com/poster.png');\n   *\n   */\n  @playerAPI()\n  setPoster(src: string) {\n    this.view.setPoster(src);\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._updatePlayingStatus,\n      this,\n    );\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n    delete this.view;\n\n    delete this._eventEmitter;\n    delete this._engine;\n  }\n}\n","import { IView } from '../core/types';\nimport View from '../core/view';\n\nimport { loaderTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\n\nimport { ILoaderViewStyles } from './types';\n\nimport styles from './loader.scss';\n\nclass LoaderView extends View<ILoaderViewStyles>\n  implements IView<ILoaderViewStyles> {\n  private _$node: HTMLElement;\n\n  constructor() {\n    super();\n\n    this._$node = htmlToElement(\n      loaderTemplate({\n        styles: this.styleNames,\n      }),\n    );\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.active);\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.active);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n  }\n}\n\nLoaderView.extendStyleNames(styles);\n\nexport default LoaderView;\n","import { VIDEO_EVENTS, UI_EVENTS, STATES } from '../../../constants/index';\n\nimport View from './loader.view';\n\nexport const DELAYED_SHOW_TIMEOUT = 100;\n\nexport default class Loader {\n  static moduleName = 'loader';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'config', 'rootContainer'];\n\n  private _eventEmitter;\n  private _engine;\n\n  private _delayedShowTimeout;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({ config, eventEmitter, engine, rootContainer }) {\n    this._eventEmitter = eventEmitter;\n    this.isHidden = false;\n    this._engine = engine;\n\n    this._bindCallbacks();\n\n    this._initUI();\n    this._bindEvents();\n    this._hideContent();\n\n    rootContainer.appendComponentNode(this.node);\n\n    if (config.loader === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _bindCallbacks() {\n    this._showContent = this._showContent.bind(this);\n    this._hideContent = this._hideContent.bind(this);\n  }\n\n  _bindEvents() {\n    this._eventEmitter.on(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._checkForWaitingState,\n      this,\n    );\n    this._eventEmitter.on(VIDEO_EVENTS.UPLOAD_SUSPEND, this.hide, this);\n  }\n\n  _checkForWaitingState({ nextState }) {\n    switch (nextState) {\n      case STATES.SEEK_IN_PROGRESS:\n        this.startDelayedShow();\n        break;\n      case STATES.WAITING:\n        this.startDelayedShow();\n        break;\n      case STATES.LOAD_STARTED:\n        if (this._engine.isPreloadAvailable) {\n          this._showContent();\n        }\n        break;\n      case STATES.READY_TO_PLAY:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n      case STATES.PLAYING:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n      case STATES.PAUSED:\n        this.stopDelayedShow();\n        this._hideContent();\n        break;\n\n      /* ignore coverage */\n      default:\n        break;\n    }\n  }\n\n  _initUI() {\n    this.view = new Loader.View();\n  }\n\n  private _showContent() {\n    if (this.isHidden) {\n      this._eventEmitter.emit(UI_EVENTS.LOADER_SHOW_TRIGGERED);\n      this.view.showContent();\n      this.isHidden = false;\n    }\n  }\n\n  private _hideContent() {\n    if (!this.isHidden) {\n      this._eventEmitter.emit(UI_EVENTS.LOADER_HIDE_TRIGGERED);\n      this.view.hideContent();\n      this.isHidden = true;\n    }\n  }\n\n  hide() {\n    this.view.hide();\n  }\n\n  show() {\n    this.view.show();\n  }\n\n  startDelayedShow() {\n    if (this.isDelayedShowScheduled) {\n      this.stopDelayedShow();\n    }\n    this._delayedShowTimeout = setTimeout(\n      this._showContent,\n      DELAYED_SHOW_TIMEOUT,\n    );\n  }\n\n  stopDelayedShow() {\n    clearTimeout(this._delayedShowTimeout);\n    this._delayedShowTimeout = null;\n  }\n\n  get isDelayedShowScheduled() {\n    return Boolean(this._delayedShowTimeout);\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._checkForWaitingState,\n      this,\n    );\n    this._eventEmitter.off(VIDEO_EVENTS.UPLOAD_SUSPEND, this.hide, this);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.stopDelayedShow();\n\n    this.view.destroy();\n\n    delete this.view;\n\n    delete this._eventEmitter;\n    delete this._engine;\n  }\n}\n","import View from '../core/view';\n\nimport { mainUIBlockTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport styles from './main-ui-block.scss';\n\ntype IMainUIBlockViewConfig = {\n  elements: {\n    tooltipContainer: HTMLElement;\n    topBlock: HTMLElement;\n    bottomBlock: HTMLElement;\n  };\n};\n\nclass MainUIBlockView extends View {\n  $node;\n\n  constructor(config: IMainUIBlockViewConfig) {\n    super();\n\n    this._initDOM(config.elements);\n  }\n\n  private _initDOM(elements) {\n    this.$node = htmlToElement(\n      mainUIBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $tooltipContainerWrapper = document.createElement('div');\n    $tooltipContainerWrapper.classList.add(\n      this.styleNames.tooltipContainerWrapper,\n    );\n    $tooltipContainerWrapper.appendChild(elements.tooltipContainer);\n\n    this.$node.appendChild(elements.topBlock);\n    this.$node.appendChild($tooltipContainerWrapper);\n    this.$node.appendChild(elements.bottomBlock);\n  }\n\n  getNode() {\n    return this.$node;\n  }\n\n  destroy() {\n    if (this.$node.parentNode) {\n      this.$node.parentNode.removeChild(this.$node);\n    }\n    delete this.$node;\n  }\n}\n\nMainUIBlockView.extendStyleNames(styles);\n\nexport { IMainUIBlockViewConfig };\n\nexport default MainUIBlockView;\n","import { VIDEO_EVENTS, UI_EVENTS, STATES } from '../../../constants/index';\nimport playerAPI from '../../../utils/player-api-decorator';\n\nimport MainUIBlockView from './main-ui-block.view';\n\nconst HIDE_BLOCK_TIMEOUT = 2000;\n\nexport interface IControlsConfig {\n  shouldAlwaysShow?: boolean;\n}\n\nconst DEFAULT_CONFIG: IControlsConfig = {\n  shouldAlwaysShow: false,\n};\n\nexport default class MainUIBlock {\n  static moduleName = 'mainUIBlock';\n  static View = MainUIBlockView;\n  static dependencies = [\n    'config',\n    'screen',\n    'rootContainer',\n    'tooltipService',\n    'eventEmitter',\n    'topBlock',\n    'bottomBlock',\n  ];\n\n  private _eventEmitter;\n  private _bottomBlock;\n  private _topBlock;\n  private _screen;\n\n  private _hideTimeout = null;\n\n  private _isContentShowingEnabled: boolean = true;\n  private _isContentShown: boolean = false;\n  private _shouldShowContent: boolean = true;\n  private _shouldAlwaysShow: boolean = false;\n  private _isDragging: boolean = false;\n\n  view: MainUIBlockView;\n  isHidden: boolean;\n\n  constructor(dependencies) {\n    const {\n      config,\n      eventEmitter,\n      rootContainer,\n      tooltipService,\n      topBlock,\n      bottomBlock,\n      screen,\n    } = dependencies;\n\n    this._eventEmitter = eventEmitter;\n    this._topBlock = topBlock;\n    this._bottomBlock = bottomBlock;\n    this._screen = screen;\n\n    this.isHidden = false;\n\n    const mainBlockConfig = {\n      ...DEFAULT_CONFIG,\n      ...config.controls,\n    };\n\n    this._shouldAlwaysShow = mainBlockConfig.shouldAlwaysShow;\n\n    this._initUI({\n      tooltipContainer: tooltipService.tooltipContainerNode,\n      topBlock: topBlock.node,\n      bottomBlock: bottomBlock.node,\n    });\n    this._bindViewCallbacks();\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.view.getNode());\n\n    if (config.controls === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(elements) {\n    this.view = new MainUIBlock.View({ elements });\n  }\n\n  private _bindViewCallbacks() {\n    this._startHideBlockTimeout = this._startHideBlockTimeout.bind(this);\n    this._tryShowContent = this._tryShowContent.bind(this);\n    this._tryHideContent = this._tryHideContent.bind(this);\n  }\n\n  private _bindEvents() {\n    this._eventEmitter.on(\n      UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED,\n      this._startHideBlockTimeout,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED,\n      this._tryHideContent,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED,\n      this._startHideBlockTimeout,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.LOADER_HIDE_TRIGGERED,\n      this._startHideBlockTimeout,\n    );\n    this._eventEmitter.on(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._updatePlayingStatus,\n      this,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.CONTROL_DRAG_START,\n      this._onControlDragStart,\n      this,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.CONTROL_DRAG_END,\n      this._onControlDragEnd,\n      this,\n    );\n  }\n\n  private _unbindEvents() {\n    this._eventEmitter.off(\n      UI_EVENTS.MOUSE_MOVE_ON_PLAYER_TRIGGERED,\n      this._startHideBlockTimeout,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.MOUSE_LEAVE_ON_PLAYER_TRIGGERED,\n      this._tryHideContent,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED,\n      this._startHideBlockTimeout,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.LOADER_HIDE_TRIGGERED,\n      this._startHideBlockTimeout,\n    );\n    this._eventEmitter.off(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._updatePlayingStatus,\n      this,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.CONTROL_DRAG_START,\n      this._onControlDragStart,\n      this,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.CONTROL_DRAG_END,\n      this._onControlDragEnd,\n      this,\n    );\n  }\n\n  _updatePlayingStatus({ nextState }) {\n    switch (nextState) {\n      case STATES.PLAY_REQUESTED: {\n        this._shouldShowContent = false;\n        this._startHideBlockTimeout();\n        break;\n      }\n      case STATES.ENDED: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      case STATES.PAUSED: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      case STATES.SRC_SET: {\n        this._shouldShowContent = true;\n        this._tryShowContent();\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  private get _isBlockFocused() {\n    return this._bottomBlock.isFocused;\n  }\n\n  private _startHideBlockTimeout() {\n    this._stopHideBlockTimeout();\n\n    this._tryShowContent();\n\n    this._hideTimeout = setTimeout(this._tryHideContent, HIDE_BLOCK_TIMEOUT);\n  }\n\n  private _stopHideBlockTimeout() {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n  }\n\n  private _tryShowContent() {\n    if (this._isContentShowingEnabled) {\n      this._showContent();\n    }\n  }\n\n  private _onControlDragStart() {\n    this._isDragging = true;\n  }\n\n  private _onControlDragEnd() {\n    this._isDragging = false;\n    this._tryHideContent();\n  }\n\n  private _showContent() {\n    if (this.isHidden || this._isContentShown) {\n      return;\n    }\n\n    this._screen.showCursor();\n\n    this._eventEmitter.emit((UI_EVENTS as any).MAIN_BLOCK_SHOW_TRIGGERED);\n    this._bottomBlock.showContent();\n    this._topBlock.showContent();\n    this._isContentShown = true;\n  }\n\n  private _tryHideContent() {\n    if (\n      !this._isBlockFocused &&\n      !this._isDragging &&\n      !this._shouldShowContent &&\n      !this._shouldAlwaysShow\n    ) {\n      this._hideContent();\n    }\n  }\n\n  private _hideContent() {\n    if (this.isHidden || !this._isContentShown) {\n      return;\n    }\n\n    if (this._isContentShowingEnabled) {\n      this._screen.hideCursor();\n    }\n\n    this._eventEmitter.emit((UI_EVENTS as any).MAIN_BLOCK_HIDE_TRIGGERED);\n    this._bottomBlock.hideContent();\n    this._topBlock.hideContent();\n    this._isContentShown = false;\n  }\n\n  disableShowingContent() {\n    this._isContentShowingEnabled = false;\n    this._hideContent();\n  }\n\n  enableShowingContent() {\n    this._isContentShowingEnabled = true;\n    if (this._shouldShowContent) {\n      this._showContent();\n    }\n  }\n\n  hide() {\n    this.isHidden = true;\n    this._topBlock.hide();\n    this._bottomBlock.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this._topBlock.show();\n    this._bottomBlock.show();\n  }\n\n  /**\n   * Method for allowing bottom block to be always shown.\n   * @param flag - `true` for showing always\n   * @example\n   * player.setControlsShouldAlwaysShow(true);\n   *\n   */\n  @playerAPI('setControlsShouldAlwaysShow')\n  setShouldAlwaysShow(flag: boolean) {\n    this._shouldAlwaysShow = flag;\n\n    if (this._shouldAlwaysShow) {\n      this._tryShowContent();\n    } else {\n      this._startHideBlockTimeout();\n    }\n  }\n\n  destroy() {\n    this._stopHideBlockTimeout();\n    this._unbindEvents();\n\n    delete this._eventEmitter;\n    delete this._topBlock;\n    delete this._bottomBlock;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport { topBlockTemplate } from './templates';\n\nimport {\n  ITopBlockViewStyles,\n  ITopBlockViewConfig,\n  ITopBlockViewElements,\n} from './types';\n\nimport styles from './top-block.scss';\n\nclass TopBlockView extends View<ITopBlockViewStyles>\n  implements IView<ITopBlockViewStyles> {\n  private _$node: HTMLElement;\n\n  constructor(config: ITopBlockViewConfig) {\n    super();\n    const { elements } = config;\n\n    this._initDOM(elements);\n    this._bindEvents();\n  }\n\n  private _initDOM(elements: ITopBlockViewElements) {\n    this._$node = htmlToElement(\n      topBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $titleContainer = getElementByHook(this._$node, 'title-container');\n    const $liveIndicatorContainer = getElementByHook(\n      this._$node,\n      'live-indicator-container',\n    );\n\n    $titleContainer.appendChild(elements.title);\n    $liveIndicatorContainer.appendChild(elements.liveIndicator);\n  }\n\n  private _preventClickPropagation(e) {\n    e.stopPropagation();\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._preventClickPropagation);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._preventClickPropagation);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.activated);\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.activated);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n    delete this._$node;\n  }\n}\n\nTopBlockView.extendStyleNames(styles);\n\nexport default TopBlockView;\n","import View from './top-block.view';\n\nimport { ITopBlockViewConfig, ITopBlockViewElements } from './types';\n\nexport default class TopBlock {\n  static moduleName = 'topBlock';\n  static View = View;\n  static dependencies = ['config', 'screen', 'title', 'liveIndicator'];\n\n  private _screen;\n\n  isHidden: boolean;\n  view: View;\n\n  constructor(dependencies) {\n    const { screen } = dependencies;\n\n    this._screen = screen;\n    this.isHidden = false;\n\n    this._initUI(this._getElementsNodes(dependencies));\n  }\n\n  private _initUI(elementNodes: ITopBlockViewElements) {\n    const config: ITopBlockViewConfig = {\n      elements: elementNodes,\n    };\n\n    this.view = new TopBlock.View(config);\n  }\n\n  private _getElementsNodes(dependencies): ITopBlockViewElements {\n    const { title, liveIndicator } = dependencies;\n\n    return {\n      title: title.node,\n      liveIndicator: liveIndicator.node,\n    };\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  showContent() {\n    this._screen.showTopShadow();\n\n    this.view.showContent();\n  }\n\n  hideContent() {\n    this._screen.hideTopShadow();\n\n    this.view.hideContent();\n  }\n\n  destroy() {\n    delete this._screen;\n  }\n}\n","import View from '../core/view';\n\nimport { titleTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  ITitleViewStyles,\n  ITitleViewCallbacks,\n  ITitleViewConfig,\n} from './types';\nimport { IView } from '../core/types';\n\nimport titleViewTheme from './title.theme';\nimport styles from './title.scss';\n\nclass TitleView extends View<ITitleViewStyles>\n  implements IView<ITitleViewStyles> {\n  private _callbacks: ITitleViewCallbacks;\n\n  _$node: HTMLElement;\n  _$title: HTMLElement;\n\n  constructor(config: ITitleViewConfig) {\n    const { callbacks, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  _initDOM() {\n    this._$node = htmlToElement(\n      titleTemplate({ styles: this.styleNames, themeStyles: this.themeStyles }),\n    );\n    this._$title = getElementByHook(this._$node, 'video-title');\n  }\n\n  _bindEvents() {\n    this._$title.addEventListener('click', this._callbacks.onClick);\n  }\n\n  _unbindEvents() {\n    this._$title.removeEventListener('click', this._callbacks.onClick);\n  }\n\n  setDisplayAsLink(flag: boolean) {\n    toggleNodeClass(this._$title, this.styleNames.link, flag);\n  }\n\n  setTitle(title?: string) {\n    // TODO: mb move this logic to controller? title.isHidden is out of control of this method\n    // TODO: what if we call with empty value `.setTitle('')` and then call `.show()` method? Mb clear value anyway?\n    if (title) {\n      this.show();\n      this._$title.innerHTML = title;\n    } else {\n      this.hide();\n    }\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n    delete this._$title;\n  }\n}\n\nTitleView.setTheme(titleViewTheme);\nTitleView.extendStyleNames(styles);\n\nexport default TitleView;\n","export default {\n  titleText: {\n    color: data => data.color,\n  },\n};\n","import View from './title.view';\n\nimport playerAPI from '../../../utils/player-api-decorator';\n\nimport { IThemeService } from '../core/theme';\nimport { ITitleViewConfig } from './types';\n\nexport interface ITitleConfig {\n  text?: string;\n  callback?: Function;\n}\n\nexport default class TitleControl {\n  static moduleName = 'title';\n  static View = View;\n  static dependencies = ['config', 'theme'];\n\n  private _callback: Function;\n  private _theme: IThemeService;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({ config, theme }) {\n    this._theme = theme;\n\n    this._bindCallbacks();\n    this._initUI();\n    if (config.title) {\n      this.setTitleClickCallback(config.title.callback || null);\n      this.setTitle(config.title.text);\n    } else if (config.title === false) {\n      this.hide();\n    }\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _bindCallbacks() {\n    this._triggerCallback = this._triggerCallback.bind(this);\n  }\n\n  _initUI() {\n    const config: ITitleViewConfig = {\n      theme: this._theme,\n      callbacks: {\n        onClick: this._triggerCallback,\n      },\n    };\n\n    this.view = new TitleControl.View(config);\n\n    this.view.setTitle();\n  }\n\n  /**\n   * Display title text over the video. If you want to have clickable title, use `setTitleClickCallback`\n   *\n   * @param title - Text for the video title\n   *\n   * @example\n   * player.setTitle('Your awesome video title here');\n   *\n   * @note\n   * [Live Demo](https://jsfiddle.net/bodia/243k6m0u/)\n   */\n  @playerAPI()\n  setTitle(title?: string) {\n    this.view.setTitle(title);\n  }\n\n  /**\n   * Method for attaching callback for click on title\n   *\n   * @param callback - Your function\n   *\n   * @example\n   * const callback = () => {\n   *   console.log('Click on title);\n   * }\n   * player.setTitleClickCallback(callback);\n   *\n   */\n  @playerAPI()\n  setTitleClickCallback(callback?: Function) {\n    this._callback = callback;\n    this.view.setDisplayAsLink(Boolean(this._callback));\n  }\n\n  _triggerCallback() {\n    if (this._callback) {\n      this._callback();\n    }\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this.view.destroy();\n    delete this.view;\n\n    delete this.isHidden;\n  }\n}\n","import { ITooltipReference, ITooltipService } from '../core/tooltip';\nimport { IView } from '../core/types';\nimport View from '../core/view';\n\nimport { liveIndicatorTemplate } from './templates';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport {\n  ILiveIndicatorViewStyles,\n  ILiveIndicatorViewCallbacks,\n  ILiveIndicatorViewConfig,\n} from './types';\n\nimport styles from './live-indicator.scss';\n\nimport { TEXT_LABELS } from '../../../constants';\n\nclass LiveIndicatorView extends View<ILiveIndicatorViewStyles>\n  implements IView<ILiveIndicatorViewStyles> {\n  private _callbacks: ILiveIndicatorViewCallbacks;\n  private _textMap;\n  private _tooltipService: ITooltipService;\n  private _tooltipReference: ITooltipReference;\n\n  private _$node: HTMLElement;\n  private _$liveIndicatorText: HTMLElement;\n\n  constructor(config: ILiveIndicatorViewConfig) {\n    super();\n\n    this._callbacks = config.callbacks;\n    this._textMap = config.textMap;\n    this._tooltipService = config.tooltipService;\n\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      liveIndicatorTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n        texts: {},\n      }),\n    );\n\n    this._$liveIndicatorText = getElementByHook(\n      this._$node,\n      'live-indicator-text',\n    );\n\n    this._tooltipReference = this._tooltipService.createReference(this._$node, {\n      text: this._textMap.get(TEXT_LABELS.LIVE_SYNC_TOOLTIP),\n    });\n\n    // NOTE: LIVE indicator is hidden and inactive by default\n    this.toggle(false);\n    this.toggleActive(false);\n    this.toggleEnded(false);\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._callbacks.onClick);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._callbacks.onClick);\n  }\n\n  toggleActive(shouldActivate: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.active, shouldActivate);\n  }\n\n  toggleEnded(isEnded: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.ended, isEnded);\n\n    this._$liveIndicatorText.innerText = this._textMap.get(\n      TEXT_LABELS.LIVE_INDICATOR_TEXT,\n      { isEnded },\n    );\n    this._$liveIndicatorText.setAttribute(\n      'aria-label',\n      !isEnded ? this._textMap.get(TEXT_LABELS.LIVE_SYNC_LABEL) : '',\n    );\n\n    if (isEnded) {\n      this._tooltipReference.disable();\n    } else {\n      this._tooltipReference.enable();\n    }\n  }\n\n  show() {\n    this.toggle(true);\n  }\n\n  hide() {\n    this.toggle(false);\n  }\n\n  toggle(shouldShow: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.hidden, !shouldShow);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._tooltipReference.destroy();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n    delete this._$liveIndicatorText;\n    delete this._callbacks;\n    delete this._textMap;\n  }\n}\n\nLiveIndicatorView.extendStyleNames(styles);\n\nexport default LiveIndicatorView;\n","import { ITooltipService } from '../core/tooltip';\nimport LiveIndicatorView from './live-indicator.view';\nimport { VIDEO_EVENTS, LiveState } from '../../../constants';\n\nexport default class LiveIndicator {\n  static moduleName = 'liveIndicator';\n  static View = LiveIndicatorView;\n  static dependencies = ['engine', 'eventEmitter', 'textMap', 'tooltipService'];\n\n  private _engine;\n  private _eventEmitter;\n  private _textMap;\n  private _tooltipService: ITooltipService;\n  private _isHidden: boolean = true;\n  private _isActive: boolean = false;\n  private _isEnded: boolean = false;\n\n  view: LiveIndicatorView;\n\n  constructor({ engine, eventEmitter, textMap, tooltipService }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  get isHidden(): boolean {\n    return this._isHidden;\n  }\n\n  get isActive(): boolean {\n    return this._isActive;\n  }\n\n  show() {\n    this._toggle(true);\n  }\n\n  hide() {\n    this._toggle(false);\n  }\n\n  private _initUI() {\n    this.view = new LiveIndicator.View({\n      callbacks: {\n        onClick: this._syncWithLive,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    });\n  }\n\n  private _bindCallbacks() {\n    this._syncWithLive = this._syncWithLive.bind(this);\n  }\n\n  private _bindEvents() {\n    this._eventEmitter.on(\n      VIDEO_EVENTS.LIVE_STATE_CHANGED,\n      this._processStateChange,\n      this,\n    );\n  }\n\n  private _unbindEvents() {\n    this._eventEmitter.off(\n      VIDEO_EVENTS.LIVE_STATE_CHANGED,\n      this._processStateChange,\n      this,\n    );\n  }\n\n  private _processStateChange({ nextState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this._toggle(false);\n        this._toggleActive(false);\n        this._toggleEnded(false);\n        break;\n\n      case LiveState.INITIAL:\n        this._toggle(true);\n        break;\n\n      case LiveState.SYNC:\n        this._toggleActive(true);\n        break;\n\n      case LiveState.NOT_SYNC:\n        this._toggleActive(false);\n        break;\n\n      case LiveState.ENDED:\n        this._toggleActive(false);\n        this._toggleEnded(true);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _syncWithLive() {\n    if (!this._isEnded) {\n      this._engine.syncWithLive();\n    }\n  }\n\n  private _toggle(shouldShow: boolean) {\n    this._isHidden = !shouldShow;\n    this.view.toggle(shouldShow);\n  }\n\n  private _toggleActive(shouldActivate: boolean) {\n    this._isActive = shouldActivate;\n    this.view.toggleActive(shouldActivate);\n  }\n\n  private _toggleEnded(isEnded: boolean) {\n    this._isEnded = isEnded;\n    this.view.toggleEnded(isEnded);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n\n    delete this.view;\n\n    delete this._engine;\n    delete this._eventEmitter;\n    delete this._textMap;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\nimport toggleNodeClass from '../core/toggleNodeClass';\n\nimport { bottomBlockTemplate } from './templates';\n\nimport {\n  IBottomBlockViewStyles,\n  IBottomBlockViewCallbacks,\n  IBottomBlockViewElements,\n  IBottomBlockViewConfig,\n} from './types';\n\nimport styles from './bottom-block.scss';\n\nclass BottomBlockView extends View<IBottomBlockViewStyles>\n  implements IView<IBottomBlockViewStyles> {\n  private _callbacks: IBottomBlockViewCallbacks;\n  private _$node: HTMLElement;\n\n  constructor(config: IBottomBlockViewConfig) {\n    super();\n    const { callbacks, elements } = config;\n\n    this._callbacks = callbacks;\n\n    this._initDOM(elements);\n    this._bindEvents();\n  }\n\n  private _initDOM(elements: IBottomBlockViewElements) {\n    this._$node = htmlToElement(\n      bottomBlockTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    const $playContainer = getElementByHook(this._$node, 'play-container');\n    const $volumeContainer = getElementByHook(this._$node, 'volume-container');\n    const $timeContainer = getElementByHook(this._$node, 'time-container');\n    const $fullScreenContainer = getElementByHook(\n      this._$node,\n      'full-screen-container',\n    );\n    const $logoContainer = getElementByHook(this._$node, 'logo-container');\n    const $progressBarContainer = getElementByHook(\n      this._$node,\n      'progress-bar-container',\n    );\n\n    $playContainer.appendChild(elements.play);\n    $volumeContainer.appendChild(elements.volume);\n    $timeContainer.appendChild(elements.time);\n    $fullScreenContainer.appendChild(elements.fullScreen);\n    $logoContainer.appendChild(elements.logo);\n    $progressBarContainer.appendChild(elements.progress);\n  }\n\n  private _preventClickPropagation(e) {\n    e.stopPropagation();\n  }\n\n  private _bindEvents() {\n    this._$node.addEventListener('click', this._preventClickPropagation);\n    this._$node.addEventListener('mousemove', this._callbacks.onBlockMouseMove);\n    this._$node.addEventListener('mouseleave', this._callbacks.onBlockMouseOut);\n  }\n\n  private _unbindEvents() {\n    this._$node.removeEventListener('click', this._preventClickPropagation);\n    this._$node.removeEventListener(\n      'mousemove',\n      this._callbacks.onBlockMouseMove,\n    );\n    this._$node.removeEventListener(\n      'mouseleave',\n      this._callbacks.onBlockMouseOut,\n    );\n  }\n\n  setShouldLogoShowAlwaysFlag(isShowAlways: boolean) {\n    toggleNodeClass(this._$node, this.styleNames.showLogoAlways, isShowAlways);\n    this.showLogo();\n  }\n\n  showPlayControl() {\n    this._$node.classList.remove(this.styleNames.playControlHidden);\n  }\n\n  hidePlayControl() {\n    this._$node.classList.add(this.styleNames.playControlHidden);\n  }\n\n  showTimeControl() {\n    this._$node.classList.remove(this.styleNames.timeControlHidden);\n  }\n\n  hideTimeControl() {\n    this._$node.classList.add(this.styleNames.timeControlHidden);\n  }\n\n  showVolumeControl() {\n    this._$node.classList.remove(this.styleNames.volumeControlHidden);\n  }\n\n  hideVolumeControl() {\n    this._$node.classList.add(this.styleNames.volumeControlHidden);\n  }\n\n  showFullScreenControl() {\n    this._$node.classList.remove(this.styleNames.fullScreenControlHidden);\n  }\n\n  hideFullScreenControl() {\n    this._$node.classList.add(this.styleNames.fullScreenControlHidden);\n  }\n\n  showLogo() {\n    this._$node.classList.remove(this.styleNames.logoHidden);\n  }\n\n  hideLogo() {\n    this._$node.classList.add(this.styleNames.logoHidden);\n  }\n\n  showProgressControl() {\n    this._$node.classList.remove(this.styleNames.progressControlHidden);\n  }\n\n  hideProgressControl() {\n    this._$node.classList.add(this.styleNames.progressControlHidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  showContent() {\n    this._$node.classList.add(this.styleNames.activated);\n  }\n\n  hideContent() {\n    this._$node.classList.remove(this.styleNames.activated);\n  }\n\n  destroy() {\n    this._unbindEvents();\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n    delete this._$node;\n  }\n}\n\nBottomBlockView.extendStyleNames(styles);\n\nexport default BottomBlockView;\n","import playerAPI from '../../../utils/player-api-decorator';\n\nimport { IBottomBlockViewConfig, IBottomBlockViewElements } from './types';\n\nimport View from './bottom-block.view';\nimport { UI_EVENTS } from '../../../constants/index';\n\nexport default class BottomBlock {\n  static moduleName = 'bottomBlock';\n  static View = View;\n  static dependencies = [\n    'config',\n    'screen',\n    'playControl',\n    'progressControl',\n    'timeControl',\n    'volumeControl',\n    'fullScreenControl',\n    'logo',\n    'eventEmitter',\n  ];\n\n  private _screen;\n  private _eventEmitter;\n\n  private _isBlockFocused: boolean = false;\n\n  view: View;\n  isHidden: boolean = false;\n\n  constructor(dependencies) {\n    const { config, screen, eventEmitter } = dependencies;\n    this._screen = screen;\n    this._eventEmitter = eventEmitter;\n\n    this._bindViewCallbacks();\n    this._initUI(this._getElementsNodes(dependencies));\n    this._initLogo(config.logo);\n    this._bindEvents();\n  }\n\n  private _getElementsNodes(dependencies): IBottomBlockViewElements {\n    const {\n      playControl,\n      progressControl,\n      timeControl,\n      volumeControl,\n      fullScreenControl,\n      logo,\n    } = dependencies;\n\n    return {\n      play: playControl.node,\n      progress: progressControl.node,\n      time: timeControl.node,\n      volume: volumeControl.node,\n      fullScreen: fullScreenControl.node,\n      logo: logo.node,\n    };\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI(elementNodes: IBottomBlockViewElements) {\n    const config: IBottomBlockViewConfig = {\n      elements: elementNodes,\n      callbacks: {\n        onBlockMouseMove: this._setFocusState,\n        onBlockMouseOut: this._removeFocusState,\n      },\n    };\n\n    this.view = new BottomBlock.View(config);\n  }\n\n  private _bindEvents() {\n    this._eventEmitter.on(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this._removeFocusState,\n    );\n  }\n\n  private _unbindEvents() {\n    this._eventEmitter.off(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this._removeFocusState,\n    );\n  }\n\n  private _initLogo(logoConfig) {\n    if (logoConfig) {\n      if (typeof logoConfig === 'object') {\n        this.setLogoAlwaysShowFlag(logoConfig.showAlways);\n      }\n    } else {\n      this.hideLogo();\n    }\n  }\n\n  private _bindViewCallbacks() {\n    this._setFocusState = this._setFocusState.bind(this);\n    this._removeFocusState = this._removeFocusState.bind(this);\n  }\n\n  private _setFocusState() {\n    this._isBlockFocused = true;\n  }\n\n  private _removeFocusState() {\n    this._isBlockFocused = false;\n  }\n\n  get isFocused() {\n    return this._isBlockFocused;\n  }\n\n  showContent() {\n    this._screen.showBottomShadow();\n    this.view.showContent();\n  }\n\n  hideContent() {\n    this._screen.hideBottomShadow();\n    this.view.hideContent();\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  /**\n   * Method for allowing logo to be always shown in bottom block\n   * @param flag - `true` for showing always\n   * @example\n   * player.setLogoAlwaysShowFlag(true);\n   *\n   */\n  @playerAPI()\n  setLogoAlwaysShowFlag(flag: boolean) {\n    this.view.setShouldLogoShowAlwaysFlag(flag);\n  }\n\n  /**\n   * Method for hidding logo. If you use `setLogoAlwaysShowFlag` or `setControlsShouldAlwaysShow`, logo would automaticaly appear.\n   * @example\n   * player.hideLogo();\n   */\n  @playerAPI()\n  hideLogo() {\n    this.view.hideLogo();\n  }\n\n  /**\n   * Method for showing logo.\n   * @example\n   * player.showLogo();\n   */\n  @playerAPI()\n  showLogo() {\n    this.view.showLogo();\n  }\n\n  /**\n   * Method for showing play control.\n   * @example\n   * player.showPlayControl();\n   */\n  @playerAPI()\n  showPlayControl() {\n    this.view.showPlayControl();\n  }\n\n  /**\n   * Method for showing volume control.\n   * @example\n   * player.showVolumeControl();\n   */\n  @playerAPI()\n  showVolumeControl() {\n    this.view.showVolumeControl();\n  }\n\n  /**\n   * Method for showing time control.\n   * @example\n   * player.showTimeControl();\n   */\n  @playerAPI()\n  showTimeControl() {\n    this.view.showTimeControl();\n  }\n\n  /**\n   * Method for showing full screen control.\n   * @example\n   * player.showFullScreenControl();\n   */\n  @playerAPI()\n  showFullScreenControl() {\n    this.view.showFullScreenControl();\n  }\n\n  /**\n   * Method for showing progress control.\n   * @example\n   * player.showProgressControl();\n   */\n  @playerAPI()\n  showProgressControl() {\n    this.view.showProgressControl();\n  }\n\n  /**\n   * Method for hidding play control.\n   * @example\n   * player.hidePlayControl();\n   */\n  @playerAPI()\n  hidePlayControl() {\n    this.view.hidePlayControl();\n  }\n\n  /**\n   * Method for hidding voluem control.\n   * @example\n   * player.hideVolumeControl();\n   */\n  @playerAPI()\n  hideVolumeControl() {\n    this.view.hideVolumeControl();\n  }\n\n  /**\n   * Method for hidding time control.\n   * @example\n   * player.hideTimeControl();\n   */\n  @playerAPI()\n  hideTimeControl() {\n    this.view.hideTimeControl();\n  }\n\n  /**\n   * Method for hidding full screen control.\n   * @example\n   * player.hideFullScreenControl();\n   */\n  @playerAPI()\n  hideFullScreenControl() {\n    this.view.hideFullScreenControl();\n  }\n\n  /**\n   * Method for hidding progress control.\n   * @example\n   * player.hideProgressControl();\n   */\n  @playerAPI()\n  hideProgressControl() {\n    this.view.hideProgressControl();\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this.view.destroy();\n\n    this.view = null;\n    this._screen = null;\n    this._eventEmitter = null;\n  }\n}\n","function formatTime(seconds: number): string {\n  const isValid = !isNaN(seconds) && isFinite(seconds);\n  const isNegative = isValid && seconds < 0;\n  const date = new Date(null);\n\n  date.setSeconds(isValid ? Math.abs(Math.floor(seconds)) : 0);\n\n  // get HH:mm:ss part, remove hours if they are \"00:\"\n  const time = date\n    .toISOString()\n    .substr(11, 8)\n    .replace(/^00:/, '');\n\n  return isNegative ? `-${time}` : time;\n}\n\nexport default formatTime;\n","enum ITooltipPositionPlacement {\n  TOP = 'top',\n  BOTTOM = 'bottom',\n}\n\ntype ITooltipPosition = {\n  placement: ITooltipPositionPlacement;\n  x: number;\n};\n\ntype ITooltipPositionFunction = (\n  tooltipContainerNode: HTMLElement,\n) => ITooltipPosition;\n\ntype ITooltipShowOptions = {\n  text: string;\n  position: ITooltipPosition | ITooltipPositionFunction;\n};\n\nexport {\n  ITooltipPositionPlacement,\n  ITooltipPosition,\n  ITooltipPositionFunction,\n  ITooltipShowOptions,\n};\n","import { tooltipTemplate } from './templates';\nimport htmlToElement from '../htmlToElement';\nimport getElementByHook from '../getElementByHook';\nimport Stylable from '../stylable';\n\nimport styles from './tooltip.scss';\n\ntype ITooltipStyles = {\n  tooltip: string;\n  tooltipVisible: string;\n  tooltipInner: string;\n};\n\ninterface ITooltip {\n  node: HTMLElement;\n  isHidden: boolean;\n  show(): void;\n  hide(): void;\n  setText(text: string): void;\n  setStyle(style: { [key: string]: string | number }): void;\n  destroy(): void;\n}\n\nclass Tooltip extends Stylable<ITooltipStyles> implements ITooltip {\n  private _$node: HTMLElement;\n  private _$tooltipInner: HTMLElement;\n  private _isHidden: boolean;\n\n  constructor() {\n    super();\n\n    this._isHidden = true;\n    this._initDOM();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      tooltipTemplate({\n        styles: this.styleNames,\n      }),\n    );\n    this._$tooltipInner = getElementByHook(this._$node, 'tooltipInner');\n  }\n\n  get node(): HTMLElement {\n    return this._$node;\n  }\n\n  get isHidden(): boolean {\n    return this._isHidden;\n  }\n\n  show() {\n    if (!this._isHidden) {\n      return;\n    }\n    this._isHidden = false;\n    this._$node.classList.add(this.styleNames.tooltipVisible);\n  }\n\n  hide() {\n    if (this._isHidden) {\n      return;\n    }\n    this._isHidden = true;\n    this._$node.classList.remove(this.styleNames.tooltipVisible);\n  }\n\n  setText(text: string) {\n    this._$tooltipInner.innerText = text;\n  }\n\n  setStyle(style) {\n    Object.keys(style).forEach(styleKey => {\n      this._$node.style[styleKey] = style[styleKey];\n    });\n  }\n\n  destroy() {\n    this._$node = null;\n    this._$tooltipInner = null;\n  }\n}\n\nTooltip.extendStyleNames(styles);\n\nexport { ITooltip, ITooltipStyles };\n\nexport default Tooltip;\n","import { ITooltipPosition, ITooltipPositionPlacement } from '../types';\n\ntype ITooltipCenterXfn = (\n  tooltipReferenceOffsetX: number,\n  tooltipReferenceWidth: number,\n) => number;\n\nfunction calcTooltipCenterX(tooltipReferenceOffsetX, tooltipReferenceWidth) {\n  return tooltipReferenceOffsetX + tooltipReferenceWidth / 2;\n}\n\nfunction getTooltipPositionByReferenceNode(\n  tooltipReferenceNode: HTMLElement,\n  tooltipContainerNode: HTMLElement,\n  tooltipCenterXfn: ITooltipCenterXfn = calcTooltipCenterX,\n): ITooltipPosition {\n  const tooltipReferenceRect = tooltipReferenceNode.getBoundingClientRect();\n  const tooltipContainerRect = tooltipContainerNode.getBoundingClientRect();\n\n  const tooltipPlacement =\n    tooltipReferenceRect.top > tooltipContainerRect.top\n      ? ITooltipPositionPlacement.BOTTOM\n      : ITooltipPositionPlacement.TOP;\n  const tooltipReferenceOffsetX =\n    tooltipReferenceRect.left - tooltipContainerRect.left;\n  const tooltipCenterX = tooltipCenterXfn(\n    tooltipReferenceOffsetX,\n    tooltipReferenceRect.width,\n  );\n\n  return { placement: tooltipPlacement, x: tooltipCenterX };\n}\n\nexport default getTooltipPositionByReferenceNode;\n","import { ITooltipService } from './tooltip-service';\nimport getTooltipPositionByReferenceNode from './utils/getTooltipPositionByReferenceNode';\n\ntype ITooltipReferenceOptions = {\n  text: string;\n};\n\ninterface ITooltipReference {\n  isHidden: boolean;\n  isDisabled: boolean;\n  show(): void;\n  hide(): void;\n  setText(text: string): void;\n  disable(): void;\n  enable(): void;\n  destroy(): void;\n}\n\nconst SHOW_EVENTS = ['mouseenter', 'focus'];\nconst HIDE_EVENTS = ['mouseleave', 'blur'];\n\nclass TooltipReference implements ITooltipReference {\n  private _$reference: HTMLElement;\n  private _tooltipService: ITooltipService;\n\n  private _options: ITooltipReferenceOptions;\n  private _eventListeners: any[];\n\n  private _isDisabled: boolean;\n\n  constructor(\n    reference: HTMLElement,\n    tooltipService: ITooltipService,\n    options: ITooltipReferenceOptions,\n  ) {\n    this._$reference = reference;\n    this._options = options;\n    this._tooltipService = tooltipService;\n\n    this._eventListeners = [];\n\n    this._bindEvents();\n  }\n\n  private _bindEvents() {\n    SHOW_EVENTS.forEach(event => {\n      const fn = () => {\n        this.show();\n      };\n      this._eventListeners.push({ event, fn });\n      this._$reference.addEventListener(event, fn);\n    });\n\n    HIDE_EVENTS.forEach(event => {\n      const fn = () => {\n        this.hide();\n      };\n      this._eventListeners.push({ event, fn });\n      this._$reference.addEventListener(event, fn);\n    });\n  }\n\n  get isHidden(): boolean {\n    return this._tooltipService.isHidden;\n  }\n\n  get isDisabled(): boolean {\n    return this._isDisabled;\n  }\n\n  show() {\n    if (this._isDisabled) {\n      return;\n    }\n\n    this._tooltipService.show({\n      text: this._options.text,\n      position: getTooltipPositionByReferenceNode(\n        this._$reference,\n        this._tooltipService.tooltipContainerNode,\n      ),\n    });\n  }\n\n  hide() {\n    this._tooltipService.hide();\n  }\n\n  setText(text: string) {\n    this._options.text = text;\n    this._tooltipService.setText(text);\n  }\n\n  disable() {\n    this._isDisabled = true;\n  }\n\n  enable() {\n    this._isDisabled = false;\n  }\n\n  destroy() {\n    this._eventListeners.forEach(({ event, fn }) => {\n      this._$reference.removeEventListener(event, fn);\n    });\n    this._eventListeners = null;\n    this._$reference = null;\n    this._tooltipService = null;\n    this._options = null;\n  }\n}\n\nexport { ITooltipReference, ITooltipReferenceOptions };\n\nexport default TooltipReference;\n","import { tooltipContainerTemplate } from './templates';\nimport htmlToElement from '../htmlToElement';\nimport Tooltip from './tooltip';\nimport Stylable from '../stylable';\n\nimport {\n  ITooltipPosition,\n  ITooltipPositionFunction,\n  ITooltipPositionPlacement,\n} from './types';\n\nimport styles from './tooltip-container.scss';\n\ninterface ITooltipContainer {\n  node: HTMLElement;\n  getTooltipPositionStyles(\n    position: ITooltipPosition,\n  ): { [ket: string]: string | number };\n  destroy(): void;\n}\n\nclass TooltipContainer extends Stylable implements ITooltipContainer {\n  private _tooltip: Tooltip;\n  private _$node: HTMLElement;\n\n  constructor(tooltip: Tooltip) {\n    super();\n\n    this._tooltip = tooltip;\n    this._initDOM();\n  }\n\n  get node(): HTMLElement {\n    return this._$node;\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      tooltipContainerTemplate({\n        styles: this.styleNames,\n      }),\n    );\n    this._$node.appendChild(this._tooltip.node);\n  }\n\n  getTooltipPositionStyles(\n    position: ITooltipPosition | ITooltipPositionFunction,\n  ) {\n    if (typeof position === 'function') {\n      position = position(this._$node);\n    }\n\n    if (position.placement === ITooltipPositionPlacement.TOP) {\n      return {\n        left: `${this._getTooltipLeftX(position.x)}px`,\n        top: 0,\n        bottom: 'initial',\n      };\n    }\n\n    return {\n      left: `${this._getTooltipLeftX(position.x)}px`,\n      top: 'initial',\n      bottom: 0,\n    };\n  }\n\n  destroy() {\n    this._tooltip = null;\n    this._$node = null;\n  }\n\n  private _getTooltipLeftX(tooltipCenterX: number) {\n    const tooltipRect = this._tooltip.node.getBoundingClientRect();\n    const tooltipContainerRect = this._$node.getBoundingClientRect();\n\n    let tooltipLeftX = tooltipCenterX - tooltipRect.width / 2;\n\n    // ensure `x` is in range of placeholder rect\n    tooltipLeftX = Math.max(tooltipLeftX, 0);\n    tooltipLeftX = Math.min(\n      tooltipLeftX,\n      tooltipContainerRect.width - tooltipRect.width,\n    );\n\n    return tooltipLeftX;\n  }\n}\n\nTooltipContainer.extendStyleNames(styles);\n\nexport { ITooltipContainer };\nexport default TooltipContainer;\n","import TooltipReference, {\n  ITooltipReference,\n  ITooltipReferenceOptions,\n} from './tooltip-reference';\nimport TooltipContainer from './tooltip-container';\nimport { ITooltipShowOptions } from './types';\nimport Tooltip from './tooltip';\n\nimport { UI_EVENTS } from '../../../../constants';\n\ninterface ITooltipService {\n  isHidden: boolean;\n  tooltipContainerNode: HTMLElement;\n  setText(text: string): void;\n  show(options: ITooltipShowOptions): void;\n  hide(): void;\n  createReference(\n    reference: HTMLElement,\n    options: ITooltipReferenceOptions,\n  ): ITooltipReference;\n  destroy(): void;\n}\n\nclass TooltipService implements ITooltipService {\n  static moduleName = 'tooltipService';\n  static dependencies = ['eventEmitter'];\n  private _tooltip: Tooltip;\n  private _tooltipContainer: TooltipContainer;\n  private _eventEmitter;\n\n  constructor({ eventEmitter }) {\n    this._eventEmitter = eventEmitter;\n    this._tooltip = new Tooltip();\n    this._tooltipContainer = new TooltipContainer(this._tooltip);\n    this._bindEvents();\n  }\n\n  get isHidden(): boolean {\n    return this._tooltip.isHidden;\n  }\n\n  get tooltipContainerNode(): HTMLElement {\n    return this._tooltipContainer.node;\n  }\n\n  private _bindEvents() {\n    this._eventEmitter.on(UI_EVENTS.FULLSCREEN_STATUS_CHANGED, this.hide, this);\n  }\n\n  private _unbindEvents() {\n    this._eventEmitter.off(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this.hide,\n      this,\n    );\n  }\n\n  /**\n   * Set new tooltip title\n   */\n  setText(text: string) {\n    this._tooltip.setText(text);\n  }\n\n  /**\n   * Show tooltip with title\n   */\n  show(options: ITooltipShowOptions) {\n    // NOTE: its important to set tooltip text before update tooltip position styles\n    this._tooltip.setText(options.text);\n    this._tooltip.setStyle(\n      this._tooltipContainer.getTooltipPositionStyles(options.position),\n    );\n    this._tooltip.show();\n  }\n\n  /**\n   * Hide tooltip\n   */\n  hide() {\n    this._tooltip.hide();\n  }\n\n  /**\n   * Create tooltip reference which show/hide tooltip on hover and focus events\n   * @param reference - reference node\n   * @param options - tooltip title and other options\n   * @returns tooltip reference instance\n   */\n  createReference(\n    reference: HTMLElement,\n    options: ITooltipReferenceOptions,\n  ): TooltipReference {\n    return new TooltipReference(reference, this, options);\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    this._tooltip.destroy();\n    this._tooltipContainer.destroy();\n    this._tooltip = null;\n    this._tooltipContainer = null;\n\n    this._eventEmitter = null;\n  }\n}\n\nexport { ITooltipService };\n\nexport default TooltipService;\n","import { transperentizeColor } from '../../core/theme';\n\nexport default {\n  progressPlayed: {\n    backgroundColor: data => data.progressColor,\n    '&:after': {\n      backgroundColor: data => data.progressColor,\n    },\n  },\n  progressSeekTo: {\n    backgroundColor: data => transperentizeColor(data.progressColor, 0.5),\n  },\n  progressBackground: {\n    backgroundColor: data => transperentizeColor(data.progressColor, 0.25),\n  },\n  progressSyncBtn: {\n    borderColor: data => data.progressColor,\n  },\n};\n","import { TEXT_LABELS } from '../../../../constants/index';\n\nimport View from '../../core/view';\n\nimport { IView } from '../../core/types';\nimport { ITooltipReference, ITooltipService } from '../../core/tooltip';\nimport formatTime from '../../core/utils/formatTime';\nimport getProgressTimeTooltipPosition from './utils/getProgressTimeTooltipPosition';\nimport { progressTemplate, progressTimeIndicatorTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport {\n  IProgressViewStyles,\n  IProgressViewCallbacks,\n  IProgressViewConfig,\n} from './types';\n\nimport progressViewTheme from './progress.theme';\nimport styles from './progress.scss';\n\nconst DATA_PLAYED = 'data-played-percent';\n\nconst getPercentBasedOnXPosition = (\n  event: MouseEvent,\n  element: HTMLElement,\n) => {\n  const boundingRect = element.getBoundingClientRect();\n  const positionX = event.clientX;\n\n  if (positionX < boundingRect.left) {\n    return 0;\n  }\n\n  if (positionX > boundingRect.left + boundingRect.width) {\n    return 100;\n  }\n\n  return (event.clientX - boundingRect.left) / boundingRect.width * 100;\n};\n\nclass ProgressView extends View<IProgressViewStyles>\n  implements IView<IProgressViewStyles> {\n  private _callbacks: IProgressViewCallbacks;\n  private _textMap;\n  private _tooltipService: ITooltipService;\n  private _syncButtonTooltipReference: ITooltipReference;\n\n  private _isDragging: boolean;\n\n  private _$node: HTMLElement;\n  private _$hitbox: HTMLElement;\n  private _$played: HTMLElement;\n  private _$buffered: HTMLElement;\n  private _$seekTo: HTMLElement;\n  private _$timeIndicators: HTMLElement;\n  private _$syncButton: HTMLElement;\n\n  constructor(config: IProgressViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._initDOM();\n    this._bindCallbacks();\n    this._bindEvents();\n\n    this._setPlayedDOMAttributes(0);\n    this._setBufferedDOMAttributes(0);\n    this.setUsualMode();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      progressTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      }),\n    );\n\n    this._$played = getElementByHook(this._$node, 'progress-played');\n    this._$buffered = getElementByHook(this._$node, 'progress-buffered');\n    this._$seekTo = getElementByHook(this._$node, 'progress-seek-to');\n    this._$timeIndicators = getElementByHook(\n      this._$node,\n      'progress-time-indicators',\n    );\n    this._$syncButton = getElementByHook(this._$node, 'progress-sync-button');\n    this._syncButtonTooltipReference = this._tooltipService.createReference(\n      this._$syncButton,\n      {\n        text: this._textMap.get(TEXT_LABELS.LIVE_SYNC_TOOLTIP),\n      },\n    );\n    this._$hitbox = getElementByHook(this._$node, 'progress-hitbox');\n  }\n\n  private _bindCallbacks() {\n    this._setPlayedByDrag = this._setPlayedByDrag.bind(this);\n    this._startDragOnMouseDown = this._startDragOnMouseDown.bind(this);\n    this._stopDragOnMouseUp = this._stopDragOnMouseUp.bind(this);\n    this._startSeekToByMouse = this._startSeekToByMouse.bind(this);\n    this._stopSeekToByMouse = this._stopSeekToByMouse.bind(this);\n    this._syncWithLive = this._syncWithLive.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$hitbox.addEventListener('mousedown', this._startDragOnMouseDown);\n    this._$hitbox.addEventListener('mousemove', this._startSeekToByMouse);\n    this._$hitbox.addEventListener('mouseout', this._stopSeekToByMouse);\n\n    window.addEventListener('mousemove', this._setPlayedByDrag);\n    window.addEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$syncButton.addEventListener('click', this._syncWithLive);\n  }\n\n  private _unbindEvents() {\n    this._$hitbox.removeEventListener('mousedown', this._startDragOnMouseDown);\n    this._$hitbox.removeEventListener('mousemove', this._startSeekToByMouse);\n    this._$hitbox.removeEventListener('mouseout', this._stopSeekToByMouse);\n    this._$syncButton.removeEventListener('click', this._syncWithLive);\n\n    window.removeEventListener('mousemove', this._setPlayedByDrag);\n    window.removeEventListener('mouseup', this._stopDragOnMouseUp);\n  }\n\n  private _startDragOnMouseDown(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    this._setPlayedDOMAttributes(percent);\n    this._callbacks.onChangePlayedProgress(percent);\n\n    this._startDrag();\n  }\n\n  private _stopDragOnMouseUp(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    this._stopDrag();\n  }\n\n  private _startSeekToByMouse(event: MouseEvent) {\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n\n    this._setSeekToDOMAttributes(percent);\n    this._callbacks.onSeekToByMouseStart(percent);\n  }\n\n  private _stopSeekToByMouse() {\n    this._setSeekToDOMAttributes(0);\n    this._callbacks.onSeekToByMouseEnd();\n  }\n\n  private _setPlayedByDrag(event: MouseEvent) {\n    if (this._isDragging) {\n      const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n      this._setPlayedDOMAttributes(percent);\n      this._callbacks.onChangePlayedProgress(percent);\n    }\n  }\n\n  private _startDrag() {\n    this._isDragging = true;\n    this._callbacks.onDragStart();\n    this._$node.classList.add(this.styleNames.isDragging);\n  }\n\n  private _stopDrag() {\n    if (this._isDragging) {\n      this._isDragging = false;\n      this._callbacks.onDragEnd();\n      this._$node.classList.remove(this.styleNames.isDragging);\n    }\n  }\n\n  private _setSeekToDOMAttributes(percent: number) {\n    this._$seekTo.setAttribute('style', `width:${percent}%;`);\n  }\n\n  private _setPlayedDOMAttributes(percent: number) {\n    this._$node.setAttribute(\n      'aria-valuetext',\n      this._textMap.get(TEXT_LABELS.PROGRESS_CONTROL_VALUE, { percent }),\n    );\n    this._$node.setAttribute('aria-valuenow', String(percent));\n    this._$node.setAttribute(DATA_PLAYED, String(percent));\n    this._$played.setAttribute('style', `width:${percent}%;`);\n  }\n\n  private _setBufferedDOMAttributes(percent: number) {\n    this._$buffered.setAttribute('style', `width:${percent}%;`);\n  }\n\n  private _syncWithLive() {\n    this._callbacks.onSyncWithLiveClick();\n  }\n\n  showSyncWithLive() {\n    this._$syncButton.classList.remove(this.styleNames.hidden);\n  }\n\n  hideSyncWithLive() {\n    this._$syncButton.classList.add(this.styleNames.hidden);\n  }\n\n  setLiveSyncStatus(isSync) {\n    if (isSync) {\n      this._$syncButton.classList.add(this.styleNames.liveSync);\n      this._$played.setAttribute('style', `width:100%;`);\n    } else {\n      this._$syncButton.classList.remove(this.styleNames.liveSync);\n    }\n  }\n\n  showProgressTimeTooltip({ time, percent }) {\n    this._tooltipService.show({\n      text: formatTime(time),\n      position: tooltipContainerNode =>\n        getProgressTimeTooltipPosition(\n          percent,\n          this._$hitbox,\n          tooltipContainerNode,\n        ),\n    });\n  }\n\n  hideProgressTimeTooltip() {\n    this._tooltipService.hide();\n  }\n\n  setLiveMode() {\n    this._$node.classList.add(this.styleNames.inLive);\n\n    this.showSyncWithLive();\n  }\n\n  setUsualMode() {\n    this._$node.classList.remove(this.styleNames.inLive);\n\n    this.hideSyncWithLive();\n  }\n\n  setPlayed(percent: number) {\n    this._setPlayedDOMAttributes(percent);\n  }\n\n  setBuffered(percent: number) {\n    this._setBufferedDOMAttributes(percent);\n  }\n\n  addTimeIndicator(percent: number) {\n    this._$timeIndicators.appendChild(\n      htmlToElement(\n        progressTimeIndicatorTemplate({\n          percent,\n          styles: this.styleNames,\n        }),\n      ),\n    );\n  }\n\n  clearTimeIndicators() {\n    this._$timeIndicators.innerHTML = '';\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._syncButtonTooltipReference.destroy();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n    delete this._$buffered;\n    delete this._$hitbox;\n    delete this._$played;\n    delete this._$seekTo;\n    delete this._$syncButton;\n    delete this._$timeIndicators;\n\n    delete this._textMap;\n  }\n}\n\nProgressView.setTheme(progressViewTheme);\nProgressView.extendStyleNames(styles);\n\nexport default ProgressView;\n","import {\n  getTooltipPositionByReferenceNode,\n  ITooltipPosition,\n} from '../../../core/tooltip';\n\nfunction calcProgressTimeTooltipCenterX(\n  progressPercent,\n  progressNodeOffsetX,\n  progressNodeWidth,\n) {\n  return progressNodeOffsetX + progressPercent * progressNodeWidth / 100;\n}\n\nfunction getProgressTimeTooltipPosition(\n  progressPercent: number,\n  progressNode: HTMLElement,\n  tooltipContainerNode: HTMLElement,\n): ITooltipPosition {\n  return getTooltipPositionByReferenceNode(\n    progressNode,\n    tooltipContainerNode,\n    (progressNodeOffsetX, progressNodeWidth) =>\n      calcProgressTimeTooltipCenterX(\n        progressPercent,\n        progressNodeOffsetX,\n        progressNodeWidth,\n      ),\n  );\n}\n\nexport default getProgressTimeTooltipPosition;\n","export function getTimePercent(time: number, durationTime: number): number {\n  if (!durationTime) {\n    return 0;\n  }\n\n  return parseFloat((time / durationTime * 100).toFixed(1));\n}\n\nexport function getOverallBufferedPercent(\n  buffered,\n  currentTime = 0,\n  duration = 0,\n) {\n  if (!buffered || !buffered.length || !duration) {\n    return 0;\n  }\n\n  const info = getNearestBufferSegmentInfo(buffered, currentTime);\n\n  return getTimePercent(info.end, duration);\n}\n\nexport function getOverallPlayedPercent(currentTime = 0, duration = 0) {\n  return getTimePercent(currentTime, duration);\n}\n\nexport function geOverallBufferLength(buffered) {\n  let size = 0;\n\n  if (!buffered || !buffered.length) {\n    return size;\n  }\n\n  for (let i = 0; i < buffered.length; i += 1) {\n    size += buffered.end(i) - buffered.start(i);\n  }\n\n  return size;\n}\n\nexport function getNearestBufferSegmentInfo(buffered, currentTime?) {\n  let i = 0;\n\n  if (!buffered || !buffered.length) {\n    return null;\n  }\n\n  while (\n    i < buffered.length - 1 &&\n    !(buffered.start(i) <= currentTime && currentTime <= buffered.end(i))\n  ) {\n    i += 1;\n  }\n\n  return {\n    start: buffered.start(i),\n    end: buffered.end(i),\n  };\n}\n","import { IProgressViewConfig } from './types';\nimport View from './progress.view';\n\nimport {\n  getTimePercent,\n  getOverallBufferedPercent,\n  getOverallPlayedPercent,\n} from '../../../../utils/video-data';\n\nimport {\n  VIDEO_EVENTS,\n  UI_EVENTS,\n  STATES,\n  LiveState,\n} from '../../../../constants/index';\nimport { AMOUNT_TO_SKIP_SECONDS } from '../../../keyboard-control/keyboard-control';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\nimport playerAPI from '../../../../utils/player-api-decorator';\nimport { ITooltipService } from '../../core/tooltip';\n\nconst UPDATE_INTERVAL_DELAY = 1000 / 60;\n\nexport default class ProgressControl {\n  static moduleName = 'progressControl';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'liveStateEngine',\n    'eventEmitter',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _engine;\n  private _liveStateEngine;\n  private _eventEmitter;\n  private _textMap;\n  private _tooltipService: ITooltipService;\n  private _theme;\n\n  private _isUserInteracting: boolean;\n  private _shouldPlayAfterManipulationEnd: boolean;\n  private _currentProgress: number;\n  private _interceptor;\n  private _updateControlInterval;\n  private _timeIndicatorsToAdd: number[];\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    engine,\n    liveStateEngine,\n    eventEmitter,\n    textMap,\n    tooltipService,\n    theme,\n  }) {\n    this._engine = engine;\n    this._liveStateEngine = liveStateEngine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n    this._isUserInteracting = false;\n    this._currentProgress = 0;\n    this._theme = theme;\n\n    this._timeIndicatorsToAdd = [];\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.view.setPlayed(0);\n    this.view.setBuffered(0);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _bindEvents() {\n    this._eventEmitter.on(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._processStateChange,\n      this,\n    );\n    this._eventEmitter.on(\n      VIDEO_EVENTS.LIVE_STATE_CHANGED,\n      this._processLiveStateChange,\n      this,\n    );\n    this._eventEmitter.on(\n      VIDEO_EVENTS.CHUNK_LOADED,\n      this._updateBufferIndicator,\n      this,\n    );\n    this._eventEmitter.on(\n      VIDEO_EVENTS.DURATION_UPDATED,\n      this._updateAllIndicators,\n      this,\n    );\n  }\n\n  private _initUI() {\n    const config: IProgressViewConfig = {\n      callbacks: {\n        onSyncWithLiveClick: this._syncWithLive,\n        onChangePlayedProgress: this._changePlayedProgress,\n        onSeekToByMouseStart: this._onSeekToByMouseStart,\n        onSeekToByMouseEnd: this._onSeekToByMouseEnd,\n        onDragStart: this._onUserInteractionStarts,\n        onDragEnd: this._onUserInteractionEnds,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new ProgressControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor({\n      node: this.view.getNode(),\n      callbacks: {\n        [KEYCODES.UP_ARROW]: e => {\n          e.stopPropagation();\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n          this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n        },\n        [KEYCODES.DOWN_ARROW]: e => {\n          e.stopPropagation();\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n          );\n          this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n        },\n        [KEYCODES.RIGHT_ARROW]: e => {\n          e.stopPropagation();\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(UI_EVENTS.GO_FORWARD_WITH_KEYBOARD_TRIGGERED);\n          this._engine.goForward(AMOUNT_TO_SKIP_SECONDS);\n        },\n        [KEYCODES.LEFT_ARROW]: e => {\n          e.stopPropagation();\n          e.preventDefault();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            UI_EVENTS.GO_BACKWARD_WITH_KEYBOARD_TRIGGERED,\n          );\n          this._engine.goBackward(AMOUNT_TO_SKIP_SECONDS);\n        },\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  private _bindCallbacks() {\n    this._syncWithLive = this._syncWithLive.bind(this);\n    this._updateControlOnInterval = this._updateControlOnInterval.bind(this);\n    this._changePlayedProgress = this._changePlayedProgress.bind(this);\n    this._onSeekToByMouseStart = this._onSeekToByMouseStart.bind(this);\n    this._onSeekToByMouseEnd = this._onSeekToByMouseEnd.bind(this);\n    this._onUserInteractionStarts = this._onUserInteractionStarts.bind(this);\n    this._onUserInteractionEnds = this._onUserInteractionEnds.bind(this);\n    this._processStateChange = this._processStateChange.bind(this);\n    this._playVideoOnProgressManipulationEnd = this._playVideoOnProgressManipulationEnd.bind(\n      this,\n    );\n  }\n\n  private _changePlayedProgress(value) {\n    if (this._currentProgress === value) {\n      return;\n    }\n\n    this._currentProgress = value;\n    this._changeCurrentTimeOfVideo(this._currentProgress / 100);\n  }\n\n  private _startIntervalUpdates() {\n    if (this._updateControlInterval) {\n      this._stopIntervalUpdates();\n    }\n\n    this._updateControlOnInterval();\n\n    this._updateControlInterval = setInterval(\n      this._updateControlOnInterval,\n      UPDATE_INTERVAL_DELAY,\n    );\n  }\n\n  private _onSeekToByMouseStart(percent) {\n    const durationTime = this._engine.getDurationTime();\n    const seekTime = durationTime * percent / 100;\n    const time = this._engine.isDynamicContent\n      ? seekTime - durationTime\n      : seekTime;\n\n    this.view.showProgressTimeTooltip({ time, percent });\n  }\n\n  private _onSeekToByMouseEnd() {\n    this.view.hideProgressTimeTooltip();\n  }\n\n  private _stopIntervalUpdates() {\n    clearInterval(this._updateControlInterval);\n    this._updateControlInterval = false;\n  }\n\n  private _onUserInteractionStarts() {\n    if (!this._isUserInteracting) {\n      this._isUserInteracting = true;\n      this._pauseVideoOnProgressManipulationStart();\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_START);\n  }\n\n  private _onUserInteractionEnds() {\n    if (this._isUserInteracting) {\n      this._isUserInteracting = false;\n      this._playVideoOnProgressManipulationEnd();\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_END);\n  }\n\n  private _updateControlOnInterval() {\n    this._updatePlayedIndicator();\n    this._updateBufferIndicator();\n  }\n\n  private _processStateChange({ nextState }) {\n    switch (nextState) {\n      case STATES.SRC_SET:\n        this.reset();\n        break;\n      case STATES.METADATA_LOADED:\n        this._initTimeIndicators();\n\n        if (this._engine.isSeekAvailable) {\n          this.show();\n        } else {\n          this.hide();\n        }\n\n        break;\n      case STATES.PLAYING:\n        if (this._liveStateEngine.getState() === LiveState.SYNC) {\n          this.view.setPlayed(100);\n        } else {\n          this._startIntervalUpdates();\n        }\n        break;\n      case STATES.SEEK_IN_PROGRESS:\n        this._updatePlayedIndicator();\n        this._updateBufferIndicator();\n        break;\n      default:\n        this._stopIntervalUpdates();\n        break;\n    }\n  }\n\n  private _processLiveStateChange({ nextState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this.view.setLiveSyncStatus(false);\n        this.view.setUsualMode();\n        break;\n\n      case LiveState.INITIAL:\n        this.view.setLiveMode();\n        break;\n\n      case LiveState.SYNC:\n        this.view.setLiveSyncStatus(true);\n        break;\n\n      case LiveState.NOT_SYNC:\n        this.view.setLiveSyncStatus(false);\n        break;\n\n      case LiveState.ENDED:\n        this.view.setLiveSyncStatus(false);\n        this.view.hideSyncWithLive();\n\n        // ensure progress indicators show latest info\n        if (this._engine.getCurrentState() === STATES.PLAYING) {\n          this._startIntervalUpdates();\n        } else {\n          this._updatePlayedIndicator();\n          this._updateBufferIndicator();\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  private _changeCurrentTimeOfVideo(percent) {\n    const duration = this._engine.getDurationTime();\n\n    this._engine.setCurrentTime(duration * percent);\n\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_CHANGE_TRIGGERED, percent);\n  }\n\n  private _pauseVideoOnProgressManipulationStart() {\n    const currentState = this._engine.getCurrentState();\n\n    if (\n      currentState === STATES.PLAYING ||\n      currentState === STATES.PLAY_REQUESTED\n    ) {\n      this._shouldPlayAfterManipulationEnd = true;\n      this._engine.pause();\n    }\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_MANIPULATION_STARTED);\n  }\n\n  private _playVideoOnProgressManipulationEnd() {\n    if (this._shouldPlayAfterManipulationEnd) {\n      this._engine.play();\n\n      this._shouldPlayAfterManipulationEnd = false;\n    }\n\n    this._eventEmitter.emit(UI_EVENTS.PROGRESS_MANIPULATION_ENDED);\n  }\n\n  private _updateBufferIndicator() {\n    const currentTime = this._engine.getCurrentTime();\n    const buffered = this._engine.getBuffered();\n    const duration = this._engine.getDurationTime();\n\n    this.updateBuffered(\n      getOverallBufferedPercent(buffered, currentTime, duration),\n    );\n  }\n\n  private _updatePlayedIndicator() {\n    if (this._liveStateEngine.getState() === LiveState.SYNC) {\n      // TODO: mb use this.updatePlayed(100) here?\n      return;\n    }\n\n    const currentTime = this._engine.getCurrentTime();\n    const duration = this._engine.getDurationTime();\n\n    this.updatePlayed(getOverallPlayedPercent(currentTime, duration));\n  }\n\n  private _updateAllIndicators() {\n    this._updatePlayedIndicator();\n    this._updateBufferIndicator();\n  }\n\n  private _initTimeIndicators() {\n    this._timeIndicatorsToAdd.forEach(time => {\n      this._addTimeIndicator(time);\n    });\n    this._timeIndicatorsToAdd = [];\n  }\n\n  private _addTimeIndicator(time) {\n    const durationTime = this._engine.getDurationTime();\n\n    if (time > durationTime) {\n      // TODO: log error for developers\n      return;\n    }\n\n    this.view.addTimeIndicator(getTimePercent(time, durationTime));\n  }\n\n  private _syncWithLive() {\n    this._engine.syncWithLive();\n  }\n\n  /**\n   * Add time indicator to progress bar\n   */\n  @playerAPI()\n  addTimeIndicator(time: number) {\n    this.addTimeIndicators([time]);\n  }\n\n  /**\n   * Add time indicators to progress bar\n   */\n  @playerAPI()\n  addTimeIndicators(times: number[]) {\n    if (!this._engine.isMetadataLoaded) {\n      // NOTE: Add indicator after metadata loaded\n      this._timeIndicatorsToAdd.push(...times);\n      return;\n    }\n\n    times.forEach(time => {\n      this._addTimeIndicator(time);\n    });\n  }\n\n  /**\n   * Delete all time indicators from progress bar\n   */\n  @playerAPI()\n  clearTimeIndicators() {\n    this.view.clearTimeIndicators();\n  }\n\n  updatePlayed(percent) {\n    this._currentProgress = percent;\n    this.view.setPlayed(this._currentProgress);\n  }\n\n  updateBuffered(percent) {\n    this.view.setBuffered(percent);\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  private _unbindEvents() {\n    this._eventEmitter.off(\n      VIDEO_EVENTS.DURATION_UPDATED,\n      this._updateAllIndicators,\n      this,\n    );\n    this._eventEmitter.off(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._processStateChange,\n      this,\n    );\n    this._eventEmitter.off(\n      VIDEO_EVENTS.LIVE_STATE_CHANGED,\n      this._processLiveStateChange,\n      this,\n    );\n    this._eventEmitter.off(\n      VIDEO_EVENTS.CHUNK_LOADED,\n      this._updateBufferIndicator,\n      this,\n    );\n  }\n\n  reset() {\n    this.updatePlayed(0);\n    this.updateBuffered(0);\n    this.clearTimeIndicators();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._stopIntervalUpdates();\n    this._unbindEvents();\n    this.view.destroy();\n    delete this.view;\n\n    delete this._eventEmitter;\n    delete this._engine;\n    delete this._liveStateEngine;\n    delete this._timeIndicatorsToAdd;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants/index';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport {\n  controlTemplate,\n  playIconTemplate,\n  pauseIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { IPlayViewStyles, IPlayViewCallbacks, IPlayViewConfig } from './types';\n\nimport playViewTheme from './play.theme';\nimport styles from './play.scss';\n\nconst DATA_IS_PLAYING = 'data-is-playing';\n\nclass PlayView extends View<IPlayViewStyles> implements IView<IPlayViewStyles> {\n  private _callbacks: IPlayViewCallbacks;\n  private _textMap;\n\n  private _$node: HTMLElement;\n  private _$playbackControl: HTMLElement;\n\n  constructor(config: IPlayViewConfig) {\n    const { callbacks, textMap, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$node = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.PLAY_CONTROL_LABEL),\n        },\n      }),\n    );\n\n    this._$playbackControl = getElementByHook(this._$node, 'playback-control');\n\n    this.setState({ isPlaying: false });\n    this._bindEvents();\n  }\n\n  _bindEvents() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._$playbackControl.addEventListener('click', this._onButtonClick);\n  }\n\n  _unbindEvents() {\n    this._$playbackControl.removeEventListener('click', this._onButtonClick);\n  }\n\n  _onButtonClick() {\n    this._$playbackControl.focus();\n    this._callbacks.onButtonClick();\n  }\n\n  setState({ isPlaying }) {\n    if (isPlaying) {\n      this._$playbackControl.classList.remove(this.styleNames.paused);\n      this._$playbackControl.innerHTML = pauseIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$playbackControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.PAUSE_CONTROL_LABEL),\n      );\n    } else {\n      this._$playbackControl.classList.add(this.styleNames.paused);\n      this._$playbackControl.innerHTML = playIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$playbackControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.PLAY_CONTROL_LABEL),\n      );\n    }\n\n    this._$node.setAttribute(DATA_IS_PLAYING, isPlaying);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$playbackControl;\n    delete this._$node;\n    delete this._textMap;\n  }\n}\n\nPlayView.setTheme(playViewTheme);\nPlayView.extendStyleNames(styles);\n\nexport default PlayView;\n","export default {\n  playSvgFill: {\n    fill: data => data.color,\n  },\n};\n","import { IPlayViewConfig } from './types';\n\nimport View from './play.view';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { VIDEO_EVENTS, UI_EVENTS, STATES } from '../../../../constants/index';\n\nexport default class PlayControl {\n  static moduleName = 'playControl';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'textMap', 'theme'];\n\n  private _engine;\n  private _eventEmitter;\n  private _textMap;\n  private _theme;\n\n  private _interceptor;\n  private _isPlaying: boolean;\n\n  view: View;\n\n  constructor({ engine, eventEmitter, textMap, theme }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._theme = theme;\n\n    this._isPlaying = null;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.setControlStatus(false);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor({\n      node: this.node,\n      callbacks: {\n        [KEYCODES.SPACE_BAR]: e => {\n          e.stopPropagation();\n          this._eventEmitter.emit(\n            UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n        [KEYCODES.ENTER]: e => {\n          e.stopPropagation();\n          this._eventEmitter.emit(\n            UI_EVENTS.TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n      },\n    });\n  }\n\n  _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  _bindCallbacks() {\n    this._togglePlayback = this._togglePlayback.bind(this);\n  }\n\n  _bindEvents() {\n    this._eventEmitter.on(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._updatePlayingStatus,\n      this,\n    );\n  }\n\n  _togglePlayback() {\n    if (this._isPlaying) {\n      this._pauseVideo();\n    } else {\n      this._playVideo();\n    }\n  }\n\n  _playVideo() {\n    this._engine.play();\n\n    this._eventEmitter.emit(UI_EVENTS.PLAY_TRIGGERED);\n  }\n\n  _pauseVideo() {\n    this._engine.pause();\n\n    this._eventEmitter.emit(UI_EVENTS.PAUSE_TRIGGERED);\n  }\n\n  _updatePlayingStatus({ nextState }) {\n    if (nextState === STATES.SRC_SET) {\n      this.reset();\n    } else if (nextState === STATES.PLAYING) {\n      this.setControlStatus(true);\n    } else if (\n      nextState === STATES.PAUSED ||\n      nextState === STATES.ENDED ||\n      nextState === STATES.SEEK_IN_PROGRESS\n    ) {\n      this.setControlStatus(false);\n    }\n  }\n\n  _initUI() {\n    const config: IPlayViewConfig = {\n      callbacks: {\n        onButtonClick: this._togglePlayback,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n    };\n\n    this.view = new PlayControl.View(config);\n  }\n\n  setControlStatus(isPlaying) {\n    this._isPlaying = isPlaying;\n    this.view.setState({ isPlaying: this._isPlaying });\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._updatePlayingStatus,\n      this,\n    );\n  }\n\n  reset() {\n    this.setControlStatus(false);\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    delete this.view;\n\n    delete this._eventEmitter;\n    delete this._engine;\n    delete this._textMap;\n  }\n}\n","import View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport formatTime from '../../core/utils/formatTime';\n\nimport { timeTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport { ITimeViewStyles, ITimeViewConfig } from './types';\nimport timeViewTheme from './time.theme';\nimport styles from './time.scss';\n\nclass TimeView extends View<ITimeViewStyles> implements IView<ITimeViewStyles> {\n  private _$node: HTMLElement;\n  private _$currentTime: HTMLElement;\n  private _$durationTime: HTMLElement;\n  private _duration: number;\n  private _current: number;\n  private _isBackward: boolean;\n  constructor(config: ITimeViewConfig) {\n    const { theme } = config;\n    super(theme);\n\n    this._initDOM();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      timeTemplate({ styles: this.styleNames, themeStyles: this.themeStyles }),\n    );\n\n    this._$currentTime = getElementByHook(\n      this._$node,\n      'current-time-indicator',\n    );\n    this._$durationTime = getElementByHook(\n      this._$node,\n      'duration-time-indicator',\n    );\n  }\n\n  setDurationTime(duration: number) {\n    if (duration !== this._duration) {\n      this._duration = duration;\n      this._updateDurationTime();\n    }\n  }\n\n  setCurrentTime(current: number) {\n    if (current !== this._current) {\n      this._current = current;\n      this._updateCurrentTime();\n    }\n  }\n\n  setCurrentTimeBackward(_isBackward: boolean) {\n    this._isBackward = _isBackward;\n    this._updateCurrentTime();\n  }\n\n  private _updateDurationTime() {\n    this._$durationTime.innerHTML = formatTime(this._duration);\n  }\n\n  private _updateCurrentTime() {\n    if (this._isBackward) {\n      this._$currentTime.innerHTML = formatTime(this._current - this._duration);\n    } else {\n      this._$currentTime.innerHTML = formatTime(this._current);\n    }\n  }\n\n  showDuration() {\n    this._$durationTime.classList.remove(this.styleNames.hidden);\n  }\n\n  hideDuration() {\n    this._$durationTime.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$currentTime;\n    delete this._$durationTime;\n    delete this._$node;\n  }\n}\n\nTimeView.setTheme(timeViewTheme);\nTimeView.extendStyleNames(styles);\n\nexport default TimeView;\n","export default {\n  timeText: {\n    color: data => data.color,\n  },\n};\n","import { ITimeViewConfig } from './types';\n\nimport View from './time.view';\n\nimport { VIDEO_EVENTS, STATES, LiveState } from '../../../../constants/index';\n\nconst UPDATE_INTERVAL_DELAY = 1000 / 60;\n\nexport default class TimeControl {\n  static moduleName = 'timeControl';\n  static View = View;\n  static dependencies = ['engine', 'eventEmitter', 'theme'];\n\n  private _eventEmitter;\n  private _engine;\n  private _theme;\n\n  private _updateControlInterval;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({ eventEmitter, engine, theme }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._theme = theme;\n\n    this._bindCallbacks();\n    this._initUI();\n    this._bindEvents();\n\n    this.setCurrentTime(0);\n    this.setDurationTime(0);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _bindCallbacks() {\n    this._updateCurrentTime = this._updateCurrentTime.bind(this);\n    this._updateDurationTime = this._updateDurationTime.bind(this);\n  }\n\n  _bindEvents() {\n    this._eventEmitter.on(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._toggleIntervalUpdates,\n      this,\n    );\n    this._eventEmitter.on(\n      VIDEO_EVENTS.DURATION_UPDATED,\n      this._updateDurationTime,\n      this,\n    );\n    this._eventEmitter.on(\n      VIDEO_EVENTS.LIVE_STATE_CHANGED,\n      this._processLiveStateChange,\n      this,\n    );\n  }\n\n  _initUI() {\n    const config: ITimeViewConfig = {\n      theme: this._theme,\n    };\n    this.view = new TimeControl.View(config);\n  }\n\n  _startIntervalUpdates() {\n    if (this._updateControlInterval) {\n      this._stopIntervalUpdates();\n    }\n    this._updateControlInterval = setInterval(\n      this._updateCurrentTime,\n      UPDATE_INTERVAL_DELAY,\n    );\n  }\n\n  _stopIntervalUpdates() {\n    clearInterval(this._updateControlInterval);\n    this._updateControlInterval = null;\n  }\n\n  _processLiveStateChange({ nextState }) {\n    switch (nextState) {\n      case LiveState.NONE:\n        this.show();\n        break;\n\n      case LiveState.INITIAL:\n        this.hide();\n        break;\n\n      case LiveState.ENDED:\n        this.show();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _toggleIntervalUpdates({ nextState }) {\n    switch (nextState) {\n      case STATES.SRC_SET:\n        this.reset();\n        break;\n      case STATES.PLAYING:\n        this._startIntervalUpdates();\n        break;\n      case STATES.SEEK_IN_PROGRESS:\n        this._updateCurrentTime();\n        break;\n      default:\n        this._stopIntervalUpdates();\n        break;\n    }\n  }\n\n  _updateDurationTime() {\n    this.setDurationTime(this._engine.getDurationTime());\n  }\n\n  _updateCurrentTime() {\n    this.setCurrentTime(this._engine.getCurrentTime());\n  }\n\n  setDurationTime(time) {\n    this.view.setDurationTime(time);\n  }\n\n  setCurrentTime(time) {\n    this.view.setCurrentTime(time);\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  reset() {\n    this.setDurationTime(0);\n    this.setCurrentTime(0);\n    this.view.showDuration();\n    this.view.setCurrentTimeBackward(false);\n    this.show();\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      VIDEO_EVENTS.STATE_CHANGED,\n      this._toggleIntervalUpdates,\n      this,\n    );\n    this._eventEmitter.off(\n      VIDEO_EVENTS.DURATION_UPDATED,\n      this._updateDurationTime,\n      this,\n    );\n  }\n\n  destroy() {\n    this._stopIntervalUpdates();\n    this._unbindEvents();\n    this.view.destroy();\n    delete this.view;\n\n    delete this._eventEmitter;\n    delete this._engine;\n\n    this.isHidden = null;\n  }\n}\n","import { transperentizeColor } from '../../core/theme';\n\nexport default {\n  volumeSvgFill: {\n    fill: data => data.color,\n  },\n  volumeSvgStroke: {\n    stroke: data => data.color,\n  },\n  volumeProgress: {\n    backgroundColor: data => data.color,\n    '&:after': {\n      backgroundColor: data => data.color,\n    },\n  },\n  volumeProgressBackground: {\n    backgroundColor: data => transperentizeColor(data.color, 0.25),\n  },\n};\n","import { TEXT_LABELS } from '../../../../constants/index';\n\nimport { ITooltipReference, ITooltipService } from '../../core/tooltip';\nimport {\n  controlTemplate,\n  volume0IconTemplate,\n  volume50IconTemplate,\n  volume100IconTemplate,\n} from './templates';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport {\n  IVolumeViewStyles,\n  IVolumeViewCallbacks,\n  IVolumeViewConfig,\n} from './types';\n\nimport volumeViewTheme from './volume.theme';\nimport styles from './volume.scss';\n\nconst DATA_IS_MUTED = 'data-is-muted';\nconst DATA_VOLUME = 'data-volume-percent';\n\nconst MAX_VOLUME_ICON_RANGE = 50;\n\nconst getPercentBasedOnXPosition = (\n  event: MouseEvent,\n  element: HTMLElement,\n) => {\n  const boundingRect = element.getBoundingClientRect();\n  const positionX = event.clientX;\n\n  if (positionX < boundingRect.left) {\n    return 0;\n  }\n\n  if (positionX > boundingRect.left + boundingRect.width) {\n    return 100;\n  }\n\n  return (event.clientX - boundingRect.left) / boundingRect.width * 100;\n};\n\nclass VolumeView extends View<IVolumeViewStyles>\n  implements IView<IVolumeViewStyles> {\n  private _callbacks: IVolumeViewCallbacks;\n  private _textMap;\n  private _tooltipService: ITooltipService;\n  private _muteButtonTooltipReference: ITooltipReference;\n\n  private _$node: HTMLElement;\n  private _$muteButton: HTMLElement;\n  private _$volumeNode: HTMLElement;\n  private _$volume: HTMLElement;\n  private _$hitbox: HTMLElement;\n\n  private _isDragging;\n\n  constructor(config: IVolumeViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n    this._initDOM();\n    this._bindEvents();\n  }\n\n  private _initDOM() {\n    this._$node = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n        texts: {\n          muteLabel: this._textMap.get(TEXT_LABELS.MUTE_CONTROL_LABEL),\n          volumeLabel: this._textMap.get(TEXT_LABELS.VOLUME_CONTROL_LABEL),\n        },\n      }),\n    );\n\n    this._$muteButton = getElementByHook(this._$node, 'mute-button');\n    this._$volumeNode = getElementByHook(this._$node, 'volume-input-block');\n    this._$hitbox = getElementByHook(this._$node, 'volume-hitbox');\n    this._$volume = getElementByHook(this._$node, 'volume-input');\n\n    this._muteButtonTooltipReference = this._tooltipService.createReference(\n      this._$muteButton,\n      {\n        text: this._textMap.get(TEXT_LABELS.MUTE_CONTROL_TOOLTIP),\n      },\n    );\n  }\n\n  private _bindCallbacks() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._startDragOnMouseDown = this._startDragOnMouseDown.bind(this);\n    this._stopDragOnMouseUp = this._stopDragOnMouseUp.bind(this);\n    this._setVolumeByWheel = this._setVolumeByWheel.bind(this);\n    this._setVolumeByClick = this._setVolumeByClick.bind(this);\n    this._setVolumeByDrag = this._setVolumeByDrag.bind(this);\n  }\n\n  private _bindEvents() {\n    this._$hitbox.addEventListener('wheel', this._setVolumeByWheel);\n    this._$hitbox.addEventListener('mousedown', this._startDragOnMouseDown);\n    window.addEventListener('mousemove', this._setVolumeByDrag);\n    window.addEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$muteButton.addEventListener('click', this._onButtonClick);\n  }\n\n  private _unbindEvents() {\n    this._$hitbox.removeEventListener('wheel', this._setVolumeByWheel);\n    this._$hitbox.removeEventListener('mousedown', this._startDragOnMouseDown);\n    window.removeEventListener('mousemove', this._setVolumeByDrag);\n    window.removeEventListener('mouseup', this._stopDragOnMouseUp);\n\n    this._$muteButton.removeEventListener('click', this._onButtonClick);\n  }\n\n  private _startDragOnMouseDown(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n    this._setVolumeByClick(event);\n    this._startDrag();\n  }\n\n  private _stopDragOnMouseUp(event: MouseEvent) {\n    if (event.button > 1) {\n      return;\n    }\n\n    this._stopDrag();\n  }\n\n  private _setVolumeByClick(event: MouseEvent) {\n    this._$volumeNode.focus();\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    this._callbacks.onVolumeLevelChangeFromInput(percent);\n  }\n\n  private _setVolumeByDrag(event: MouseEvent) {\n    const percent = getPercentBasedOnXPosition(event, this._$hitbox);\n    if (this._isDragging) {\n      this._callbacks.onVolumeLevelChangeFromInput(percent);\n    }\n  }\n\n  private _setVolumeByWheel(e: WheelEvent) {\n    e.preventDefault();\n    const value = e.deltaX || e.deltaY * -1;\n\n    if (!value) {\n      return;\n    }\n\n    this._callbacks.onVolumeLevelChangeFromWheel(value);\n  }\n\n  private _startDrag() {\n    this._isDragging = true;\n    this._$node.classList.add(this.styleNames.isDragging);\n    this._callbacks.onDragStart();\n  }\n\n  private _stopDrag() {\n    if (this._isDragging) {\n      this._isDragging = false;\n      this._$node.classList.remove(this.styleNames.isDragging);\n      this._callbacks.onDragEnd();\n    }\n  }\n\n  private _setVolumeDOMAttributes(percent: number) {\n    this._$volumeNode.setAttribute('value', String(percent));\n    this._$volumeNode.setAttribute(\n      'aria-valuetext',\n      this._textMap.get(TEXT_LABELS.VOLUME_CONTROL_VALUE, { percent }),\n    );\n    this._$volumeNode.setAttribute('aria-valuenow', String(percent));\n    this._$volumeNode.setAttribute(DATA_VOLUME, String(percent));\n\n    this._$volume.setAttribute('style', `width:${percent}%;`);\n\n    this._$node.setAttribute(DATA_VOLUME, String(percent));\n\n    const iconTemplateProps = {\n      styles: this.styleNames,\n      themeStyles: this.themeStyles,\n    };\n\n    if (percent >= MAX_VOLUME_ICON_RANGE) {\n      this._$muteButton.innerHTML = volume100IconTemplate(iconTemplateProps);\n    } else if (percent > 0) {\n      this._$muteButton.innerHTML = volume50IconTemplate(iconTemplateProps);\n    } else {\n      this._$muteButton.innerHTML = volume0IconTemplate(iconTemplateProps);\n    }\n  }\n\n  private _onButtonClick() {\n    this._$muteButton.focus();\n    this._callbacks.onToggleMuteClick();\n  }\n\n  setVolume(volume: number) {\n    this._setVolumeDOMAttributes(volume);\n  }\n\n  setMute(isMuted: boolean) {\n    this._setMuteDOMAttributes(isMuted);\n  }\n\n  private _setMuteDOMAttributes(isMuted) {\n    if (isMuted) {\n      this._$muteButton.innerHTML = volume0IconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n    }\n\n    this._$node.setAttribute(DATA_IS_MUTED, isMuted);\n    this._$muteButton.setAttribute(\n      'aria-label',\n      isMuted\n        ? this._textMap.get(TEXT_LABELS.UNMUTE_CONTROL_LABEL)\n        : this._textMap.get(TEXT_LABELS.MUTE_CONTROL_LABEL),\n    );\n    this._muteButtonTooltipReference.setText(\n      isMuted\n        ? this._textMap.get(TEXT_LABELS.UNMUTE_CONTROL_TOOLTIP)\n        : this._textMap.get(TEXT_LABELS.MUTE_CONTROL_TOOLTIP),\n    );\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  getButtonNode() {\n    return this._$muteButton;\n  }\n\n  getInputNode() {\n    return this._$volumeNode;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._muteButtonTooltipReference.destroy();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$muteButton;\n    delete this._$node;\n\n    delete this._textMap;\n  }\n}\n\nVolumeView.setTheme(volumeViewTheme);\nVolumeView.extendStyleNames(styles);\n\nexport default VolumeView;\n","import { ITooltipService } from '../../core/tooltip';\nimport { IVolumeViewConfig } from './types';\n\nimport View from './volume.view';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { AMOUNT_TO_CHANGE_VOLUME } from '../../../keyboard-control/keyboard-control';\nimport { VIDEO_EVENTS, UI_EVENTS } from '../../../../constants/index';\n\nexport default class VolumeControl {\n  static moduleName = 'volumeControl';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'eventEmitter',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _engine;\n  private _eventEmitter;\n  private _textMap;\n  private _tooltipService: ITooltipService;\n  private _theme;\n\n  private _isMuted: boolean;\n  private _volume: number;\n\n  private _buttonInterceptor;\n  private _inputInterceptor;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({ engine, eventEmitter, textMap, tooltipService, theme }) {\n    this._engine = engine;\n    this._eventEmitter = eventEmitter;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n    this._theme = theme;\n\n    this._isMuted = this._engine.getMute();\n    this._volume = this._engine.getVolume();\n\n    this._bindCallbacks();\n\n    this._initUI();\n\n    this._bindEvents();\n\n    this.view.setVolume(this._volume);\n    this.view.setMute(this._isMuted);\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  private _initUI() {\n    const config: IVolumeViewConfig = {\n      callbacks: {\n        onDragStart: this._broadcastDragStart,\n        onDragEnd: this._broadcastDragEnd,\n        onVolumeLevelChangeFromInput: this._getVolumeLevelFromInput,\n        onVolumeLevelChangeFromWheel: this._getVolumeLevelFromWheel,\n        onToggleMuteClick: this._toggleMuteStatus,\n      },\n      theme: this._theme,\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new VolumeControl.View(config);\n  }\n\n  private _initInterceptor() {\n    this._buttonInterceptor = new KeyboardInterceptor({\n      node: this.view.getButtonNode(),\n      callbacks: {\n        [KEYCODES.SPACE_BAR]: e => {\n          e.stopPropagation();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            this._isMuted\n              ? UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED\n              : UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n        [KEYCODES.ENTER]: e => {\n          e.stopPropagation();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            this._isMuted\n              ? UI_EVENTS.UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED\n              : UI_EVENTS.MUTE_SOUND_WITH_KEYBOARD_TRIGGERED,\n          );\n        },\n      },\n    });\n\n    this._inputInterceptor = new KeyboardInterceptor({\n      node: this.view.getInputNode(),\n      callbacks: {\n        [KEYCODES.RIGHT_ARROW]: e => {\n          e.stopPropagation();\n          e.preventDefault();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            UI_EVENTS.INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n          );\n\n          this._engine.increaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n        },\n        [KEYCODES.LEFT_ARROW]: e => {\n          e.stopPropagation();\n          e.preventDefault();\n\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._eventEmitter.emit(\n            UI_EVENTS.DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED,\n          );\n\n          this._engine.decreaseVolume(AMOUNT_TO_CHANGE_VOLUME);\n        },\n      },\n    });\n  }\n\n  private _destroyInterceptor() {\n    this._buttonInterceptor.destroy();\n    this._inputInterceptor.destroy();\n  }\n\n  private _bindEvents() {\n    this._eventEmitter.on(\n      VIDEO_EVENTS.VOLUME_STATUS_CHANGED,\n      this._updateVolumeStatus,\n      this,\n    );\n  }\n\n  private _bindCallbacks() {\n    this._getVolumeLevelFromInput = this._getVolumeLevelFromInput.bind(this);\n    this._toggleMuteStatus = this._toggleMuteStatus.bind(this);\n    this._getVolumeLevelFromWheel = this._getVolumeLevelFromWheel.bind(this);\n    this._broadcastDragStart = this._broadcastDragStart.bind(this);\n    this._broadcastDragEnd = this._broadcastDragEnd.bind(this);\n  }\n\n  private _broadcastDragStart() {\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_START);\n  }\n\n  private _broadcastDragEnd() {\n    this._eventEmitter.emit(UI_EVENTS.CONTROL_DRAG_END);\n  }\n\n  private _changeVolumeLevel(level) {\n    this._engine.setVolume(level);\n    this._eventEmitter.emit(UI_EVENTS.VOLUME_CHANGE_TRIGGERED, level);\n  }\n\n  private _toggleMuteStatus() {\n    this._engine.setMute(!this._isMuted);\n    this._eventEmitter.emit(UI_EVENTS.MUTE_STATUS_TRIGGERED, !this._isMuted);\n  }\n\n  private _getVolumeLevelFromWheel(delta) {\n    const adjustedVolume = this._volume + delta / 10;\n    const validatedVolume = Math.min(100, Math.max(0, adjustedVolume));\n\n    this._changeVolumeStatus(validatedVolume);\n  }\n\n  private _getVolumeLevelFromInput(level) {\n    this._changeVolumeStatus(level);\n  }\n\n  private _changeVolumeStatus(level) {\n    this._changeVolumeLevel(level);\n    if (this._isMuted) {\n      this._toggleMuteStatus();\n    }\n  }\n\n  private _updateVolumeStatus() {\n    this.setVolumeLevel(this._engine.getVolume());\n    this.setMuteStatus(this._engine.getMute());\n  }\n\n  setVolumeLevel(level) {\n    if (level === this._volume) {\n      return;\n    }\n\n    this._volume = level;\n\n    this.view.setVolume(this._volume);\n    this.view.setMute(Boolean(!this._volume));\n  }\n\n  setMuteStatus(isMuted) {\n    if (isMuted === this._isMuted) {\n      return;\n    }\n\n    this._isMuted = isMuted;\n\n    this.view.setVolume(this._isMuted ? 0 : this._volume);\n    this.view.setMute(this._isMuted || Boolean(!this._volume));\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  private _unbindEvents() {\n    this._eventEmitter.off(\n      VIDEO_EVENTS.VOLUME_STATUS_CHANGED,\n      this._updateVolumeStatus,\n      this,\n    );\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    delete this.view;\n\n    delete this._eventEmitter;\n    delete this._engine;\n    delete this._textMap;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants/index';\n\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\n\nimport { ITooltipReference } from '../../core/tooltip';\nimport {\n  controlTemplate,\n  enterFullScreenIconTemplate,\n  exitFullScreenIconTemplate,\n} from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport {\n  IFullScreenViewStyles,\n  IFullScreenViewCallbacks,\n  IFullScreenViewConfig,\n} from './types';\n\nimport fullScreenViewTheme from './full-screen.theme';\nimport styles from './full-screen.scss';\n\nconst DATA_IS_IN_FULL_SCREEN = 'data-is-in-full-screen';\n\nclass FullScreenView extends View<IFullScreenViewStyles>\n  implements IView<IFullScreenViewStyles> {\n  private _callbacks: IFullScreenViewCallbacks;\n  private _textMap;\n  private _tooltipReference: ITooltipReference;\n\n  private _$node: HTMLElement;\n  private _$toggleFullScreenControl: HTMLElement;\n\n  constructor(config: IFullScreenViewConfig) {\n    const { callbacks, textMap, tooltipService, theme } = config;\n\n    super(theme);\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$node = htmlToElement(\n      controlTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_LABEL),\n        },\n      }),\n    );\n\n    this._$toggleFullScreenControl = getElementByHook(\n      this._$node,\n      'full-screen-button',\n    );\n\n    this._tooltipReference = tooltipService.createReference(\n      this._$toggleFullScreenControl,\n      {\n        text: this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP),\n      },\n    );\n\n    this.setState({ isInFullScreen: false });\n    this._bindEvents();\n  }\n\n  _bindEvents() {\n    this._onButtonClick = this._onButtonClick.bind(this);\n\n    this._$toggleFullScreenControl.addEventListener(\n      'click',\n      this._onButtonClick,\n    );\n  }\n\n  _unbindEvents() {\n    this._$toggleFullScreenControl.removeEventListener(\n      'click',\n      this._onButtonClick,\n    );\n  }\n\n  _onButtonClick() {\n    this._$toggleFullScreenControl.focus();\n    this._callbacks.onButtonClick();\n  }\n\n  setState({ isInFullScreen }) {\n    if (isInFullScreen) {\n      this._$toggleFullScreenControl.classList.add(\n        this.styleNames.inFullScreen,\n      );\n      this._$toggleFullScreenControl.innerHTML = exitFullScreenIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$toggleFullScreenControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.EXIT_FULL_SCREEN_LABEL),\n      );\n\n      this._tooltipReference.setText(\n        this._textMap.get(TEXT_LABELS.EXIT_FULL_SCREEN_TOOLTIP),\n      );\n    } else {\n      this._$toggleFullScreenControl.classList.remove(\n        this.styleNames.inFullScreen,\n      );\n      this._$toggleFullScreenControl.innerHTML = enterFullScreenIconTemplate({\n        styles: this.styleNames,\n        themeStyles: this.themeStyles,\n      });\n      this._$toggleFullScreenControl.setAttribute(\n        'aria-label',\n        this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_LABEL),\n      );\n\n      this._tooltipReference.setText(\n        this._textMap.get(TEXT_LABELS.ENTER_FULL_SCREEN_TOOLTIP),\n      );\n    }\n\n    this._$node.setAttribute(DATA_IS_IN_FULL_SCREEN, isInFullScreen);\n  }\n\n  hide() {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._tooltipReference.destroy();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n    delete this._$toggleFullScreenControl;\n    delete this._$node;\n\n    delete this._textMap;\n  }\n}\n\nFullScreenView.setTheme(fullScreenViewTheme);\nFullScreenView.extendStyleNames(styles);\n\nexport default FullScreenView;\n","export default {\n  fullScreenSvgFill: {\n    fill: data => data.color,\n  },\n};\n","import { UI_EVENTS } from '../../../../constants/index';\n\nimport { IFullScreenViewConfig } from './types';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { ITooltipService } from '../../core/tooltip';\nimport View from './full-screen.view';\n\nexport default class FullScreenControl {\n  static moduleName = 'fullScreenControl';\n  static View = View;\n  static dependencies = [\n    'eventEmitter',\n    'fullScreenManager',\n    'textMap',\n    'tooltipService',\n    'theme',\n  ];\n\n  private _eventEmitter;\n  private _fullScreenManager;\n  private _textMap;\n  private _interceptor;\n  private _tooltipService: ITooltipService;\n  private _theme;\n\n  private _isInFullScreen: boolean;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({\n    eventEmitter,\n    fullScreenManager,\n    textMap,\n    tooltipService,\n    theme,\n  }) {\n    this._eventEmitter = eventEmitter;\n    this._fullScreenManager = fullScreenManager;\n    this._textMap = textMap;\n    this._theme = theme;\n    this._tooltipService = tooltipService;\n\n    this._isInFullScreen = null;\n\n    this._bindCallbacks();\n\n    this._initUI();\n\n    this._bindEvents();\n\n    this.setControlStatus(false);\n\n    if (!this._fullScreenManager.isEnabled) {\n      this.hide();\n    }\n\n    this._initInterceptor();\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _bindCallbacks() {\n    this._toggleFullScreen = this._toggleFullScreen.bind(this);\n  }\n\n  _bindEvents() {\n    this._eventEmitter.on(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this.setControlStatus,\n      this,\n    );\n  }\n\n  _initUI() {\n    const config: IFullScreenViewConfig = {\n      callbacks: {\n        onButtonClick: this._toggleFullScreen,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n      theme: this._theme,\n    };\n\n    this.view = new FullScreenControl.View(config);\n  }\n\n  _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor({\n      node: this.node,\n      callbacks: {\n        [KEYCODES.SPACE_BAR]: e => {\n          e.stopPropagation();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        },\n        [KEYCODES.ENTER]: e => {\n          e.stopPropagation();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n        },\n      },\n    });\n  }\n\n  _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  _toggleFullScreen() {\n    if (this._isInFullScreen) {\n      this._exitFullScreen();\n    } else {\n      this._enterFullScreen();\n    }\n  }\n\n  _enterFullScreen() {\n    this._fullScreenManager.enterFullScreen();\n  }\n\n  _exitFullScreen() {\n    this._fullScreenManager.exitFullScreen();\n  }\n\n  setControlStatus(isInFullScreen) {\n    this._isInFullScreen = isInFullScreen;\n    this.view.setState({ isInFullScreen: this._isInFullScreen });\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  _unbindEvents() {\n    this._eventEmitter.off(\n      UI_EVENTS.FULLSCREEN_STATUS_CHANGED,\n      this.setControlStatus,\n      this,\n    );\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this._unbindEvents();\n    this.view.destroy();\n    delete this.view;\n\n    delete this._eventEmitter;\n    delete this._fullScreenManager;\n    delete this._textMap;\n\n    delete this.isHidden;\n  }\n}\n","import { TEXT_LABELS } from '../../../../constants/index';\n\nimport { ITooltipReference } from '../../core/tooltip';\nimport View from '../../core/view';\nimport { IView } from '../../core/types';\nimport { ILogoViewStyles, ILogoViewCallbacks, ILogoViewConfig } from './types';\nimport { logoTemplate } from './templates';\n\nimport htmlToElement from '../../core/htmlToElement';\nimport getElementByHook from '../../core/getElementByHook';\n\nimport styles from './logo.scss';\n\nclass LogoView extends View<ILogoViewStyles> implements IView<ILogoViewStyles> {\n  private _tooltipReference: ITooltipReference;\n  private _callbacks: ILogoViewCallbacks;\n  private _textMap;\n\n  private _$node: HTMLElement;\n  private _$logo: HTMLElement;\n  private _$placeholder: HTMLElement;\n\n  constructor(config: ILogoViewConfig) {\n    super();\n    const { callbacks, textMap, tooltipService } = config;\n\n    this._callbacks = callbacks;\n    this._textMap = textMap;\n\n    this._$node = htmlToElement(\n      logoTemplate({\n        styles: this.styleNames,\n        texts: {\n          label: this._textMap.get(TEXT_LABELS.LOGO_LABEL),\n        },\n      }),\n    );\n\n    this._$logo = getElementByHook(this._$node, 'company-logo');\n    this._$placeholder = getElementByHook(this._$node, 'logo-placeholder');\n\n    this._tooltipReference = tooltipService.createReference(this._$node, {\n      text: this._textMap.get(TEXT_LABELS.LOGO_TOOLTIP),\n    });\n\n    this.setLogo(config.logo);\n\n    this._bindCallbacks();\n    this._bindEvents();\n  }\n\n  setLogo(url) {\n    if (url) {\n      this._$logo.classList.remove(this.styleNames.hidden);\n      this._$placeholder.classList.add(this.styleNames.hidden);\n      this._$logo.setAttribute('src', url);\n    } else {\n      this._$logo.classList.add(this.styleNames.hidden);\n      this._$placeholder.classList.remove(this.styleNames.hidden);\n      this._$logo.removeAttribute('src');\n    }\n  }\n\n  setDisplayAsLink(flag) {\n    if (flag) {\n      this._$node.classList.add(this.styleNames.link);\n      this._tooltipReference.enable();\n    } else {\n      this._$node.classList.remove(this.styleNames.link);\n      this._tooltipReference.disable();\n    }\n  }\n\n  _bindCallbacks() {\n    this._onNodeClick = this._onNodeClick.bind(this);\n  }\n\n  _bindEvents() {\n    this._$node.addEventListener('click', this._onNodeClick);\n  }\n\n  _unbindEvents() {\n    this._$node.removeEventListener('click', this._onNodeClick);\n  }\n\n  _onNodeClick() {\n    this._$node.focus();\n    this._callbacks.onLogoClick();\n  }\n\n  show() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide() {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  getNode() {\n    return this._$node;\n  }\n\n  destroy() {\n    this._unbindEvents();\n    this._tooltipReference.destroy();\n\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    delete this._$node;\n    delete this._$logo;\n    delete this._$placeholder;\n\n    delete this._tooltipReference;\n    delete this._textMap;\n  }\n}\n\nLogoView.extendStyleNames(styles);\n\nexport default LogoView;\n","import playerAPI from '../../../../utils/player-api-decorator';\n\nimport { ILogoViewConfig } from './types';\n\nimport KeyboardInterceptor, {\n  KEYCODES,\n} from '../../../../utils/keyboard-interceptor';\n\nimport { UI_EVENTS } from '../../../../constants/index';\nimport { ITooltipService } from '../../core/tooltip';\nimport View from './logo.view';\n\nexport interface ILogoConfig {\n  callback?: Function;\n  src?: string;\n  showAlways?: boolean;\n}\n\nexport default class Logo {\n  static moduleName = 'logo';\n  static View = View;\n  static dependencies = [\n    'engine',\n    'config',\n    'eventEmitter',\n    'textMap',\n    'tooltipService',\n  ];\n\n  private _eventEmitter;\n  private _engine;\n  private _textMap;\n  private _tooltipService: ITooltipService;\n\n  private _interceptor;\n  private _callback;\n\n  view: View;\n  isHidden: boolean;\n\n  constructor({ engine, eventEmitter, config, textMap, tooltipService }) {\n    this._eventEmitter = eventEmitter;\n    this._engine = engine;\n    this._textMap = textMap;\n    this._tooltipService = tooltipService;\n\n    this._bindCallbacks();\n\n    this._initUI();\n    this._initInterceptor();\n\n    const logoConfig = {\n      ...config.logo,\n    };\n\n    this.setLogo(logoConfig.src);\n    this.setLogoClickCallback(logoConfig.callback);\n  }\n\n  get node() {\n    return this.view.getNode();\n  }\n\n  _bindCallbacks() {\n    this._triggerCallback = this._triggerCallback.bind(this);\n  }\n\n  _initUI() {\n    const config: ILogoViewConfig = {\n      callbacks: {\n        onLogoClick: this._triggerCallback,\n      },\n      textMap: this._textMap,\n      tooltipService: this._tooltipService,\n    };\n\n    this.view = new Logo.View(config);\n  }\n\n  _initInterceptor() {\n    this._interceptor = new KeyboardInterceptor({\n      node: this.node,\n      callbacks: {\n        [KEYCODES.SPACE_BAR]: e => {\n          e.stopPropagation();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._triggerCallback();\n        },\n        [KEYCODES.ENTER]: e => {\n          e.stopPropagation();\n          this._eventEmitter.emit(UI_EVENTS.KEYBOARD_KEYDOWN_INTERCEPTED);\n          this._triggerCallback();\n        },\n      },\n    });\n  }\n\n  _destroyInterceptor() {\n    this._interceptor.destroy();\n  }\n\n  _triggerCallback() {\n    if (this._callback) {\n      this._callback();\n    }\n  }\n\n  /**\n   * Method for setting source of image, that would be used as logo\n   * @param src - Source of logo\n   * @example\n   * player.setLogo('https://example.com/logo.png');\n   *\n   */\n  @playerAPI()\n  setLogo(src: string) {\n    this.view.setLogo(src);\n  }\n\n  /**\n   * Method for attaching callback for click on logo\n   *\n   * @param callback - Your function\n   *\n   * @example\n   * const callback = () => {\n   *   console.log('Click on title);\n   * }\n   * player.setLogoClickCallback(callback);\n   *\n   */\n  @playerAPI()\n  setLogoClickCallback(callback?: Function) {\n    this._callback = callback;\n    this.view.setDisplayAsLink(Boolean(this._callback));\n  }\n\n  hide() {\n    this.isHidden = true;\n    this.view.hide();\n  }\n\n  show() {\n    this.isHidden = false;\n    this.view.show();\n  }\n\n  destroy() {\n    this._destroyInterceptor();\n    this.view.destroy();\n    delete this.view;\n\n    delete this._engine;\n    delete this._eventEmitter;\n    delete this._textMap;\n\n    delete this.isHidden;\n  }\n}\n","import View from '../core/view';\nimport { IView } from '../core/types';\n\nimport { subtitlesTemplate, singleSubtitleTemplate } from './templates';\nimport htmlToElement from '../core/htmlToElement';\nimport getElementByHook from '../core/getElementByHook';\n\nimport { ISubtitlesViewStyles } from './types';\n\nimport styles from './subtitles.scss';\n\nclass SubtitlesView extends View<ISubtitlesViewStyles>\n  implements IView<ISubtitlesViewStyles> {\n  private _$node: HTMLElement;\n  private _$subtitles: HTMLElement;\n\n  constructor() {\n    super();\n\n    this._initDOM();\n  }\n\n  private _initDOM(): void {\n    this._$node = htmlToElement(\n      subtitlesTemplate({\n        styles: this.styleNames,\n      }),\n    );\n\n    this._$subtitles = getElementByHook(this._$node, 'subtitles-container');\n  }\n\n  getNode(): HTMLElement {\n    return this._$node;\n  }\n\n  destroy(): void {\n    if (this._$node.parentNode) {\n      this._$node.parentNode.removeChild(this._$node);\n    }\n\n    this._$node = null;\n  }\n\n  moveSubtitlesUp(): void {\n    this._$subtitles.classList.add(this.styleNames.controlsShown);\n  }\n\n  moveSubtitlesDown(): void {\n    this._$subtitles.classList.remove(this.styleNames.controlsShown);\n  }\n\n  showSubtitles(subtitles: Array<string>): void {\n    this.clearSubtitles();\n    subtitles.forEach(subtitle => {\n      const subtitleNode = htmlToElement(\n        singleSubtitleTemplate({\n          styles: this.styleNames,\n        }),\n      );\n      subtitleNode.innerHTML = subtitle;\n      this._$subtitles.appendChild(subtitleNode);\n    });\n  }\n\n  show(): void {\n    this._$node.classList.remove(this.styleNames.hidden);\n  }\n\n  hide(): void {\n    this._$node.classList.add(this.styleNames.hidden);\n  }\n\n  clearSubtitles(): void {\n    this._$subtitles.innerHTML = '';\n  }\n}\n\nSubtitlesView.extendStyleNames(styles);\n\nexport default SubtitlesView;\n","import { UI_EVENTS } from '../../../constants/index';\nimport playerAPI from '../../../utils/player-api-decorator';\n\nimport { ISubtitleConfig } from './types';\nimport SubtitlesView from './subtitles.view';\n\nexport default class Subtitles {\n  static moduleName = 'subtitle';\n  static dependencies = ['rootContainer', 'engine', 'eventEmitter'];\n  static View = SubtitlesView;\n\n  isHidden: boolean;\n  view: SubtitlesView;\n\n  private _eventEmitter;\n  private _video: HTMLVideoElement;\n  private _activeSubtitleIndex: number | null = null;\n  private _trackList: Array<TextTrack> = [];\n\n  constructor({ rootContainer, engine, eventEmitter }) {\n    this._eventEmitter = eventEmitter;\n    this._video = engine.getNode();\n\n    this._initUI();\n    this._bindCallbacks();\n    this._bindEvents();\n\n    rootContainer.appendComponentNode(this.node);\n  }\n\n  @playerAPI()\n  setSubtitles(\n    subtitles: string | ISubtitleConfig | Array<ISubtitleConfig>,\n  ): void {\n    this._clearSubtitles();\n    if (typeof subtitles === 'string') {\n      this._addSubtitle(subtitles);\n    } else if (Array.isArray(subtitles)) {\n      subtitles.forEach(subtitle => this._addSubtitle(subtitle));\n    } else {\n      this._addSubtitle(subtitles);\n    }\n  }\n\n  @playerAPI()\n  setActiveSubtitle(index: number): void {\n    this._clearActiveSubtitle();\n    this._setActiveSubtitle(index);\n  }\n\n  @playerAPI()\n  showSubtitles(): void {\n    this.view.show();\n  }\n\n  @playerAPI()\n  hideSubtitles(): void {\n    this.view.hide();\n  }\n\n  private _addSubtitle(subtitle: string | ISubtitleConfig): void {\n    const track = document.createElement('track');\n\n    if (typeof subtitle === 'string') {\n      track.setAttribute('src', subtitle);\n    } else {\n      track.setAttribute('src', subtitle.src);\n      subtitle.lang && track.setAttribute('srclang', subtitle.lang);\n      subtitle.label && track.setAttribute('label', subtitle.label);\n    }\n\n    track.setAttribute('kind', 'subtitles');\n\n    this._video.appendChild(track);\n  }\n\n  private _clearSubtitles(): void {\n    this._clearActiveSubtitle();\n    const subtitleTracks = this._video.querySelectorAll(\n      'track[kind=\"subtitles\"]',\n    );\n\n    Array.from(subtitleTracks).forEach(trackNode =>\n      this._video.removeChild(trackNode),\n    );\n  }\n\n  private _addTrackToList(event: TrackEvent): void {\n    const track: TextTrack = event.track as TextTrack;\n    this._trackList.push(track);\n  }\n\n  private _removeTrackFromList(event: TrackEvent): void {\n    const track: TextTrack = event.track as TextTrack;\n    const index = this._trackList.indexOf(track);\n    if (index !== -1) {\n      this._trackList.splice(index, 1);\n    }\n  }\n\n  private _clearActiveSubtitle(): void {\n    if (this._activeSubtitleIndex) {\n      const textTrack: TextTrack = this._trackList[this._activeSubtitleIndex];\n\n      textTrack.removeEventListener('cuechange', this._showSubtitles);\n      textTrack.mode = 'disabled';\n\n      this._activeSubtitleIndex = null;\n    }\n\n    this.view.clearSubtitles();\n  }\n\n  private _setActiveSubtitle(index: number): void {\n    const textTrack: TextTrack = this._trackList[index];\n\n    if (textTrack) {\n      textTrack.mode = 'hidden';\n      textTrack.addEventListener('cuechange', this._showSubtitles);\n      textTrack.activeCues &&\n        this.view.showSubtitles(\n          Array.from(textTrack.activeCues).map(cue => cue.text),\n        );\n    }\n\n    this._activeSubtitleIndex = index;\n  }\n\n  get node(): HTMLElement {\n    return this.view.getNode();\n  }\n\n  private _initUI(): void {\n    this.view = new Subtitles.View();\n  }\n\n  private _bindCallbacks(): void {\n    this._showSubtitles = this._showSubtitles.bind(this);\n    this._addTrackToList = this._addTrackToList.bind(this);\n    this._removeTrackFromList = this._removeTrackFromList.bind(this);\n  }\n\n  private _bindEvents(): void {\n    this._eventEmitter.on(\n      UI_EVENTS.MAIN_BLOCK_SHOW_TRIGGERED,\n      this.view.moveSubtitlesUp,\n      this.view,\n    );\n    this._eventEmitter.on(\n      UI_EVENTS.MAIN_BLOCK_HIDE_TRIGGERED,\n      this.view.moveSubtitlesDown,\n      this.view,\n    );\n\n    const textTracks: any = this._video.textTracks;\n\n    if (textTracks) {\n      textTracks.onaddtrack = this._addTrackToList;\n      textTracks.onremovetrack = this._removeTrackFromList;\n    }\n  }\n\n  private _unbindEvents(): void {\n    this._eventEmitter.off(\n      UI_EVENTS.MAIN_BLOCK_SHOW_TRIGGERED,\n      this.view.moveSubtitlesUp,\n      this.view,\n    );\n    this._eventEmitter.off(\n      UI_EVENTS.MAIN_BLOCK_HIDE_TRIGGERED,\n      this.view.moveSubtitlesDown,\n      this.view,\n    );\n\n    const textTracks: any = this._video.textTracks;\n\n    if (textTracks) {\n      textTracks.onaddtrack = null;\n      textTracks.onremovetrack = null;\n    }\n  }\n\n  private _showSubtitles(event: TrackEvent): void {\n    const textTrack: TextTrack = event.target as TextTrack;\n    this.view.showSubtitles(\n      Array.from(textTrack.activeCues).map(cue => cue.text),\n    );\n  }\n\n  destroy(): void {\n    this._unbindEvents();\n\n    this._eventEmitter = null;\n    this._video = null;\n  }\n}\n","import DependencyContainer from '../core/dependency-container';\n\nimport RootContainer from './root-container/root-container';\nimport EventEmitter from './event-emitter/event-emitter';\nimport Engine from './playback-engine/playback-engine';\nimport ThemeService from './ui/core/theme';\nimport TextMap from './text-map/text-map';\n\nimport FullScreenManager from './full-screen-manager/full-screen-manager';\n\nimport LiveStateEngine from './playback-engine/live-state-engine';\nimport KeyboardInterceptor from './keyboard-control/keyboard-control';\nimport MouseInterceptor from './mouse-interceptor/mouse-interceptor';\nimport DebugPanel from './ui/debug-panel/debug-panel';\n\nimport Screen from './ui/screen/screen';\nimport InteractionIndicator from './ui/interaction-indicator/interaction-indicator';\n\nimport Overlay from './ui/overlay/overlay';\nimport Loader from './ui/loader/loader';\n\nimport MainUIBlock from './ui/main-ui-block/main-ui-block';\nimport TopBlock from './ui/top-block/top-block';\nimport Title from './ui/title/title';\nimport LiveIndicator from './ui/live-indicator/live-indicator';\n\nimport BottomBlock from './ui/bottom-block/bottom-block';\nimport ProgressControl from './ui/controls/progress/progress';\nimport PlayControl from './ui/controls/play/play';\nimport TimeControl from './ui/controls/time/time';\nimport VolumeControl from './ui/controls/volume/volume';\nimport FullScreenControl from './ui/controls/full-screen/full-screen';\nimport Logo from './ui/controls/logo/logo';\n\nimport Subtitles from './ui/subtitles/subtitles';\n\nimport { TooltipService } from './ui/core/tooltip';\n\nconst { asClass } = DependencyContainer;\n\nexport const modules = {\n  RootContainer,\n  EventEmitter,\n  Engine,\n  ThemeService,\n  TextMap,\n\n  FullScreenManager,\n\n  LiveStateEngine,\n  KeyboardInterceptor,\n  MouseInterceptor,\n  DebugPanel,\n\n  Screen,\n  InteractionIndicator,\n\n  Overlay,\n  Loader,\n\n  MainUIBlock,\n\n  TopBlock,\n  LiveIndicator,\n  Title,\n\n  BottomBlock,\n  ProgressControl,\n  PlayControl,\n  TimeControl,\n  VolumeControl,\n  FullScreenControl,\n  Logo,\n\n  TooltipService,\n  Subtitles,\n};\n\nconst DIModules = Object.keys(modules).reduce((DIModules, key) => {\n  const module = modules[key];\n  if (!module.moduleName) {\n    throw new Error(`No moduleName in module: ${key}`);\n  }\n\n  DIModules[module.moduleName] = asClass(module).scoped();\n  return DIModules;\n}, {});\n\nexport default DIModules;\n","/**\n * `true` if we are running inside a web browser, `false` otherwise (e.g. running inside Node.js).\n */\nexport const isBrowser = typeof window !== 'undefined';\n\n/**\n * This is a map which lists native support of formats and APIs.\n * It gets filled during runtime with the relevant values to the current environment.\n */\nexport const NativeEnvironmentSupport = {\n  MSE: false,\n  HLS: false,\n  DASH: false,\n  MP4: false,\n  WEBM: false,\n  OGG: false,\n};\n\n/* ignore coverage */\nfunction detectEnvironment() {\n  if (!isBrowser) {\n    return; // Not in a browser\n  }\n  NativeEnvironmentSupport.MSE =\n    'WebKitMediaSource' in window || 'MediaSource' in window;\n  const video = document.createElement('video');\n  if (typeof video.canPlayType !== 'function') {\n    return; // env doesn't support HTMLMediaElement (e.g PhantomJS)\n  }\n  if (\n    video.canPlayType('application/x-mpegURL') ||\n    video.canPlayType('application/vnd.apple.mpegURL')\n  ) {\n    NativeEnvironmentSupport.HLS = true;\n  }\n  if (video.canPlayType('application/dash+xml')) {\n    NativeEnvironmentSupport.DASH = true;\n  }\n  if (video.canPlayType('video/mp4')) {\n    NativeEnvironmentSupport.MP4 = true;\n  }\n  if (video.canPlayType('video/webm')) {\n    NativeEnvironmentSupport.WEBM = true;\n  }\n  if (video.canPlayType('video/ogg')) {\n    NativeEnvironmentSupport.OGG = true;\n  }\n}\n\ndetectEnvironment(); // Run once\n","import { VIDEO_EVENTS, ERRORS } from '../../../constants';\n\nimport {\n  geOverallBufferLength,\n  getNearestBufferSegmentInfo,\n} from '../../../utils/video-data';\nimport { NativeEnvironmentSupport } from '../../../utils/environment-detection';\nimport { IPlaybackAdapter } from './types';\n\nconst NATIVE_ERROR_CODES = {\n  ABORTED: 1,\n  NETWORK: 2,\n  DECODE: 3,\n  SRC_NOT_SUPPORTED: 4,\n};\n\nexport default function getNativeAdapterCreator(streamType, deliveryPriority) {\n  class NativeAdapter implements IPlaybackAdapter {\n    static isSupported() {\n      return NativeEnvironmentSupport[streamType];\n    }\n\n    private mediaStreams;\n    private eventEmitter;\n    private currentLevel;\n    private videoElement;\n\n    constructor(eventEmitter) {\n      this.mediaStreams = null;\n      this.eventEmitter = eventEmitter;\n      this.currentLevel = 0;\n\n      this._bindCallbacks();\n    }\n\n    get currentUrl() {\n      return this.mediaStreams[this.currentLevel].url;\n    }\n\n    get syncWithLiveTime() {\n      // TODO: implement syncWithLiveTime for `native`\n      return undefined;\n    }\n\n    get isDynamicContent() {\n      return !isFinite(this.videoElement.duration);\n    }\n\n    get isDynamicContentEnded() {\n      // TODO: implement isDynamicContentEnded\n      return false;\n    }\n\n    get isSyncWithLive() {\n      // TODO: implement isSyncWithLive for `native`\n      return false;\n    }\n\n    get isSeekAvailable() {\n      return true;\n      //Need to find better solution\n      /*\n      if (this.isDynamicContent) {\n        return false;\n      }\n\n      return Boolean(this.videoElement.seekable.length);\n      */\n    }\n\n    get mediaStreamDeliveryPriority() {\n      return deliveryPriority;\n    }\n\n    get mediaStreamType() {\n      return streamType;\n    }\n\n    get debugInfo() {\n      if (this.videoElement) {\n        const { buffered, currentTime } = this.videoElement;\n\n        const overallBufferLength = geOverallBufferLength(buffered);\n        const nearestBufferSegInfo = getNearestBufferSegmentInfo(\n          buffered,\n          currentTime,\n        );\n\n        return {\n          ...this.mediaStreams[0],\n          deliveryPriority: this.mediaStreamDeliveryPriority,\n          overallBufferLength,\n          nearestBufferSegInfo,\n        };\n      }\n\n      return {};\n    }\n\n    _bindCallbacks() {\n      this.broadcastError = this.broadcastError.bind(this);\n    }\n\n    canPlay(mediaType) {\n      return mediaType === streamType;\n    }\n\n    setMediaStreams(mediaStreams) {\n      this.mediaStreams = mediaStreams;\n    }\n\n    logError(error, errorEvent) {\n      this.eventEmitter.emit(VIDEO_EVENTS.ERROR, {\n        errorType: error,\n        streamType,\n        streamProvider: 'native',\n        errorInstance: errorEvent,\n      });\n    }\n\n    broadcastError() {\n      const error = this.videoElement.error;\n\n      switch (error.code) {\n        case NATIVE_ERROR_CODES.ABORTED:\n          //No need for broadcasting\n\n          break;\n        case NATIVE_ERROR_CODES.NETWORK:\n          this.logError(ERRORS.CONTENT_LOAD, error);\n          break;\n        case NATIVE_ERROR_CODES.DECODE:\n          this.logError(ERRORS.MEDIA, error);\n          break;\n        case NATIVE_ERROR_CODES.SRC_NOT_SUPPORTED:\n          /*\n            Our url checks would not allow not supported formats, so only case would be\n             when video tag couldn't retriev any info from endpoit\n          */\n\n          this.logError(ERRORS.CONTENT_LOAD, error);\n\n          break;\n        default:\n          this.logError(ERRORS.UNKNOWN, error);\n          break;\n      }\n    }\n\n    attach(videoElement) {\n      this.videoElement = videoElement;\n      this.videoElement.addEventListener('error', this.broadcastError);\n      this.videoElement.src = this.mediaStreams[this.currentLevel].url;\n    }\n\n    detach() {\n      this.videoElement.removeEventListener('error', this.broadcastError);\n      this.videoElement.removeAttribute('src');\n      this.videoElement = null;\n    }\n  }\n\n  return NativeAdapter;\n}\n","import getNativeAdapterCreator from './native';\n\nimport {\n  MediaStreamTypes,\n  MediaStreamDeliveryPriority,\n} from '../../../constants';\n\nconst defaultPlaybackAdapters = [\n  getNativeAdapterCreator(\n    MediaStreamTypes.DASH,\n    MediaStreamDeliveryPriority.NATIVE_ADAPTIVE,\n  ),\n  getNativeAdapterCreator(\n    MediaStreamTypes.HLS,\n    MediaStreamDeliveryPriority.NATIVE_ADAPTIVE,\n  ),\n  getNativeAdapterCreator(\n    MediaStreamTypes.MP4,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ),\n  getNativeAdapterCreator(\n    MediaStreamTypes.WEBM,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ), // Native WebM (Chrome, Firefox)\n  getNativeAdapterCreator(\n    MediaStreamTypes.OGG,\n    MediaStreamDeliveryPriority.NATIVE_PROGRESSIVE,\n  ), // Native WebM (Chrome, Firefox)\n];\n\nexport default defaultPlaybackAdapters;\n","import DependencyContainer from './dependency-container';\nimport PlayerFacade from './player-facade';\n\nimport defaultModules from '../default-modules';\nimport defaultPlaybackAdapters from '../default-modules/playback-engine/adapters/default-set';\nimport { IThemeConfig } from '../default-modules/ui/core/theme';\n\nimport { IPlayerConfig } from './config';\n\nlet additionalModules = {};\nlet playbackAdapters = [...defaultPlaybackAdapters];\n\nexport const container = DependencyContainer.createContainer();\ncontainer.register(defaultModules);\n\nexport function registerModule(id, config) {\n  additionalModules[id] = config;\n}\n\nexport function registerPlaybackAdapter(adapter) {\n  playbackAdapters.push(adapter);\n}\n\nexport function clearAdditionalModules() {\n  additionalModules = {};\n}\n\nexport function clearPlaybackAdapters() {\n  playbackAdapters = [...defaultPlaybackAdapters];\n}\n\nexport function create(params: IPlayerConfig = {}, themeConfig?: IThemeConfig) {\n  const scope = container.createScope();\n\n  const additionalModuleNames = Object.keys(additionalModules);\n\n  if (additionalModuleNames.length) {\n    additionalModuleNames.forEach(moduleName =>\n      scope.registerClass(moduleName, additionalModules[moduleName]),\n    );\n  }\n\n  scope.registerValue('availablePlaybackAdapters', playbackAdapters);\n\n  return new PlayerFacade(\n    params,\n    scope,\n    defaultModules,\n    additionalModules,\n    themeConfig,\n  );\n}\n","import * as playerFactoryMethods from './core/player-factory';\nexport * from './core/player-factory';\n\nimport {\n  UI_EVENTS,\n  VIDEO_EVENTS,\n  TEXT_LABELS,\n  MediaStreamTypes as MEDIA_STREAM_TYPES,\n  MediaStreamDeliveryPriority as MEDIA_STREAM_DELIVERY_PRIORITY,\n  STATES as ENGINE_STATES,\n  LiveState as LIVE_STATES,\n} from './constants';\n\nexport {\n  UI_EVENTS,\n  VIDEO_EVENTS,\n  TEXT_LABELS,\n  MEDIA_STREAM_TYPES,\n  MEDIA_STREAM_DELIVERY_PRIORITY,\n  ENGINE_STATES,\n  LIVE_STATES,\n};\n\nimport { modules as DefaultModules } from './default-modules';\n\nimport playerAPIDecorator from './utils/player-api-decorator';\nexport { playerAPIDecorator };\n\nexport { Tooltip } from './default-modules/ui/core/tooltip';\n\nexport { modules as DefaultModules } from './default-modules';\n\nconst defaultExport = {\n  ...playerFactoryMethods,\n  UI_EVENTS,\n  VIDEO_EVENTS,\n  TEXT_LABELS,\n  MEDIA_STREAM_TYPES,\n  MEDIA_STREAM_DELIVERY_PRIORITY,\n  ENGINE_STATES,\n  LIVE_STATES,\n  DefaultModules,\n};\n\nexport default defaultExport;\n"],"names":["extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","SINGLETON","TRANSIENT","SCOPED","message","_super","_this","enumerable","value","name","Error","captureStackTrace","tslib_1.__extends","functionName","expectedType","givenType","ExtendableError","PROPERTY_FOR_DEPENDENCIES","makeOptions","defaults","input","makeFluidInterface","obj","setLifetime","lifetime","transient","Lifetime","scoped","singleton","asValue","resolve","asFunction","fn","opts","NotAFunctionError","generateResolve","result","bind","asClass","Type","_i","args","dependencyParseTarget","dependencies","container","wrapper","reduce","createErrorMessage","resolutionStack","slice","push","resolutionPathString","join","msg","FAMILY_TREE","createContainer","options","__parentContainer","registrations","familyTree","concat","cache","createScope","register","registration","nameValueToObject","keys","forEach","makeRegister","verbatimValue","valueToRegister","isArray","registerFunction","registerClass","registerValue","root","indexOf","ResolutionError","cached","resolved","undefined","familyTree_1","pop","err","IPHONE_PATTERN","IPOD_PATTERN","IPAD_PATTERN","isIE","window","MSStream","getUserAgent","navigator","userAgent","isIPhone","test","isIPod","isIPad","isIOS","isAndroid","convertToDeviceRelatedConfig","params","showInteractionIndicator","screen","disableClickProcessing","nativeControls","title","loader","controls","convertUIConfigForIOS","convertUIConfigForAndroid","playerAPI","property","descriptor","desc1","desc2","methodName","get","set","scope","defaultModules","additionalModules","themeConfig","config","_config","_resolveDefaultModules","_resolveAdditionalModules","Player","modules","_defaultModules","moduleName","resolvedModule","_addPlayerAPIFromModule","_additionalModules","module","_moduleName","_destroyed","apply","playerMethodDescriptor","configurable","_getWrappedCallToModuleFunction","apiKey","_getPlayerAPIMethodDescriptor","_clearPlayerAPIForModule","destroy","_activePointers","_activeKeys","pointerStartEvents","pointerEndEvents","event","isPrimary","touches","setImmediate","setTimeout","Math","max","keyCode","which","pointer","Boolean","interactionTypeHandler","engage","addEventListener","handleWindowBlurEvent","document","documentElement","handleKeyStartEvent","handleKeyEndEvent","handlePointerStartEvent","handlePointerEndEvent","getInteractionType","disengage","removeEventListener","supportsFocusIn","focusEventName","blurEventName","current","lock","used","script","initial","source","type","interactionType","setAttribute","MediaStreamTypes","MediaStreamDeliveryPriority","handleFocusEvent","engageInteractionTypeObserver","getUsedFocusSource","getCurrentFocusSource","lockFocusSource","unlock","unlockFocusSource","removeAttribute","LiveState","UI_EVENTS","PLAY_TRIGGERED","PLAY_OVERLAY_TRIGGERED","PAUSE_TRIGGERED","PROGRESS_CHANGE_TRIGGERED","VOLUME_CHANGE_TRIGGERED","MUTE_STATUS_TRIGGERED","FULLSCREEN_STATUS_CHANGED","MOUSE_ENTER_ON_PLAYER_TRIGGERED","MOUSE_MOVE_ON_PLAYER_TRIGGERED","MOUSE_LEAVE_ON_PLAYER_TRIGGERED","CONTROL_BLOCK_HIDE_TRIGGERED","CONTROL_BLOCK_SHOW_TRIGGERED","PROGRESS_MANIPULATION_STARTED","PROGRESS_MANIPULATION_ENDED","KEYBOARD_KEYDOWN_INTERCEPTED","LOADER_SHOW_TRIGGERED","LOADER_HIDE_TRIGGERED","LOADING_COVER_SHOW_TRIGGERED","LOADING_COVER_HIDE_TRIGGERED","TOGGLE_PLAYBACK_WITH_KEYBOARD_TRIGGERED","GO_BACKWARD_WITH_KEYBOARD_TRIGGERED","GO_FORWARD_WITH_KEYBOARD_TRIGGERED","INCREASE_VOLUME_WITH_KEYBOARD_TRIGGERED","DECREASE_VOLUME_WITH_KEYBOARD_TRIGGERED","MUTE_SOUND_WITH_KEYBOARD_TRIGGERED","UNMUTE_SOUND_WITH_KEYBOARD_TRIGGERED","HIDE_INTERACTION_INDICATOR_TRIGGERED","PLAYER_WIDTH_CHANGE_TRIGGERED","PLAYER_HEIGHT_CHANGE_TRIGGERED","PLAY_WITH_SCREEN_CLICK_TRIGGERED","PAUSE_WITH_SCREEN_CLICK_TRIGGERED","CONTROL_DRAG_START","CONTROL_DRAG_END","MAIN_BLOCK_HIDE_TRIGGERED","MAIN_BLOCK_SHOW_TRIGGERED","VIDEO_EVENTS","ERROR","STATE_CHANGED","LIVE_STATE_CHANGED","DYNAMIC_CONTENT_ENDED","CHUNK_LOADED","CURRENT_TIME_UPDATED","DURATION_UPDATED","VOLUME_STATUS_CHANGED","VOLUME_CHANGED","MUTE_CHANGED","SEEK_IN_PROGRESS","UPLOAD_STALLED","UPLOAD_SUSPEND","PLAY_REQUEST_TRIGGERED","PLAY_ABORTED","UNKNOWN","Errors","SRC_PARSE","MANIFEST_LOAD","MANIFEST_PARSE","MANIFEST_INCOMPATIBLE","LEVEL_LOAD","CONTENT_LOAD","CONTENT_PARSE","MEDIA","LOGO_LABEL","LOGO_TOOLTIP","LIVE_INDICATOR_TEXT","LIVE_SYNC_LABEL","LIVE_SYNC_TOOLTIP","ENTER_FULL_SCREEN_LABEL","ENTER_FULL_SCREEN_TOOLTIP","EXIT_FULL_SCREEN_LABEL","EXIT_FULL_SCREEN_TOOLTIP","PLAY_CONTROL_LABEL","PAUSE_CONTROL_LABEL","PROGRESS_CONTROL_LABEL","PROGRESS_CONTROL_VALUE","UNMUTE_CONTROL_LABEL","UNMUTE_CONTROL_TOOLTIP","MUTE_CONTROL_LABEL","MUTE_CONTROL_TOOLTIP","VOLUME_CONTROL_LABEL","VOLUME_CONTROL_VALUE","STATES","SRC_SET","LOAD_STARTED","METADATA_LOADED","READY_TO_PLAY","PLAY_REQUESTED","WAITING","PLAYING","PAUSED","ENDED","html","div","createElement","innerHTML","trim","firstChild","classnames","commonjsHelpers.createCommonjsModule","hasOwn","classNames","classes","arg","argType","exports","theme","moduleTheme","_moduleTheme","registerModuleTheme","_themeStyles","Stylable","styles","_styles","sourceStyles","partialStyles","styleName","extendStyles","styleInject","css","ref","insertAt","head","getElementsByTagName","style","insertBefore","appendChild","styleSheet","cssText","createTextNode","width","height","fillAllSpace","_$node","htmlToElement","styleNames","setFillAllSpaceFlag","setWidth","setHeight","RootContainerView","_width","_height","classList","add","hidden","remove","node","isFullScreen","fullScreen","isFillAllSpace","parentNode","removeChild","View","extendStyleNames","MapShim","Map","getIndex","arr","some","entry","index","anonymous","__entries__","prototypeAccessors","size","delete","entries","splice","has","clear","callback","ctx","list","defineProperties","isBrowser","global$1","global","self","Function","requestAnimationFrame$1","requestAnimationFrame","Date","now","trailingTimeout","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","throttle","addObserver","observer","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","filter","gatherActive","hasActive","broadcastActive","observe","attributes","childList","characterData","subtree","disconnect","propertyName","getInstance","instance_","defineConfigurable","props","writable","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","positions","len","position","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","paddings","getPaddings","horizPad","left","right","vertPad","top","bottom","boxSizing","round","isDocumentElement","vertScrollbar","horizScrollbar","abs","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","getBBox","getContentRect","bbox","getSVGContentRect","x","y","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","rect","broadcastRect","ResizeObserverEntry","rectInit","Constr","contentRect","DOMRectReadOnly","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","this$1","observation","map","WeakMap","ResizeObserver","method","arrayLike","initialValue","string","pattern","match","exec","matchesSelectorFn","ALIASES","isElementMatchesSelector","element","selector","querySelectorAll","CSS_SELECTOR_PATTERN","QUERY_ATTR_PATTERN","cssSelector","results","forEachMatch","replace","_a","selectorPart1","attribute","_b","prefix","mode","parseInt","styleSheets","rules","cssRules","rule","selectorText","getQueriesFromCssSelector","getQueriesFromRules","e","DEFAULT_QUERY_PREFIX","_element","_queryPrefix","_queries","matchedSelectors","queries","getQueries","query","_query","sort","a","getQueriesForElement","_observer","_onResized","ElementQueries","elementWidth","attributeName","attributeValue","_getQueryAttributeValue","_setQueryAttribute","DEFAULT_CONFIG","eventEmitter","engine","_eventEmitter","_engine","isHidden","_initUI","_bindEvents","RootContainer","view","getNode","on","setFullScreenStatus","off","sizeConfig","appendComponentNode","running","last","action","removeClass","update","_disengageFocusWithin","elem","activeElement","getElementsByClassName","_disengageFocusSource","focusSource","_enableFocusInterceptors","_elementQueries","emit","getWidth","getHeight","flag","hide","show","_unbindEvents","_disableFocusInterceptors","tslib_1.__decorate","EventEmitterModule","context","once","eventNames","eventName","removeAllListeners","Events","addListener","emitter","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","events","names","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","a1","a2","a3","a4","a5","removeListener","j","prefixed","NATIVE_VIDEO_EVENTS_TO_STATE","video","_video","_currentState","_isMetadataLoaded","_statesTimestamps","_bindCallbacks","StateEngine","_processEventFromVideo","_initialTimeStamp","state","_setInitialTimeStamp","videoEl","setState","_setStateTimestamp","paused","played","prevState","nextState","NATIVE_VIDEO_TO_BROADCAST","_currentMute","muted","_currentVolume","volume","NativeEventsBroadcaster","currentTime","duration","mediaStreams","availableAdapters","playableAdapters","groupedStreams","typeMap","mediaStream","groupStreamsByMediaType","groupedStreamKeys","adapter","mediaType","mediaStreams_1","canPlay","setMediaStreams","firstAdapter","secondAdapter","mediaStreamDeliveryPriority","extensionsMap","mp4","MP4","webm","WEBM","m3u8","HLS","mpd","DASH","ogg","OGG","PreloadTypes","playbackAdapters","_playableAdapters","_availableAdapters","_attachedAdapter","isSupported","AdaptersStrategy","mediaSources","mediaSource","url","anchorElement","href","path","pathname","split","errorType","ERRORS","streamSrc","src","_autoDetectSourceTypes","resolveAdapters","attach","detach","_detachCurrentAdapter","_resolvePlayableAdapters","_connectAdapterToVideo","availablePlaybackAdapters","_currentSrc","_createVideoTag","videoElement","_stateEngine","_nativeEventsBroadcaster","_adapterStrategy","AdapterStrategy","_applyConfig","Engine","tagName","preload","autoPlay","loop","playInline","setPreload","setAutoPlay","setLoop","setMute","setVolume","setPlayInline","setSrc","offsetWidth","offsetHeight","attachedAdapter","isDynamicContent","isDynamicContentEnded","isSeekAvailable","isMetadataLoaded","getPreload","getAutoPlay","isSyncWithLive","clearTimestamps","connectAdapter","_pauseRequested","_playPromise","play","then","pause","catch","isVideoPaused","ended","setCurrentTime","syncWithLiveTime","sec","getDurationTime","getCurrentTime","min","parsedVolume","Number","isNaN","getVolume","isMuted","isAutoPlay","autoplay","isLoop","rate","playbackRate","time","videoWidth","videoHeight","buffered","isPlayInline","String","getAttribute","getState","data","debugInfo","viewDimensions","_getViewDimensions","loadingStateTimestamps","getStateTimestamps","SHORTHAND_HEX_COLOR_PATTERN","HEX_COLOR_PATTERN","color","alpha","_","g","toLowerCase","generatedIds","classImportName","kebabName","camelToKebab","className","newID","getUniquePostfix","acc","getUniqueId","getUniqueClassName","StyleSheet","_styleNode","discoveredStyles","_rulesByModule","_getModuleCSS","_data","_classNamesByModule","generateClassNames","moduleRules","moduleClassNames","_getRuleCSS","ruleClassName","complexRules","ruleName","_getRuleStyles","DEFAULT_THEME_CONFIG","liveColor","progressColor","_styleSheet","ThemeService","getModuleClassNames","TEXT_LABELS","_textMap","DEFAULT_TEXTS","texts","TextMap","id","text","fnMap","_elem","_callback","_fullscreenFn","ret","getFullScreenFn","DesktopFullScreen","fullscreenElement","isAPIExist","fullscreenEnabled","fullscreenchange","isEnabled","request","requestFullscreen","ALLOW_KEYBOARD_INPUT","exitFullscreen","isFullScreenRequested","_enterWhenHasMetaData","IOSFullScreen","webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","isInFullScreen","readyState","webkitExitFullscreen","exitFullScreenOnEnd","enterFullScreenOnPlay","exitFullScreenOnPause","pauseVideoOnFullScreenExit","rootContainer","_isEnabled","_exitFullScreenOnEnd","_enterFullScreenOnPlay","_exitFullScreenOnPause","_pauseVideoOnFullScreenExit","_onChange","_helper","FullScreenManager","_processNextStateFromEngine","_enterOnPlayRequested","exitFullScreen","enterFullScreen","_exitOnEnd","_exitOnPauseRequested","exit","SEEK_BY_UI_EVENTS","_state","NONE","_isSeekedByUIWhilePlaying","LiveStateEngine","_processStateChange","_processSeekByUI","_onDynamicContentEnded","_setState","INITIAL","syncWithLive","NOT_SYNC","SYNC","getCurrentState","KEYCODES","KeyboardInterceptorCore","_processKeyboardInput","callbacks","debugPanel","_debugPanel","_rootNode","disableControlWithKeyboard","initInterceptor","KeyboardControl","_keyboardInterceptor","KeyboardInterceptor","ctrlKey","shiftKey","preventDefault","togglePlayback","goBackward","goForward","increaseVolume","decreaseVolume","destroyInterceptor","MouseInterceptor","_broadcastMouseEnter","_broadcastMouseMove","_broadcastMouseLeave","hook","querySelector","shouldAdd","_callbacks","_initDOM","DebugPanelView","_$closeButton","getElementByHook","_$infoContainer","onCloseButtonClick","toggleNodeClass","info","json","JSON","stringify","cls","number","boolean","null","DebugPanel","updateInfo","deliveryPriority","currentBitrate","overallBufferLength","nearestBufferSegInfo","setInfo","getDebugInfo","clearUpdateInterval","_interval","setInterval","clearInterval","setUpdateInterval","playbackViewNode","_isNativeControls","ScreenView","_$topBackground","_$bottomBackground","onWrapperMouseClick","onWrapperMouseDblClick","focus","visible","hiddenCursor","fullScreenManager","interactionIndicator","_fullScreenManager","_interactionIndicator","_isInFullScreen","_delayedToggleVideoPlaybackTimeout","screenConfig","_isClickProcessingDisabled","Screen","_processNodeClick","_processNodeDblClick","_toggleVideoPlayback","isNativeControls","_setFullScreenStatus","focusOnNode","showCursor","hideCursor","showTopShadow","hideTopShadow","showBottomShadow","hideBottomShadow","_showPlaybackChangeIndicator","_setDelayedPlaybackToggle","_isDelayedPlaybackToggleExist","_clearDelayedPlaybackToggle","_hideDelayedPlaybackChangeIndicator","_toggleFullScreen","showPause","showPlay","hideIcons","clearTimeout","_exitFullScreen","_enterFullScreen","_playIcon","playIconTemplate","_pauseIcon","pauseIconTemplate","_forwardIcon","forwardIconTemplate","SECONDS_COUNT","_rewindIcon","rewindIconTemplate","_increaseVolumeIcon","increaseVolumeIconTemplate","_decreaseVolumeIcon","decreaseVolumeIconTemplate","_muteIcon","muteIconTemplate","InteractionIndicatorView","InteractionIndicator","showRewind","showForward","showIncreaseVolume","showDecreaseVolume","showMute","activatePauseIcon","activatePlayIcon","activateRewindIcon","activateForwardIcon","activateMuteVolumeIcon","activateIncreaseVolumeIcon","activateDecreaseVolumeIcon","deactivateIcon","setPoster","OverlayView","themeStyles","_$content","_$playButton","onPlayClick","active","backgroundImage","setTheme","overlayPlaySvgFill","fill","overlayPlaySvgStroke","stroke","_theme","overlay","poster","Overlay","_playVideo","_updatePlayingStatus","_hideContent","isPlaying","_showContent","hideContent","showContent","LoaderView","Loader","_checkForWaitingState","startDelayedShow","isPreloadAvailable","stopDelayedShow","isDelayedShowScheduled","_delayedShowTimeout","elements","MainUIBlockView","$node","$tooltipContainerWrapper","tooltipContainerWrapper","tooltipContainer","topBlock","bottomBlock","shouldAlwaysShow","tooltipService","_topBlock","_bottomBlock","_screen","mainBlockConfig","_shouldAlwaysShow","tooltipContainerNode","_bindViewCallbacks","MainUIBlock","_startHideBlockTimeout","_tryShowContent","_tryHideContent","_onControlDragStart","_onControlDragEnd","_shouldShowContent","isFocused","_stopHideBlockTimeout","_hideTimeout","_isContentShowingEnabled","_isDragging","_isContentShown","_isBlockFocused","TopBlockView","$titleContainer","$liveIndicatorContainer","liveIndicator","stopPropagation","_preventClickPropagation","activated","_getElementsNodes","TopBlock","elementNodes","TitleView","_$title","onClick","link","titleText","setTitleClickCallback","setTitle","TitleControl","_triggerCallback","setDisplayAsLink","textMap","_tooltipService","LiveIndicatorView","_$liveIndicatorText","_tooltipReference","createReference","toggle","toggleActive","toggleEnded","shouldActivate","isEnded","innerText","disable","enable","shouldShow","LiveIndicator","_isHidden","_isActive","_toggle","_syncWithLive","_toggleActive","_toggleEnded","_isEnded","BottomBlockView","$playContainer","$volumeContainer","$timeContainer","$fullScreenContainer","$logoContainer","$progressBarContainer","logo","progress","onBlockMouseMove","onBlockMouseOut","isShowAlways","showLogoAlways","showLogo","playControlHidden","timeControlHidden","volumeControlHidden","fullScreenControlHidden","logoHidden","progressControlHidden","_initLogo","BottomBlock","playControl","progressControl","timeControl","volumeControl","fullScreenControl","_setFocusState","_removeFocusState","logoConfig","setLogoAlwaysShowFlag","showAlways","hideLogo","setShouldLogoShowAlwaysFlag","showPlayControl","showVolumeControl","showTimeControl","showFullScreenControl","showProgressControl","hidePlayControl","hideVolumeControl","hideTimeControl","hideFullScreenControl","hideProgressControl","seconds","isValid","isFinite","isNegative","date","setSeconds","floor","toISOString","substr","ITooltipPositionPlacement","Tooltip","_$tooltipInner","tooltipVisible","styleKey","tooltipReferenceOffsetX","tooltipReferenceWidth","tooltipReferenceNode","tooltipCenterXfn","tooltipReferenceRect","getBoundingClientRect","tooltipContainerRect","placement","BOTTOM","TOP","SHOW_EVENTS","HIDE_EVENTS","reference","_$reference","_options","_eventListeners","TooltipReference","_isDisabled","getTooltipPositionByReferenceNode","setText","tooltip","_tooltip","TooltipContainer","_getTooltipLeftX","tooltipCenterX","tooltipRect","tooltipLeftX","_tooltipContainer","TooltipService","setStyle","getTooltipPositionStyles","progressPlayed","backgroundColor","&:after","progressSeekTo","transperentizeColor","progressBackground","progressSyncBtn","borderColor","getPercentBasedOnXPosition","boundingRect","positionX","clientX","_setPlayedDOMAttributes","_setBufferedDOMAttributes","setUsualMode","ProgressView","_$played","_$buffered","_$seekTo","_$timeIndicators","_$syncButton","_syncButtonTooltipReference","_$hitbox","_setPlayedByDrag","_startDragOnMouseDown","_stopDragOnMouseUp","_startSeekToByMouse","_stopSeekToByMouse","button","percent","onChangePlayedProgress","_startDrag","_stopDrag","_setSeekToDOMAttributes","onSeekToByMouseStart","onSeekToByMouseEnd","onDragStart","isDragging","onDragEnd","onSyncWithLiveClick","isSync","liveSync","formatTime","progressPercent","progressNode","progressNodeOffsetX","progressNodeWidth","calcProgressTimeTooltipCenterX","getProgressTimeTooltipPosition","inLive","showSyncWithLive","hideSyncWithLive","durationTime","toFixed","start","end","progressViewTheme","liveStateEngine","_liveStateEngine","_isUserInteracting","_currentProgress","_timeIndicatorsToAdd","setPlayed","setBuffered","_initInterceptor","ProgressControl","_processLiveStateChange","_updateBufferIndicator","_updateAllIndicators","_changePlayedProgress","_onSeekToByMouseStart","_onSeekToByMouseEnd","_onUserInteractionStarts","_onUserInteractionEnds","_interceptor","_updateControlOnInterval","_playVideoOnProgressManipulationEnd","_changeCurrentTimeOfVideo","_updateControlInterval","_stopIntervalUpdates","seekTime","showProgressTimeTooltip","hideProgressTimeTooltip","_pauseVideoOnProgressManipulationStart","_updatePlayedIndicator","reset","_initTimeIndicators","_startIntervalUpdates","setLiveSyncStatus","setLiveMode","currentState","_shouldPlayAfterManipulationEnd","getBuffered","updateBuffered","getTimePercent","getNearestBufferSegmentInfo","getOverallBufferedPercent","updatePlayed","getOverallPlayedPercent","_addTimeIndicator","addTimeIndicator","addTimeIndicators","times","clearTimeIndicators","_destroyInterceptor","label","_$playbackControl","PlayView","_onButtonClick","onButtonClick","playSvgFill","_isPlaying","setControlStatus","PlayControl","_togglePlayback","_pauseVideo","TimeView","_$currentTime","_$durationTime","_duration","_updateDurationTime","_current","_updateCurrentTime","_isBackward","timeText","setDurationTime","TimeControl","_toggleIntervalUpdates","showDuration","setCurrentTimeBackward","volumeSvgFill","volumeSvgStroke","volumeProgress","volumeProgressBackground","VolumeView","muteLabel","volumeLabel","_$muteButton","_$volumeNode","_$volume","_muteButtonTooltipReference","_setVolumeByWheel","_setVolumeByClick","_setVolumeByDrag","onVolumeLevelChangeFromInput","deltaX","deltaY","onVolumeLevelChangeFromWheel","iconTemplateProps","volume50IconTemplate","volume0IconTemplate","onToggleMuteClick","_setVolumeDOMAttributes","_setMuteDOMAttributes","volumeViewTheme","_isMuted","getMute","_volume","VolumeControl","_broadcastDragStart","_broadcastDragEnd","_getVolumeLevelFromInput","_getVolumeLevelFromWheel","_toggleMuteStatus","_buttonInterceptor","getButtonNode","_inputInterceptor","getInputNode","_updateVolumeStatus","level","delta","adjustedVolume","validatedVolume","_changeVolumeStatus","_changeVolumeLevel","setVolumeLevel","setMuteStatus","_$toggleFullScreenControl","FullScreenView","inFullScreen","enterFullScreenIconTemplate","fullScreenSvgFill","FullScreenControl","_$logo","_$placeholder","setLogo","LogoView","_onNodeClick","onLogoClick","setLogoClickCallback","Logo","SubtitlesView","_$subtitles","controlsShown","subtitles","clearSubtitles","subtitle","subtitleNode","Subtitles","_clearSubtitles","_addSubtitle","_clearActiveSubtitle","_setActiveSubtitle","track","lang","subtitleTracks","from","trackNode","_trackList","_activeSubtitleIndex","textTrack","_showSubtitles","activeCues","showSubtitles","cue","_addTrackToList","_removeTrackFromList","moveSubtitlesUp","moveSubtitlesDown","textTracks","onaddtrack","onremovetrack","Title","DIModules","NativeEnvironmentSupport","MSE","canPlayType","detectEnvironment","NATIVE_ERROR_CODES","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED","streamType","currentLevel","NativeAdapter","geOverallBufferLength","broadcastError","error","errorEvent","streamProvider","errorInstance","code","logError","defaultPlaybackAdapters","getNativeAdapterCreator","NATIVE_ADAPTIVE","NATIVE_PROGRESSIVE","DependencyContainer","additionalModuleNames","PlayerFacade","defaultExport","MEDIA_STREAM_TYPES","MEDIA_STREAM_DELIVERY_PRIORITY","ENGINE_STATES","LIVE_STATES","DefaultModules"],"mappings":"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"}